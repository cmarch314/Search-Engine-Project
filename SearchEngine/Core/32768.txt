{"text": "View Javadoc 1 2 Created on Sep 1 2 4 3 4 package swirl workspace rendezvous 5 6 import java awt Color 7 8 import org apache commons httpclient HttpURL 9 import org apache commons httpclient URIException 1 import org apache commons logging Log 11 import org apache commons logging LogFactory 12 13 import swirl workspace Peer 14 import swirl workspace PeerManager 15 16 17 DOCUMENT ME 18 19 author Ben 2 21 public class DNSSDPeer extends Peer 22 23 TODO 24 private static String nameOfLocalPort localPort 25 26 property name for ownPath in serviceInfo 27 private static String nameOfOwnPath ownPath 28 29 TODO 3 private Color color 31 32 TODO 33 private DNSSDPeerFinder dnssd 34 35 private TXTRecord txt 36 37 the logger for this class 38 private Log log LogFactory getLog this getClass 39 4 TODO 41 private String path 42 43 TODO 44 private String serviceName 45 46 TODO 47 private int port 48 49 5 Creates a new DNSSDPeer object 51 52 param finder TODO 53 param port TODO 54 param path TODO 55 56 public DNSSDPeer DNSSDPeerFinder finder final int port final String path 57 58 dnssd finder 59 initServiceName port path 6 61 txt new TXTRecord 62 txt set nameOfLocalPort port 63 txt set nameOfOwnPath path 64 txt set user name 65 System getProperty user name 66 txt set color x Integer toHexString hashCode 67 68 69 7 71 TODO 72 73 return TODO 74 75 public Color getColor 76 77 if log isDebugEnabled 78 79 log debug color color 8 81 82 if color null 83 84 color Color decode txt getValueAsString color 85 log debug setting color for getUserName 86 nprop txt getValueAsString color 87 ncolor color 88 89 9 91 return color 92 93 94 non Javadoc 95 see swirl workspace Peer getHttpURL 96 97 public HttpURL getHttpURL throws URIException 98 99 return null 1 1 1 1 2 non Javadoc 1 3 see swirl workspace Peer getSwirlURL 1 4 1 5 public HttpURL getSwirlURL throws URIException 1 6 1 7 return null 1 8 1 9 11 111 TODO 112 113 return TODO 114 115 public String getUserName 116 117 return txt getValueAsString user name 118 119 12 121 TODO 122 123 public void start 124 125 if log isDebugEnabled 126 127 log debug starting 128 129 13 if 131 try 132 133 DNSSD register DNSSD NO AUTO RENAME 134 serviceName webdav tcp null null port txt null 135 136 catch DNSSDException e 137 138 log error e e 139 14 141 log isDebugEnabled 142 143 try 144 145 DNSSD register DNSSD NO AUTO RENAME 146 serviceName webdav tcp null null port txt null 147 148 catch DNSSDException e 149 15 log error e e 151 152 153 log debug started 154 155 156 157 non Javadoc 158 see org picocontainer Startable stop 159 16 public void stop 161 162 163 Generates a unique serviceName for this peer 164 165 param port the port this peer listens on 166 param path the path of this peer s slide server 167 168 private void initServiceName final int port final String path 169 17 serviceName PeerManager getLocalAddress getHostAddress 171 serviceName port path PeerManager SWIRL TYPE 172 173 This page was automatically generated by Maven", "_id": "http://drzaius.ics.uci.edu/~swirl/impromptu-0.20/xref/swirl/workspace/rendezvous/DNSSDPeer.html", "title": "dnssdpeer xref", "html": "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\n<head>\n<meta http-equiv=\"content-type\" content=\"text/html; charset=ISO-8859-1\" /><title>DNSSDPeer xref</title>\n<link type=\"text/css\" rel=\"stylesheet\" href=\"../../../stylesheet.css\" />\n</head>\n<body>\n<div id=\"overview\"><a href=\"../../../../apidocs/swirl/workspace/rendezvous/DNSSDPeer.html\">View Javadoc</a></div><pre>\n\n<a name=\"1\" href=\"#1\">1</a>   <em class=\"comment\">/*</em>\n<a name=\"2\" href=\"#2\">2</a>   <em class=\"comment\"> * Created on Sep 1, 2004</em>\n<a name=\"3\" href=\"#3\">3</a>   <em class=\"comment\"> */</em>\n<a name=\"4\" href=\"#4\">4</a>   <strong>package</strong> <a href=\"../../../swirl/workspace/rendezvous/package-summary.html\">swirl.workspace.rendezvous</a>;\n<a name=\"5\" href=\"#5\">5</a>   \n<a name=\"6\" href=\"#6\">6</a>   <strong>import</strong> java.awt.Color;\n<a name=\"7\" href=\"#7\">7</a>   \n<a name=\"8\" href=\"#8\">8</a>   <strong>import</strong> org.apache.commons.httpclient.HttpURL;\n<a name=\"9\" href=\"#9\">9</a>   <strong>import</strong> org.apache.commons.httpclient.URIException;\n<a name=\"10\" href=\"#10\">10</a>  <strong>import</strong> org.apache.commons.logging.Log;\n<a name=\"11\" href=\"#11\">11</a>  <strong>import</strong> org.apache.commons.logging.LogFactory;\n<a name=\"12\" href=\"#12\">12</a>  \n<a name=\"13\" href=\"#13\">13</a>  <strong>import</strong> swirl.workspace.Peer;\n<a name=\"14\" href=\"#14\">14</a>  <strong>import</strong> swirl.workspace.PeerManager;\n<a name=\"15\" href=\"#15\">15</a>  \n<a name=\"16\" href=\"#16\">16</a>  <em>/**<em>*</em></em>\n<a name=\"17\" href=\"#17\">17</a>  <em> * DOCUMENT ME!</em>\n<a name=\"18\" href=\"#18\">18</a>  <em> *</em>\n<a name=\"19\" href=\"#19\">19</a>  <em> * @author Ben</em>\n<a name=\"20\" href=\"#20\">20</a>  <em> */</em>\n<a name=\"21\" href=\"#21\">21</a>  <strong>public</strong> <strong>class</strong> <a href=\"../../../swirl/workspace/rendezvous/DNSSDPeer.html\">DNSSDPeer</a> <strong>extends</strong> <a href=\"../../../swirl/workspace/Peer.html\">Peer</a>\n<a name=\"22\" href=\"#22\">22</a>  {\n<a name=\"23\" href=\"#23\">23</a>      <em>/**<em>* TODO */</em></em>\n<a name=\"24\" href=\"#24\">24</a>      <strong>private</strong> <strong>static</strong> String nameOfLocalPort = <span class=\"string\">\"localPort\"</span>;\n<a name=\"25\" href=\"#25\">25</a>  \n<a name=\"26\" href=\"#26\">26</a>      <em>/**<em>* property name for \"ownPath\" in serviceInfo */</em></em>\n<a name=\"27\" href=\"#27\">27</a>      <strong>private</strong> <strong>static</strong> String nameOfOwnPath = <span class=\"string\">\"ownPath\"</span>;\n<a name=\"28\" href=\"#28\">28</a>  \n<a name=\"29\" href=\"#29\">29</a>      <em>/**<em>* TODO */</em></em>\n<a name=\"30\" href=\"#30\">30</a>      <strong>private</strong> Color color;\n<a name=\"31\" href=\"#31\">31</a>  \n<a name=\"32\" href=\"#32\">32</a>      <em>/**<em>* TODO */</em></em>\n<a name=\"33\" href=\"#33\">33</a>      <strong>private</strong> <a href=\"../../../swirl/workspace/rendezvous/DNSSDPeerFinder.html\">DNSSDPeerFinder</a> dnssd;\n<a name=\"34\" href=\"#34\">34</a>  \n<a name=\"35\" href=\"#35\">35</a>      <em class=\"comment\">//private TXTRecord txt;</em>\n<a name=\"36\" href=\"#36\">36</a>  \n<a name=\"37\" href=\"#37\">37</a>      <em>/**<em>* the logger for this class */</em></em>\n<a name=\"38\" href=\"#38\">38</a>      <strong>private</strong> Log log = LogFactory.getLog(<strong>this</strong>.getClass());\n<a name=\"39\" href=\"#39\">39</a>  \n<a name=\"40\" href=\"#40\">40</a>      <em>/**<em>* TODO */</em></em>\n<a name=\"41\" href=\"#41\">41</a>      <strong>private</strong> String path;\n<a name=\"42\" href=\"#42\">42</a>  \n<a name=\"43\" href=\"#43\">43</a>      <em>/**<em>* TODO */</em></em>\n<a name=\"44\" href=\"#44\">44</a>      <strong>private</strong> String serviceName;\n<a name=\"45\" href=\"#45\">45</a>  \n<a name=\"46\" href=\"#46\">46</a>      <em>/**<em>* TODO */</em></em>\n<a name=\"47\" href=\"#47\">47</a>      <strong>private</strong> <strong>int</strong> port;\n<a name=\"48\" href=\"#48\">48</a>  \n<a name=\"49\" href=\"#49\">49</a>      <em>/**<em>*</em></em>\n<a name=\"50\" href=\"#50\">50</a>  <em>     * Creates a new DNSSDPeer object.</em>\n<a name=\"51\" href=\"#51\">51</a>  <em>     *</em>\n<a name=\"52\" href=\"#52\">52</a>  <em>     * @param finder TODO</em>\n<a name=\"53\" href=\"#53\">53</a>  <em>     * @param port TODO</em>\n<a name=\"54\" href=\"#54\">54</a>  <em>     * @param path TODO</em>\n<a name=\"55\" href=\"#55\">55</a>  <em>     */</em>\n<a name=\"56\" href=\"#56\">56</a>      <strong>public</strong> <a href=\"../../../swirl/workspace/rendezvous/DNSSDPeer.html\">DNSSDPeer</a>(<a href=\"../../../swirl/workspace/rendezvous/DNSSDPeerFinder.html\">DNSSDPeerFinder</a> finder, <strong>final</strong> <strong>int</strong> port, <strong>final</strong> String path)\n<a name=\"57\" href=\"#57\">57</a>      {\n<a name=\"58\" href=\"#58\">58</a>          dnssd = finder;\n<a name=\"59\" href=\"#59\">59</a>          initServiceName(port, path);\n<a name=\"60\" href=\"#60\">60</a>  \n<a name=\"61\" href=\"#61\">61</a>          <em class=\"comment\">/*<em class=\"comment\">        txt = new TXTRecord();</em></em>\n<a name=\"62\" href=\"#62\">62</a>  <em class=\"comment\">           txt.set(nameOfLocalPort, port + \"\");</em>\n<a name=\"63\" href=\"#63\">63</a>  <em class=\"comment\">           txt.set(nameOfOwnPath, path);</em>\n<a name=\"64\" href=\"#64\">64</a>  <em class=\"comment\">           txt.set(\"user.name\",</em>\n<a name=\"65\" href=\"#65\">65</a>  <em class=\"comment\">                   System.getProperty(\"user.name\"));</em>\n<a name=\"66\" href=\"#66\">66</a>  <em class=\"comment\">           txt.set(\"color\", \"0x\" + Integer.toHexString(hashCode()));</em>\n<a name=\"67\" href=\"#67\">67</a>  <em class=\"comment\">         */</em>\n<a name=\"68\" href=\"#68\">68</a>      }\n<a name=\"69\" href=\"#69\">69</a>  \n<a name=\"70\" href=\"#70\">70</a>      <em>/**<em>*</em></em>\n<a name=\"71\" href=\"#71\">71</a>  <em>     * TODO</em>\n<a name=\"72\" href=\"#72\">72</a>  <em>     *</em>\n<a name=\"73\" href=\"#73\">73</a>  <em>     * @return TODO</em>\n<a name=\"74\" href=\"#74\">74</a>  <em>     */</em>\n<a name=\"75\" href=\"#75\">75</a>      <strong>public</strong> Color getColor()\n<a name=\"76\" href=\"#76\">76</a>      {\n<a name=\"77\" href=\"#77\">77</a>          <strong>if</strong>(log.isDebugEnabled())\n<a name=\"78\" href=\"#78\">78</a>          {\n<a name=\"79\" href=\"#79\">79</a>              log.debug(<span class=\"string\">\"color: \"</span> + color);\n<a name=\"80\" href=\"#80\">80</a>          }\n<a name=\"81\" href=\"#81\">81</a>  \n<a name=\"82\" href=\"#82\">82</a>          <strong>if</strong>(color == <strong>null</strong>)\n<a name=\"83\" href=\"#83\">83</a>          {\n<a name=\"84\" href=\"#84\">84</a>              <em class=\"comment\">/*<em class=\"comment\">            color = Color.decode(txt.getValueAsString(\"color\"));</em></em>\n<a name=\"85\" href=\"#85\">85</a>  <em class=\"comment\">               log.debug(\"setting color for \" + getUserName()</em>\n<a name=\"86\" href=\"#86\">86</a>  <em class=\"comment\">                   + \"\\nprop: \" + txt.getValueAsString(\"color\")</em>\n<a name=\"87\" href=\"#87\">87</a>  <em class=\"comment\">                   + \"\\ncolor: \" + color);</em>\n<a name=\"88\" href=\"#88\">88</a>  <em class=\"comment\">             */</em>\n<a name=\"89\" href=\"#89\">89</a>          }\n<a name=\"90\" href=\"#90\">90</a>  \n<a name=\"91\" href=\"#91\">91</a>          <strong>return</strong> color;\n<a name=\"92\" href=\"#92\">92</a>      }\n<a name=\"93\" href=\"#93\">93</a>  \n<a name=\"94\" href=\"#94\">94</a>      <em class=\"comment\">/*<em class=\"comment\"> (non-Javadoc)</em></em>\n<a name=\"95\" href=\"#95\">95</a>  <em class=\"comment\">     * @see swirl.workspace.Peer#getHttpURL()</em>\n<a name=\"96\" href=\"#96\">96</a>  <em class=\"comment\">     */</em>\n<a name=\"97\" href=\"#97\">97</a>      <strong>public</strong> HttpURL getHttpURL() throws URIException\n<a name=\"98\" href=\"#98\">98</a>      {\n<a name=\"99\" href=\"#99\">99</a>          <strong>return</strong> <strong>null</strong>;\n<a name=\"100\" href=\"#100\">100</a>     }\n<a name=\"101\" href=\"#101\">101</a> \n<a name=\"102\" href=\"#102\">102</a>     <em class=\"comment\">/*<em class=\"comment\"> (non-Javadoc)</em></em>\n<a name=\"103\" href=\"#103\">103</a> <em class=\"comment\">     * @see swirl.workspace.Peer#getSwirlURL()</em>\n<a name=\"104\" href=\"#104\">104</a> <em class=\"comment\">     */</em>\n<a name=\"105\" href=\"#105\">105</a>     <strong>public</strong> HttpURL getSwirlURL() throws URIException\n<a name=\"106\" href=\"#106\">106</a>     {\n<a name=\"107\" href=\"#107\">107</a>         <strong>return</strong> <strong>null</strong>;\n<a name=\"108\" href=\"#108\">108</a>     }\n<a name=\"109\" href=\"#109\">109</a> \n<a name=\"110\" href=\"#110\">110</a>     <em>/**<em>*</em></em>\n<a name=\"111\" href=\"#111\">111</a> <em>     * TODO</em>\n<a name=\"112\" href=\"#112\">112</a> <em>     *</em>\n<a name=\"113\" href=\"#113\">113</a> <em>     * @return TODO</em>\n<a name=\"114\" href=\"#114\">114</a> <em>     */</em>\n<a name=\"115\" href=\"#115\">115</a>     <strong>public</strong> String getUserName()\n<a name=\"116\" href=\"#116\">116</a>     {\n<a name=\"117\" href=\"#117\">117</a>         <strong>return</strong> <span class=\"string\">\"\"</span>; <em class=\"comment\">//txt.getValueAsString(\"user.name\");</em>\n<a name=\"118\" href=\"#118\">118</a>     }\n<a name=\"119\" href=\"#119\">119</a> \n<a name=\"120\" href=\"#120\">120</a>     <em>/**<em>*</em></em>\n<a name=\"121\" href=\"#121\">121</a> <em>     * TODO</em>\n<a name=\"122\" href=\"#122\">122</a> <em>     */</em>\n<a name=\"123\" href=\"#123\">123</a>     <strong>public</strong> <strong>void</strong> start()\n<a name=\"124\" href=\"#124\">124</a>     {\n<a name=\"125\" href=\"#125\">125</a>         <strong>if</strong>(log.isDebugEnabled())\n<a name=\"126\" href=\"#126\">126</a>         {\n<a name=\"127\" href=\"#127\">127</a>             log.debug(<span class=\"string\">\"starting\"</span>);\n<a name=\"128\" href=\"#128\">128</a>         }\n<a name=\"129\" href=\"#129\">129</a> \n<a name=\"130\" href=\"#130\">130</a>         <strong>if</strong>(\n<a name=\"131\" href=\"#131\">131</a>         <em class=\"comment\">/*<em class=\"comment\">        try</em></em>\n<a name=\"132\" href=\"#132\">132</a> <em class=\"comment\">           {</em>\n<a name=\"133\" href=\"#133\">133</a> <em class=\"comment\">               DNSSD.register(DNSSD.NO_AUTO_RENAME,</em>\n<a name=\"134\" href=\"#134\">134</a> <em class=\"comment\">                   0, serviceName, \"_webdav._tcp\", null, null, port, txt, null);</em>\n<a name=\"135\" href=\"#135\">135</a> <em class=\"comment\">           }</em>\n<a name=\"136\" href=\"#136\">136</a> <em class=\"comment\">           catch (DNSSDException e)</em>\n<a name=\"137\" href=\"#137\">137</a> <em class=\"comment\">           {</em>\n<a name=\"138\" href=\"#138\">138</a> <em class=\"comment\">               log.error(e, e);</em>\n<a name=\"139\" href=\"#139\">139</a> <em class=\"comment\">           }</em>\n<a name=\"140\" href=\"#140\">140</a> <em class=\"comment\">         */</em>\n<a name=\"141\" href=\"#141\">141</a>         log.isDebugEnabled())\n<a name=\"142\" href=\"#142\">142</a>         {\n<a name=\"143\" href=\"#143\">143</a>             <em class=\"comment\">/*<em class=\"comment\">        try</em></em>\n<a name=\"144\" href=\"#144\">144</a> <em class=\"comment\">               {</em>\n<a name=\"145\" href=\"#145\">145</a> <em class=\"comment\">                   DNSSD.register(DNSSD.NO_AUTO_RENAME,</em>\n<a name=\"146\" href=\"#146\">146</a> <em class=\"comment\">                       0, serviceName, \"_webdav._tcp\", null, null, port, txt, null);</em>\n<a name=\"147\" href=\"#147\">147</a> <em class=\"comment\">               }</em>\n<a name=\"148\" href=\"#148\">148</a> <em class=\"comment\">               catch (DNSSDException e)</em>\n<a name=\"149\" href=\"#149\">149</a> <em class=\"comment\">               {</em>\n<a name=\"150\" href=\"#150\">150</a> <em class=\"comment\">                   log.error(e, e);</em>\n<a name=\"151\" href=\"#151\">151</a> <em class=\"comment\">               }</em>\n<a name=\"152\" href=\"#152\">152</a> <em class=\"comment\">             */</em>\n<a name=\"153\" href=\"#153\">153</a>             log.debug(<span class=\"string\">\"started\"</span>);\n<a name=\"154\" href=\"#154\">154</a>         }\n<a name=\"155\" href=\"#155\">155</a>     }\n<a name=\"156\" href=\"#156\">156</a> \n<a name=\"157\" href=\"#157\">157</a>     <em class=\"comment\">/*<em class=\"comment\"> (non-Javadoc)</em></em>\n<a name=\"158\" href=\"#158\">158</a> <em class=\"comment\">     * @see org.picocontainer.Startable#stop()</em>\n<a name=\"159\" href=\"#159\">159</a> <em class=\"comment\">     */</em>\n<a name=\"160\" href=\"#160\">160</a>     <strong>public</strong> <strong>void</strong> stop(){}\n<a name=\"161\" href=\"#161\">161</a> \n<a name=\"162\" href=\"#162\">162</a>     <em>/**<em>*</em></em>\n<a name=\"163\" href=\"#163\">163</a> <em>     * Generates a unique serviceName for this peer</em>\n<a name=\"164\" href=\"#164\">164</a> <em>     *</em>\n<a name=\"165\" href=\"#165\">165</a> <em>     * @param port the port this peer listens on</em>\n<a name=\"166\" href=\"#166\">166</a> <em>     * @param path the path of this peer's slide server</em>\n<a name=\"167\" href=\"#167\">167</a> <em>     */</em>\n<a name=\"168\" href=\"#168\">168</a>     <strong>private</strong> <strong>void</strong> initServiceName(<strong>final</strong> <strong>int</strong> port, <strong>final</strong> String path)\n<a name=\"169\" href=\"#169\">169</a>     {\n<a name=\"170\" href=\"#170\">170</a>         serviceName = PeerManager.getLocalAddress().getHostAddress();\n<a name=\"171\" href=\"#171\">171</a>         serviceName += (<span class=\"string\">\":\"</span> + port + path + <span class=\"string\">\".\"</span> + PeerManager.SWIRL_TYPE);\n<a name=\"172\" href=\"#172\">172</a>     }\n<a name=\"173\" href=\"#173\">173</a> }\n</pre>\n<hr/><div id=\"footer\">This page was automatically generated by <a href=\"http://maven.apache.org/\">Maven</a></div></body>\n</html>\n\n", "id": 32768.0}