{"text": "Occlusion Exercise One of the problems with the basic Maya Software Renderer is that it sometimes ignores the way that light behaves in the real world As such objects like the one below can tend to look flat and artificial One way to increase the realism of a shot is to add an occlusion pass What occlusion does is calculate the areas where it is unlikely that light would reach and makes them darker However the reason that Maya doesn t give you occlusion by default is that it is extremely expensive to calculate For a complex scene rendering can take up to 3 minutes per frame Setting up an occulsion pass is fairly simple Go to the Render Layer Editor Create a new render layer and name it something like occlusion pass then right click the layer and select Attributes Left click on the Presets button near the layer name and select Occlusion This should turn all geometry in this layer black Rendering on this layer will produce an occlusion pass using Mental Ray instead of a normal render By default the quality of the occlusion isn t great as seen by the image below on the left It looks grainy and spreads farther than it should You can edit the occlusion by accessing the shader that was created for the preset It can be found in the Hypershade or by selecting one of the objects in the occlusion layer and clicking the appropriate tab in the Attribute Editor The shader should called something like surfaceShader1 Follow the Out Color mapping of the Surface Shader This will bring you to the occlusion node The three attributes of interest are Samples Spread and Max Distance These values will determine the quality and speed of the occlusion Set Samples to 25 Spread to 5 and Max Distance to 3 If you re render you should see that the occlusion is much less grainy and is focused around the nooks and cranies of the geometry An occlusion pass isn t much good by itself Once you have rendered it out it must be composited with your regular render Typically this is done in After Effects with an entire series of frames but for brevity we will composite a single frame in Photoshop Place your color on one layer and the occlusion on a layer above it Set mode of the occlusion layer to Multiply Simple as that The difference is subtle but occlusion adds a lot of richness to a render The renders below show the difference between a normal render and a render with composited occlusion It would be nice to only incur the cost of occlusion once not for every frame Lucky for us Maya provides a process called baking that will allow us to generate an occlusion texture The first step is to lay out the UVs of your object We will use an Automatic Mapping for the sake of speed Go to Window Settings Preferences Plug in Manager Make sure that the RenderMan for Maya mll plug in is Loaded In the Polygons menu set go to Color Batch Bake mental ray Options Set Objects to bake to Selected Bake to Texture and check the Use bake set override box Change the Color mode to Occlusion and Occlusion rays 256 Verify that the File format is TIFF and the X and Y resolution match the dimensions of your color map Click Convert and Close to begin the process This will lock up Maya for a while but eventually it should finish A new occlusion texture should be applied to the object you selected The new texture should reside somewhere in your default project If you need help finding it follow the Incandescence mapping to the File node If you click View it should open fcheck from which you can save the texture somewhere reasonable All you need to do now is to multipy the occlusion texture on top of your color map One benefit of doing occlusion per frame is that it can account for the occlusion that appears when objects get near each other something static occlusion doesn t reflect Back to Exercises", "_id": "http://www.ics.uci.edu/~dramanan/teaching/ics162_fall12/exercises/occlusion_exercise.html", "title": "occlusion exercise", "html": "<html>\r\n<head>\r\n\t<title>Occlusion Exercise</title>\r\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"../style.css\" /></head>\r\n\r\n<body>\r\n<div class=\"bodyDiv\">\r\n\r\n<center><h1>Occlusion Exercise</h1></center>\r\n\r\n<p>\r\nOne of the problems with the basic Maya Software Renderer is that it sometimes ignores the way that light behaves in the real world. As such, objects like the one below can tend to look flat and artificial. One way to increase the realism of a shot is to add an occlusion pass. What occlusion does is calculate the areas where it is unlikely that light would reach and makes them darker. However, the reason that Maya doesn't give you occlusion by default is that it is extremely expensive to calculate. For a complex scene, rendering can take up to 30 minutes <strong>per frame</strong>.\r\n</p>\r\n\r\n<center>\r\n<img class=\"ex_small\" src=\"images/occlusion/shape.jpg\" />\r\n<img class=\"ex_small\" src=\"images/occlusion/render.jpg\" />\r\n</center>\r\n\r\n<p>\r\nSetting up an occulsion pass is fairly simple. Go to the Render Layer Editor. Create a new render layer and name it something like &quot;occlusion_pass&quot;, then right click the layer and select <strong>Attributes</strong>. Left click on the <strong>Presets </strong>button near the layer name and select<strong> Occlusion</strong>. This should turn all geometry in this layer black. Rendering on this layer will produce an occlusion pass using Mental Ray instead of a normal render.</p>\r\n\r\n<img class=\"thumb\" src=\"images/occlusion/occlusion_override.png\"/>\r\n\r\n<p>By default, the quality of the occlusion isn't great, as seen by the image below on the left. It looks grainy and spreads farther than it should.</p>\r\n<p>\r\nYou can edit the occlusion by accessing the shader that was created for the preset. It can be found in the Hypershade or by selecting one of the objects in the occlusion layer and clicking the appropriate tab in the Attribute Editor. The shader should called something like &quot;surfaceShader1&quot;. Follow the Out Color mapping of the Surface Shader. This will bring you to the occlusion node. The three attributes of interest are Samples, Spread, and Max Distance. These values will determine the quality and speed of the occlusion. Set Samples to <strong>250</strong>, Spread to <strong>0.5</strong>, and Max Distance to <strong>3</strong>. If you re-render, you should see that the occlusion is much less grainy and is focused around the nooks and cranies of the geometry.</p>\r\n\r\n<center>\r\n<img class=\"ex_small\" src=\"images/occlusion/occlusion1.jpg\" />\r\n<img class=\"ex_small\" src=\"images/occlusion/occlusion2.jpg\" />\r\n</center>\r\n\r\n<p>\r\nAn occlusion pass isn't much good by itself. Once you have rendered it out, it must be composited with your regular render. Typically this is done in After Effects with an entire series of frames, but for brevity, we will composite a single frame in Photoshop. Place your color on one layer and the occlusion on a layer above it. Set mode of the occlusion layer to Multiply. Simple as that. The difference is subtle, but occlusion adds a lot of richness to a render. The renders below show the difference between a normal render and a render with composited occlusion.\r\n</p>\r\n\r\n<center>\r\n<img class=\"ex_small\" src=\"images/occlusion/normal.jpg\" />\r\n<img class=\"ex_small\" src=\"images/occlusion/composite.jpg\" />\r\n</center>\r\n\r\n<p>\r\nIt would be nice to only incur the cost of occlusion once, not for every frame. Lucky for us, Maya provides a process called baking that will allow us to generate an occlusion texture. The first step is to lay out the UVs of your object. We will use an Automatic Mapping for the sake of speed. Go to <strong>Window &rarr; Settings/Preferences &rarr; Plug-in Manager</strong>. Make sure that the RenderMan_for_Maya.mll plug-in is Loaded.\r\n</p>\r\n\r\n<p>\r\nIn the Polygons menu set, go to <strong>Color &rarr; Batch Bake (mental ray) (Options)</strong>. Set Objects to bake to <strong>Selected</strong>, Bake to <strong>Texture</strong>, and check the <strong>Use bake set override</strong> box. Change the Color mode to <strong>Occlusion</strong> and Occlusion rays <strong>256</strong>. Verify that the File format is <strong>TIFF</strong> and the X and Y resolution match the dimensions of your color map. Click Convert and Close to begin the process. This will lock up Maya for a while, but eventually it should finish.\r\n</p>\r\n\r\n<p>\r\nA new occlusion texture should be applied to the object you selected. The new texture should reside somewhere in your default project. If you need help finding it, follow the Incandescence mapping to the File node. If you click View, it should open fcheck, from which you can save the texture somewhere reasonable. All you need to do now is to multipy the occlusion texture on top of your color map. One benefit of doing occlusion per frame is that it can account for the occlusion that appears when objects get near each other, something static occlusion doesn't reflect.\r\n</p>\r\n\r\n<p/>\r\n\r\n<center>\r\n<img class=\"small\" src=\"images/occlusion/occlusion_map.jpg\" />\r\n<img class=\"small\" src=\"images/occlusion/baked.jpg\" />\r\n</center>\r\n\r\n<center><a class=\"large\" href=\"exercises.html\">Back to Exercises</a></center>\r\n\r\n<br/>\r\n<br/>\r\n<br/>\r\n<br/>\r\n<br/>\r\n<br/>\r\n<br/>\r\n\r\n</div>\r\n</body>\r\n</html>", "id": 26403.0}