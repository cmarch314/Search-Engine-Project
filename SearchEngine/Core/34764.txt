{"text": "Search LoginPreferencesHelp GuideAbout Trac WikiTimelineRoadmapBrowse SourceView TicketsSearch wiki TracInterfaceCustomization Context Navigation Start PageIndexHistory Customizing the Trac Interface Table of ContentsIndexInstallationCustomizationPluginsUpgradingConfigurationAdministrationBackupLoggingPermissionsThe WikiWiki FormattingTimelineRepository BrowserRevision LogChangesetsTicketsWorkflowRoadmapTicket QueriesBatch ModifyReportsRSS SupportNotification Introduction This page is meant to give users suggestions on how they can customize the look of Trac Topics on this page cover editing the HTML templates and CSS files but not the program code itself The topics are intended to show users how they can modify the look of Trac to meet their specific needs Suggestions for changes to Trac s interface applicable to all users should be filed as tickets not listed on this page Project Logo and Icon The easiest parts of the Trac interface to customize are the logo and the site icon Both of these can be configured with settings in trac ini The logo or icon image should be put in a folder named htdocs in your project s environment folder Note in projects created with a Trac version prior to 9 you will need to create this folder Note you can actually put the logo and icon anywhere on your server as long as it s accessible through the web server and use their absolute or server relative URLs in the configuration Now configure the appropriate section of your trac ini Logo Change the src setting to site followed by the name of your image file The width and height settings should be modified to match your image s dimensions the Trac chrome handler uses site for files within the project directory htdocs and common for the common ones Note that site is not a placeholder for your project name it is the actual prefix that should be used literally For example if your project is named sandbox and the image file is red logo gif then the src setting would be site red logo gif not sandbox red logo gif header logo src site my logo gif alt My Project width 3 height 1 Icon Icons should be a 16x16 image in gif or ico format Change the icon setting to site followed by the name of your icon file Icons will typically be displayed by your web browser next to the site s URL and in the Bookmarks menu project icon site my icon ico Note though that this icon is ignored by Internet Explorer which only accepts a file named favicon ico at the root of the host To make the project icon work in both IE and other browsers you can store the icon in the document root of the host and reference it from trac ini as follows project icon favicon ico Should your browser have issues with your favicon showing up in the address bar you may put a less the quotation marks after your favicon file extension project icon favicon ico Custom Navigation Entries The new mainnav and metanav can now be used to customize the text and link used for the navigation items or even to disable them but not for adding new ones In the following example we rename the link to the Wiki start Home and hide the Help Guide We also make the View Tickets entry link to a specific report mainnav wiki label Home tickets href report 24 metanav help disabled See also TracNavigation for a more detailed explanation of the mainnav and metanav terms Site Appearance Trac is using Genshi as the templating engine Documentation is yet to be written in the meantime the following tip should work Say you want to add a link to a custom stylesheet and then your own header and footer Save the following content as site html inside your projects templates directory each Trac project can have their own site html e g path to env templates site html html xmlns http www w3 org 1999 xhtml xmlns py http genshi edgewall org py strip Add site specific style sheet head py match head py attrs select select comment text link rel stylesheet type text css href href chrome site style css head body py match body py attrs select Add site specific header div id siteheader Place your header content here div select text Add site specific footer div id sitefooter Place your footer content here div body html Those who are familiar with XSLT may notice that Genshi templates bear some similarities However there are some Trac specific features for example href chrome site style css attribute references template placed into environment s htdocs In a similar fashion chrome htdocs location is used to specify common htdocs directory from Trac installation site html is one file to contain all your modifications It usually works by the py match element or attribute and it allows you to modify the page as it renders the matches hook onto specific sections depending on what it tries to find and modify them See this thread for a detailed explanation of the above example site html A site html can contain any number of such py match sections for whatever you need to modify This is all Genshi so the docs on the exact syntax can be found there Example snippet of adding introduction text to the new ticket form hide when preview form py match div id content and class ticket form py attrs select py if test req environ PATH INFO newticket and not preview in req args p Please make sure to search for existing tickets before reporting a new one p py if select form This example illustrates a technique of using req environ PATH INFO to limit scope of changes to one view only For instance to make changes in site html only for timeline and avoid modifying other sections use req environ PATH INFO timeline condition in py if test More examples snippets for site html can be found at CookBook SiteHtml Example snippets for style css can be found at CookBook SiteStyleCss If the environment is upgraded from 1 and a site newticket cs file already exists it can actually be loaded by using a workaround providing it contains no ClearSilver processing In addition as only one element can be imported the content needs some sort of wrapper such as a div block or other similar parent container The XInclude namespace must be specified to allow includes but that can be moved to document root along with the others form py match div id content and class ticket form py attrs select xmlns xi http www w3 org 2 1 XInclude py if test req environ PATH INFO newticket and not preview in req args xi include href site newticket cs xi fallback xi include py if select form Also note that the site html despite its name can be put in a common templates directory see the inherit templates dir option This could provide easier maintainence and a migration path from 1 for larger installations as one new global site html file can be made to include any existing header footer and newticket snippets Project List You can use a custom Genshi template to display the list of projects if you are using Trac with multiple projects The following is the basic template used by Trac to display a list of links to the projects For projects that could not be loaded it displays an error message You can use this as a starting point for your own index template DOCTYPE html PUBLIC W3C DTD XHTML 1 Strict EN http www w3 org TR xhtml1 DTD xhtml1 strict dtd html xmlns http www w3 org 1999 xhtml xmlns py http genshi edgewall org xmlns xi http www w3 org 2 1 XInclude head title Available Projects title head body h1 Available Projects h1 ul li py for project in projects py choose a py when project href href project href title project description project name a py otherwise small project name em Error em br project description small py otherwise li ul body html Once you ve created your custom template you will need to configure the webserver to tell Trac where the template is located pls verify not yet changed to 11 For mod wsgi os environ TRAC ENV INDEX TEMPLATE path to template For FastCGI FastCgiConfig initial env TRAC ENV PARENT DIR parent dir of projects initial env TRAC ENV INDEX TEMPLATE path to template For mod python PythonOption TracEnvParentDir parent dir of projects PythonOption TracEnvIndexTemplate path to template For CGI SetEnv TRAC ENV INDEX TEMPLATE path to template For TracStandalone you ll need to set up the TRAC ENV INDEX TEMPLATE environment variable in the shell used to launch tracd Unix export TRAC ENV INDEX TEMPLATE path to template Windows set TRAC ENV INDEX TEMPLATE path to template Project Templates The appearance of each individual Trac environment that is instance of a project can be customized independently of other projects even those hosted by the same server The recommended way is to use a site html template see SiteAppearance whenever possible Using site html means changes are made to the original templates as they are rendered and you should not normally need to redo modifications whenever Trac is upgraded If you do make a copy of theme html or any other Trac template you need to migrate your modifiations to the newer version if not new Trac features or bug fixes may not work as expected With that word of caution any Trac template may be copied and customized The default Trac templates are located inside the installed Trac egg usr lib pythonVERSION site packages Trac VERSION egg trac templates trac ticket templates trac wiki templates The ProjectList template file is called index html while the template responsible for main layout is called theme html Page assets such as images and CSS style sheets are located in the egg s trac htdocs directory However do not edit templates or site resources inside the Trac egg installing Trac again can completely delete your modifications Instead use one of two alternatives For a modification to one project only copy the template to project templates directory For a modification shared by several projects copy the template to a shared location and have each project point to this location using the inherit templates dir trac ini option Trac resolves requests for a template by first looking inside the project then in any inherited templates location and finally inside the Trac egg Trac caches templates in memory by default to improve performance To apply a template you need to restart the server See also TracGuide TracIni Last modified 3 years ago Last modified on Jan 3 2 12 12 53 28 PM Download in other formats Plain Text Powered by Trac 1 1 By Edgewall Software All content copyright 2 7 2 8 by LUCI http luci ics uci edu ", "_id": "http://djp3-pc2.ics.uci.edu/LUCICodeRepository/nomaticIM/wiki/TracInterfaceCustomization", "title": "\n      tracinterfacecustomization \u2013 nomatic*im\n    ", "html": "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n  \n  \n\n  \n\n\n  <head>\n\t\t<title>\n      TracInterfaceCustomization \u2013 Nomatic*IM\n    </title><meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" /><meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" /><link rel=\"search\" href=\"/LUCICodeRepository/nomaticIM/search\" /><link rel=\"help\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracGuide\" /><link rel=\"alternate\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracInterfaceCustomization?format=txt\" type=\"text/x-trac-wiki\" title=\"Plain Text\" /><link rel=\"start\" href=\"/LUCICodeRepository/nomaticIM/wiki\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/chrome/common/css/trac.css\" type=\"text/css\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/chrome/common/css/wiki.css\" type=\"text/css\" /><link rel=\"shortcut icon\" href=\"http://luci.ics.uci.edu/logo32by32.gif\" type=\"image/gif\" /><link rel=\"icon\" href=\"http://luci.ics.uci.edu/logo32by32.gif\" type=\"image/gif\" /><link type=\"application/opensearchdescription+xml\" rel=\"search\" href=\"/LUCICodeRepository/nomaticIM/search/opensearch\" title=\"Search Nomatic*IM\" /><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/jquery.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/babel.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/messages/en_US.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/trac.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/search.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/folding.js\"></script><meta name=\"ROBOTS\" content=\"NOINDEX, NOFOLLOW\" /><link rel=\"alternate\" type=\"application/x-wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracInterfaceCustomization?action=edit\" title=\"Edit this page\" /><script type=\"text/javascript\">\n      jQuery(document).ready(function($) {\n        $(\"#content\").find(\"h1,h2,h3,h4,h5,h6\").addAnchor(_(\"Link to this section\"));\n        $(\"#content\").find(\".wikianchor\").each(function() {\n          $(this).addAnchor(babel.format(_(\"Link to #%(id)s\"), {id: $(this).attr('id')}));\n        });\n        $(\".foldable\").enableFolding(true, true);\n      });\n    </script>\n\t</head>\n  <body>\n    <div id=\"banner\">\n      <div id=\"header\">\n        <a id=\"logo\" href=\"http://luci.ics.uci.edu/#code\"><img src=\"http://luci.ics.uci.edu/blog/archives/LUCIhorzTight.jpg\" alt=\"LUCI Code Repository\" /></a>\n      </div>\n      <form id=\"search\" action=\"/LUCICodeRepository/nomaticIM/search\" method=\"get\">\n        <div>\n          <label for=\"proj-search\">Search:</label>\n          <input type=\"text\" id=\"proj-search\" name=\"q\" size=\"18\" value=\"\" />\n          <input type=\"submit\" value=\"Search\" />\n        </div>\n      </form>\n      <div id=\"metanav\" class=\"nav\">\n    <ul>\n      <li class=\"first\"><a href=\"/LUCICodeRepository/nomaticIM/login\">Login</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/prefs\">Preferences</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/wiki/TracGuide\">Help/Guide</a></li><li class=\"last\"><a href=\"/LUCICodeRepository/nomaticIM/about\">About Trac</a></li>\n    </ul>\n  </div>\n    </div>\n    <div id=\"mainnav\" class=\"nav\">\n    <ul>\n      <li class=\"first active\"><a href=\"/LUCICodeRepository/nomaticIM/wiki\">Wiki</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/timeline\">Timeline</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/roadmap\">Roadmap</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/browser\">Browse Source</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/report\">View Tickets</a></li><li class=\"last\"><a href=\"/LUCICodeRepository/nomaticIM/search\">Search</a></li>\n    </ul>\n  </div>\n    <div id=\"main\">\n      <div id=\"pagepath\" class=\"noprint\">\n  <a class=\"pathentry first\" title=\"View WikiStart\" href=\"/LUCICodeRepository/nomaticIM/wiki\">wiki:</a><a class=\"pathentry\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracInterfaceCustomization\" title=\"View TracInterfaceCustomization\">TracInterfaceCustomization</a>\n</div>\n      <div id=\"ctxtnav\" class=\"nav\">\n        <h2>Context Navigation</h2>\n        <ul>\n          <li class=\"first\"><a href=\"/LUCICodeRepository/nomaticIM/wiki/WikiStart\">Start Page</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/wiki/TitleIndex\">Index</a></li><li class=\"last\"><a href=\"/LUCICodeRepository/nomaticIM/wiki/TracInterfaceCustomization?action=history\">History</a></li>\n        </ul>\n        <hr />\n      </div>\n    <div id=\"content\" class=\"wiki\">\n      <div class=\"wikipage searchable\">\n        \n          <div id=\"wikipage\" class=\"trac-content\"><h1 id=\"CustomizingtheTracInterface\">Customizing the Trac Interface</h1>\n<p>\n</p><div class=\"wiki-toc\"><h4>Table of Contents</h4><ul><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracGuide\">Index</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracInstall\">Installation</a></li><li class=\"active\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracInterfaceCustomization\">Customization</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracPlugins\">Plugins</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracUpgrade\">Upgrading</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracIni\">Configuration</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracAdmin\">Administration</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracBackup\">Backup</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracLogging\">Logging</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracPermissions\">Permissions</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracWiki\">The Wiki</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/WikiFormatting\">Wiki Formatting</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracTimeline\">Timeline</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracBrowser\">Repository Browser</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracRevisionLog\">Revision Log</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracChangeset\">Changesets</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracTickets\">Tickets</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracWorkflow\">Workflow</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracRoadmap\">Roadmap</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracQuery\">Ticket Queries</a></li><li class=\"False\"><a class=\"missing\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracBatchModify\">Batch Modify</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracReports\">Reports</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracRss\">RSS Support</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracNotification\">Notification</a></li></ul></div><p>\n</p>\n<h2 id=\"Introduction\">Introduction</h2>\n<p>\nThis page is meant to give users suggestions on how they can customize the look of Trac.  Topics on this page cover editing the HTML templates and CSS files, but not the program code itself.  The topics are intended to show users how they can modify the look of Trac to meet their specific needs.  Suggestions for changes to Trac's interface applicable to all users should be filed as tickets, not listed on this page.\n</p>\n<h2 id=\"ProjectLogoandIcon\">Project Logo and Icon</h2>\n<p>\nThe easiest parts of the Trac interface to customize are the logo and the site icon.  Both of these can be configured with settings in <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracIni\">trac.ini</a>.\n</p>\n<p>\nThe logo or icon image should be put in a folder named \"htdocs\" in your project's environment folder.  (<em>Note: in projects created with a Trac version prior to 0.9 you will need to create this folder</em>)\n</p>\n<blockquote>\n<p>\n<em>Note: you can actually put the logo and icon anywhere on your server (as long as it's accessible through the web server), and use their absolute or server-relative URLs in the configuration.</em>\n</p>\n</blockquote>\n<p>\nNow configure the appropriate section of your <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracIni\">trac.ini</a>:\n</p>\n<h3 id=\"Logo\">Logo</h3>\n<p>\nChange the <tt>src</tt> setting to <tt>site/</tt> followed by the name of your image file.  The <tt>width</tt> and <tt>height</tt> settings should be modified to match your image's dimensions (the Trac chrome handler uses \"<tt>site/</tt>\" for files within the project directory <tt>htdocs</tt> and \"<tt>common/</tt>\" for the common ones). Note that 'site/' is not a placeholder for your project name, it is the actual prefix that should be used (literally). For example, if your project is named 'sandbox', and the image file is 'red_logo.gif' then the 'src' setting would be 'site/red_logo.gif', not 'sandbox/red_logo.gif'.\n</p>\n<pre class=\"wiki\">[header_logo]\nsrc = site/my_logo.gif\nalt = My Project\nwidth = 300\nheight = 100\n</pre><h3 id=\"Icon\">Icon</h3>\n<p>\nIcons should be a 16x16 image in <tt>.gif</tt> or <tt>.ico</tt> format.  Change the <tt>icon</tt> setting to <tt>site/</tt> followed by the name of your icon file.  Icons will typically be displayed by your web browser next to the site's URL and in the <tt>Bookmarks</tt> menu.\n</p>\n<pre class=\"wiki\">[project]\nicon = site/my_icon.ico\n</pre><p>\nNote though that this icon is ignored by Internet Explorer, which only accepts a file named <tt></tt>favicon.ico<tt></tt> at the root of the host. To make the project icon work in both IE and other browsers, you can store the icon in the document root of the host, and reference it from <tt></tt>trac.ini<tt></tt> as follows:\n</p>\n<pre class=\"wiki\">[project]\nicon = /favicon.ico\n</pre><p>\nShould your browser have issues with your favicon showing up in the address bar, you may put a \"?\" (less the quotation marks) after your favicon file extension. \n</p>\n<pre class=\"wiki\">[project]\nicon = /favicon.ico?\n</pre><h2 id=\"CustomNavigationEntries\">Custom Navigation Entries</h2>\n<p>\nThe new [mainnav] and [metanav] can now be used to customize the text and link used for the navigation items, or even to disable them (but not for adding new ones).\n</p>\n<p>\nIn the following example, we rename the link to the Wiki start \"Home\", and hide the \"<a class=\"missing wiki\">Help/Guide?</a>\". We also make the \"View Tickets\" entry link to a specific report .\n</p>\n<pre class=\"wiki\">[mainnav]\nwiki.label = Home\ntickets.href = /report/24\n\n[metanav]\nhelp = disabled\n</pre><p>\nSee also <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracNavigation\">TracNavigation</a> for a more detailed explanation of the mainnav and metanav terms.\n</p>\n<h2 id=\"SiteAppearance\">Site Appearance</h2>\n<p>\nTrac is using <a class=\"ext-link\" href=\"http://genshi.edgewall.org\"><span class=\"icon\">\u200b</span>Genshi</a> as the templating engine. Documentation is yet to be written, in the meantime the following tip should work.\n</p>\n<p>\nSay you want to add a link to a custom stylesheet, and then your own\nheader and footer. Save the following content as 'site.html' inside your projects templates directory (each Trac project can have their own site.html), e.g. <tt>/path/to/env/templates/site.html</tt>:\n</p>\n<div class=\"code\"><pre><span class=\"nt\">&lt;html</span> <span class=\"na\">xmlns=</span><span class=\"s\">\"http://www.w3.org/1999/xhtml\"</span>\n      <span class=\"na\">xmlns:py=</span><span class=\"s\">\"http://genshi.edgewall.org/\"</span>\n      <span class=\"na\">py:strip=</span><span class=\"s\">\"\"</span><span class=\"nt\">&gt;</span>\n\n  <span class=\"c\">&lt;!--! Add site-specific style sheet --&gt;</span>\n  <span class=\"nt\">&lt;head</span> <span class=\"na\">py:match=</span><span class=\"s\">\"head\"</span> <span class=\"na\">py:attrs=</span><span class=\"s\">\"select('@*')\"</span><span class=\"nt\">&gt;</span>\n    ${select('*|comment()|text()')}\n    <span class=\"nt\">&lt;link</span> <span class=\"na\">rel=</span><span class=\"s\">\"stylesheet\"</span> <span class=\"na\">type=</span><span class=\"s\">\"text/css\"</span>\n          <span class=\"na\">href=</span><span class=\"s\">\"${href.chrome('site/style.css')}\"</span> <span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;/head&gt;</span>\n\n  <span class=\"nt\">&lt;body</span> <span class=\"na\">py:match=</span><span class=\"s\">\"body\"</span> <span class=\"na\">py:attrs=</span><span class=\"s\">\"select('@*')\"</span><span class=\"nt\">&gt;</span>\n    <span class=\"c\">&lt;!--! Add site-specific header --&gt;</span>\n    <span class=\"nt\">&lt;div</span> <span class=\"na\">id=</span><span class=\"s\">\"siteheader\"</span><span class=\"nt\">&gt;</span>\n      <span class=\"c\">&lt;!--! Place your header content here... --&gt;</span>\n    <span class=\"nt\">&lt;/div&gt;</span>\n\n    ${select('*|text()')}\n\n    <span class=\"c\">&lt;!--! Add site-specific footer --&gt;</span>\n    <span class=\"nt\">&lt;div</span> <span class=\"na\">id=</span><span class=\"s\">\"sitefooter\"</span><span class=\"nt\">&gt;</span>\n      <span class=\"c\">&lt;!--! Place your footer content here... --&gt;</span>\n    <span class=\"nt\">&lt;/div&gt;</span>\n  <span class=\"nt\">&lt;/body&gt;</span>\n<span class=\"nt\">&lt;/html&gt;</span>\n</pre></div><p>\nThose who are familiar with XSLT may notice that Genshi templates bear some similarities. However, there are some Trac specific features - for example <strong>${href.chrome('site/style.css')}</strong> attribute references template placed into environment's <em>htdocs/</em>  In a similar fashion <strong>${chrome.htdocs_location}</strong> is used to specify common <em>htdocs/</em> directory from Trac installation.\n</p>\n<p>\n<tt>site.html</tt> is one file to contain all your modifications. It usually works by the py:match (element or attribute), and it allows you to modify the page as it renders - the matches hook onto specific sections depending on what it tries to find\nand modify them.\nSee <a class=\"ext-link\" href=\"http://groups.google.com/group/trac-users/browse_thread/thread/70487fb2c406c937/\"><span class=\"icon\">\u200b</span>this thread</a> for a detailed explanation of the above example <tt>site.html</tt>.\nA site.html can contain any number of such py:match sections for whatever you need to modify. This is all <a class=\"ext-link\" href=\"http://genshi.edgewall.org/\"><span class=\"icon\">\u200b</span>Genshi</a>, so the docs on the exact syntax can be found there.\n</p>\n<p>\nExample snippet of adding introduction text to the new ticket form (hide when preview):\n</p>\n<div class=\"code\"><pre><span class=\"nt\">&lt;form</span> <span class=\"na\">py:match=</span><span class=\"s\">\"div[@id='content' and @class='ticket']/form\"</span> <span class=\"na\">py:attrs=</span><span class=\"s\">\"select('@*')\"</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;py:if</span> <span class=\"na\">test=</span><span class=\"s\">\"req.environ['PATH_INFO'] == '/newticket' and (not 'preview' in req.args)\"</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;p&gt;</span>Please make sure to search for existing tickets before reporting a new one!<span class=\"nt\">&lt;/p&gt;</span>\n  <span class=\"nt\">&lt;/py:if&gt;</span>\n  ${select('*')} \n<span class=\"nt\">&lt;/form&gt;</span>\n</pre></div><p>\nThis example illustrates a technique of using <strong><tt>req.environ['PATH_INFO']</tt></strong> to limit scope of changes to one view only. For instance, to make changes in site.html only for timeline and avoid modifying other sections - use  <em><tt>req.environ['PATH_INFO'] == '/timeline'</tt></em> condition in &lt;py:if&gt; test.\n</p>\n<p>\nMore examples snippets for <tt>site.html</tt> can be found at <a class=\"ext-link\" href=\"http://trac.edgewall.org/intertrac/wiki%3ACookBook/SiteHtml\" title=\"wiki:CookBook/SiteHtml in Trac project trac\"><span class=\"icon\">\u200b</span>CookBook/SiteHtml</a>.\n</p>\n<p>\nExample snippets for <tt>style.css</tt> can be found at <a class=\"ext-link\" href=\"http://trac.edgewall.org/intertrac/wiki%3ACookBook/SiteStyleCss\" title=\"wiki:CookBook/SiteStyleCss in Trac project trac\"><span class=\"icon\">\u200b</span>CookBook/SiteStyleCss</a>.\n</p>\n<p>\nIf the environment is upgraded from 0.10 and a <tt>site_newticket.cs</tt> file already exists, it can actually be loaded by using a workaround - providing it contains no <a class=\"missing wiki\">ClearSilver?</a> processing. In addition, as only one element can be imported, the content needs some sort of wrapper such as a <tt>&lt;div&gt;</tt> block or other similar parent container. The XInclude namespace must be specified to allow includes, but that can be moved to document root along with the others:\n</p>\n<div class=\"code\"><pre><span class=\"nt\">&lt;form</span> <span class=\"na\">py:match=</span><span class=\"s\">\"div[@id='content' and @class='ticket']/form\"</span> <span class=\"na\">py:attrs=</span><span class=\"s\">\"select('@*')\"</span>\n        <span class=\"na\">xmlns:xi=</span><span class=\"s\">\"http://www.w3.org/2001/XInclude\"</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;py:if</span> <span class=\"na\">test=</span><span class=\"s\">\"req.environ['PATH_INFO'] == '/newticket' and (not 'preview' in req.args)\"</span><span class=\"nt\">&gt;</span> \n    <span class=\"nt\">&lt;xi:include</span> <span class=\"na\">href=</span><span class=\"s\">\"site_newticket.cs\"</span><span class=\"nt\">&gt;&lt;xi:fallback</span> <span class=\"nt\">/&gt;&lt;/xi:include&gt;</span>\n  <span class=\"nt\">&lt;/py:if&gt;</span>\n  ${select('*')} \n<span class=\"nt\">&lt;/form&gt;</span>\n</pre></div><p>\nAlso note that the <tt>site.html</tt> (despite its name) can be put in a common templates directory - see the <tt>[inherit] templates_dir</tt> option. This could provide easier maintainence (and a migration path from 0.10 for larger installations) as one new global <tt>site.html</tt> file can be made to include any existing header, footer and newticket snippets.\n</p>\n<h2 id=\"ProjectList\">Project List</h2>\n<p>\nYou can use a custom Genshi template to display the list of projects if you are using Trac with multiple projects.  \n</p>\n<p>\nThe following is the basic template used by Trac to display a list of links to the projects.  For projects that could not be loaded it displays an error message. You can use this as a starting point for your own index template.\n</p>\n<div class=\"code\"><pre><span class=\"cp\">&lt;!DOCTYPE html\n    PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\"\n    \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\"&gt;</span>\n<span class=\"nt\">&lt;html</span> <span class=\"na\">xmlns=</span><span class=\"s\">\"http://www.w3.org/1999/xhtml\"</span>\n      <span class=\"na\">xmlns:py=</span><span class=\"s\">\"http://genshi.edgewall.org/\"</span>\n      <span class=\"na\">xmlns:xi=</span><span class=\"s\">\"http://www.w3.org/2001/XInclude\"</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;head&gt;</span>\n    <span class=\"nt\">&lt;title&gt;</span>Available Projects<span class=\"nt\">&lt;/title&gt;</span>\n  <span class=\"nt\">&lt;/head&gt;</span>\n  <span class=\"nt\">&lt;body&gt;</span>\n    <span class=\"nt\">&lt;h1&gt;</span>Available Projects<span class=\"nt\">&lt;/h1&gt;</span>\n    <span class=\"nt\">&lt;ul&gt;</span>\n      <span class=\"nt\">&lt;li</span> <span class=\"na\">py:for=</span><span class=\"s\">\"project in projects\"</span> <span class=\"na\">py:choose=</span><span class=\"s\">\"\"</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;a</span> <span class=\"na\">py:when=</span><span class=\"s\">\"project.href\"</span> <span class=\"na\">href=</span><span class=\"s\">\"$project.href\"</span>\n           <span class=\"na\">title=</span><span class=\"s\">\"$project.description\"</span><span class=\"nt\">&gt;</span>$project.name<span class=\"nt\">&lt;/a&gt;</span>\n        <span class=\"nt\">&lt;py:otherwise&gt;</span>\n          <span class=\"nt\">&lt;small&gt;</span>$project.name: <span class=\"nt\">&lt;em&gt;</span>Error<span class=\"nt\">&lt;/em&gt;</span> <span class=\"nt\">&lt;br</span> <span class=\"nt\">/&gt;</span> ($project.description)<span class=\"nt\">&lt;/small&gt;</span>\n        <span class=\"nt\">&lt;/py:otherwise&gt;</span>\n      <span class=\"nt\">&lt;/li&gt;</span>\n    <span class=\"nt\">&lt;/ul&gt;</span>\n  <span class=\"nt\">&lt;/body&gt;</span>\n<span class=\"nt\">&lt;/html&gt;</span>\n</pre></div><p>\nOnce you've created your custom template you will need to configure the webserver to tell Trac where the template is located (pls verify ... not yet changed to 0.11):\n</p>\n<p>\nFor <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracModWSGI\">mod_wsgi</a>:\n</p>\n<pre class=\"wiki\">os.environ['TRAC_ENV_INDEX_TEMPLATE'] = '/path/to/template'\n</pre><p>\nFor <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracFastCgi\">FastCGI</a>:\n</p>\n<pre class=\"wiki\">FastCgiConfig -initial-env TRAC_ENV_PARENT_DIR=/parent/dir/of/projects \\\n              -initial-env TRAC_ENV_INDEX_TEMPLATE=/path/to/template\n</pre><p>\nFor <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracModPython\">mod_python</a>:\n</p>\n<pre class=\"wiki\">PythonOption TracEnvParentDir /parent/dir/of/projects\nPythonOption TracEnvIndexTemplate /path/to/template\n</pre><p>\nFor <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracCgi\">CGI</a>:\n</p>\n<pre class=\"wiki\">SetEnv TRAC_ENV_INDEX_TEMPLATE /path/to/template\n</pre><p>\nFor <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracStandalone\">TracStandalone</a>, you'll need to set up the <tt>TRAC_ENV_INDEX_TEMPLATE</tt> environment variable in the shell used to launch tracd:\n</p>\n<ul><li>Unix\n<div class=\"code\"><pre><span class=\"nv\">$ </span><span class=\"nb\">export </span><span class=\"nv\">TRAC_ENV_INDEX_TEMPLATE</span><span class=\"o\">=</span>/path/to/template\n</pre></div></li><li>Windows\n<div class=\"code\"><pre><span class=\"nv\">$ </span><span class=\"nb\">set </span><span class=\"nv\">TRAC_ENV_INDEX_TEMPLATE</span><span class=\"o\">=</span>/path/to/template\n</pre></div></li></ul><h2 id=\"ProjectTemplates\">Project Templates</h2>\n<p>\nThe appearance of each individual Trac environment (that is, instance of a project) can be customized independently of other projects, even those hosted by the same server. The recommended way is to use a <tt>site.html</tt> template (see <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracInterfaceCustomization#SiteAppearance\">#SiteAppearance</a>) whenever possible. Using <tt>site.html</tt> means changes are made to the original templates as they are rendered, and you should not normally need to redo modifications whenever Trac is upgraded. If you do make a copy of <tt>theme.html</tt> or any other Trac template, you need to migrate your modifiations to the newer version - if not, new Trac features or bug fixes may not work as expected.\n</p>\n<p>\nWith that word of caution, any Trac template may be copied and customized. The default Trac templates are located inside the installed Trac egg (<tt>/usr/lib/pythonVERSION/site-packages/Trac-VERSION.egg/trac/templates, .../trac/ticket/templates, .../trac/wiki/templates, ++</tt>). The <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracInterfaceCustomization#ProjectList\">#ProjectList</a> template file is called <tt>index.html</tt>, while the template responsible for main layout is called <tt>theme.html</tt>. Page assets such as images and CSS style sheets are located in the egg's <tt>trac/htdocs</tt> directory.\n</p>\n<p>\nHowever, do not edit templates or site resources inside the Trac egg - installing Trac again can completely delete your modifications. Instead use one of two alternatives:\n</p>\n<ul><li>For a modification to one project only, copy the template to project <tt>templates</tt> directory.\n</li><li>For a modification shared by several projects, copy the template to a shared location and have each project point to this location using the <tt>[inherit] templates_dir =</tt> trac.ini option.\n</li></ul><p>\nTrac resolves requests for a template by first looking inside the project, then in any inherited templates location, and finally inside the Trac egg.\n</p>\n<p>\nTrac caches templates in memory by default to improve performance. To apply a template you need to restart the server.\n</p>\n<hr />\n<p>\nSee also <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracGuide\">TracGuide</a>, <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracIni\">TracIni</a>\n</p>\n</div>\n          \n          <div class=\"trac-modifiedby\">\n            <span><a href=\"/LUCICodeRepository/nomaticIM/wiki/TracInterfaceCustomization?action=diff&amp;version=3\" title=\"Version 3 by trac\">Last modified</a> <a class=\"timeline\" href=\"/LUCICodeRepository/nomaticIM/timeline?from=2012-01-03T12%3A53%3A28-08%3A00&amp;precision=second\" title=\"See timeline at Jan 3, 2012, 12:53:28 PM\">3 years ago</a></span>\n            <span class=\"trac-print\">Last modified on Jan 3, 2012, 12:53:28 PM</span>\n          </div>\n        \n        \n      </div>\n      \n    <div id=\"attachments\">\n    </div>\n\n          <div class=\"buttons\">\n              <form method=\"get\" action=\"/LUCICodeRepository/nomaticIM/wiki/TracInterfaceCustomization\" id=\"modifypage\">\n                <div>\n                  <input type=\"hidden\" name=\"action\" value=\"edit\" />\n                      <input type=\"submit\" value=\"Edit this page\" />\n                </div>\n              </form>\n                <form method=\"get\" action=\"/LUCICodeRepository/nomaticIM/attachment/wiki/TracInterfaceCustomization/\" id=\"attachfile\">\n  <div>\n    <input type=\"hidden\" name=\"action\" value=\"new\" />\n    <input type=\"submit\" name=\"attachfilebutton\" value=\"Attach file\" />\n  </div>\n</form>\n          </div>\n    </div>\n    <script type=\"text/javascript\">\n        jQuery.loadStyleSheet(\"/LUCICodeRepository/nomaticIM/pygments/trac.css\", \"text/css\");\n    </script>\n    <div id=\"altlinks\">\n      <h3>Download in other formats:</h3>\n      <ul>\n        <li class=\"last first\">\n          <a rel=\"nofollow\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracInterfaceCustomization?format=txt\">Plain Text</a>\n        </li>\n      </ul>\n    </div>\n    </div>\n    <div id=\"footer\" lang=\"en\" xml:lang=\"en\"><hr />\n      <a id=\"tracpowered\" href=\"http://trac.edgewall.org/\"><img src=\"/LUCICodeRepository/nomaticIM/chrome/common/trac_logo_mini.png\" height=\"30\" width=\"107\" alt=\"Trac Powered\" /></a>\n      <p class=\"left\">Powered by <a href=\"/LUCICodeRepository/nomaticIM/about\"><strong>Trac 1.0.1</strong></a><br />\n        By <a href=\"http://www.edgewall.org/\">Edgewall Software</a>.</p>\n      <p class=\"right\">All content copyright 2007-2008 by LUCI <br /><a href=\"http://luci.ics.uci.edu/\">http://luci.ics.uci.edu/</a></p>\n    </div>\n\t\t<div id=\"sitefooter\">\n\t\t\t<script src=\"http://www.google-analytics.com/urchin.js\" type=\"text/javascript\">\n\t\t\t</script>\n\t\t\t<script type=\"text/javascript\">\n\t\t\t\t_uacct = \"UA-338915-2\";\n\t\t\t\turchinTracker();\n\t\t\t</script>\n\t\t</div>\n\t</body>\n</html>", "id": 34764.0}