{"text": "Troubleshooting in R Much of our time in R is spent troubleshooting figuring out why our code isn t working Troubleshooting can be particularly difficult if you are trying to write a for loop or a function The key is to try to break down your code into individual steps For example consider the following code v NULLfor i in 1 5 goo sample 1 2 1 replace TRUE foo sample 1 2 1 replace TRUE if goo foo v i sum goo foo else print I win We first see that we missed a parenthesis which happens a lot since R gives an error of Error unexpected else in v i sum goo foo else Let s fix that v NULLfor i in 1 5 goo sample 1 2 1 replace TRUE foo sample 1 2 1 replace TRUE if goo foo v i sum goo foo else print I win Running the code above gives us some warnings in R You can see these warnings by typing warnings So let s see what went wrong Run through the commands in the first iteration of the loop line by line checking what each object looks like throughout i 1goo sample 1 2 1 replace TRUE goofoo sample 1 2 1 replace TRUE fooif goo foo goo foo Now we see the problem an if statement needs either a TRUE or FALSE given to it but we gave it 1 TRUE FALSE statements We actually wanted to have the if statement check if there were at least one match between goo and foo sum goo foo sum goo foo 1 Now we can fix our loop v NULLfor i in 1 5 goo sample 1 2 1 replace TRUE foo sample 1 2 1 replace TRUE if sum goo foo 1 v i sum goo foo else print I win v Note that an NA in R means a missing value For those iterations of the loop where it printed I win it didn t assign anything to the vector v To see what the loop does step by step we can manually loop it v NULLi 1goo sample 1 2 1 replace TRUE foo sample 1 2 1 replace TRUE if sum goo foo 1 v i sum goo foo else print I win i 2goo sample 1 2 1 replace TRUE foo sample 1 2 1 replace TRUE if sum goo foo 1 v i sum goo foo else print I win i 3goo sample 1 2 1 replace TRUE foo sample 1 2 1 replace TRUE if sum goo foo 1 v i sum goo foo else print I win v Stats 12 A Index", "_id": "http://www.ics.uci.edu/~staceyah/120A/Troubleshooting.html", "title": "troubleshooting in r", "html": "<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\">\n<html>\n  <head>\n    <meta content=\"text/html; charset=windows-1252\"\n      http-equiv=\"Content-Type\">\n    <title>Troubleshooting in R</title>\n    <meta content=\"Stacey Hancock\" name=\"author\">\n  </head>\n  <body>\n    <table style=\"width: 100%; background-color: rgb(102, 204, 204);\n      margin-left: auto; margin-right: auto; height: 58px; text-align:\n      left;\" border=\"1\" cellpadding=\"2\" cellspacing=\"2\">\n      <tbody>\n        <tr>\n          <td>\n            <div style=\"text-align: center;\"> </div>\n            <h1 style=\" text-align: center;\">Troubleshooting in R<br>\n            </h1>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n    <span style=\"color: rgb(51, 153, 153);\"><br>\n      <font color=\"#000000\">Much of our time in R is spent\n        troubleshooting - figuring out why our code isn't working.\n        Troubleshooting can be particularly difficult if you are trying\n        to write a for loop or a function.<br>\n        <br>\n        The key is to try to break down your code into individual steps.\n        For example, consider the following code:<br>\n      </font></span>\n    <pre>v = NULL<br>for(i in 1:50){<br>  goo = sample(1:20,10,replace=TRUE)<br>  foo = sample(1:20,10,replace=TRUE)<br>  if(goo == foo){<br>      v[i] = sum(goo==foo)<br>  else{<br>      print(\"I win!\")<br>  }<br>}<br></pre>\n    <p>We first see that we missed a parenthesis (which happens a lot!),\n      since R gives an error of<br>\n    </p>\n    <pre><font color=\"#ff6666\">Error: unexpected 'else' in:<br>\"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; v[i] = sum(goo==foo)<br>&nbsp; else\"</font></pre>\n    <p>Let's fix that:<br>\n    </p>\n    <pre>v = NULL<br>for(i in 1:50){<br>  goo = sample(1:20,10,replace=TRUE)<br>  foo = sample(1:20,10,replace=TRUE)<br>  if(goo == foo){<br>      v[i] = sum(goo==foo)<br>  }<br>  else{<br>      print(\"I win!\")<br>  }<br>}</pre>\n    <p>Running the code above gives us some warnings in R. You can see\n      these warnings by typing<br>\n    </p>\n    <pre>warnings()<br></pre>\n    <p>So let's see what went wrong. Run through the commands in the\n      first iteration of the loop line by line, checking what each\n      object looks like throughout:<br>\n    </p>\n    <pre>i = 1<br>goo = sample(1:20,10,replace=TRUE)<br>goo<br>foo = sample(1:20,10,replace=TRUE)<br>foo<br>if(goo == foo){}<br>goo == foo<br></pre>\n    Now we see the problem - an \"if\" statement needs either a \"TRUE\" or\n    \"FALSE\" given to it, but we gave it 10 TRUE/FALSE statements. We\n    actually wanted to have the if statement check if there were at\n    least one match between goo and foo:<br>\n    <pre>sum(goo == foo)<br>sum(goo == foo) &gt;= 1<br></pre>\n    Now, we can fix our loop:<br>\n    <pre>v = NULL<br>for(i in 1:50){<br>  goo = sample(1:20,10,replace=TRUE)<br>  foo = sample(1:20,10,replace=TRUE)<br>  if(sum(goo == foo) &gt;= 1){<br>      v[i] = sum(goo==foo)<br>  }<br>  else{<br>      print(\"I win!\")<br>  }<br>}<br><br>v <br></pre>\n    Note that an \"NA\" in R means a missing value. For those iterations\n    of the loop where it printed \"I win!\", it didn't assign anything to\n    the vector v.<br>\n    <br>\n    To see what the loop does step by step, we can manually loop it:<br>\n    <pre>v = NULL<br>i = 1<br>goo = sample(1:20,10,replace=TRUE)<br>foo = sample(1:20,10,replace=TRUE)<br>if(sum(goo == foo) &gt;= 1){<br>   v[i] = sum(goo==foo)<br>}<br>else{<br>   print(\"I win!\")<br>}\n<br>i = 2<br>goo = sample(1:20,10,replace=TRUE)<br>foo = sample(1:20,10,replace=TRUE)<br>if(sum(goo == foo) &gt;= 1){<br>   v[i] = sum(goo==foo)<br>}<br>else{<br>   print(\"I win!\")<br>}<br><br>i = 3<br>goo = sample(1:20,10,replace=TRUE)<br>foo = sample(1:20,10,replace=TRUE)<br>if(sum(goo == foo) &gt;= 1){<br>   v[i] = sum(goo==foo)<br>}<br>else{<br>   print(\"I win!\")<br>}<br><br>v</pre>\n    <pre><br></pre>\n    <span style=\"color: rgb(51, 153, 153);\"></span>\n    <hr style=\"width: 100%; height: 2px;\">\n    <div style=\"text-align: center;\"><big><br>\n        <a href=\"index.html\">Stats 120A Index</a></big><br>\n      <br>\n      <hr style=\"width: 100%; height: 2px;\"><br>\n    </div>\n  </body>\n</html>\n", "id": 1525.0}