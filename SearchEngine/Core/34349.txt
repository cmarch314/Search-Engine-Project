{"text": "View Javadoc 1 2 Created on Feb 28 2 5 3 4 5 package edu uci isr impromptu repository 6 7 import java io OutputStream 8 9 import javax servlet http HttpServletRequest 1 import javax xml transform Transformer 11 import javax xml transform TransformerConfigurationException 12 import javax xml transform TransformerException 13 import javax xml transform TransformerFactory 14 import javax xml transform dom DOMSource 15 import javax xml transform stream StreamResult 16 17 import org w3c dom Document 18 19 import edu uci isr impromptu common Utils 2 21 22 Utility methods 23 24 author Jie Ren 25 26 public class RepositoryUtils 27 28 Write an XML document to a servlet outputstream 29 param responseBody the XML document 3 param outputStream the servlet outputstream 31 32 public static void writeXMLResponse Document responseBody OutputStream outputStream 33 DOMSource xmlSource new DOMSource responseBody 34 StreamResult servletResult new StreamResult outputStream 35 TransformerFactory tf TransformerFactory newInstance 36 try 37 Transformer serializer tf newTransformer 38 serializer transform xmlSource servletResult 39 4 catch TransformerConfigurationException e 41 Utils handleException e 42 43 catch TransformerException e 44 Utils handleException e 45 46 47 48 49 Get the file name from a request URI 5 param requestURI the uri of a HTTP request 51 return the decoded file name 52 53 public static String getFileName String requestURI 54 return Utils urlToFileName Utils decode requestURI 55 56 57 58 Get the file name from a servlet request 59 param request the servelet request 6 return the decoded file name 61 62 public static String getFileName HttpServletRequest request 63 request getServletPath contains a good file name 64 return getFileName request getRequestURI 65 66 This page was automatically generated by Maven", "_id": "http://drzaius.ics.uci.edu/~swirl/impromptu-0.30/xref/edu/uci/isr/impromptu/repository/RepositoryUtils.html", "title": "repositoryutils xref", "html": "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\n<head>\n<meta http-equiv=\"content-type\" content=\"text/html; charset=ISO-8859-1\" /><title>RepositoryUtils xref</title>\n<link type=\"text/css\" rel=\"stylesheet\" href=\"../../../../../stylesheet.css\" />\n</head>\n<body>\n<div id=\"overview\"><a href=\"../../../../../../apidocs/edu/uci/isr/impromptu/repository/RepositoryUtils.html\">View Javadoc</a></div><pre>\n\n<a name=\"1\" href=\"#1\">1</a>   <em class=\"comment\">/*</em>\n<a name=\"2\" href=\"#2\">2</a>   <em class=\"comment\"> * Created on Feb 28, 2005</em>\n<a name=\"3\" href=\"#3\">3</a>   <em class=\"comment\"> *</em>\n<a name=\"4\" href=\"#4\">4</a>   <em class=\"comment\"> */</em>\n<a name=\"5\" href=\"#5\">5</a>   <strong>package</strong> <a href=\"../../../../../edu/uci/isr/impromptu/repository/package-summary.html\">edu.uci.isr.impromptu.repository</a>;\n<a name=\"6\" href=\"#6\">6</a>   \n<a name=\"7\" href=\"#7\">7</a>   <strong>import</strong> java.io.OutputStream;\n<a name=\"8\" href=\"#8\">8</a>   \n<a name=\"9\" href=\"#9\">9</a>   <strong>import</strong> javax.servlet.http.HttpServletRequest;\n<a name=\"10\" href=\"#10\">10</a>  <strong>import</strong> javax.xml.transform.Transformer;\n<a name=\"11\" href=\"#11\">11</a>  <strong>import</strong> javax.xml.transform.TransformerConfigurationException;\n<a name=\"12\" href=\"#12\">12</a>  <strong>import</strong> javax.xml.transform.TransformerException;\n<a name=\"13\" href=\"#13\">13</a>  <strong>import</strong> javax.xml.transform.TransformerFactory;\n<a name=\"14\" href=\"#14\">14</a>  <strong>import</strong> javax.xml.transform.dom.DOMSource;\n<a name=\"15\" href=\"#15\">15</a>  <strong>import</strong> javax.xml.transform.stream.StreamResult;\n<a name=\"16\" href=\"#16\">16</a>  \n<a name=\"17\" href=\"#17\">17</a>  <strong>import</strong> org.w3c.dom.Document;\n<a name=\"18\" href=\"#18\">18</a>  \n<a name=\"19\" href=\"#19\">19</a>  <strong>import</strong> edu.uci.isr.impromptu.common.Utils;\n<a name=\"20\" href=\"#20\">20</a>  \n<a name=\"21\" href=\"#21\">21</a>  <em>/**<em>*</em></em>\n<a name=\"22\" href=\"#22\">22</a>  <em> * Utility methods.</em>\n<a name=\"23\" href=\"#23\">23</a>  <em> * </em>\n<a name=\"24\" href=\"#24\">24</a>  <em> * @author Jie Ren</em>\n<a name=\"25\" href=\"#25\">25</a>  <em> */</em>\n<a name=\"26\" href=\"#26\">26</a>  <strong>public</strong> <strong>class</strong> <a href=\"../../../../../edu/uci/isr/impromptu/repository/RepositoryUtils.html\">RepositoryUtils</a> {\n<a name=\"27\" href=\"#27\">27</a>      <em>/**<em>*</em></em>\n<a name=\"28\" href=\"#28\">28</a>  <em>     * Write an XML document to a servlet outputstream</em>\n<a name=\"29\" href=\"#29\">29</a>  <em>     * @param responseBody the XML document</em>\n<a name=\"30\" href=\"#30\">30</a>  <em>     * @param outputStream the servlet outputstream</em>\n<a name=\"31\" href=\"#31\">31</a>  <em>     */</em>\n<a name=\"32\" href=\"#32\">32</a>      <strong>public</strong> <strong>static</strong> <strong>void</strong> writeXMLResponse(Document responseBody, OutputStream outputStream) {\n<a name=\"33\" href=\"#33\">33</a>          DOMSource xmlSource = <strong>new</strong> DOMSource(responseBody);\n<a name=\"34\" href=\"#34\">34</a>          StreamResult servletResult = <strong>new</strong> StreamResult(outputStream);\n<a name=\"35\" href=\"#35\">35</a>          TransformerFactory tf = TransformerFactory.newInstance();\n<a name=\"36\" href=\"#36\">36</a>          <strong>try</strong> {\n<a name=\"37\" href=\"#37\">37</a>              Transformer serializer = tf.newTransformer();\n<a name=\"38\" href=\"#38\">38</a>              serializer.transform(xmlSource, servletResult);\n<a name=\"39\" href=\"#39\">39</a>          } \n<a name=\"40\" href=\"#40\">40</a>          <strong>catch</strong> (TransformerConfigurationException e) {\n<a name=\"41\" href=\"#41\">41</a>              Utils.handleException(e);\n<a name=\"42\" href=\"#42\">42</a>          } \n<a name=\"43\" href=\"#43\">43</a>          <strong>catch</strong> (TransformerException e) {\n<a name=\"44\" href=\"#44\">44</a>              Utils.handleException(e);\n<a name=\"45\" href=\"#45\">45</a>          }\n<a name=\"46\" href=\"#46\">46</a>      }\n<a name=\"47\" href=\"#47\">47</a>  \n<a name=\"48\" href=\"#48\">48</a>      <em>/**<em>*</em></em>\n<a name=\"49\" href=\"#49\">49</a>  <em>     * Get the file name from a request URI</em>\n<a name=\"50\" href=\"#50\">50</a>  <em>     * @param requestURI\tthe uri of a HTTP request </em>\n<a name=\"51\" href=\"#51\">51</a>  <em>     * @return\tthe decoded file name</em>\n<a name=\"52\" href=\"#52\">52</a>  <em>     */</em>\n<a name=\"53\" href=\"#53\">53</a>      <strong>public</strong> <strong>static</strong> String getFileName(String requestURI) {\n<a name=\"54\" href=\"#54\">54</a>          <strong>return</strong> Utils.urlToFileName(Utils.decode(requestURI));\n<a name=\"55\" href=\"#55\">55</a>      }\n<a name=\"56\" href=\"#56\">56</a>  \n<a name=\"57\" href=\"#57\">57</a>      <em>/**<em>*</em></em>\n<a name=\"58\" href=\"#58\">58</a>  <em>     * Get the file name from a servlet request</em>\n<a name=\"59\" href=\"#59\">59</a>  <em>     * @param request\tthe servelet request</em>\n<a name=\"60\" href=\"#60\">60</a>  <em>     * @return\tthe decoded file name</em>\n<a name=\"61\" href=\"#61\">61</a>  <em>     */</em>\n<a name=\"62\" href=\"#62\">62</a>      <strong>public</strong> <strong>static</strong> String getFileName(HttpServletRequest request) {\n<a name=\"63\" href=\"#63\">63</a>          <em class=\"comment\">// request.getServletPath contains a good file name</em>\n<a name=\"64\" href=\"#64\">64</a>          <strong>return</strong> getFileName(request.getRequestURI());\n<a name=\"65\" href=\"#65\">65</a>      }\n<a name=\"66\" href=\"#66\">66</a>  }\n</pre>\n<hr/><div id=\"footer\">This page was automatically generated by <a href=\"http://maven.apache.org/\">Maven</a></div></body>\n</html>\n\n", "id": 34349.0}