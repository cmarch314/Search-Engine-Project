{"text": "Search LoginPreferencesHelp GuideAbout Trac WikiTimelineRoadmapBrowse SourceView TicketsSearch Context Navigation Previous ChangeNext Change Changeset 228 for vendor current libgaim protocols qq buddy info c View differences inlineside by side Show lines around each change Show the changes in full context Ignore Blank lines Case changes White space changes Timestamp Mar 6 2 7 1 39 26 PM 8 years ago Author djp3Message Updating from gaim Repository File 1 edited vendor current libgaim protocols qq buddy info c modified 19 diffs Legend UnmodifiedAddedRemoved vendor current libgaim protocols qq buddy info c r65 r228 11 2 The QQ2 3C protocol plugin 2 file buddy info c 33 4 for gaim 4 gaim 55 6 Copyright C 2 4 Puzzlebird 6 Gaim is the legal property of its developers whose names are too numerous 7 to list here Please refer to the COPYRIGHT file distributed with this 8 source distribution 79 81 This program is free software you can redistribute it and or modify 283 include utils h 2931 include packet parse h 3 include buddy info h 32 include buddy info h 3133 include char conv h 3234 include crypt h 889 we have to manually store the query so that we know the query source 8991typedef struct qq info query 9 guint32 uid 91 gboolean show window 92 gboolean modify info 92 guint32 uid 93 gboolean show window 94 gboolean modify info 9395 qq info query 9496 9799 all needs to be there when we send out the modify info packet 981 typedef struct modify info data 99 GaimConnection gc 1 1 GaimConnection gc 1 1 2 contact info info 1 11 3 modify info data 1 9111 if len 3 len return 1 11 112 for i i len i 111 if g ascii isdigit value i 113 if g ascii isdigit value i 112114 return 1 113115 152154 153155 154 static void append field value GString info text const gchar field 156static gboolean append field value GaimNotifyUserInfo user info const gchar field 155157 const gchar title const gchar choice gint choice size 156158 157159 gchar value field value field choice choice size 16 161 if value NULL 162 gaim notify user info add pair user info title value 163 g free value 164 165 return TRUE 166 158167 159 if value NULL 16 g string append printf info text br b s b s title value 161 g free value 162 163 164 165 static GString info to str const contact info info 166 167 GString info text extra info 168 return FALSE 169 17 171static GaimNotifyUserInfo 172info to notify user info const contact info info 173 174 GaimNotifyUserInfo user info gaim notify user info new 168175 const gchar intro 169 gint len 17 171 info text g string new 172 g string append printf info text b s b br br QQ PRIMARY INFORMATION 173 g string append printf info text b s b s QQ NUMBER info uid 174 append field value info text info nick QQ NICKNAME NULL 175 append field value info text info name QQ NAME NULL 176 append field value info text info age QQ AGE NULL 177 append field value info text info gender QQ GENDER genders QQ GENDER SIZE 178 append field value info text info country QQ COUNTRY NULL 179 append field value info text info province QQ PROVINCE NULL 18 append field value info text info city QQ CITY NULL 181 182 extra info g string new 183 g string append printf extra info br br b s b br QQ ADDITIONAL INFORMATION 184 len extra info len 185 append field value extra info info horoscope QQ HOROSCOPE horoscope names QQ HOROSCOPE SIZE 186 append field value extra info info occupation QQ OCCUPATION NULL 187 append field value extra info info zodiac QQ ZODIAC zodiac names QQ ZODIAC SIZE 188 append field value extra info info blood QQ BLOOD blood types QQ BLOOD SIZE 189 append field value extra info info college QQ COLLEGE NULL 19 append field value extra info info email QQ EMAIL NULL 191 append field value extra info info address QQ ADDRESS NULL 192 append field value extra info info zipcode QQ ZIPCODE NULL 193 append field value extra info info hp num QQ CELL NULL 194 append field value extra info info tel QQ TELEPHONE NULL 195 append field value extra info info homepage QQ HOMEPAGE NULL 196 if len extra info len 197 g string append info text extra info str 198 g string free extra info TRUE 176 gboolean has extra info FALSE 177 178 gaim notify user info add pair user info QQ NUMBER info uid 179 18 append field value user info info nick QQ NICKNAME NULL 181 append field value user info info name QQ NAME NULL 182 append field value user info info age QQ AGE NULL 183 append field value user info info gender QQ GENDER genders QQ GENDER SIZE 184 append field value user info info country QQ COUNTRY NULL 185 append field value user info info province QQ PROVINCE NULL 186 append field value user info info city QQ CITY NULL 187 188 gaim notify user info add section header user info QQ ADDITIONAL INFORMATION 189 19 has extra info append field value user info info horoscope QQ HOROSCOPE horoscope names QQ HOROSCOPE SIZE 191 has extra info append field value user info info occupation QQ OCCUPATION NULL 192 has extra info append field value user info info zodiac QQ ZODIAC zodiac names QQ ZODIAC SIZE 193 has extra info append field value user info info blood QQ BLOOD blood types QQ BLOOD SIZE 194 has extra info append field value user info info college QQ COLLEGE NULL 195 has extra info append field value user info info email QQ EMAIL NULL 196 has extra info append field value user info info address QQ ADDRESS NULL 197 has extra info append field value user info info zipcode QQ ZIPCODE NULL 198 has extra info append field value user info info hp num QQ CELL NULL 199 has extra info append field value user info info tel QQ TELEPHONE NULL 2 has extra info append field value user info info homepage QQ HOMEPAGE NULL 2 1 2 2 if has extra info 2 3 gaim notify user info remove last item user info 1992 4 2 2 5 intro field value info intro NULL 2 12 6 if intro 2 2 g string append printf info text br br b s b br br QQ INTRO 2 3 g string append info text intro 2 7 gaim notify user info add pair user info QQ INTRO intro 2 42 8 2 52 9 22623 227231 228 return info text 232 return user info 229233 23 234 262266 for ql g list last qd info query ql NULL ql g list previous ql 263267 query ql data 264 if query uid qd uid 268 if query uid qd uid 265269 query modify info TRUE 26627 313317 else 314318 value gchar gaim request field string get value field 315 if value NULL 319 if value NULL 31632 value g strdup 317 else 321 else 318322 value utf8 to qq value QQ CHARSET DEFAULT 319323 381385 382386 383 static void add string field to group GaimRequestFieldGroup group 387static void add string field to group GaimRequestFieldGroup group 384388 const gchar id const gchar title const gchar value 385389 38639 GaimRequestField field 387391 gchar utf8 value 388 392 389393 utf8 value qq to utf8 value QQ CHARSET DEFAULT 39 394 field gaim request field string new id title utf8 value FALSE 393397 394398 395 static void add choice field to group GaimRequestFieldGroup group 396 const gchar id const gchar title const gchar value 399static void add choice field to group GaimRequestFieldGroup group 4 const gchar id const gchar title const gchar value 3974 1 const gchar choice gint choice size 3984 2 3994 3 GaimRequestField field 4 4 4 gint i index 4 1 4 5 4 24 6 index choice index value choice choice size 4 34 7 field gaim request field choice new id title index 474478 mid info qq show g strdup info qq show 475479 mid info unknown6 g strdup info unknown6 476 48 477481 gaim request fields gc Modify my information 478482 Modify my information NULL fields 5 7511 5 8512 513static void qq send packet modify face GaimConnection gc gint face num 514 515 GaimAccount account gaim connection get account gc 516 GaimPresence presence gaim account get presence account 517 qq data qd qq data gc proto data 518 gint offset 519 52 if gaim presence is status primitive active presence GAIM STATUS INVISIBLE 521 offset 2 522 else if gaim presence is status primitive active presence GAIM STATUS AWAY 523 gaim presence is status primitive active presence GAIM STATUS EXTENDED AWAY 524 offset 1 525 else 526 offset 527 528 529 qd my icon 3 face num 1 offset 53 qd modifying face TRUE 531 qq send packet get info gc qd uid FALSE 532 533 534void qq set buddy icon for user GaimAccount account const gchar who const gchar iconfile 535 536 FILE file 537 struct stat st 538 539 g return if fail g stat iconfile st 54 file g fopen iconfile rb 541 if file 542 GaimBuddyIcon icon 543 size t data len 544 gchar data g new gchar st st size 1 545 data len fread data 1 st st size file 546 fclose file 547 gaim buddy icons set for user account who data data len 548 icon gaim buddy icons find account who 549 gaim buddy icon set path icon iconfile 55 551 552 553 TODO custom faces for QQ members and users with level 16 554void qq set my buddy icon GaimConnection gc const gchar iconfile 555 556 gchar icon 557 gint icon num 558 gint icon len 559 GaimAccount account gaim connection get account gc 56 const gchar icon path gaim account get buddy icon path account 561 const gchar buddy icon dir qq buddy icon dir 562 gint prefix len strlen QQ ICON PREFIX 563 gint suffix len strlen QQ ICON SUFFIX 564 gint dir len strlen buddy icon dir 565 gchar errmsg g strconcat You are attempting to set a custom face Gaim currently only allows the standard faces Please choose an image from buddy icon dir NULL 566 gboolean icon global gaim account get bool gc account use global buddyicon TRUE 567 568 if icon path 569 icon path 57 571 icon len strlen icon path dir len 1 prefix len suffix len 572 573 make sure we re using an appropriate icon 574 if g ascii strncasecmp icon path buddy icon dir dir len 575 icon path dir len G DIR SEPARATOR 576 g ascii strncasecmp icon path dir len 1 QQ ICON PREFIX prefix len 577 g ascii strncasecmp icon path dir len 1 prefix len icon len QQ ICON SUFFIX suffix len 578 icon len 3 579 if icon global 58 gaim debug GAIM DEBUG ERROR QQ s n errmsg 581 else 582 gaim notify error gc Invalid QQ Face errmsg NULL 583 g free errmsg 584 return 585 586 strip everything but number 587 icon g strndup icon path dir len 1 prefix len icon len 588 icon num strtol icon NULL 1 589 g free icon 59 ensure face number in proper range 591 if icon num QQ FACES 592 if icon global 593 gaim debug GAIM DEBUG ERROR QQ s n errmsg 594 else 595 gaim notify error gc Invalid QQ Face errmsg NULL 596 g free errmsg 597 return 598 599 g free errmsg 6 tell server my icon changed 6 1 qq send packet modify face gc icon num 6 2 display in blist 6 3 qq set buddy icon for user account account username icon path 6 4 6 5 6 6 6 7static void qq update buddy icon GaimAccount account const gchar name gint face 6 8 6 9 gchar icon path 61 GaimBuddyIcon icon gaim buddy icons find account name 611 gchar icon num str face to icon str face 612 const gchar old path gaim buddy icon get path icon 613 const gchar buddy icon dir qq buddy icon dir 614 615 icon path g strconcat buddy icon dir G DIR SEPARATOR S QQ ICON PREFIX 616 icon num str QQ ICON SUFFIX NULL 617 if icon NULL old path NULL 618 g ascii strcasecmp icon path old path 619 qq set buddy icon for user account name icon path 62 g free icon num str 621 g free icon path 622 623 5 9624 after getting info or modify myself refresh the buddy list accordingly 51 625void qq refresh buddy and myself contact info info GaimConnection gc 513628 qq data qd 514629 qq buddy q bud 515 gchar alias utf8 63 gchar alias utf8 gaim name 631 GaimAccount account gaim connection get account gc 516632 517633 qd qq data gc proto data 634 gaim name uid to gaim name strtol info uid NULL 1 518635 519636 alias utf8 qq to utf8 info nick QQ CHARSET DEFAULT 521638 qd my icon strtol info face NULL 1 522639 if alias utf8 NULL 523 gaim account set alias gc account alias utf8 64 gaim account set alias account alias utf8 524641 525642 update buddy list including myself if myself is the buddy 526 b gaim find buddy gc account uid to gaim name strtol info uid NULL 1 643 b gaim find buddy gc account gaim name 527644 q bud b NULL NULL qq buddy b proto data 528645 if q bud NULL I have this buddy 529646 q bud age strtol info age NULL 1 53 647 q bud gender strtol info gender NULL 1 531 q bud icon strtol info face NULL 1 648 q bud face strtol info face NULL 1 532649 if alias utf8 NULL 53365 q bud nickname g strdup alias utf8 534651 qq update buddy contact gc q bud 535 652 qq update buddy icon gc account gaim name q bud face 653 654 g free gaim name 536655 g free alias utf8 537656 547666 contact info info 548667 GList list query list 549 GString info text 668 GaimNotifyUserInfo user info 55 669 55167 g return if fail buf NULL buf len 563682 info contact info segments 564683 if qd modifying face strtol info face NULL 1 qd my icon 565 gchar icon g strdup printf i qd my icon 684 gchar icon g strdup printf d qd my icon 566685 qd modifying face FALSE 567 memcpy info face icon 2 686 g free info face 687 info face icon 568688 qq send packet modify info gc segments 569 g free icon 57 689 57169 578697 if query uid atoi info uid 579698 if query show window 58 info text info to str info 581 gaim notify userinfo gc info uid info text str NULL NULL 582 g string free info text TRUE 699 user info info to notify user info info 7 gaim notify userinfo gc info uid user info NULL NULL 7 1 gaim notify user info destroy user info 5837 2 else if query modify info 5847 3 create modify info dialogue gc info 613732 gaim debug GAIM DEBUG INFO QQ d info queries are freed n i 614733 734 735void qq send packet get level GaimConnection gc guint32 uid 736 737 guint8 buf 5 738 guint32 tmp g htonl uid 739 buf 74 memcpy buf 1 tmp 4 741 qq send cmd gc QQ CMD GET LEVEL TRUE TRUE buf 5 742 743 744 745void qq send packet get buddies levels GaimConnection gc 746 747 guint8 buf tmp size 748 qq buddy q bud 749 qq data qd qq data gc proto data 75 GList node qd buddies 751 752 if qd buddies 753 754 server only sends back levels for online buddies no point 755 in asking for anyone else 756 757 size 4 g list length qd buddies 1 758 buf g new guint8 size 759 tmp buf 1 76 761 while node NULL 762 guint32 tmp4 763 q bud qq buddy node data 764 if q bud NULL 765 tmp4 g htonl q bud uid 766 memcpy tmp tmp4 4 767 tmp 4 768 769 node node next 77 771 qq send cmd gc QQ CMD GET LEVEL TRUE TRUE buf size 772 g free buf 773 774 775 776 777void qq process get level reply guint8 buf gint buf len GaimConnection gc 778 779 guint32 uid onlineTime 78 guint16 level timeRemainder 781 gchar gaim name 782 GaimBuddy b 783 qq buddy q bud 784 gint decr len i 785 guint8 decr buf tmp 786 GaimAccount account gaim connection get account gc 787 qq data qd qq data gc proto data 788 789 decr len buf len 79 decr buf g new guint8 buf len 791 if qq crypt DECRYPT buf buf len qd session key decr buf decr len 792 gaim debug GAIM DEBUG ERROR QQ Couldn t decrypt get level packet n 793 794 795 decr len 796 if decr len 12 797 gaim debug GAIM DEBUG ERROR QQ 798 Get levels list of abnormal length Truncating last d bytes n decr len 12 799 decr len decr len 12 8 8 1 8 2 tmp decr buf 1 8 3 this byte seems random 8 4 8 5 gaim debug GAIM DEBUG INFO QQ Byte one of get level packet d n buf 8 6 8 7 for i i decr len i 12 8 8 uid g ntohl guint32 tmp 8 9 tmp 4 81 onlineTime g ntohl guint32 tmp 811 tmp 4 812 level g ntohs guint16 tmp 813 tmp 2 814 timeRemainder g ntohs guint16 tmp 815 tmp 2 816 817 gaim debug GAIM DEBUG INFO QQ Level packet entry nuid d nonlineTime d nlevel d ntimeRemainder d n 818 uid onlineTime level timeRemainder 819 82 gaim name uid to gaim name uid 821 b gaim find buddy account gaim name 822 q bud b NULL NULL qq buddy b proto data 823 824 if q bud NULL uid qd uid 825 if q bud 826 q bud onlineTime onlineTime 827 q bud level level 828 q bud timeRemainder timeRemainder 829 83 if uid qd uid 831 qd my level level 832 833 else 834 gaim debug GAIM DEBUG ERROR QQ 835 Got an online buddy d but not in my buddy list n uid 836 837 g free gaim name 838 839 g free decr buf 84 Note See TracChangeset for help on using the changeset viewer Download in other formats Unified Diff Zip Archive Powered by Trac 1 1 By Edgewall Software All content copyright 2 7 2 8 by LUCI http luci ics uci edu ", "_id": "http://djp3-pc2.ics.uci.edu/LUCICodeRepository/nomaticIM/changeset/228/vendor/current/libgaim/protocols/qq/buddy_info.c", "title": "\n      changeset 228 for vendor/current/libgaim/protocols/qq/buddy_info.c \u2013 nomatic*im\n    ", "html": "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n  \n  \n\n  \n\n\n  <head>\n\t\t<title>\n      Changeset 228 for vendor/current/libgaim/protocols/qq/buddy_info.c \u2013 Nomatic*IM\n    </title><meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" /><meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" /><link rel=\"search\" href=\"/LUCICodeRepository/nomaticIM/search\" /><link rel=\"help\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracGuide\" /><link rel=\"alternate\" href=\"?format=diff&amp;new=228\" type=\"text/plain\" class=\"diff\" title=\"Unified Diff\" /><link rel=\"alternate\" href=\"?format=zip&amp;new=228\" type=\"application/zip\" class=\"zip\" title=\"Zip Archive\" /><link rel=\"next\" href=\"/LUCICodeRepository/nomaticIM/changeset/274\" title=\"Changeset 274 for vendor/current/libgaim/protocols/qq/buddy_info.c\" /><link rel=\"start\" href=\"/LUCICodeRepository/nomaticIM/wiki\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/chrome/common/css/trac.css\" type=\"text/css\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/chrome/common/css/changeset.css\" type=\"text/css\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/chrome/common/css/diff.css\" type=\"text/css\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/chrome/common/css/code.css\" type=\"text/css\" /><link rel=\"prev\" href=\"/LUCICodeRepository/nomaticIM/changeset/65/vendor/current/libgaim/protocols/qq/buddy_info.c\" title=\"Changeset 65 for vendor/current/libgaim/protocols/qq/buddy_info.c\" /><link rel=\"shortcut icon\" href=\"http://luci.ics.uci.edu/logo32by32.gif\" type=\"image/gif\" /><link rel=\"icon\" href=\"http://luci.ics.uci.edu/logo32by32.gif\" type=\"image/gif\" /><link type=\"application/opensearchdescription+xml\" rel=\"search\" href=\"/LUCICodeRepository/nomaticIM/search/opensearch\" title=\"Search Nomatic*IM\" /><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/jquery.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/babel.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/messages/en_US.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/trac.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/search.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/diff.js\"></script><script type=\"text/javascript\">\n      jQuery(document).ready(function($) {\n        $(\".trac-toggledeleted\").show().click(function() {\n                  $(this).siblings().find(\".trac-deleted\").toggle();\n                  return false;\n        }).click();\n        $(\"#content\").find(\"li.entry h2 a\").parent().addAnchor(_(\"Link to this diff\"));\n      });\n    </script>\n\t</head>\n  <body>\n    <div id=\"banner\">\n      <div id=\"header\">\n        <a id=\"logo\" href=\"http://luci.ics.uci.edu/#code\"><img src=\"http://luci.ics.uci.edu/blog/archives/LUCIhorzTight.jpg\" alt=\"LUCI Code Repository\" /></a>\n      </div>\n      <form id=\"search\" action=\"/LUCICodeRepository/nomaticIM/search\" method=\"get\">\n        <div>\n          <label for=\"proj-search\">Search:</label>\n          <input type=\"text\" id=\"proj-search\" name=\"q\" size=\"18\" value=\"\" />\n          <input type=\"submit\" value=\"Search\" />\n        </div>\n      </form>\n      <div id=\"metanav\" class=\"nav\">\n    <ul>\n      <li class=\"first\"><a href=\"/LUCICodeRepository/nomaticIM/login\">Login</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/prefs\">Preferences</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/wiki/TracGuide\">Help/Guide</a></li><li class=\"last\"><a href=\"/LUCICodeRepository/nomaticIM/about\">About Trac</a></li>\n    </ul>\n  </div>\n    </div>\n    <div id=\"mainnav\" class=\"nav\">\n    <ul>\n      <li class=\"first\"><a href=\"/LUCICodeRepository/nomaticIM/wiki\">Wiki</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/timeline\">Timeline</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/roadmap\">Roadmap</a></li><li class=\"active\"><a href=\"/LUCICodeRepository/nomaticIM/browser\">Browse Source</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/report\">View Tickets</a></li><li class=\"last\"><a href=\"/LUCICodeRepository/nomaticIM/search\">Search</a></li>\n    </ul>\n  </div>\n    <div id=\"main\">\n      <div id=\"ctxtnav\" class=\"nav\">\n        <h2>Context Navigation</h2>\n        <ul>\n          <li class=\"first\"><span>&larr; <a class=\"prev\" href=\"/LUCICodeRepository/nomaticIM/changeset/65/vendor/current/libgaim/protocols/qq/buddy_info.c\" title=\"Changeset 65 for vendor/current/libgaim/protocols/qq/buddy_info.c\">Previous Change</a></span></li><li class=\"last\"><span><a class=\"next\" href=\"/LUCICodeRepository/nomaticIM/changeset/274\" title=\"Changeset 274 for vendor/current/libgaim/protocols/qq/buddy_info.c\">Next Change</a> &rarr;</span></li>\n        </ul>\n        <hr />\n      </div>\n    <div id=\"content\" class=\"changeset\">\n      <div id=\"title\">\n            <h1>Changeset <a title=\"Show full changeset\" href=\"/LUCICodeRepository/nomaticIM/changeset/228\">228</a>\n              for <a title=\"Show entry in browser\" href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=228\">vendor/current/libgaim/protocols/qq/buddy_info.c</a></h1>\n      </div>\n      <form id=\"prefs\" action=\"\">\n        <div>\n          \n  <label for=\"style\">View differences</label>\n  <select id=\"style\" name=\"style\">\n    <option selected=\"selected\" value=\"inline\">inline</option>\n    <option value=\"sidebyside\">side by side</option>\n  </select>\n  <div class=\"field\">\n    <label><input type=\"radio\" name=\"contextall\" value=\"0\" checked=\"checked\" />\n             Show</label>\n      <label><input type=\"text\" name=\"contextlines\" id=\"contextlines\" size=\"2\" maxlength=\"3\" value=\"2\" />\n             lines around each change</label><br />\n    <label><input type=\"radio\" name=\"contextall\" value=\"1\" />\n           Show the changes in full context</label>\n  </div>\n  <fieldset id=\"ignore\">\n    <legend>Ignore:</legend>\n    <div class=\"field\">\n      <input type=\"checkbox\" id=\"ignoreblanklines\" name=\"ignoreblanklines\" />\n      <label for=\"ignoreblanklines\">Blank lines</label>\n    </div>\n    <div class=\"field\">\n      <input type=\"checkbox\" id=\"ignorecase\" name=\"ignorecase\" />\n      <label for=\"ignorecase\">Case changes</label>\n    </div>\n    <div class=\"field\">\n      <input type=\"checkbox\" id=\"ignorewhitespace\" name=\"ignorewhitespace\" />\n      <label for=\"ignorewhitespace\">White space changes</label>\n    </div>\n  </fieldset>\n  <div class=\"buttons\">\n    <input type=\"submit\" name=\"update\" value=\"Update\" />\n  </div>\n\n        </div>\n      </form>\n      <dl id=\"overview\">\n          <dt class=\"property time\">Timestamp:</dt>\n          <dd class=\"time\">\n             Mar 6, 2007, 10:39:26 PM\n             (<a class=\"timeline\" href=\"/LUCICodeRepository/nomaticIM/timeline?from=2007-03-06T22%3A39%3A26-08%3A00&amp;precision=second\" title=\"See timeline at Mar 6, 2007, 10:39:26 PM\">8 years</a> ago)\n          </dd>\n          <dt class=\"property author\">Author:</dt>\n          <dd class=\"author\">djp3</dd>\n          <dt class=\"property message\">Message:</dt>\n          <dd class=\"message searchable\">\n            \n            \n              <p>\nUpdating from gaim Repository<br />\n</p>\n\n            \n            \n          </dd>\n        <dt class=\"property files\">\n          File:\n        </dt>\n        <dd class=\"files\">\n          <div class=\"legend\" id=\"file-legend\">\n            <dl>\n              <dt class=\"mod\"></dt><dd>1 edited</dd>\n            </dl>\n          </div>\n          <br />\n          <ul>\n            <li>\n          <div class=\"mod\"> </div>\n            <a title=\"Show entry in browser\" href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=228\">\n              vendor/current/libgaim/protocols/qq/buddy_info.c\n            </a>\n          <span class=\"comment\">(modified)</span>\n              (<a title=\"Show differences\" href=\"#file0\">19 diffs</a>)\n            </li>\n          </ul>\n        </dd>\n      </dl>\n      <div class=\"diff\">\n        <div class=\"legend\" id=\"diff-legend\">\n          <h3>Legend:</h3>\n          <dl>\n            <dt class=\"unmod\"></dt><dd>Unmodified</dd>\n            <dt class=\"add\"></dt><dd>Added</dd>\n            <dt class=\"rem\"></dt><dd>Removed</dd>\n          </dl>\n        </div>\n        <div class=\"diff\">\n  <ul class=\"entries\">\n      <li class=\"entry\">\n        <h2 id=\"file0\">\n          <a href=\"/LUCICodeRepository/nomaticIM/changeset/228/vendor/current/libgaim/protocols/qq/buddy_info.c\" title=\"Show the changeset 228 restricted to vendor/current/libgaim/protocols/qq/buddy_info.c\">vendor/current/libgaim/protocols/qq/buddy_info.c</a>\n        </h2>\n        <table class=\"trac-diff inline\" summary=\"Differences\" cellspacing=\"0\">\n              <colgroup><col class=\"lineno\" /><col class=\"lineno\" /><col class=\"content\" /></colgroup>\n              <thead>\n                <tr>\n                  <th title=\"Revision 65\">\n                    <a title=\"Show revision 65 of this file in browser\" href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=65#L1\">\n                      r65</a>\n                  </th>\n                  <th title=\"Revision 228\">\n                    <a title=\"Show revision 228 of this file in browser\" href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=228#L1\">\n                      r228</a>\n                  </th>\n                  <td>\u00a0</td>\n                </tr>\n              </thead>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>1</th><th>1</th><td class=\"l\"><span>/**</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>2</th><th>\u00a0</th><td class=\"l\"><span>&nbsp;* <del>The QQ2003C protocol plugin</del></span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>2</th><td class=\"r\"><span>&nbsp;* <ins>@file buddy_info.c</ins></span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>3</th><th>3</th><td class=\"l\"><span>&nbsp;*</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>4</th><th>\u00a0</th><td class=\"l\"><span>&nbsp;* <del>for </del>gaim</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>4</th><td class=\"r\"><span>&nbsp;* <ins></ins>gaim</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>5</th><th>5</th><td class=\"l\"><span>&nbsp;*</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>6</th><th>\u00a0</th><td class=\"l\"><span>&nbsp;* Copyright (C) 2004 Puzzlebird</span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>6</th><td class=\"r\"><span>&nbsp;* Gaim is the legal property of its developers, whose names are too numerous</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>7</th><td class=\"r\"><span>&nbsp;* to list here.&nbsp; Please refer to the COPYRIGHT file distributed with this</span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>8</th><td class=\"r\"><span>&nbsp;* source distribution.</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>7</th><th>9</th><td class=\"l\"><span>&nbsp;*</span>\u00a0</td>\n                  </tr><tr>\n                          <th>8</th><th>10</th><td class=\"l\"><span>&nbsp;* This program is free software; you can redistribute it and/or modify</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=65#L28\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=228#L30\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>28</th><th>30</th><td class=\"l\"><span>#include \"utils.h\"</span>\u00a0</td>\n                  </tr><tr>\n                          <th>29</th><th>31</th><td class=\"l\"><span>#include \"packet_parse.h\"</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>30</th><th>\u00a0</th><td class=\"l\"><span>#include \"buddy_info.h\"<del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</del></span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>32</th><td class=\"r\"><span>#include \"buddy_info.h\"<ins></ins></span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>31</th><th>33</th><td class=\"l\"><span>#include \"char_conv.h\"</span>\u00a0</td>\n                  </tr><tr>\n                          <th>32</th><th>34</th><td class=\"l\"><span>#include \"crypt.h\"</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=65#L88\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=228#L90\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>88</th><th>90</th><td class=\"l\"><span>&nbsp;* we have to manually store the query, so that we know the query source */</span>\u00a0</td>\n                  </tr><tr>\n                          <th>89</th><th>91</th><td class=\"l\"><span>typedef struct _qq_info_query {</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>90</th><th>\u00a0</th><td class=\"l\"><span><del>&nbsp; &nbsp; &nbsp; &nbsp; </del>guint32 uid;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>91</th><th>\u00a0</th><td class=\"l\"><span><del>&nbsp; &nbsp; &nbsp; &nbsp; </del>gboolean show_window;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>92</th><th>\u00a0</th><td class=\"l\"><span><del>&nbsp; &nbsp; &nbsp; &nbsp; </del>gboolean modify_info;</span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>92</th><td class=\"r\"><span><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins>guint32 uid;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>93</th><td class=\"r\"><span><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins>gboolean show_window;</span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>94</th><td class=\"r\"><span><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins>gboolean modify_info;</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>93</th><th>95</th><td class=\"l\"><span>} qq_info_query;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>94</th><th>96</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=65#L97\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=228#L99\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>97</th><th>99</th><td class=\"l\"><span>&nbsp;* all needs to be there when we send out the modify info packet */</span>\u00a0</td>\n                  </tr><tr>\n                          <th>98</th><th>100</th><td class=\"l\"><span>typedef struct _modify_info_data {</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>99</th><th>\u00a0</th><td class=\"l\"><span><del>&nbsp; &nbsp; &nbsp; &nbsp; </del>GaimConnection *gc;</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>101</th><td class=\"r\"><span><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins>GaimConnection *gc;</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>100</th><th>102</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; contact_info *info;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>101</th><th>103</th><td class=\"l\"><span>} modify_info_data;</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=65#L109\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=228#L111\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>109</th><th>111</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; if (len &gt; 3 || len == 0) return -1;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>110</th><th>112</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; for (i = 0; i &lt; len; i++) {</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>111</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!g_ascii_isdigit(value[i]))<del>&nbsp;</del></span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>113</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!g_ascii_isdigit(value[i]))<ins></ins></span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>112</th><th>114</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return -1;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>113</th><th>115</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=65#L152\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=228#L154\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>152</th><th>154</th><td class=\"l\"><span>}</span>\u00a0</td>\n                  </tr><tr>\n                          <th>153</th><th>155</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>154</th><th>\u00a0</th><td class=\"l\"><span>static <del>void append_field_value(GString *info_text, const gchar *field, </del></span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>156</th><td class=\"r\"><span>static <ins>gboolean append_field_value(GaimNotifyUserInfo *user_info, const gchar *field,</ins></span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>155</th><th>157</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const gchar *title, const gchar **choice, gint choice_size)</span>\u00a0</td>\n                  </tr><tr>\n                          <th>156</th><th>158</th><td class=\"l\"><span>{</span>\u00a0</td>\n                  </tr><tr>\n                          <th>157</th><th>159</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gchar *value = field_value(field, choice, choice_size);</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"first\">\n                          <th>\u00a0</th><th>160</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>161</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; if (value != NULL) {</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>162</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_notify_user_info_add_pair(user_info, title, value);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>163</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g_free(value);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>164</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>165</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return TRUE;</ins>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>\u00a0</th><th>166</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>158</th><th>167</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>159</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; if (value != NULL) {</span>\u00a0</td>\n                      </tr><tr>\n                        <th>160</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g_string_append_printf(info_text, \"&lt;br /&gt;&lt;b&gt;%s:&lt;/b&gt; %s\", title, value);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>161</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g_free(value);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>162</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span>\u00a0</td>\n                      </tr><tr>\n                        <th>163</th><th>\u00a0</th><td class=\"l\"><span>}</span>\u00a0</td>\n                      </tr><tr>\n                        <th>164</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>165</th><th>\u00a0</th><td class=\"l\"><span>static GString *info_to_str(const contact_info *info)</span>\u00a0</td>\n                      </tr><tr>\n                        <th>166</th><th>\u00a0</th><td class=\"l\"><span>{</span>\u00a0</td>\n                      </tr><tr>\n                        <th>167</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; GString *info_text, *extra_info;</span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>168</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; return FALSE;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>169</th><td class=\"r\"><span>}</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>170</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>171</th><td class=\"r\"><span>static GaimNotifyUserInfo *</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>172</th><td class=\"r\"><span>info_to_notify_user_info(const contact_info *info)</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>173</th><td class=\"r\"><span>{</span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>174</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; GaimNotifyUserInfo *user_info = gaim_notify_user_info_new();</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>168</th><th>175</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; const gchar *intro;</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>169</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gint len;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>170</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>171</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; info_text = g_string_new(\"\");</span>\u00a0</td>\n                      </tr><tr>\n                        <th>172</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; g_string_append_printf(info_text, \"&lt;b&gt;%s&lt;/b&gt;&lt;br /&gt;&lt;br /&gt;\", QQ_PRIMARY_INFORMATION);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>173</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; g_string_append_printf(info_text, \"&lt;b&gt;%s:&lt;/b&gt; %s\", QQ_NUMBER, info-&gt;uid);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>174</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; append_field_value(info_text, info-&gt;nick, QQ_NICKNAME, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>175</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; append_field_value(info_text, info-&gt;name, QQ_NAME, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>176</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; append_field_value(info_text, info-&gt;age, QQ_AGE, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>177</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; append_field_value(info_text, info-&gt;gender, QQ_GENDER, genders, QQ_GENDER_SIZE);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>178</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; append_field_value(info_text, info-&gt;country, QQ_COUNTRY, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>179</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; append_field_value(info_text, info-&gt;province, QQ_PROVINCE, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>180</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; append_field_value(info_text, info-&gt;city, QQ_CITY, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>181</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>182</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; extra_info = g_string_new(\"\");</span>\u00a0</td>\n                      </tr><tr>\n                        <th>183</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; g_string_append_printf(extra_info, \"&lt;br /&gt;&lt;br /&gt;&lt;b&gt;%s&lt;/b&gt;&lt;br /&gt;\", QQ_ADDITIONAL_INFORMATION);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>184</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; len = extra_info-&gt;len;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>185</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; append_field_value(extra_info, info-&gt;horoscope, QQ_HOROSCOPE, horoscope_names, QQ_HOROSCOPE_SIZE);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>186</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; append_field_value(extra_info, info-&gt;occupation, QQ_OCCUPATION, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>187</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; append_field_value(extra_info, info-&gt;zodiac, QQ_ZODIAC, zodiac_names, QQ_ZODIAC_SIZE);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>188</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; append_field_value(extra_info, info-&gt;blood, QQ_BLOOD, blood_types, QQ_BLOOD_SIZE);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>189</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; append_field_value(extra_info, info-&gt;college, QQ_COLLEGE, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>190</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; append_field_value(extra_info, info-&gt;email, QQ_EMAIL, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>191</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; append_field_value(extra_info, info-&gt;address, QQ_ADDRESS, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>192</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; append_field_value(extra_info, info-&gt;zipcode, QQ_ZIPCODE, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>193</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; append_field_value(extra_info, info-&gt;hp_num, QQ_CELL, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>194</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; append_field_value(extra_info, info-&gt;tel, QQ_TELEPHONE, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>195</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; append_field_value(extra_info, info-&gt;homepage, QQ_HOMEPAGE, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>196</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; if (len != extra_info-&gt;len)</span>\u00a0</td>\n                      </tr><tr>\n                        <th>197</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g_string_append(info_text, extra_info-&gt;str);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>198</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; g_string_free(extra_info, TRUE);</span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>176</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gboolean has_extra_info = FALSE;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>177</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>178</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gaim_notify_user_info_add_pair(user_info, QQ_NUMBER, info-&gt;uid);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>179</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>180</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; append_field_value(user_info, info-&gt;nick, QQ_NICKNAME, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>181</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; append_field_value(user_info, info-&gt;name, QQ_NAME, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>182</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; append_field_value(user_info, info-&gt;age, QQ_AGE, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>183</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; append_field_value(user_info, info-&gt;gender, QQ_GENDER, genders, QQ_GENDER_SIZE);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>184</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; append_field_value(user_info, info-&gt;country, QQ_COUNTRY, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>185</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; append_field_value(user_info, info-&gt;province, QQ_PROVINCE, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>186</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; append_field_value(user_info, info-&gt;city, QQ_CITY, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>187</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>188</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gaim_notify_user_info_add_section_header(user_info, QQ_ADDITIONAL_INFORMATION);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>189</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>190</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; has_extra_info |= append_field_value(user_info, info-&gt;horoscope, QQ_HOROSCOPE, horoscope_names, QQ_HOROSCOPE_SIZE);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>191</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; has_extra_info |= append_field_value(user_info, info-&gt;occupation, QQ_OCCUPATION, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>192</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; has_extra_info |= append_field_value(user_info, info-&gt;zodiac, QQ_ZODIAC, zodiac_names, QQ_ZODIAC_SIZE);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>193</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; has_extra_info |= append_field_value(user_info, info-&gt;blood, QQ_BLOOD, blood_types, QQ_BLOOD_SIZE);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>194</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; has_extra_info |= append_field_value(user_info, info-&gt;college, QQ_COLLEGE, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>195</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; has_extra_info |= append_field_value(user_info, info-&gt;email, QQ_EMAIL, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>196</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; has_extra_info |= append_field_value(user_info, info-&gt;address, QQ_ADDRESS, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>197</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; has_extra_info |= append_field_value(user_info, info-&gt;zipcode, QQ_ZIPCODE, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>198</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; has_extra_info |= append_field_value(user_info, info-&gt;hp_num, QQ_CELL, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>199</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; has_extra_info |= append_field_value(user_info, info-&gt;tel, QQ_TELEPHONE, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>200</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; has_extra_info |= append_field_value(user_info, info-&gt;homepage, QQ_HOMEPAGE, NULL, 0);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>201</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>202</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; if (!has_extra_info)</span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>203</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_notify_user_info_remove_last_item(user_info);</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>199</th><th>204</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>200</th><th>205</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; intro = field_value(info-&gt;intro, NULL, 0);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>201</th><th>206</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; if (intro) {</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>202</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g_string_append_printf(info_text, \"&lt;br /&gt;&lt;br /&gt;&lt;b&gt;%s&lt;/b&gt;&lt;br /&gt;&lt;br /&gt;\", QQ_INTRO);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>203</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g_string_append(info_text, intro);</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>207</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_notify_user_info_add_pair(user_info, QQ_INTRO, intro);</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>204</th><th>208</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span>\u00a0</td>\n                  </tr><tr>\n                          <th>205</th><th>209</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=65#L226\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=228#L230\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>226</th><th>230</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; */</span>\u00a0</td>\n                  </tr><tr>\n                          <th>227</th><th>231</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>228</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; return <del>info_text</del>;</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>232</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; return <ins>user_info</ins>;</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>229</th><th>233</th><td class=\"l\"><span>}</span>\u00a0</td>\n                  </tr><tr>\n                          <th>230</th><th>234</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=65#L262\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=228#L266\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>262</th><th>266</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; for (ql = g_list_last(qd-&gt;info_query); ql != NULL; ql = g_list_previous(ql)) {</span>\u00a0</td>\n                  </tr><tr>\n                          <th>263</th><th>267</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; query = ql-&gt;data;</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>264</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (query-&gt;uid == qd-&gt;uid)<del>&nbsp;</del></span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>268</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (query-&gt;uid == qd-&gt;uid)<ins></ins></span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>265</th><th>269</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; query-&gt;modify_info = TRUE;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>266</th><th>270</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=65#L313\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=228#L317\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>313</th><th>317</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; } else {</span>\u00a0</td>\n                  </tr><tr>\n                          <th>314</th><th>318</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; value = (gchar *) gaim_request_field_string_get_value(field);</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>315</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (value == NULL)<del>&nbsp;</del></span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>319</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (value == NULL)<ins></ins></span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>316</th><th>320</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; value = g_strdup(\"-\");</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>317</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<del>&nbsp;</del></span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>321</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<ins></ins></span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>318</th><th>322</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; value = utf8_to_qq(value, QQ_CHARSET_DEFAULT);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>319</th><th>323</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=65#L381\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=228#L385\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>381</th><th>385</th><td class=\"l\"><span>}</span>\u00a0</td>\n                  </tr><tr>\n                          <th>382</th><th>386</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>383</th><th>\u00a0</th><td class=\"l\"><span>static void add_string_field_to_group(GaimRequestFieldGroup *group,<del>&nbsp;</del></span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>387</th><td class=\"r\"><span>static void add_string_field_to_group(GaimRequestFieldGroup *group,<ins></ins></span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>384</th><th>388</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const gchar *id, const gchar *title, const gchar *value)</span>\u00a0</td>\n                  </tr><tr>\n                          <th>385</th><th>389</th><td class=\"l\"><span>{</span>\u00a0</td>\n                  </tr><tr>\n                          <th>386</th><th>390</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; GaimRequestField *field;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>387</th><th>391</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gchar *utf8_value;</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>388</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp;</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>392</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>389</th><th>393</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; utf8_value = qq_to_utf8(value, QQ_CHARSET_DEFAULT);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>390</th><th>394</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; field = gaim_request_field_string_new(id, title, utf8_value, FALSE);</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=65#L393\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=228#L397\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>393</th><th>397</th><td class=\"l\"><span>}</span>\u00a0</td>\n                  </tr><tr>\n                          <th>394</th><th>398</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>395</th><th>\u00a0</th><td class=\"l\"><span>static void add_choice_field_to_group(GaimRequestFieldGroup *group,<del>&nbsp;</del></span>\u00a0</td>\n                      </tr><tr>\n                        <th>396</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const gchar *id, const gchar *title, const gchar *value,<del>&nbsp;</del></span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>399</th><td class=\"r\"><span>static void add_choice_field_to_group(GaimRequestFieldGroup *group,<ins></ins></span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>400</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const gchar *id, const gchar *title, const gchar *value,<ins></ins></span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>397</th><th>401</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const gchar **choice, gint choice_size)</span>\u00a0</td>\n                  </tr><tr>\n                          <th>398</th><th>402</th><td class=\"l\"><span>{</span>\u00a0</td>\n                  </tr><tr>\n                          <th>399</th><th>403</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; GaimRequestField *field;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>400</th><th>404</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gint i, index;</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>401</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>405</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>402</th><th>406</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; index = choice_index(value, choice, choice_size);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>403</th><th>407</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; field = gaim_request_field_choice_new(id, title, index);</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=65#L474\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=228#L478\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>474</th><th>478</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mid-&gt;info-&gt;qq_show = g_strdup(info-&gt;qq_show);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>475</th><th>479</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mid-&gt;info-&gt;unknown6 = g_strdup(info-&gt;unknown6);</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>476</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>480</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>477</th><th>481</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_request_fields(gc, _(\"Modify my information\"),</span>\u00a0</td>\n                  </tr><tr>\n                          <th>478</th><th>482</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _(\"Modify my information\"), NULL, fields,</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=65#L507\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=228#L511\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>507</th><th>511</th><td class=\"l\"><span>}</span>\u00a0</td>\n                  </tr><tr>\n                          <th>508</th><th>512</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"first\">\n                          <th>\u00a0</th><th>513</th><td class=\"r\"><ins>static void _qq_send_packet_modify_face(GaimConnection *gc, gint face_num)</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>514</th><td class=\"r\"><ins>{</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>515</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; GaimAccount *account = gaim_connection_get_account(gc);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>516</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; GaimPresence *presence = gaim_account_get_presence(account);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>517</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; qq_data *qd = (qq_data *) gc-&gt;proto_data;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>518</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; gint offset;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>519</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>520</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; if(gaim_presence_is_status_primitive_active(presence, GAIM_STATUS_INVISIBLE)) {</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>521</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; offset = 2;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>522</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; } else if(gaim_presence_is_status_primitive_active(presence, GAIM_STATUS_AWAY)</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>523</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; || gaim_presence_is_status_primitive_active(presence, GAIM_STATUS_EXTENDED_AWAY)) {</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>524</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; offset = 1;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>525</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; } else {</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>526</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; offset = 0;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>527</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>528</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>529</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; qd-&gt;my_icon = 3 * (face_num - 1) + offset;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>530</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; qd-&gt;modifying_face = TRUE;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>531</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; qq_send_packet_get_info(gc, qd-&gt;uid, FALSE);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>532</th><td class=\"r\"><ins>}</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>533</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>534</th><td class=\"r\"><ins>void qq_set_buddy_icon_for_user(GaimAccount *account, const gchar *who, const gchar *iconfile)</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>535</th><td class=\"r\"><ins>{</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>536</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; FILE *file;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>537</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; struct stat st;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>538</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>539</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; g_return_if_fail(g_stat(iconfile, &amp;st) == 0);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>540</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; file = g_fopen(iconfile, \"rb\");</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>541</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; if (file) {</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>542</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; GaimBuddyIcon *icon;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>543</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; size_t data_len;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>544</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gchar *data = g_new(gchar, st.st_size + 1);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>545</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; data_len = fread(data, 1, st.st_size, file);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>546</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fclose(file);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>547</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_buddy_icons_set_for_user(account, who, data, data_len);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>548</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; icon = gaim_buddy_icons_find(account, who);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>549</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_buddy_icon_set_path(icon, iconfile);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>550</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>551</th><td class=\"r\"><ins>}</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>552</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>553</th><td class=\"r\"><ins>/* TODO: custom faces for QQ members and users with level &gt;= 16 */</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>554</th><td class=\"r\"><ins>void qq_set_my_buddy_icon(GaimConnection *gc, const gchar *iconfile)</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>555</th><td class=\"r\"><ins>{</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>556</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; gchar *icon;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>557</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; gint icon_num;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>558</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; gint icon_len;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>559</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; GaimAccount *account = gaim_connection_get_account(gc);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>560</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; const gchar *icon_path = gaim_account_get_buddy_icon_path(account);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>561</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; const gchar *buddy_icon_dir = qq_buddy_icon_dir();</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>562</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; gint prefix_len = strlen(QQ_ICON_PREFIX);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>563</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; gint suffix_len = strlen(QQ_ICON_SUFFIX);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>564</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; gint dir_len = strlen(buddy_icon_dir);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>565</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; gchar *errmsg = g_strconcat(_(\"You are attempting to set a custom face. Gaim currently only allows the standard faces. Please choose an image from \"), buddy_icon_dir, \".\", NULL);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>566</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; gboolean icon_global = gaim_account_get_bool(gc-&gt;account, \"use-global-buddyicon\", TRUE);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>567</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>568</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; if (!icon_path)</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>569</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; icon_path = \"\";</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>570</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>571</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; icon_len = strlen(icon_path) - dir_len - 1 - prefix_len - suffix_len;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>572</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>573</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /* make sure we're using an appropriate icon */</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>574</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; if (!(g_ascii_strncasecmp(icon_path, buddy_icon_dir, dir_len) == 0</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>575</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; icon_path[dir_len] == G_DIR_SEPARATOR</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>576</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; g_ascii_strncasecmp(icon_path + dir_len + 1, QQ_ICON_PREFIX, prefix_len) == 0</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>577</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; g_ascii_strncasecmp(icon_path + dir_len + 1 + prefix_len + icon_len, QQ_ICON_SUFFIX, suffix_len) == 0</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>578</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; icon_len &lt;= 3)) {</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>579</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (icon_global)</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>580</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_debug(GAIM_DEBUG_ERROR, \"QQ\", \"%s\\n\", errmsg);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>581</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>582</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_notify_error(gc, _(\"Invalid QQ Face\"), errmsg, NULL);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>583</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g_free(errmsg);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>584</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>585</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>586</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /* strip everything but number */</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>587</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; icon = g_strndup(icon_path + dir_len + 1 + prefix_len, icon_len);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>588</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; icon_num = strtol(icon, NULL, 10);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>589</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; g_free(icon);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>590</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /* ensure face number in proper range */</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>591</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; if (icon_num &gt; QQ_FACES) {</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>592</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (icon_global)</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>593</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_debug(GAIM_DEBUG_ERROR, \"QQ\", \"%s\\n\", errmsg);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>594</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>595</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_notify_error(gc, _(\"Invalid QQ Face\"), errmsg, NULL);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>596</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g_free(errmsg);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>597</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>598</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>599</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; g_free(errmsg);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>600</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /* tell server my icon changed */</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>601</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; _qq_send_packet_modify_face(gc, icon_num);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>602</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /* display in blist */</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>603</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; qq_set_buddy_icon_for_user(account, account-&gt;username, icon_path);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>604</th><td class=\"r\"><ins>}</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>605</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>606</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>607</th><td class=\"r\"><ins>static void _qq_update_buddy_icon(GaimAccount *account, const gchar *name, gint face)</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>608</th><td class=\"r\"><ins>{</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>609</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; gchar *icon_path;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>610</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; GaimBuddyIcon *icon = gaim_buddy_icons_find(account, name);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>611</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; gchar *icon_num_str = face_to_icon_str(face);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>612</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; const gchar *old_path = gaim_buddy_icon_get_path(icon);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>613</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; const gchar *buddy_icon_dir = qq_buddy_icon_dir();</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>614</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>615</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; icon_path = g_strconcat(buddy_icon_dir, G_DIR_SEPARATOR_S, QQ_ICON_PREFIX, </ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>616</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; icon_num_str, QQ_ICON_SUFFIX, NULL);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>617</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; if (icon == NULL || old_path == NULL </ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>618</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; || g_ascii_strcasecmp(icon_path, old_path) != 0)</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>619</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; qq_set_buddy_icon_for_user(account, name, icon_path);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>620</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; g_free(icon_num_str);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>621</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; g_free(icon_path);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>622</th><td class=\"r\"><ins>}</ins>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>\u00a0</th><th>623</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>509</th><th>624</th><td class=\"l\"><span>/* after getting info or modify myself, refresh the buddy list accordingly */</span>\u00a0</td>\n                  </tr><tr>\n                          <th>510</th><th>625</th><td class=\"l\"><span>void qq_refresh_buddy_and_myself(contact_info *info, GaimConnection *gc)</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=65#L513\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=228#L628\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>513</th><th>628</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; qq_data *qd;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>514</th><th>629</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; qq_buddy *q_bud;</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>515</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gchar *alias_utf8;</span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>630</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gchar *alias_utf8, *gaim_name;</span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>631</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; GaimAccount *account = gaim_connection_get_account(gc);</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>516</th><th>632</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>517</th><th>633</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; qd = (qq_data *) gc-&gt;proto_data;</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"last first\">\n                          <th>\u00a0</th><th>634</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; gaim_name = uid_to_gaim_name(strtol(info-&gt;uid, NULL, 10));</ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>518</th><th>635</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>519</th><th>636</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; alias_utf8 = qq_to_utf8(info-&gt;nick, QQ_CHARSET_DEFAULT);</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=65#L521\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=228#L638\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>521</th><th>638</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; qd-&gt;my_icon = strtol(info-&gt;face, NULL, 10);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>522</th><th>639</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (alias_utf8 != NULL)</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>523</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_account_set_alias(<del>gc-&gt;</del>account, alias_utf8);</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>640</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_account_set_alias(<ins></ins>account, alias_utf8);</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>524</th><th>641</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span>\u00a0</td>\n                  </tr><tr>\n                          <th>525</th><th>642</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; /* update buddy list (including myself, if myself is the buddy) */</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>526</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; b = gaim_find_buddy(gc-&gt;account, <del>uid_to_gaim_name(strtol(info-&gt;uid, NULL, 10))</del>);</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>643</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; b = gaim_find_buddy(gc-&gt;account, <ins>gaim_name</ins>);</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>527</th><th>644</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; q_bud = (b == NULL) ? NULL : (qq_buddy *) b-&gt;proto_data;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>528</th><th>645</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; if (q_bud != NULL) {&nbsp; &nbsp; /* I have this buddy */</span>\u00a0</td>\n                  </tr><tr>\n                          <th>529</th><th>646</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; q_bud-&gt;age = strtol(info-&gt;age, NULL, 10);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>530</th><th>647</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; q_bud-&gt;gender = strtol(info-&gt;gender, NULL, 10);</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>531</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; q_bud-&gt;<del>icon</del> = strtol(info-&gt;face, NULL, 10);</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>648</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; q_bud-&gt;<ins>face</ins> = strtol(info-&gt;face, NULL, 10);</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>532</th><th>649</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (alias_utf8 != NULL)</span>\u00a0</td>\n                  </tr><tr>\n                          <th>533</th><th>650</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; q_bud-&gt;nickname = g_strdup(alias_utf8);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>534</th><th>651</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; qq_update_buddy_contact(gc, q_bud);</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>535</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>652</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _qq_update_buddy_icon(gc-&gt;account, gaim_name, q_bud-&gt;face);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>653</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>654</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; g_free(gaim_name);</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>536</th><th>655</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; g_free(alias_utf8);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>537</th><th>656</th><td class=\"l\"><span>}</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=65#L547\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=228#L666\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>547</th><th>666</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; contact_info *info;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>548</th><th>667</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; GList *list, *query_list;</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>549</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; G<del>String *info_text</del>;</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>668</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; G<ins>aimNotifyUserInfo *user_info</ins>;</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>550</th><th>669</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>551</th><th>670</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; g_return_if_fail(buf != NULL &amp;&amp; buf_len != 0);</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=65#L563\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=228#L682\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>563</th><th>682</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; info = (contact_info *) segments;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>564</th><th>683</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (qd-&gt;modifying_face &amp;&amp; strtol(info-&gt;face, NULL, 10) != qd-&gt;my_icon) {</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>565</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gchar *icon = g_strdup_printf(\"%<del>i</del>\", qd-&gt;my_icon);</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>684</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gchar *icon = g_strdup_printf(\"%<ins>d</ins>\", qd-&gt;my_icon);</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>566</th><th>685</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; qd-&gt;modifying_face = FALSE;</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>567</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; memcpy(info-&gt;face, icon, 2);</span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>686</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g_free(info-&gt;face);</span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>687</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; info-&gt;face = icon;</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>568</th><th>688</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; qq_send_packet_modify_info(gc, segments);</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"rem\">\n                  <tr class=\"last first\">\n                          <th>569</th><th>\u00a0</th><td class=\"l\"><del>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g_free(icon);</del>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>570</th><th>689</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span>\u00a0</td>\n                  </tr><tr>\n                          <th>571</th><th>690</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=65#L578\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=228#L697\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>578</th><th>697</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (query-&gt;uid == atoi(info-&gt;uid)) {</span>\u00a0</td>\n                  </tr><tr>\n                          <th>579</th><th>698</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (query-&gt;show_window) {</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>580</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <del>info_text = info_to_str</del>(info);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>581</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_notify_userinfo(gc, info-&gt;uid, <del>info_text-&gt;str</del>, NULL, NULL);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>582</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g<del>_string_free(info_text, TRUE</del>);</span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>699</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <ins>user_info = info_to_notify_user_info</ins>(info);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>700</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_notify_userinfo(gc, info-&gt;uid, <ins>user_info</ins>, NULL, NULL);</span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>701</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g<ins>aim_notify_user_info_destroy(user_info</ins>);</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>583</th><th>702</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else if (query-&gt;modify_info) {</span>\u00a0</td>\n                  </tr><tr>\n                          <th>584</th><th>703</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; create_modify_info_dialogue(gc, info);</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=65#L613\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/qq/buddy_info.c?rev=228#L732\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>613</th><th>732</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gaim_debug(GAIM_DEBUG_INFO, \"QQ\", \"%d info queries are freed!\\n\", i);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>614</th><th>733</th><td class=\"l\"><span>}</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"first\">\n                          <th>\u00a0</th><th>734</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>735</th><td class=\"r\"><ins>void qq_send_packet_get_level(GaimConnection *gc, guint32 uid)</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>736</th><td class=\"r\"><ins>{</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>737</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; guint8 buf[5];</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>738</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; guint32 tmp = g_htonl(uid);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>739</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; buf[0] = 0;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>740</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; memcpy(buf+1, &amp;tmp, 4);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>741</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; qq_send_cmd(gc, QQ_CMD_GET_LEVEL, TRUE, 0, TRUE, buf, 5);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>742</th><td class=\"r\"><ins>}</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>743</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>744</th><td class=\"r\"><ins>/*</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>745</th><td class=\"r\"><ins>void qq_send_packet_get_buddies_levels(GaimConnection *gc)</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>746</th><td class=\"r\"><ins>{</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>747</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; guint8 *buf, *tmp, size;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>748</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; qq_buddy *q_bud;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>749</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; qq_data *qd = (qq_data *) gc-&gt;proto_data;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>750</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; GList *node = qd-&gt;buddies;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>751</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>752</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; if (qd-&gt;buddies) {</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>753</th><td class=\"r\"><ins>*/</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>754</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* server only sends back levels for online buddies, no point</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>755</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * in asking for anyone else */</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>756</th><td class=\"r\"><ins>/*</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>757</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; size = 4*g_list_length(qd-&gt;buddies) + 1;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>758</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; buf = g_new0(guint8, size);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>759</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmp = buf + 1;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>760</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>761</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while (node != NULL) {</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>762</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; guint32 tmp4;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>763</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; q_bud = (qq_buddy *) node-&gt;data;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>764</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (q_bud != NULL) {</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>765</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmp4 = g_htonl(q_bud-&gt;uid);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>766</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; memcpy(tmp, &amp;tmp4, 4);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>767</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmp += 4;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>768</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>769</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; node = node-&gt;next;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>770</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>771</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; qq_send_cmd(gc, QQ_CMD_GET_LEVEL, TRUE, 0, TRUE, buf, size);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>772</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g_free(buf);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>773</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>774</th><td class=\"r\"><ins>}</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>775</th><td class=\"r\"><ins>*/</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>776</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>777</th><td class=\"r\"><ins>void qq_process_get_level_reply(guint8 *buf, gint buf_len, GaimConnection *gc)</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>778</th><td class=\"r\"><ins>{</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>779</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; guint32 uid, onlineTime;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>780</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; guint16 level, timeRemainder;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>781</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; gchar *gaim_name;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>782</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; GaimBuddy *b;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>783</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; qq_buddy *q_bud;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>784</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; gint decr_len, i;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>785</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; guint8 *decr_buf, *tmp;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>786</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; GaimAccount *account = gaim_connection_get_account(gc);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>787</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; qq_data *qd = (qq_data *) gc-&gt;proto_data;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>788</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>789</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; decr_len = buf_len;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>790</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; decr_buf = g_new0(guint8, buf_len);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>791</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; if (!qq_crypt(DECRYPT, buf, buf_len, qd-&gt;session_key, decr_buf, &amp;decr_len)) {</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>792</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_debug(GAIM_DEBUG_ERROR, \"QQ\", \"Couldn't decrypt get level packet\\n\");</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>793</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>794</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>795</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; decr_len--; </ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>796</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; if (decr_len % 12 != 0) {</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>797</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_debug(GAIM_DEBUG_ERROR, \"QQ\", </ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>798</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"Get levels list of abnormal length. Truncating last %d bytes.\\n\", decr_len % 12);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>799</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; decr_len -= (decr_len % 12);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>800</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>801</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>802</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; tmp = decr_buf + 1;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>803</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /* this byte seems random */</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>804</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; /*</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>805</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; gaim_debug(GAIM_DEBUG_INFO, \"QQ\", \"Byte one of get_level packet: %d\\n\", buf[0]);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>806</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; */</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>807</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; for (i = 0; i &lt; decr_len; i += 12) {</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>808</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; uid = g_ntohl(*(guint32 *) tmp);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>809</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmp += 4;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>810</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; onlineTime = g_ntohl(*(guint32 *) tmp);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>811</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmp += 4;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>812</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; level = g_ntohs(*(guint16 *) tmp);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>813</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmp += 2;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>814</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; timeRemainder = g_ntohs(*(guint16 *) tmp);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>815</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmp += 2;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>816</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /*</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>817</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_debug(GAIM_DEBUG_INFO, \"QQ\", \"Level packet entry:\\nuid: %d\\nonlineTime: %d\\nlevel: %d\\ntimeRemainder: %d\\n\", </ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>818</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; uid, onlineTime, level, timeRemainder);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>819</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>820</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_name = uid_to_gaim_name(uid);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>821</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; b = gaim_find_buddy(account, gaim_name);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>822</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; q_bud = (b == NULL) ? NULL : (qq_buddy *) b-&gt;proto_data;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>823</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>824</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (q_bud != NULL || uid == qd-&gt;uid) {</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>825</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (q_bud) {</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>826</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; q_bud-&gt;onlineTime = onlineTime;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>827</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; q_bud-&gt;level = level;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>828</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; q_bud-&gt;timeRemainder = timeRemainder;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>829</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>830</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (uid == qd-&gt;uid) {</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>831</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; qd-&gt;my_level = level;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>832</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>833</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>834</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_debug(GAIM_DEBUG_ERROR, \"QQ\", </ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>835</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"Got an online buddy %d, but not in my buddy list\\n\", uid);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>836</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>837</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g_free(gaim_name);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>838</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>839</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; g_free(decr_buf);</ins>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>\u00a0</th><th>840</th><td class=\"r\"><ins>}</ins>\u00a0</td>\n                  </tr>\n            </tbody>\n        </table>\n      </li>\n  </ul>\n</div>\n        <div id=\"help\"><strong>Note:</strong> See <a href=\"/LUCICodeRepository/nomaticIM/wiki/TracChangeset\">TracChangeset</a>\n          for help on using the changeset viewer.</div>\n      </div>\n    </div>\n    <div id=\"altlinks\">\n      <h3>Download in other formats:</h3>\n      <ul>\n        <li class=\"first\">\n          <a rel=\"nofollow\" href=\"?format=diff&amp;new=228\" class=\"diff\">Unified Diff</a>\n        </li><li class=\"last\">\n          <a rel=\"nofollow\" href=\"?format=zip&amp;new=228\" class=\"zip\">Zip Archive</a>\n        </li>\n      </ul>\n    </div>\n    </div>\n    <div id=\"footer\" lang=\"en\" xml:lang=\"en\"><hr />\n      <a id=\"tracpowered\" href=\"http://trac.edgewall.org/\"><img src=\"/LUCICodeRepository/nomaticIM/chrome/common/trac_logo_mini.png\" height=\"30\" width=\"107\" alt=\"Trac Powered\" /></a>\n      <p class=\"left\">Powered by <a href=\"/LUCICodeRepository/nomaticIM/about\"><strong>Trac 1.0.1</strong></a><br />\n        By <a href=\"http://www.edgewall.org/\">Edgewall Software</a>.</p>\n      <p class=\"right\">All content copyright 2007-2008 by LUCI <br /><a href=\"http://luci.ics.uci.edu/\">http://luci.ics.uci.edu/</a></p>\n    </div>\n\t\t<div id=\"sitefooter\">\n\t\t\t<script src=\"http://www.google-analytics.com/urchin.js\" type=\"text/javascript\">\n\t\t\t</script>\n\t\t\t<script type=\"text/javascript\">\n\t\t\t\t_uacct = \"UA-338915-2\";\n\t\t\t\turchinTracker();\n\t\t\t</script>\n\t\t</div>\n\t</body>\n</html>", "id": 39938.0}