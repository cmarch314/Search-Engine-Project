{"text": "View Javadoc 1 package swirl workspace viz pie actions 2 3 import java awt Component 4 import java awt event ActionEvent 5 import java io File 6 import java io FileOutputStream 7 8 import javax swing AbstractAction 9 import javax swing ImageIcon 1 import javax swing JFileChooser 11 12 import org apache commons logging Log 13 import org apache commons logging LogFactory 14 import org dom4j Document 15 import org dom4j io DOMReader 16 import org w3c dom svg SVGDocument 17 18 import swirl workspace common DocumentLogger 19 import swirl workspace viz SwirlFileFilter 2 21 22 DOCUMENT ME 23 24 author bpillet 25 26 public class ScreenShotAction extends AbstractAction 27 28 TODO 29 private static final long serialVersionUID 1L 3 31 TODO 32 private DOMReader reader new DOMReader 33 34 TODO 35 private File currentExportPath new File 36 37 TODO 38 private Log log LogFactory getLog this getClass 39 4 TODO 41 private SVGDocument svgDoc 42 43 44 Creates a new ScreenShotAction object 45 46 param doc TODO 47 48 public ScreenShotAction SVGDocument doc 49 5 super 51 svgDoc doc 52 putValue ACTION COMMAND KEY screenshot 53 54 The key used to determine the command string for the ActionEvent that 55 will be created when an Action is going to be notified as the result 56 of residing in a Keymap associated with a JComponent 57 putValue LONG DESCRIPTION 58 Captures the pie view as an SVG document and saves it to a file 59 6 The key used for storing a longer description for the action could 61 be used for context sensitive help 62 putValue MNEMONIC KEY new Character S 63 The key used for storing an int key code to be used as the mnemonic 64 for the action 65 putValue NAME Screenshot 66 67 The key used for storing the name for the action used for a menu or 68 button 69 putValue SHORT DESCRIPTION Save as SVG document 7 71 The key used for storing a short description for the action used for 72 tooltip text 73 putValue SMALL ICON new ImageIcon resources screenshot gif 74 75 The key used for storing a small icon for the action used for 76 toolbar buttons 77 78 79 8 TODO 81 82 param e TODO 83 84 public void actionPerformed ActionEvent e 85 86 Document document reader read svgDoc 87 88 DocumentLogger logDocument log svgDoc svgDoc 89 DocumentLogger logDocument log realDoc document 9 91 File f null 92 JFileChooser fileChooser new JFileChooser currentExportPath 93 getAbsoluteFile 94 95 fileChooser setFileSelectionMode JFileChooser FILES AND DIRECTORIES 96 fileChooser setDialogTitle Save screenshot as 97 fileChooser setFileHidingEnabled false 98 fileChooser addChoosableFileFilter new SwirlFileFilter 99 1 int choice fileChooser showSaveDialog Component e getSource 1 1 1 2 if choice JFileChooser APPROVE OPTION 1 3 1 4 f fileChooser getSelectedFile 1 5 1 6 if f null 1 7 1 8 try 1 9 11 DocumentLogger writeDocument document 111 new FileOutputStream f 112 113 catch Exception ex 114 115 log error ex ex 116 117 118 119 12 This page was automatically generated by Maven", "_id": "http://drzaius.ics.uci.edu/~swirl/impromptu-0.20/xref/swirl/workspace/viz/pie/actions/ScreenShotAction.html", "title": "screenshotaction xref", "html": "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\n<head>\n<meta http-equiv=\"content-type\" content=\"text/html; charset=ISO-8859-1\" /><title>ScreenShotAction xref</title>\n<link type=\"text/css\" rel=\"stylesheet\" href=\"../../../../../stylesheet.css\" />\n</head>\n<body>\n<div id=\"overview\"><a href=\"../../../../../../apidocs/swirl/workspace/viz/pie/actions/ScreenShotAction.html\">View Javadoc</a></div><pre>\n\n<a name=\"1\" href=\"#1\">1</a>   <strong>package</strong> <a href=\"../../../../../swirl/workspace/viz/pie/actions/package-summary.html\">swirl.workspace.viz.pie.actions</a>;\n<a name=\"2\" href=\"#2\">2</a>   \n<a name=\"3\" href=\"#3\">3</a>   <strong>import</strong> java.awt.Component;\n<a name=\"4\" href=\"#4\">4</a>   <strong>import</strong> java.awt.event.ActionEvent;\n<a name=\"5\" href=\"#5\">5</a>   <strong>import</strong> java.io.File;\n<a name=\"6\" href=\"#6\">6</a>   <strong>import</strong> java.io.FileOutputStream;\n<a name=\"7\" href=\"#7\">7</a>   \n<a name=\"8\" href=\"#8\">8</a>   <strong>import</strong> javax.swing.AbstractAction;\n<a name=\"9\" href=\"#9\">9</a>   <strong>import</strong> javax.swing.ImageIcon;\n<a name=\"10\" href=\"#10\">10</a>  <strong>import</strong> javax.swing.JFileChooser;\n<a name=\"11\" href=\"#11\">11</a>  \n<a name=\"12\" href=\"#12\">12</a>  <strong>import</strong> org.apache.commons.logging.Log;\n<a name=\"13\" href=\"#13\">13</a>  <strong>import</strong> org.apache.commons.logging.LogFactory;\n<a name=\"14\" href=\"#14\">14</a>  <strong>import</strong> org.dom4j.Document;\n<a name=\"15\" href=\"#15\">15</a>  <strong>import</strong> org.dom4j.io.DOMReader;\n<a name=\"16\" href=\"#16\">16</a>  <strong>import</strong> org.w3c.dom.svg.SVGDocument;\n<a name=\"17\" href=\"#17\">17</a>  \n<a name=\"18\" href=\"#18\">18</a>  <strong>import</strong> swirl.workspace.common.DocumentLogger;\n<a name=\"19\" href=\"#19\">19</a>  <strong>import</strong> swirl.workspace.viz.SwirlFileFilter;\n<a name=\"20\" href=\"#20\">20</a>  \n<a name=\"21\" href=\"#21\">21</a>  <em>/**<em>*</em></em>\n<a name=\"22\" href=\"#22\">22</a>  <em> * DOCUMENT ME!</em>\n<a name=\"23\" href=\"#23\">23</a>  <em> *</em>\n<a name=\"24\" href=\"#24\">24</a>  <em> * @author bpillet</em>\n<a name=\"25\" href=\"#25\">25</a>  <em> */</em>\n<a name=\"26\" href=\"#26\">26</a>  <strong>public</strong> <strong>class</strong> <a href=\"../../../../../swirl/workspace/viz/pie/actions/ScreenShotAction.html\">ScreenShotAction</a> <strong>extends</strong> AbstractAction\n<a name=\"27\" href=\"#27\">27</a>  {\n<a name=\"28\" href=\"#28\">28</a>      <em>/**<em>* TODO */</em></em>\n<a name=\"29\" href=\"#29\">29</a>      <strong>private</strong> <strong>static</strong> <strong>final</strong> <strong>long</strong> serialVersionUID = 1L;\n<a name=\"30\" href=\"#30\">30</a>  \n<a name=\"31\" href=\"#31\">31</a>      <em>/**<em>* TODO */</em></em>\n<a name=\"32\" href=\"#32\">32</a>      <strong>private</strong> DOMReader reader = <strong>new</strong> DOMReader();\n<a name=\"33\" href=\"#33\">33</a>  \n<a name=\"34\" href=\"#34\">34</a>      <em>/**<em>* TODO */</em></em>\n<a name=\"35\" href=\"#35\">35</a>      <strong>private</strong> File currentExportPath = <strong>new</strong> File(<span class=\"string\">\"\"</span>);\n<a name=\"36\" href=\"#36\">36</a>  \n<a name=\"37\" href=\"#37\">37</a>      <em>/**<em>* TODO */</em></em>\n<a name=\"38\" href=\"#38\">38</a>      <strong>private</strong> Log log = LogFactory.getLog(<strong>this</strong>.getClass());\n<a name=\"39\" href=\"#39\">39</a>  \n<a name=\"40\" href=\"#40\">40</a>      <em>/**<em>* TODO */</em></em>\n<a name=\"41\" href=\"#41\">41</a>      <strong>private</strong> SVGDocument svgDoc;\n<a name=\"42\" href=\"#42\">42</a>  \n<a name=\"43\" href=\"#43\">43</a>      <em>/**<em>*</em></em>\n<a name=\"44\" href=\"#44\">44</a>  <em>     * Creates a new ScreenShotAction object.</em>\n<a name=\"45\" href=\"#45\">45</a>  <em>     *</em>\n<a name=\"46\" href=\"#46\">46</a>  <em>     * @param doc TODO</em>\n<a name=\"47\" href=\"#47\">47</a>  <em>     */</em>\n<a name=\"48\" href=\"#48\">48</a>      <strong>public</strong> <a href=\"../../../../../swirl/workspace/viz/pie/actions/ScreenShotAction.html\">ScreenShotAction</a>(SVGDocument doc)\n<a name=\"49\" href=\"#49\">49</a>      {\n<a name=\"50\" href=\"#50\">50</a>          <strong>super</strong>();\n<a name=\"51\" href=\"#51\">51</a>          svgDoc = doc;\n<a name=\"52\" href=\"#52\">52</a>          putValue(ACTION_COMMAND_KEY, <span class=\"string\">\"screenshot\"</span>);\n<a name=\"53\" href=\"#53\">53</a>  \n<a name=\"54\" href=\"#54\">54</a>          <em class=\"comment\">//        The key used to determine the command string for the ActionEvent that</em>\n<a name=\"55\" href=\"#55\">55</a>          <em class=\"comment\">// will be created when an Action is going to be notified as the result</em>\n<a name=\"56\" href=\"#56\">56</a>          <em class=\"comment\">// of residing in a Keymap associated with a JComponent.</em>\n<a name=\"57\" href=\"#57\">57</a>          putValue(LONG_DESCRIPTION,\n<a name=\"58\" href=\"#58\">58</a>                   <span class=\"string\">\"Captures the pie view as an SVG document and saves it to a file\"</span>);\n<a name=\"59\" href=\"#59\">59</a>  \n<a name=\"60\" href=\"#60\">60</a>          <em class=\"comment\">//        The key used for storing a longer description for the action, could</em>\n<a name=\"61\" href=\"#61\">61</a>          <em class=\"comment\">// be used for context-sensitive help.</em>\n<a name=\"62\" href=\"#62\">62</a>          <em class=\"comment\">//putValue(MNEMONIC_KEY, new Character('S'));</em>\n<a name=\"63\" href=\"#63\">63</a>          <em class=\"comment\">//        The key used for storing an int key code to be used as the mnemonic</em>\n<a name=\"64\" href=\"#64\">64</a>          <em class=\"comment\">// for the action.</em>\n<a name=\"65\" href=\"#65\">65</a>          putValue(NAME, <span class=\"string\">\"Screenshot...\"</span>);\n<a name=\"66\" href=\"#66\">66</a>  \n<a name=\"67\" href=\"#67\">67</a>          <em class=\"comment\">//        The key used for storing the name for the action, used for a menu or</em>\n<a name=\"68\" href=\"#68\">68</a>          <em class=\"comment\">// button.</em>\n<a name=\"69\" href=\"#69\">69</a>          putValue(SHORT_DESCRIPTION, <span class=\"string\">\"Save as SVG document\"</span>);\n<a name=\"70\" href=\"#70\">70</a>  \n<a name=\"71\" href=\"#71\">71</a>          <em class=\"comment\">//        The key used for storing a short description for the action, used for</em>\n<a name=\"72\" href=\"#72\">72</a>          <em class=\"comment\">// tooltip text.</em>\n<a name=\"73\" href=\"#73\">73</a>          putValue(SMALL_ICON, <strong>new</strong> ImageIcon(<span class=\"string\">\"resources/screenshot.gif\"</span>));\n<a name=\"74\" href=\"#74\">74</a>  \n<a name=\"75\" href=\"#75\">75</a>          <em class=\"comment\">//\t\tThe key used for storing a small icon for the action, used for</em>\n<a name=\"76\" href=\"#76\">76</a>          <em class=\"comment\">// toolbar buttons</em>\n<a name=\"77\" href=\"#77\">77</a>      }\n<a name=\"78\" href=\"#78\">78</a>  \n<a name=\"79\" href=\"#79\">79</a>      <em>/**<em>*</em></em>\n<a name=\"80\" href=\"#80\">80</a>  <em>     * TODO</em>\n<a name=\"81\" href=\"#81\">81</a>  <em>     *</em>\n<a name=\"82\" href=\"#82\">82</a>  <em>     * @param e TODO</em>\n<a name=\"83\" href=\"#83\">83</a>  <em>     */</em>\n<a name=\"84\" href=\"#84\">84</a>      <strong>public</strong> <strong>void</strong> actionPerformed(ActionEvent e)\n<a name=\"85\" href=\"#85\">85</a>      {\n<a name=\"86\" href=\"#86\">86</a>          Document document = reader.read(svgDoc);\n<a name=\"87\" href=\"#87\">87</a>  \n<a name=\"88\" href=\"#88\">88</a>          DocumentLogger.logDocument(log, <span class=\"string\">\"svgDoc\"</span>, svgDoc);\n<a name=\"89\" href=\"#89\">89</a>          DocumentLogger.logDocument(log, <span class=\"string\">\"realDoc\"</span>, document);\n<a name=\"90\" href=\"#90\">90</a>  \n<a name=\"91\" href=\"#91\">91</a>          File f = <strong>null</strong>;\n<a name=\"92\" href=\"#92\">92</a>          JFileChooser fileChooser = <strong>new</strong> JFileChooser(currentExportPath\n<a name=\"93\" href=\"#93\">93</a>                                                      .getAbsoluteFile());\n<a name=\"94\" href=\"#94\">94</a>  \n<a name=\"95\" href=\"#95\">95</a>          fileChooser.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);\n<a name=\"96\" href=\"#96\">96</a>          fileChooser.setDialogTitle(<span class=\"string\">\"Save screenshot as...\"</span>);\n<a name=\"97\" href=\"#97\">97</a>          fileChooser.setFileHidingEnabled(false);\n<a name=\"98\" href=\"#98\">98</a>          fileChooser.addChoosableFileFilter(<strong>new</strong> <a href=\"../../../../../swirl/workspace/viz/SwirlFileFilter.html\">SwirlFileFilter</a>());\n<a name=\"99\" href=\"#99\">99</a>  \n<a name=\"100\" href=\"#100\">100</a>         <strong>int</strong> choice = fileChooser.showSaveDialog((Component)e.getSource());\n<a name=\"101\" href=\"#101\">101</a> \n<a name=\"102\" href=\"#102\">102</a>         <strong>if</strong>(choice == JFileChooser.APPROVE_OPTION)\n<a name=\"103\" href=\"#103\">103</a>         {\n<a name=\"104\" href=\"#104\">104</a>             f = fileChooser.getSelectedFile();\n<a name=\"105\" href=\"#105\">105</a> \n<a name=\"106\" href=\"#106\">106</a>             <strong>if</strong>(f != <strong>null</strong>)\n<a name=\"107\" href=\"#107\">107</a>             {\n<a name=\"108\" href=\"#108\">108</a>                 <strong>try</strong>\n<a name=\"109\" href=\"#109\">109</a>                 {\n<a name=\"110\" href=\"#110\">110</a>                     DocumentLogger.writeDocument(document,\n<a name=\"111\" href=\"#111\">111</a>                                                  <strong>new</strong> FileOutputStream(f));\n<a name=\"112\" href=\"#112\">112</a>                 }\n<a name=\"113\" href=\"#113\">113</a>                 <strong>catch</strong>(Exception ex)\n<a name=\"114\" href=\"#114\">114</a>                 {\n<a name=\"115\" href=\"#115\">115</a>                     log.error(ex, ex);\n<a name=\"116\" href=\"#116\">116</a>                 }\n<a name=\"117\" href=\"#117\">117</a>             }\n<a name=\"118\" href=\"#118\">118</a>         }\n<a name=\"119\" href=\"#119\">119</a>     }\n<a name=\"120\" href=\"#120\">120</a> }\n</pre>\n<hr/><div id=\"footer\">This page was automatically generated by <a href=\"http://maven.apache.org/\">Maven</a></div></body>\n</html>\n\n", "id": 32849.0}