{"text": "Search LoginPreferencesHelp GuideAbout Trac WikiTimelineRoadmapBrowse SourceView TicketsSearch Context Navigation Previous ChangeNext Change Changeset 19 for trunk Nomatic Gaim current client gtk plugins nomatic nomatic c View differences inlineside by side Show lines around each change Show the changes in full context Ignore Blank lines Case changes White space changes Timestamp Feb 21 2 7 6 28 16 AM 8 years ago Author djp3Message Added geopoke File 1 edited trunk Nomatic Gaim current client gtk plugins nomatic nomatic c modified 5 diffs Legend UnmodifiedAddedRemoved trunk Nomatic Gaim current client gtk plugins nomatic nomatic c r174 r19 2929 include network h 3 3 include gtkblist h 31 include gtkutils h 32 include gtknotify h 3133 include savedstatuses h 34 include conversation h 35 include blist h 3236 3337 Nomatic Gaim headers 3943 include contextChooser h 4 44 include networkHelper h 45 include geopoke h 4146 4247 Local function declarations 1972 2 return FALSE 1982 3 199 2 4 2 5 Called when geopoke is selected from buddy list node menu 2 6void geopoke action cb GaimBlistNode node gpointer data 2 7 const char geopoke format string Geopoke I am a href s here a 2 8 2 9 GaimBuddy buddy 21 GaimNotifyUiOps ops 211 212 g return if fail GAIM BLIST NODE IS BUDDY node 213 buddy GaimBuddy node 214 215 Open the URL we re sending in a browser 216 TODO Send a name instead of Me as the map s label 217 char url make google maps url infer location Me 218 ops gaim gtk notify get ui ops 219 ops notify uri url 22 221 Construct the string to send 222 char buffer calloc strlen geopoke format string strlen url sizeof char 223 sprintf buffer geopoke format string url 224 225 Send the URL 226 GaimConversation gc gaim conversation new GAIM CONV TYPE IM 227 gaim buddy get account buddy 228 gaim buddy get name buddy 229 gaim conv im send GAIM CONV IM gc buffer 23 231 Free everything 232 free buffer 233 free url 234 235 236 Called when buddy in buddy list gets right clicked 237static void blist node extended menu GaimBlistNode node GList menu 238 GaimBuddy buddy 239 GaimMenuAction menu action 24 241 g return if fail GAIM BLIST NODE IS BUDDY node 242 243 buddy GaimBuddy node 244 menu action gaim menu action new Geopoke 245 GAIM CALLBACK geopoke action cb NULL NULL 246 menu g list append menu menu action 247 2 248 2 1249gboolean plugin load GaimPlugin plugin 21226 gaim signal connect gaim gtk blist get handle gtkblist created plugin GAIM CALLBACK makeGUI plugin 213261 262 gaim signal connect gaim blist get handle blist node extended menu 263 plugin GAIM CALLBACK blist node extended menu NULL 264 214265 return TRUE 215266 21927 plugin unload GaimPlugin plugin 22 271 272 gaim signal disconnect gaim blist get handle blist node extended menu 273 plugin GAIM CALLBACK blist node extended menu 221274 featureCollectionShutdown 222275 presenceShutdown Note See TracChangeset for help on using the changeset viewer Download in other formats Unified Diff Zip Archive Powered by Trac 1 1 By Edgewall Software All content copyright 2 7 2 8 by LUCI http luci ics uci edu ", "_id": "http://djp3-pc2.ics.uci.edu/LUCICodeRepository/nomaticIM/changeset/190/trunk/Nomatic*Gaim/current/client/gtk/plugins/nomatic/nomatic.c", "title": "\n      changeset 190 for trunk/nomatic*gaim/current/client/gtk/plugins/nomatic/nomatic.c \u2013 nomatic*im\n    ", "html": "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n  \n  \n\n  \n\n\n  <head>\n\t\t<title>\n      Changeset 190 for trunk/Nomatic*Gaim/current/client/gtk/plugins/nomatic/nomatic.c \u2013 Nomatic*IM\n    </title><meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" /><meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" /><link rel=\"search\" href=\"/LUCICodeRepository/nomaticIM/search\" /><link rel=\"help\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracGuide\" /><link rel=\"alternate\" href=\"?format=diff&amp;new=190\" type=\"text/plain\" class=\"diff\" title=\"Unified Diff\" /><link rel=\"alternate\" href=\"?format=zip&amp;new=190\" type=\"application/zip\" class=\"zip\" title=\"Zip Archive\" /><link rel=\"next\" href=\"/LUCICodeRepository/nomaticIM/changeset/193/trunk/Nomatic*Gaim/current/client/gtk/plugins/nomatic/nomatic.c\" title=\"Changeset 193 for trunk/Nomatic*Gaim/current/client/gtk/plugins/nomatic/nomatic.c\" /><link rel=\"start\" href=\"/LUCICodeRepository/nomaticIM/wiki\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/chrome/common/css/trac.css\" type=\"text/css\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/chrome/common/css/changeset.css\" type=\"text/css\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/chrome/common/css/diff.css\" type=\"text/css\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/chrome/common/css/code.css\" type=\"text/css\" /><link rel=\"prev\" href=\"/LUCICodeRepository/nomaticIM/changeset/174/trunk/Nomatic*Gaim/current/client/gtk/plugins/nomatic/nomatic.c\" title=\"Changeset 174 for trunk/Nomatic*Gaim/current/client/gtk/plugins/nomatic/nomatic.c\" /><link rel=\"shortcut icon\" href=\"http://luci.ics.uci.edu/logo32by32.gif\" type=\"image/gif\" /><link rel=\"icon\" href=\"http://luci.ics.uci.edu/logo32by32.gif\" type=\"image/gif\" /><link type=\"application/opensearchdescription+xml\" rel=\"search\" href=\"/LUCICodeRepository/nomaticIM/search/opensearch\" title=\"Search Nomatic*IM\" /><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/jquery.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/babel.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/messages/en_US.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/trac.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/search.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/diff.js\"></script><script type=\"text/javascript\">\n      jQuery(document).ready(function($) {\n        $(\".trac-toggledeleted\").show().click(function() {\n                  $(this).siblings().find(\".trac-deleted\").toggle();\n                  return false;\n        }).click();\n        $(\"#content\").find(\"li.entry h2 a\").parent().addAnchor(_(\"Link to this diff\"));\n      });\n    </script>\n\t</head>\n  <body>\n    <div id=\"banner\">\n      <div id=\"header\">\n        <a id=\"logo\" href=\"http://luci.ics.uci.edu/#code\"><img src=\"http://luci.ics.uci.edu/blog/archives/LUCIhorzTight.jpg\" alt=\"LUCI Code Repository\" /></a>\n      </div>\n      <form id=\"search\" action=\"/LUCICodeRepository/nomaticIM/search\" method=\"get\">\n        <div>\n          <label for=\"proj-search\">Search:</label>\n          <input type=\"text\" id=\"proj-search\" name=\"q\" size=\"18\" value=\"\" />\n          <input type=\"submit\" value=\"Search\" />\n        </div>\n      </form>\n      <div id=\"metanav\" class=\"nav\">\n    <ul>\n      <li class=\"first\"><a href=\"/LUCICodeRepository/nomaticIM/login\">Login</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/prefs\">Preferences</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/wiki/TracGuide\">Help/Guide</a></li><li class=\"last\"><a href=\"/LUCICodeRepository/nomaticIM/about\">About Trac</a></li>\n    </ul>\n  </div>\n    </div>\n    <div id=\"mainnav\" class=\"nav\">\n    <ul>\n      <li class=\"first\"><a href=\"/LUCICodeRepository/nomaticIM/wiki\">Wiki</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/timeline\">Timeline</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/roadmap\">Roadmap</a></li><li class=\"active\"><a href=\"/LUCICodeRepository/nomaticIM/browser\">Browse Source</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/report\">View Tickets</a></li><li class=\"last\"><a href=\"/LUCICodeRepository/nomaticIM/search\">Search</a></li>\n    </ul>\n  </div>\n    <div id=\"main\">\n      <div id=\"ctxtnav\" class=\"nav\">\n        <h2>Context Navigation</h2>\n        <ul>\n          <li class=\"first\"><span>&larr; <a class=\"prev\" href=\"/LUCICodeRepository/nomaticIM/changeset/174/trunk/Nomatic*Gaim/current/client/gtk/plugins/nomatic/nomatic.c\" title=\"Changeset 174 for trunk/Nomatic*Gaim/current/client/gtk/plugins/nomatic/nomatic.c\">Previous Change</a></span></li><li class=\"last\"><span><a class=\"next\" href=\"/LUCICodeRepository/nomaticIM/changeset/193/trunk/Nomatic*Gaim/current/client/gtk/plugins/nomatic/nomatic.c\" title=\"Changeset 193 for trunk/Nomatic*Gaim/current/client/gtk/plugins/nomatic/nomatic.c\">Next Change</a> &rarr;</span></li>\n        </ul>\n        <hr />\n      </div>\n    <div id=\"content\" class=\"changeset\">\n      <div id=\"title\">\n            <h1>Changeset <a title=\"Show full changeset\" href=\"/LUCICodeRepository/nomaticIM/changeset/190\">190</a>\n              for <a title=\"Show entry in browser\" href=\"/LUCICodeRepository/nomaticIM/browser/trunk/Nomatic*Gaim/current/client/gtk/plugins/nomatic/nomatic.c?rev=190\">trunk/Nomatic*Gaim/current/client/gtk/plugins/nomatic/nomatic.c</a></h1>\n      </div>\n      <form id=\"prefs\" action=\"\">\n        <div>\n          \n  <label for=\"style\">View differences</label>\n  <select id=\"style\" name=\"style\">\n    <option selected=\"selected\" value=\"inline\">inline</option>\n    <option value=\"sidebyside\">side by side</option>\n  </select>\n  <div class=\"field\">\n    <label><input type=\"radio\" name=\"contextall\" value=\"0\" checked=\"checked\" />\n             Show</label>\n      <label><input type=\"text\" name=\"contextlines\" id=\"contextlines\" size=\"2\" maxlength=\"3\" value=\"2\" />\n             lines around each change</label><br />\n    <label><input type=\"radio\" name=\"contextall\" value=\"1\" />\n           Show the changes in full context</label>\n  </div>\n  <fieldset id=\"ignore\">\n    <legend>Ignore:</legend>\n    <div class=\"field\">\n      <input type=\"checkbox\" id=\"ignoreblanklines\" name=\"ignoreblanklines\" />\n      <label for=\"ignoreblanklines\">Blank lines</label>\n    </div>\n    <div class=\"field\">\n      <input type=\"checkbox\" id=\"ignorecase\" name=\"ignorecase\" />\n      <label for=\"ignorecase\">Case changes</label>\n    </div>\n    <div class=\"field\">\n      <input type=\"checkbox\" id=\"ignorewhitespace\" name=\"ignorewhitespace\" />\n      <label for=\"ignorewhitespace\">White space changes</label>\n    </div>\n  </fieldset>\n  <div class=\"buttons\">\n    <input type=\"submit\" name=\"update\" value=\"Update\" />\n  </div>\n\n        </div>\n      </form>\n      <dl id=\"overview\">\n          <dt class=\"property time\">Timestamp:</dt>\n          <dd class=\"time\">\n             Feb 21, 2007, 6:28:16 AM\n             (<a class=\"timeline\" href=\"/LUCICodeRepository/nomaticIM/timeline?from=2007-02-21T06%3A28%3A16-08%3A00&amp;precision=second\" title=\"See timeline at Feb 21, 2007, 6:28:16 AM\">8 years</a> ago)\n          </dd>\n          <dt class=\"property author\">Author:</dt>\n          <dd class=\"author\">djp3</dd>\n          <dt class=\"property message\">Message:</dt>\n          <dd class=\"message searchable\">\n            \n            \n              <p>\nAdded geopoke<br />\n</p>\n\n            \n            \n          </dd>\n        <dt class=\"property files\">\n          File:\n        </dt>\n        <dd class=\"files\">\n          <div class=\"legend\" id=\"file-legend\">\n            <dl>\n              <dt class=\"mod\"></dt><dd>1 edited</dd>\n            </dl>\n          </div>\n          <br />\n          <ul>\n            <li>\n          <div class=\"mod\"> </div>\n            <a title=\"Show entry in browser\" href=\"/LUCICodeRepository/nomaticIM/browser/trunk/Nomatic*Gaim/current/client/gtk/plugins/nomatic/nomatic.c?rev=190\">\n              trunk/Nomatic*Gaim/current/client/gtk/plugins/nomatic/nomatic.c\n            </a>\n          <span class=\"comment\">(modified)</span>\n              (<a title=\"Show differences\" href=\"#file0\">5 diffs</a>)\n            </li>\n          </ul>\n        </dd>\n      </dl>\n      <div class=\"diff\">\n        <div class=\"legend\" id=\"diff-legend\">\n          <h3>Legend:</h3>\n          <dl>\n            <dt class=\"unmod\"></dt><dd>Unmodified</dd>\n            <dt class=\"add\"></dt><dd>Added</dd>\n            <dt class=\"rem\"></dt><dd>Removed</dd>\n          </dl>\n        </div>\n        <div class=\"diff\">\n  <ul class=\"entries\">\n      <li class=\"entry\">\n        <h2 id=\"file0\">\n          <a href=\"/LUCICodeRepository/nomaticIM/changeset/190/trunk/Nomatic*Gaim/current/client/gtk/plugins/nomatic/nomatic.c\" title=\"Show the changeset 190 restricted to trunk/Nomatic*Gaim/current/client/gtk/plugins/nomatic/nomatic.c\">trunk/Nomatic*Gaim/current/client/gtk/plugins/nomatic/nomatic.c</a>\n        </h2>\n        <table class=\"trac-diff inline\" summary=\"Differences\" cellspacing=\"0\">\n              <colgroup><col class=\"lineno\" /><col class=\"lineno\" /><col class=\"content\" /></colgroup>\n              <thead>\n                <tr>\n                  <th title=\"Revision 174\">\n                    <a title=\"Show revision 174 of this file in browser\" href=\"/LUCICodeRepository/nomaticIM/browser/trunk/Nomatic*Gaim/current/client/gtk/plugins/nomatic/nomatic.c?rev=174#L29\">\n                      r174</a>\n                  </th>\n                  <th title=\"Revision 190\">\n                    <a title=\"Show revision 190 of this file in browser\" href=\"/LUCICodeRepository/nomaticIM/browser/trunk/Nomatic*Gaim/current/client/gtk/plugins/nomatic/nomatic.c?rev=190#L29\">\n                      r190</a>\n                  </th>\n                  <td>\u00a0</td>\n                </tr>\n              </thead>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>29</th><th>29</th><td class=\"l\"><span>#include &lt;network.h&gt;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>30</th><th>30</th><td class=\"l\"><span>#include &lt;gtkblist.h&gt;</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"first\">\n                          <th>\u00a0</th><th>31</th><td class=\"r\"><ins>#include &lt;gtkutils.h&gt;</ins>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>\u00a0</th><th>32</th><td class=\"r\"><ins>#include &lt;gtknotify.h&gt;</ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>31</th><th>33</th><td class=\"l\"><span>#include &lt;savedstatuses.h&gt;</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"first\">\n                          <th>\u00a0</th><th>34</th><td class=\"r\"><ins>#include &lt;conversation.h&gt;</ins>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>\u00a0</th><th>35</th><td class=\"r\"><ins>#include &lt;blist.h&gt;</ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>32</th><th>36</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>33</th><th>37</th><td class=\"l\"><span>//Nomatic*Gaim headers</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/trunk/Nomatic*Gaim/current/client/gtk/plugins/nomatic/nomatic.c?rev=174#L39\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/trunk/Nomatic*Gaim/current/client/gtk/plugins/nomatic/nomatic.c?rev=190#L43\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>39</th><th>43</th><td class=\"l\"><span>#include \"contextChooser.h\"</span>\u00a0</td>\n                  </tr><tr>\n                          <th>40</th><th>44</th><td class=\"l\"><span>#include \"networkHelper.h\"</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"last first\">\n                          <th>\u00a0</th><th>45</th><td class=\"r\"><ins>#include \"geopoke.h\"</ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>41</th><th>46</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>42</th><th>47</th><td class=\"l\"><span>//Local function declarations</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/trunk/Nomatic*Gaim/current/client/gtk/plugins/nomatic/nomatic.c?rev=174#L197\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/trunk/Nomatic*Gaim/current/client/gtk/plugins/nomatic/nomatic.c?rev=190#L202\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>197</th><th>202</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; return(FALSE);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>198</th><th>203</th><td class=\"l\"><span>}</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>199</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>204</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>205</th><td class=\"r\"><span>// Called when geopoke is selected from buddy list node menu</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>206</th><td class=\"r\"><span>void geopoke_action_cb(GaimBlistNode *node, gpointer data) {&nbsp; &nbsp; </span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>207</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; const char *geopoke_format_string = _(\"Geopoke! I am &lt;a href=\\\"%s\\\"&gt;here&lt;/a&gt;.\");</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>208</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>209</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; GaimBuddy *buddy;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>210</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; GaimNotifyUiOps *ops;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>211</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>212</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; g_return_if_fail(GAIM_BLIST_NODE_IS_BUDDY(node));</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>213</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; buddy = (GaimBuddy *)node;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>214</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>215</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; // Open the URL we're sending in a browser</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>216</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; // TODO: Send a name instead of \"Me\" as the map's label</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>217</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; char *url = make_google_maps_url( infer_location(), _(\"Me\") );</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>218</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; ops = gaim_gtk_notify_get_ui_ops();</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>219</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; (*ops-&gt;notify_uri)(url);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>220</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>221</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; // Construct the string to send</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>222</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; char *buffer = calloc(strlen(geopoke_format_string)+strlen(url), sizeof(char));</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>223</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; sprintf(buffer, geopoke_format_string, url);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>224</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>225</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; // Send the URL</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>226</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; GaimConversation *gc = gaim_conversation_new(GAIM_CONV_TYPE_IM,</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>227</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;gaim_buddy_get_account(buddy),</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>228</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;gaim_buddy_get_name(buddy));</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>229</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gaim_conv_im_send(GAIM_CONV_IM(gc), buffer);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>230</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>231</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; // Free everything</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>232</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; free(buffer);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>233</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; free(url);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>234</th><td class=\"r\"><span>}</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>235</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>236</th><td class=\"r\"><span>// Called when buddy in buddy list gets right-clicked</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>237</th><td class=\"r\"><span>static void blist_node_extended_menu(GaimBlistNode *node, GList **menu) {</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>238</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; GaimBuddy *buddy;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>239</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; GaimMenuAction *menu_action;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>240</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>241</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; g_return_if_fail(GAIM_BLIST_NODE_IS_BUDDY(node));</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>242</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>243</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; buddy = (GaimBuddy *)node;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>244</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; menu_action = gaim_menu_action_new(_(\"Geopoke\"),</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>245</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; GAIM_CALLBACK(geopoke_action_cb), NULL, NULL);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>246</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; *menu = g_list_append(*menu, menu_action);</span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>247</th><td class=\"r\"><span>}&nbsp; &nbsp; &nbsp; &nbsp;</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>200</th><th>248</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>201</th><th>249</th><td class=\"l\"><span>gboolean plugin_load(GaimPlugin *plugin) </span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/trunk/Nomatic*Gaim/current/client/gtk/plugins/nomatic/nomatic.c?rev=174#L212\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/trunk/Nomatic*Gaim/current/client/gtk/plugins/nomatic/nomatic.c?rev=190#L260\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>212</th><th>260</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gaim_signal_connect(gaim_gtk_blist_get_handle(), \"gtkblist-created\", plugin, GAIM_CALLBACK(makeGUI), plugin);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>213</th><th>261</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"first\">\n                          <th>\u00a0</th><th>262</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; gaim_signal_connect(gaim_blist_get_handle(), \"blist-node-extended-menu\",</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>263</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; plugin, GAIM_CALLBACK(blist_node_extended_menu), NULL);</ins>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>\u00a0</th><th>264</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>214</th><th>265</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; return TRUE;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>215</th><th>266</th><td class=\"l\"><span>}</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/trunk/Nomatic*Gaim/current/client/gtk/plugins/nomatic/nomatic.c?rev=174#L219\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/trunk/Nomatic*Gaim/current/client/gtk/plugins/nomatic/nomatic.c?rev=190#L270\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>219</th><th>270</th><td class=\"l\"><span>plugin_unload(GaimPlugin *plugin)</span>\u00a0</td>\n                  </tr><tr>\n                          <th>220</th><th>271</th><td class=\"l\"><span>{</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"first\">\n                          <th>\u00a0</th><th>272</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; gaim_signal_disconnect(gaim_blist_get_handle(), \"blist-node-extended-menu\",</ins>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>\u00a0</th><th>273</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;plugin, GAIM_CALLBACK(blist_node_extended_menu));</ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>221</th><th>274</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; featureCollectionShutdown();</span>\u00a0</td>\n                  </tr><tr>\n                          <th>222</th><th>275</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; presenceShutdown();</span>\u00a0</td>\n                  </tr>\n            </tbody>\n        </table>\n      </li>\n  </ul>\n</div>\n        <div id=\"help\"><strong>Note:</strong> See <a href=\"/LUCICodeRepository/nomaticIM/wiki/TracChangeset\">TracChangeset</a>\n          for help on using the changeset viewer.</div>\n      </div>\n    </div>\n    <div id=\"altlinks\">\n      <h3>Download in other formats:</h3>\n      <ul>\n        <li class=\"first\">\n          <a rel=\"nofollow\" href=\"?format=diff&amp;new=190\" class=\"diff\">Unified Diff</a>\n        </li><li class=\"last\">\n          <a rel=\"nofollow\" href=\"?format=zip&amp;new=190\" class=\"zip\">Zip Archive</a>\n        </li>\n      </ul>\n    </div>\n    </div>\n    <div id=\"footer\" lang=\"en\" xml:lang=\"en\"><hr />\n      <a id=\"tracpowered\" href=\"http://trac.edgewall.org/\"><img src=\"/LUCICodeRepository/nomaticIM/chrome/common/trac_logo_mini.png\" height=\"30\" width=\"107\" alt=\"Trac Powered\" /></a>\n      <p class=\"left\">Powered by <a href=\"/LUCICodeRepository/nomaticIM/about\"><strong>Trac 1.0.1</strong></a><br />\n        By <a href=\"http://www.edgewall.org/\">Edgewall Software</a>.</p>\n      <p class=\"right\">All content copyright 2007-2008 by LUCI <br /><a href=\"http://luci.ics.uci.edu/\">http://luci.ics.uci.edu/</a></p>\n    </div>\n\t\t<div id=\"sitefooter\">\n\t\t\t<script src=\"http://www.google-analytics.com/urchin.js\" type=\"text/javascript\">\n\t\t\t</script>\n\t\t\t<script type=\"text/javascript\">\n\t\t\t\t_uacct = \"UA-338915-2\";\n\t\t\t\turchinTracker();\n\t\t\t</script>\n\t\t</div>\n\t</body>\n</html>", "id": 36939.0}