{"text": "Search LoginPreferencesHelp GuideAbout Trac WikiTimelineRoadmapBrowse SourceView TicketsSearch Context Navigation Previous ChangeNext Change Changeset 228 for vendor current libgaim protocols sametime sametime c View differences inlineside by side Show lines around each change Show the changes in full context Ignore Blank lines Case changes White space changes Timestamp Mar 6 2 7 1 39 26 PM 8 years ago Author djp3Message Updating from gaim Repository File 1 edited vendor current libgaim protocols sametime sametime c modified 41 diffs Legend UnmodifiedAddedRemoved vendor current libgaim protocols sametime sametime c r65 r228 142142 define MW KEY HOST server 143143 define MW KEY PORT port 144 define MW KEY ACTIVE MSG active msg 145 define MW KEY AWAY MSG away msg 146 define MW KEY BUSY MSG busy msg 147 define MW KEY MSG PROMPT msg prompt 148 define MW KEY INVITE conf invite 149 define MW KEY ENCODING encoding 15 144 define MW KEY FORCE force login 151145 define MW KEY FAKE IT fake client id 146 define MW KEY CLIENT client id val 147 define MW KEY MAJOR client major 148 define MW KEY MINOR client minor 152149 15315 226223 int socket 227224 gint outpa like inpa but the other way 228 GaimProxyConnectData connect data 229225 23 226 circular buffer for outgoing data 233229 GaimConnection gc 23423 231 232 233typedef struct 234 GaimBuddy buddy 235 GaimGroup group 236 BuddyAddData 235237 236238 48849 489491 struct mwGaimPluginData pd 49 time t idle 492 guint32 idle 491493 guint stat 492494 const char id 5 25 4 5 35 5 if idle 5 6 guint32 idle len how long a client has been idle 5 7 guint32 ugly idle len how long a broken client has been idle 5 8 5 45 9 DEBUG INFO s has idle value x x n NSTR id idle 5 551 511 idle len time NULL idle 512 ugly idle len time NULL 1 idle 1 513 514 515 what s the deal here Well good clients are smart enough to 516 publish their idle time by using an attribute to indicate that 517 they went idle at some time UTC in seconds since epoch Bad 518 clients use milliseconds since epoch So we re going to compute 519 the idle time for either method then figure out the lower of 52 the two and use that Blame the ST 7 5 development team for 521 this 522 523 524 DEBUG INFO idle time u ugly idle time u n idle len ugly idle len 525 526 if 1 527 if idle len ugly idle len 528 DEBUG INFO sane idle value let s use it n 529 else 53 idle time NULL ugly idle len 531 532 533 else 5 6534 if idle idle time NULL 5 7535 DEBUG INFO hiding a messy idle value x x n NSTR id idle 5 8536 idle 1 5 9537 538 endif 51 539 51154 56159 if aware online 562591 gaim prpl got user status acct id status NULL 563 gaim prpl got user idle acct id idle idle 592 gaim prpl got user idle acct id idle time t idle 564593 565594 else 14 31432 GaimAccount account 14 41433 guint port 1434 const char current host 14 51435 14 61436 pd mwSession getClientData session 14 81438 account gaim connection get account gc 14 91439 port gaim account get int account MW KEY PORT MW PLUGIN DEFAULT PORT 144 current host gaim account get string account MW KEY HOST 1441 MW PLUGIN DEFAULT HOST 141 1442 14111443 if gaim account get bool account MW KEY FORCE FALSE 1412 gaim proxy connect account host port connect cb pd NULL 1444 strcmp current host host 1445 gaim proxy connect NULL account host port connect cb pd NULL 1446 1447 if we re configured to force logins or if we re being 1448 redirected to the already configured host or if we couldn t 1449 connect to the new host we ll force the login instead 1413145 14141451 mwSession forceLogin session 14341471 start watching for new conversations 14351472 gaim signal connect gaim conversations get handle 1436 conversation created pd gc 1473 conversation created pd 14371474 GAIM CALLBACK conversation created cb pd 14381475 14391476 watch for group extended menu items 144 1477 gaim signal connect gaim blist get handle 1441 blist node extended menu pd gc 1478 blist node extended menu pd 14421479 GAIM CALLBACK blist node menu cb pd 1443 148 14441481 use our services to do neat things 14451482 services starting pd 1483 1484 1485 1486static void session stopping struct mwGaimPluginData pd 1487 stop watching the signals from session started 1488 gaim signals disconnect by handle pd 14461489 1447149 15 51548 15 61549 case mwSession STOPPING 155 1551 session stopping pd 1552 15 71553 if GPOINTER TO UINT info ERR FAILURE 15 81554 char err mwError GPOINTER TO UINT info 16391685 err errno 164 1686 1641 read problem occured if we re here so we ll need to take care of 1687 read problem occurred if we re here so we ll need to take care of 16421688 it and clean up internal state 16431689 1674172 struct mwGaimPluginData pd data 16751721 GaimConnection gc pd gc 1676 1677 pd connect data NULL 16781722 16791723 if source 2 822126 2 832127 xfer gaim xfer new acct GAIM XFER RECEIVE who 2 84 2 85 gaim xfer ref xfer 2 86 mwFileTransfer setClientData ft xfer GDestroyNotify gaim xfer unref 2 87 xfer data ft 2 88 2 89 gaim xfer set init fnc xfer ft incoming init 2 9 gaim xfer set cancel recv fnc xfer ft incoming cancel 2 91 gaim xfer set request denied fnc xfer ft incoming cancel 2 92 2 93 gaim xfer set filename xfer mwFileTransfer getFileName ft 2 94 gaim xfer set size xfer mwFileTransfer getFileSize ft 2 95 gaim xfer set message xfer mwFileTransfer getMessage ft 2 96 2 97 gaim xfer request xfer 2128 if xfer 2129 213 gaim xfer ref xfer 2131 mwFileTransfer setClientData ft xfer GDestroyNotify gaim xfer unref 2132 xfer data ft 2133 2134 gaim xfer set init fnc xfer ft incoming init 2135 gaim xfer set cancel recv fnc xfer ft incoming cancel 2136 gaim xfer set request denied fnc xfer ft incoming cancel 2137 2138 gaim xfer set filename xfer mwFileTransfer getFileName ft 2139 gaim xfer set size xfer mwFileTransfer getFileSize ft 214 gaim xfer set message xfer mwFileTransfer getMessage ft 2141 2142 gaim xfer request xfer 2143 2 982144 2 992145 32163262 32173263 3218 static void mw prpl tooltip text GaimBuddy b GString str gboolean full 3264static void mw prpl tooltip text GaimBuddy b GaimNotifyUserInfo user info gboolean full 32193265 GaimConnection gc 322 3266 struct mwGaimPluginData pd 32333279 if message NULL gaim utf8 strcasecmp status message 3234328 tmp g markup escape text message 1 3235 g string append printf str n b s b s status tmp 3281 gaim notify user info add pair user info status tmp 32363282 g free tmp 32373283 32383284 else 3239 g string append printf str n b Status b s status 3285 gaim notify user info add pair user info Status status 324 3286 32413287 32433289 tmp user supports text pd srvc aware b name 3244329 if tmp 3245 g string append printf str n b Supports b s tmp 3291 gaim notify user info add pair user info Supports tmp 32463292 g free tmp 32473293 32483294 32493295 if buddy is external b 325 g string append str n b External User b 3296 gaim notify user info add pair user info NULL External User 32513297 32523298 36293675 363 3676 char user pass host 3631 guint port client 3677 guint port 36323678 36333679 gc gaim account get connection account 367 3716 mwSession setProperty pd session mwSession AUTH PASSWORD pass g free 36713717 3672 client mwLogin MEANWHILE 3673 if gaim account get bool account MW KEY FAKE IT FALSE 3674 client mwLogin BINARY 3675 3676 DEBUG INFO client id x 4x n client 3677 3678 mwSession setProperty pd session mwSession CLIENT TYPE ID 3679 GUINT TO POINTER client NULL 3718 if gaim account get bool account MW KEY FAKE IT FALSE 3719 guint client major minor 372 3721 if we re faking the login let s also fake the version we re 3722 reporting Let s also allow the actual values to be specified 3723 3724 client gaim account get int account MW KEY CLIENT mwLogin BINARY 3725 major gaim account get int account MW KEY MAJOR x 1e 3726 minor gaim account get int account MW KEY MINOR x 1d 3727 3728 DEBUG INFO client id x 4x n client 3729 DEBUG INFO client major x 4x n major 373 DEBUG INFO client minor x 4x n minor 3731 3732 mwSession setProperty pd session mwSession CLIENT TYPE ID 3733 GUINT TO POINTER client NULL 3734 3735 mwSession setProperty pd session mwSession CLIENT VER MAJOR 3736 GUINT TO POINTER major NULL 3737 3738 mwSession setProperty pd session mwSession CLIENT VER MINOR 3739 GUINT TO POINTER minor NULL 374 368 3741 36813742 gaim connection update progress gc Connecting 1 MW CONNECT STEPS 36823743 3683 pd connect data gaim proxy connect account host port connect cb pd 3684 if pd connect data NULL 3744 if gaim proxy connect gc account host port connect cb pd NULL 36853745 gaim connection error gc Unable to connect to host 36863746 37133773 gaim input remove gc inpa 37143774 gc inpa 3715 3716 3717 if pd connect data NULL 3718 gaim proxy connect cancel pd connect data 3719 pd connect data NULL 372 3775 37213776 39684 23 39694 24 397 static unsigned int mw prpl send typing GaimConnection gc const char name 3971 GaimTypingState state 4 25static unsigned int mw prpl send typing GaimConnection gc 4 26 const char name 4 27 GaimTypingState state 39724 28 39734 29 struct mwGaimPluginData pd 39844 4 conv mwServiceIm getConversation pd srvc im who 39854 41 3986 if mwConversation isOpen conv 3987 return mwConversation send conv mwImSend TYPING t 3988 3989 if state GAIM TYPING state GAIM TYPED 399 let s only open a channel for typing not for not typing 3991 Otherwise two users in psychic mode will continually open 3992 conversations to each other never able to get rid of them as 3993 when the other person closes it psychicaly opens again 3994 4 42 if mwConversation isOpen conv 4 43 mwConversation send conv mwImSend TYPING t 4 44 4 45 else if state GAIM TYPING state GAIM TYPED 4 46 only open a channel for sending typing notification not for 4 47 when typing has stopped There s no point in re opening a 4 48 channel just to tell someone that this side isn t typing 4 49 39954 5 convo queue conv mwImSend TYPING t 3996 3997 if mwConversation isPending conv 4 51 4 52 if mwConversation isPending conv 39984 53 mwConversation open conv 3999 4 4 1 4 2 TODO This should probably be When it s set to 1 the Gaim 4 3 core will call serv send typing gc who GAIM TYPING once 4 4 every second until the Gaim user stops typing KingAnt 4 5 4 6 return 1 4 54 4 55 4 56 4 57 return 4 74 58 4 84 59 4 414 92 return Alphaworks NotesBuddy 4 424 93 4 94 case x13 5 4 95 case x13 6 4 96 case x13 7 4 97 return Lotus Sametime Connect 7 5 4 98 4 434 99 case mwLogin SANITY 4 4441 return Sanity 4 674123 GaimAccount acct 4 684124 GaimBuddy b 4 69 4 7 GString str 4 71 const char tmp 4125 GaimNotifyUserInfo user info 4126 char tmp 4127 const char tmp2 4 724128 4 734129 g return if fail who NULL 4 784134 acct gaim connection get account gc 4 794135 b gaim find buddy acct who 4 8 4 81 str g string new NULL 4136 user info gaim notify user info new 4 824137 4 834138 if gaim str has prefix who E 4 84 g string append str b External User b br 4 85 4 86 4 87 g string append printf str b User ID b s br who 4139 gaim notify user info add pair user info External User NULL 414 4141 4142 gaim notify user info add pair user info User ID who 4 884143 4 894144 if b 4 914146 4 924147 if b server alias 4 93 g string append printf str b Full Name b s br 4 94 b server alias 4148 gaim notify user info add pair user info Full Name b server alias 4 954149 4 96415 4 974151 type gaim blist node get int GaimBlistNode b BUDDY KEY CLIENT 4 984152 if type 4 99 g string append str b Last Known Client b 41 41 1 tmp mw client name type 41 2 if tmp 41 3 g string append str tmp 41 4 g string append str br 41 5 41 6 else 41 7 g string append printf str Unknown x 4x br type 41 8 4153 tmp g strdup mw client name type 4154 if tmp 4155 tmp g strdup printf Unknown x 4x br type 4156 4157 gaim notify user info add pair user info Last Known Client tmp 4158 4159 g free tmp 41 9416 411 4161 4111 4162 41124163 tmp user supports text pd srvc aware who 41134164 if tmp 4114 g string append printf str b Supports b s br tmp 4115 g free char tmp 4165 gaim notify user info add pair user info Supports tmp 4166 g free tmp 41164167 41174168 41184169 if b 4119 tmp status text b 412 g string append printf str b Status b s tmp 4121 4122 g string append str hr 4123 4124 tmp mwServiceAware getText pd srvc aware idb 4125 if tmp 4126 tmp g markup escape text tmp 1 4127 g string append str tmp 4128 g free char tmp 417 gaim notify user info add pair user info Status status text b 4171 4172 XXX Is this adding a status message in its own section rather than with the Status label 4173 tmp2 mwServiceAware getText pd srvc aware idb 4174 if tmp2 4175 tmp g markup escape text tmp2 1 4176 gaim notify user info add section break user info 4177 gaim notify user info add pair user info NULL tmp 4178 g free tmp 41294179 413 418 41334183 this notification so that it can create its own 41344184 4135 gaim notify userinfo gc who str str NULL NULL 4136 4137 g string free str TRUE 4185 gaim notify userinfo gc who user info NULL NULL 4186 gaim notify user info destroy user info 41384187 41394188 42384287 42394288static void notify add GaimConnection gc GList row void user data 4289 BuddyAddData data user data 429 char group name NULL 4291 4292 if data data group 4293 group name data group name 4294 4295 424 4296 gaim blist request add buddy gaim connection get account gc 4241 g list nth data row 1 NULL 4297 g list nth data row 1 group name 42424298 g list nth data row 42434299 424543 1 424643 2static void notify close gpointer data 4247 43 3 if data 43 4 g free data 43 5 424843 6 424943 7 425 43 8 425143 9static void multi resolved query struct mwResolveResult result 4252 GaimConnection gc 431 GaimConnection gc gpointer data 42534311 GList l 42544312 const char msgA 42954353 42964354 gaim notify searchresults gc Select User 4297 msgA msg sres notify close NULL 4355 msgA msg sres notify close data 42984356 42994357 g free msg 43 64364 43 74365 struct mwResolveResult res NULL 43 8 GaimBuddy buddy b 4366 BuddyAddData data b 4367 GaimBuddy buddy NULL 43 94368 GaimConnection gc 431 4369 struct mwGaimPluginData pd 437 4371 if data 4372 buddy data buddy 4373 43114374 43124375 gc gaim account get connection buddy account 43264389 the user meant to add 4327439 gaim blist remove buddy buddy 4328 multi resolved query res gc 4391 multi resolved query res gc data 43294392 433 4393 else 433944 2 434 44 3 blist schedule pd 44 4 44 5 g free data 434144 6 434244 7 434444 9 prompt user if more than one match was returned 4345441 gaim blist remove buddy buddy 4346 multi resolved query res gc 4411 multi resolved query res gc data 43474412 43484413 435 4415 43514416 4417 if 43524418 fall through indicates that we couldn t find a matching user in 43534419 the resolve service ether error or zero results so we remove 4354442 this buddy 4421 4422 note I can t really think of a good reason to alter the buddy 4423 list in any way There has been at least one report where the 4424 resolve service isn t returning correct results anyway so let s 4425 just leave them in the list I m just going to if this section 4426 out unless I can think of a very good reason to do this siege 43554427 43564428 DEBUG INFO no such buddy in community n 43754447 g free msg 43764448 4449 endif 4377445 43784451 43884461 guint32 req 43894462 4463 BuddyAddData data 4464 4465 data g new BuddyAddData 1 4466 data buddy buddy 4467 data group group 4468 439 4469 pd gc proto data 4391447 srvc pd srvc resolve 44 1448 44 24481 req mwServiceResolve resolve srvc query flags add buddy resolved 44 3 buddy NULL 4482 data NULL 44 44483 g list free query 44 54484 47384817 int id 47394818 const char message 474 GaimMessageFlags flags 4819 GaimMessageFlags flags 4741482 47424821 struct mwGaimPluginData pd 47434822 struct mwConference conf 4823 char msg 4824 int ret 47444825 47454826 pd gc proto data 47484829 conf ID TO CONF pd id 4749483 4831 msg gaim markup strip html message 4832 475 4833 if conf 4751 return mwConference sendText conf message 4834 ret mwConference sendText conf msg 47524835 47534836 else 47554838 g return val if fail place NULL 47564839 4757 return mwPlace sendText place message 4758 484 ret mwPlace sendText place msg 4841 4842 4843 g free msg 4844 return ret 47594845 476 4846 49825 68 49835 69 xfer gaim xfer new acct GAIM XFER SEND who 4984 gaim xfer set init fnc xfer ft outgoing init 4985 gaim xfer set cancel send fnc xfer ft outgoing cancel 4986 5 7 if xfer 5 71 5 72 gaim xfer set init fnc xfer ft outgoing init 5 73 gaim xfer set cancel send fnc xfer ft outgoing cancel 5 74 5 75 49875 76 return xfer 49885 77 Note See TracChangeset for help on using the changeset viewer Download in other formats Unified Diff Zip Archive Powered by Trac 1 1 By Edgewall Software All content copyright 2 7 2 8 by LUCI http luci ics uci edu ", "_id": "http://djp3-pc2.ics.uci.edu/LUCICodeRepository/nomaticIM/changeset/228/vendor/current/libgaim/protocols/sametime/sametime.c", "title": "\n      changeset 228 for vendor/current/libgaim/protocols/sametime/sametime.c \u2013 nomatic*im\n    ", "html": "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n  \n  \n\n  \n\n\n  <head>\n\t\t<title>\n      Changeset 228 for vendor/current/libgaim/protocols/sametime/sametime.c \u2013 Nomatic*IM\n    </title><meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" /><meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" /><link rel=\"search\" href=\"/LUCICodeRepository/nomaticIM/search\" /><link rel=\"help\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracGuide\" /><link rel=\"alternate\" href=\"?format=diff&amp;new=228\" type=\"text/plain\" class=\"diff\" title=\"Unified Diff\" /><link rel=\"alternate\" href=\"?format=zip&amp;new=228\" type=\"application/zip\" class=\"zip\" title=\"Zip Archive\" /><link rel=\"next\" href=\"/LUCICodeRepository/nomaticIM/changeset/274\" title=\"Changeset 274 for vendor/current/libgaim/protocols/sametime/sametime.c\" /><link rel=\"start\" href=\"/LUCICodeRepository/nomaticIM/wiki\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/chrome/common/css/trac.css\" type=\"text/css\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/chrome/common/css/changeset.css\" type=\"text/css\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/chrome/common/css/diff.css\" type=\"text/css\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/chrome/common/css/code.css\" type=\"text/css\" /><link rel=\"prev\" href=\"/LUCICodeRepository/nomaticIM/changeset/65/vendor/current/libgaim/protocols/sametime/sametime.c\" title=\"Changeset 65 for vendor/current/libgaim/protocols/sametime/sametime.c\" /><link rel=\"shortcut icon\" href=\"http://luci.ics.uci.edu/logo32by32.gif\" type=\"image/gif\" /><link rel=\"icon\" href=\"http://luci.ics.uci.edu/logo32by32.gif\" type=\"image/gif\" /><link type=\"application/opensearchdescription+xml\" rel=\"search\" href=\"/LUCICodeRepository/nomaticIM/search/opensearch\" title=\"Search Nomatic*IM\" /><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/jquery.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/babel.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/messages/en_US.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/trac.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/search.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/diff.js\"></script><script type=\"text/javascript\">\n      jQuery(document).ready(function($) {\n        $(\".trac-toggledeleted\").show().click(function() {\n                  $(this).siblings().find(\".trac-deleted\").toggle();\n                  return false;\n        }).click();\n        $(\"#content\").find(\"li.entry h2 a\").parent().addAnchor(_(\"Link to this diff\"));\n      });\n    </script>\n\t</head>\n  <body>\n    <div id=\"banner\">\n      <div id=\"header\">\n        <a id=\"logo\" href=\"http://luci.ics.uci.edu/#code\"><img src=\"http://luci.ics.uci.edu/blog/archives/LUCIhorzTight.jpg\" alt=\"LUCI Code Repository\" /></a>\n      </div>\n      <form id=\"search\" action=\"/LUCICodeRepository/nomaticIM/search\" method=\"get\">\n        <div>\n          <label for=\"proj-search\">Search:</label>\n          <input type=\"text\" id=\"proj-search\" name=\"q\" size=\"18\" value=\"\" />\n          <input type=\"submit\" value=\"Search\" />\n        </div>\n      </form>\n      <div id=\"metanav\" class=\"nav\">\n    <ul>\n      <li class=\"first\"><a href=\"/LUCICodeRepository/nomaticIM/login\">Login</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/prefs\">Preferences</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/wiki/TracGuide\">Help/Guide</a></li><li class=\"last\"><a href=\"/LUCICodeRepository/nomaticIM/about\">About Trac</a></li>\n    </ul>\n  </div>\n    </div>\n    <div id=\"mainnav\" class=\"nav\">\n    <ul>\n      <li class=\"first\"><a href=\"/LUCICodeRepository/nomaticIM/wiki\">Wiki</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/timeline\">Timeline</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/roadmap\">Roadmap</a></li><li class=\"active\"><a href=\"/LUCICodeRepository/nomaticIM/browser\">Browse Source</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/report\">View Tickets</a></li><li class=\"last\"><a href=\"/LUCICodeRepository/nomaticIM/search\">Search</a></li>\n    </ul>\n  </div>\n    <div id=\"main\">\n      <div id=\"ctxtnav\" class=\"nav\">\n        <h2>Context Navigation</h2>\n        <ul>\n          <li class=\"first\"><span>&larr; <a class=\"prev\" href=\"/LUCICodeRepository/nomaticIM/changeset/65/vendor/current/libgaim/protocols/sametime/sametime.c\" title=\"Changeset 65 for vendor/current/libgaim/protocols/sametime/sametime.c\">Previous Change</a></span></li><li class=\"last\"><span><a class=\"next\" href=\"/LUCICodeRepository/nomaticIM/changeset/274\" title=\"Changeset 274 for vendor/current/libgaim/protocols/sametime/sametime.c\">Next Change</a> &rarr;</span></li>\n        </ul>\n        <hr />\n      </div>\n    <div id=\"content\" class=\"changeset\">\n      <div id=\"title\">\n            <h1>Changeset <a title=\"Show full changeset\" href=\"/LUCICodeRepository/nomaticIM/changeset/228\">228</a>\n              for <a title=\"Show entry in browser\" href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228\">vendor/current/libgaim/protocols/sametime/sametime.c</a></h1>\n      </div>\n      <form id=\"prefs\" action=\"\">\n        <div>\n          \n  <label for=\"style\">View differences</label>\n  <select id=\"style\" name=\"style\">\n    <option selected=\"selected\" value=\"inline\">inline</option>\n    <option value=\"sidebyside\">side by side</option>\n  </select>\n  <div class=\"field\">\n    <label><input type=\"radio\" name=\"contextall\" value=\"0\" checked=\"checked\" />\n             Show</label>\n      <label><input type=\"text\" name=\"contextlines\" id=\"contextlines\" size=\"2\" maxlength=\"3\" value=\"2\" />\n             lines around each change</label><br />\n    <label><input type=\"radio\" name=\"contextall\" value=\"1\" />\n           Show the changes in full context</label>\n  </div>\n  <fieldset id=\"ignore\">\n    <legend>Ignore:</legend>\n    <div class=\"field\">\n      <input type=\"checkbox\" id=\"ignoreblanklines\" name=\"ignoreblanklines\" />\n      <label for=\"ignoreblanklines\">Blank lines</label>\n    </div>\n    <div class=\"field\">\n      <input type=\"checkbox\" id=\"ignorecase\" name=\"ignorecase\" />\n      <label for=\"ignorecase\">Case changes</label>\n    </div>\n    <div class=\"field\">\n      <input type=\"checkbox\" id=\"ignorewhitespace\" name=\"ignorewhitespace\" />\n      <label for=\"ignorewhitespace\">White space changes</label>\n    </div>\n  </fieldset>\n  <div class=\"buttons\">\n    <input type=\"submit\" name=\"update\" value=\"Update\" />\n  </div>\n\n        </div>\n      </form>\n      <dl id=\"overview\">\n          <dt class=\"property time\">Timestamp:</dt>\n          <dd class=\"time\">\n             Mar 6, 2007, 10:39:26 PM\n             (<a class=\"timeline\" href=\"/LUCICodeRepository/nomaticIM/timeline?from=2007-03-06T22%3A39%3A26-08%3A00&amp;precision=second\" title=\"See timeline at Mar 6, 2007, 10:39:26 PM\">8 years</a> ago)\n          </dd>\n          <dt class=\"property author\">Author:</dt>\n          <dd class=\"author\">djp3</dd>\n          <dt class=\"property message\">Message:</dt>\n          <dd class=\"message searchable\">\n            \n            \n              <p>\nUpdating from gaim Repository<br />\n</p>\n\n            \n            \n          </dd>\n        <dt class=\"property files\">\n          File:\n        </dt>\n        <dd class=\"files\">\n          <div class=\"legend\" id=\"file-legend\">\n            <dl>\n              <dt class=\"mod\"></dt><dd>1 edited</dd>\n            </dl>\n          </div>\n          <br />\n          <ul>\n            <li>\n          <div class=\"mod\"> </div>\n            <a title=\"Show entry in browser\" href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228\">\n              vendor/current/libgaim/protocols/sametime/sametime.c\n            </a>\n          <span class=\"comment\">(modified)</span>\n              (<a title=\"Show differences\" href=\"#file0\">41 diffs</a>)\n            </li>\n          </ul>\n        </dd>\n      </dl>\n      <div class=\"diff\">\n        <div class=\"legend\" id=\"diff-legend\">\n          <h3>Legend:</h3>\n          <dl>\n            <dt class=\"unmod\"></dt><dd>Unmodified</dd>\n            <dt class=\"add\"></dt><dd>Added</dd>\n            <dt class=\"rem\"></dt><dd>Removed</dd>\n          </dl>\n        </div>\n        <div class=\"diff\">\n  <ul class=\"entries\">\n      <li class=\"entry\">\n        <h2 id=\"file0\">\n          <a href=\"/LUCICodeRepository/nomaticIM/changeset/228/vendor/current/libgaim/protocols/sametime/sametime.c\" title=\"Show the changeset 228 restricted to vendor/current/libgaim/protocols/sametime/sametime.c\">vendor/current/libgaim/protocols/sametime/sametime.c</a>\n        </h2>\n        <table class=\"trac-diff inline\" summary=\"Differences\" cellspacing=\"0\">\n              <colgroup><col class=\"lineno\" /><col class=\"lineno\" /><col class=\"content\" /></colgroup>\n              <thead>\n                <tr>\n                  <th title=\"Revision 65\">\n                    <a title=\"Show revision 65 of this file in browser\" href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L142\">\n                      r65</a>\n                  </th>\n                  <th title=\"Revision 228\">\n                    <a title=\"Show revision 228 of this file in browser\" href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L142\">\n                      r228</a>\n                  </th>\n                  <td>\u00a0</td>\n                </tr>\n              </thead>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>142</th><th>142</th><td class=\"l\"><span>#define MW_KEY_HOST&nbsp; &nbsp; &nbsp; &nbsp; \"server\"</span>\u00a0</td>\n                  </tr><tr>\n                          <th>143</th><th>143</th><td class=\"l\"><span>#define MW_KEY_PORT&nbsp; &nbsp; &nbsp; &nbsp; \"port\"</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"rem\">\n                  <tr class=\"first\">\n                          <th>144</th><th>\u00a0</th><td class=\"l\"><del>#define MW_KEY_ACTIVE_MSG&nbsp; \"active_msg\"</del>\u00a0</td>\n                  </tr><tr>\n                          <th>145</th><th>\u00a0</th><td class=\"l\"><del>#define MW_KEY_AWAY_MSG&nbsp; &nbsp; \"away_msg\"</del>\u00a0</td>\n                  </tr><tr>\n                          <th>146</th><th>\u00a0</th><td class=\"l\"><del>#define MW_KEY_BUSY_MSG&nbsp; &nbsp; \"busy_msg\"</del>\u00a0</td>\n                  </tr><tr>\n                          <th>147</th><th>\u00a0</th><td class=\"l\"><del>#define MW_KEY_MSG_PROMPT&nbsp; \"msg_prompt\"</del>\u00a0</td>\n                  </tr><tr>\n                          <th>148</th><th>\u00a0</th><td class=\"l\"><del>#define MW_KEY_INVITE&nbsp; &nbsp; &nbsp; \"conf_invite\"</del>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>149</th><th>\u00a0</th><td class=\"l\"><del>#define MW_KEY_ENCODING&nbsp; &nbsp; \"encoding\"</del>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>150</th><th>144</th><td class=\"l\"><span>#define MW_KEY_FORCE&nbsp; &nbsp; &nbsp; &nbsp;\"force_login\"</span>\u00a0</td>\n                  </tr><tr>\n                          <th>151</th><th>145</th><td class=\"l\"><span>#define MW_KEY_FAKE_IT&nbsp; &nbsp; &nbsp;\"fake_client_id\"</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"first\">\n                          <th>\u00a0</th><th>146</th><td class=\"r\"><ins>#define MW_KEY_CLIENT&nbsp; &nbsp; &nbsp; \"client_id_val\"</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>147</th><td class=\"r\"><ins>#define MW_KEY_MAJOR&nbsp; &nbsp; &nbsp; &nbsp;\"client_major\"</ins>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>\u00a0</th><th>148</th><td class=\"r\"><ins>#define MW_KEY_MINOR&nbsp; &nbsp; &nbsp; &nbsp;\"client_minor\"</ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>152</th><th>149</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>153</th><th>150</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L226\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L223\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>226</th><th>223</th><td class=\"l\"><span>&nbsp; int socket;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>227</th><th>224</th><td class=\"l\"><span>&nbsp; gint outpa;&nbsp; /* like inpa, but the other way */</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"rem\">\n                  <tr class=\"last first\">\n                          <th>228</th><th>\u00a0</th><td class=\"l\"><del>&nbsp; GaimProxyConnectData *connect_data;</del>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>229</th><th>225</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>230</th><th>226</th><td class=\"l\"><span>&nbsp; /** circular buffer for outgoing data */</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L233\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L229\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>233</th><th>229</th><td class=\"l\"><span>&nbsp; GaimConnection *gc;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>234</th><th>230</th><td class=\"l\"><span>};</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"first\">\n                          <th>\u00a0</th><th>231</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>232</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>233</th><td class=\"r\"><ins>typedef struct {</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>234</th><td class=\"r\"><ins>&nbsp; GaimBuddy *buddy;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>235</th><td class=\"r\"><ins>&nbsp; GaimGroup *group;</ins>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>\u00a0</th><th>236</th><td class=\"r\"><ins>} BuddyAddData;</ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>235</th><th>237</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>236</th><th>238</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L488\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L490\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>488</th><th>490</th><td class=\"l\"><span>&nbsp; &nbsp; </span>\u00a0</td>\n                  </tr><tr>\n                          <th>489</th><th>491</th><td class=\"l\"><span>&nbsp; struct mwGaimPluginData *pd;</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>490</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; <del>time_t</del> idle;</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>492</th><td class=\"r\"><span>&nbsp; <ins>guint32</ins> idle;</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>491</th><th>493</th><td class=\"l\"><span>&nbsp; guint stat;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>492</th><th>494</th><td class=\"l\"><span>&nbsp; const char *id;</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L502\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L504\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>502</th><th>504</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>503</th><th>505</th><td class=\"l\"><span>&nbsp; if(idle) {</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"first\">\n                          <th>\u00a0</th><th>506</th><td class=\"r\"><ins>&nbsp; &nbsp; guint32 idle_len;&nbsp; &nbsp; &nbsp; &nbsp;/*&lt; how long a client has been idle */</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>507</th><td class=\"r\"><ins>&nbsp; &nbsp; guint32 ugly_idle_len;&nbsp; /*&lt; how long a broken client has been idle */</ins>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>\u00a0</th><th>508</th><td class=\"r\"><ins>&nbsp; &nbsp; </ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>504</th><th>509</th><td class=\"l\"><span>&nbsp; &nbsp; DEBUG_INFO(\"%s has idle value 0x%x\\n\", NSTR(id), idle);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>505</th><th>510</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"first\">\n                          <th>\u00a0</th><th>511</th><td class=\"r\"><ins>&nbsp; &nbsp; idle_len = time(NULL) - idle;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>512</th><td class=\"r\"><ins>&nbsp; &nbsp; ugly_idle_len = ((time(NULL) * 1000) - idle) / 1000;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>513</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>514</th><td class=\"r\"><ins>&nbsp; &nbsp; /* </ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>515</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp;what's the deal here? Well, good clients are smart enough to</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>516</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp;publish their idle time by using an attribute to indicate that</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>517</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp;they went idle at some time UTC, in seconds since epoch. Bad</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>518</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp;clients use milliseconds since epoch. So we're going to compute</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>519</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp;the idle time for either method, then figure out the lower of</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>520</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp;the two and use that. Blame the ST 7.5 development team for</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>521</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp;this.</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>522</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp;*/</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>523</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>524</th><td class=\"r\"><ins>&nbsp; &nbsp; DEBUG_INFO(\"idle time: %u, ugly idle time: %u\\n\", idle_len, ugly_idle_len);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>525</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>526</th><td class=\"r\"><ins>#if 1</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>527</th><td class=\"r\"><ins>&nbsp; &nbsp; if(idle_len &lt;= ugly_idle_len) {</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>528</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; ; /* DEBUG_INFO(\"sane idle value, let's use it\\n\"); */</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>529</th><td class=\"r\"><ins>&nbsp; &nbsp; } else {</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>530</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; idle = time(NULL) - ugly_idle_len;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>531</th><td class=\"r\"><ins>&nbsp; &nbsp; }</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>532</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>\u00a0</th><th>533</th><td class=\"r\"><ins>#else</ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>506</th><th>534</th><td class=\"l\"><span>&nbsp; &nbsp; if(idle &lt; 0 || idle &gt; time(NULL)) {</span>\u00a0</td>\n                  </tr><tr>\n                          <th>507</th><th>535</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; DEBUG_INFO(\"hiding a messy idle value 0x%x\\n\", NSTR(id), idle);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>508</th><th>536</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; idle = -1;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>509</th><th>537</th><td class=\"l\"><span>&nbsp; &nbsp; }</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"last first\">\n                          <th>\u00a0</th><th>538</th><td class=\"r\"><ins>#endif</ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>510</th><th>539</th><td class=\"l\"><span>&nbsp; }</span>\u00a0</td>\n                  </tr><tr>\n                          <th>511</th><th>540</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L561\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L590\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>561</th><th>590</th><td class=\"l\"><span>&nbsp; if(aware-&gt;online) {</span>\u00a0</td>\n                  </tr><tr>\n                          <th>562</th><th>591</th><td class=\"l\"><span>&nbsp; &nbsp; gaim_prpl_got_user_status(acct, id, status, NULL);</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>563</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; gaim_prpl_got_user_idle(acct, id, !!idle, <del></del>idle);</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>592</th><td class=\"r\"><span>&nbsp; &nbsp; gaim_prpl_got_user_idle(acct, id, !!idle, <ins>(time_t) </ins>idle);</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>564</th><th>593</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>565</th><th>594</th><td class=\"l\"><span>&nbsp; } else {</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L1403\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L1432\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>1403</th><th>1432</th><td class=\"l\"><span>&nbsp; GaimAccount *account;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>1404</th><th>1433</th><td class=\"l\"><span>&nbsp; guint port;</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"last first\">\n                          <th>\u00a0</th><th>1434</th><td class=\"r\"><ins>&nbsp; const char *current_host;</ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>1405</th><th>1435</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>1406</th><th>1436</th><td class=\"l\"><span>&nbsp; pd = mwSession_getClientData(session);</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L1408\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L1438\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>1408</th><th>1438</th><td class=\"l\"><span>&nbsp; account = gaim_connection_get_account(gc);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>1409</th><th>1439</th><td class=\"l\"><span>&nbsp; port = gaim_account_get_int(account, MW_KEY_PORT, MW_PLUGIN_DEFAULT_PORT);</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"first\">\n                          <th>\u00a0</th><th>1440</th><td class=\"r\"><ins>&nbsp; current_host = gaim_account_get_string(account, MW_KEY_HOST,</ins>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>\u00a0</th><th>1441</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MW_PLUGIN_DEFAULT_HOST);</ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>1410</th><th>1442</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>1411</th><th>1443</th><td class=\"l\"><span>&nbsp; if(gaim_account_get_bool(account, MW_KEY_FORCE, FALSE) ||</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>1412</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp;(gaim_proxy_connect(account, host, port, connect_cb, pd) == NULL)) {</span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>1444</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp;(! strcmp(current_host, host)) ||</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>1445</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp;(gaim_proxy_connect(NULL, account, host, port, connect_cb, pd) == NULL)) {</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>1446</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>1447</th><td class=\"r\"><span>&nbsp; &nbsp; /* if we're configured to force logins, or if we're being</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>1448</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp;redirected to the already configured host, or if we couldn't</span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>1449</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp;connect to the new host, we'll force the login instead */</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>1413</th><th>1450</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>1414</th><th>1451</th><td class=\"l\"><span>&nbsp; &nbsp; mwSession_forceLogin(session);</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L1434\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L1471\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>1434</th><th>1471</th><td class=\"l\"><span>&nbsp; /* start watching for new conversations */</span>\u00a0</td>\n                  </tr><tr>\n                          <th>1435</th><th>1472</th><td class=\"l\"><span>&nbsp; gaim_signal_connect(gaim_conversations_get_handle(),</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>1436</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"conversation-created\", pd<del>-&gt;gc</del>,</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>1473</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"conversation-created\", pd<ins></ins>,</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>1437</th><th>1474</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; GAIM_CALLBACK(conversation_created_cb), pd);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>1438</th><th>1475</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>1439</th><th>1476</th><td class=\"l\"><span>&nbsp; /* watch for group extended menu items */</span>\u00a0</td>\n                  </tr><tr>\n                          <th>1440</th><th>1477</th><td class=\"l\"><span>&nbsp; gaim_signal_connect(gaim_blist_get_handle(),</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>1441</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"blist-node-extended-menu\", pd<del>-&gt;gc</del>,</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>1478</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \"blist-node-extended-menu\", pd<ins></ins>,</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>1442</th><th>1479</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; GAIM_CALLBACK(blist_node_menu_cb), pd);</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>1443</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>1480</th><td class=\"r\"><span>&nbsp; </span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>1444</th><th>1481</th><td class=\"l\"><span>&nbsp; /* use our services to do neat things */</span>\u00a0</td>\n                  </tr><tr>\n                          <th>1445</th><th>1482</th><td class=\"l\"><span>&nbsp; services_starting(pd);</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"first\">\n                          <th>\u00a0</th><th>1483</th><td class=\"r\"><ins>}</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>1484</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>1485</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>1486</th><td class=\"r\"><ins>static void session_stopping(struct mwGaimPluginData *pd) {</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>1487</th><td class=\"r\"><ins>&nbsp; /* stop watching the signals from session_started */</ins>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>\u00a0</th><th>1488</th><td class=\"r\"><ins>&nbsp; gaim_signals_disconnect_by_handle(pd);</ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>1446</th><th>1489</th><td class=\"l\"><span>}</span>\u00a0</td>\n                  </tr><tr>\n                          <th>1447</th><th>1490</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L1505\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L1548\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>1505</th><th>1548</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>1506</th><th>1549</th><td class=\"l\"><span>&nbsp; case mwSession_STOPPING:</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"first\">\n                          <th>\u00a0</th><th>1550</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>1551</th><td class=\"r\"><ins>&nbsp; &nbsp; session_stopping(pd);</ins>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>\u00a0</th><th>1552</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>1507</th><th>1553</th><td class=\"l\"><span>&nbsp; &nbsp; if(GPOINTER_TO_UINT(info) &amp; ERR_FAILURE) {</span>\u00a0</td>\n                  </tr><tr>\n                          <th>1508</th><th>1554</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; char *err = mwError(GPOINTER_TO_UINT(info));</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L1639\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L1685\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>1639</th><th>1685</th><td class=\"l\"><span>&nbsp; err = errno;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>1640</th><th>1686</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>1641</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; /* read problem occur<del></del>ed if we're here, so we'll need to take care of</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>1687</th><td class=\"r\"><span>&nbsp; /* read problem occur<ins>r</ins>ed if we're here, so we'll need to take care of</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>1642</th><th>1688</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp;it and clean up internal state */</span>\u00a0</td>\n                  </tr><tr>\n                          <th>1643</th><th>1689</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L1674\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L1720\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>1674</th><th>1720</th><td class=\"l\"><span>&nbsp; struct mwGaimPluginData *pd = data;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>1675</th><th>1721</th><td class=\"l\"><span>&nbsp; GaimConnection *gc = pd-&gt;gc;</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"rem\">\n                  <tr class=\"first\">\n                          <th>1676</th><th>\u00a0</th><td class=\"l\"><del></del>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>1677</th><th>\u00a0</th><td class=\"l\"><del>&nbsp; pd-&gt;connect_data = NULL;</del>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>1678</th><th>1722</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>1679</th><th>1723</th><td class=\"l\"><span>&nbsp; if(source &lt; 0) {</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L2082\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L2126\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>2082</th><th>2126</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>2083</th><th>2127</th><td class=\"l\"><span>&nbsp; xfer = gaim_xfer_new(acct, GAIM_XFER_RECEIVE, who);</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>2084</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>2085</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; gaim_xfer_ref(xfer);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>2086</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; mwFileTransfer_setClientData(ft, xfer, (GDestroyNotify) gaim_xfer_unref);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>2087</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; xfer-&gt;data = ft;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>2088</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>2089</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; gaim_xfer_set_init_fnc(xfer, ft_incoming_init);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>2090</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; gaim_xfer_set_cancel_recv_fnc(xfer, ft_incoming_cancel);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>2091</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; gaim_xfer_set_request_denied_fnc(xfer, ft_incoming_cancel);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>2092</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>2093</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; gaim_xfer_set_filename(xfer, mwFileTransfer_getFileName(ft));</span>\u00a0</td>\n                      </tr><tr>\n                        <th>2094</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; gaim_xfer_set_size(xfer, mwFileTransfer_getFileSize(ft));</span>\u00a0</td>\n                      </tr><tr>\n                        <th>2095</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; gaim_xfer_set_message(xfer, mwFileTransfer_getMessage(ft));</span>\u00a0</td>\n                      </tr><tr>\n                        <th>2096</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>2097</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; gaim_xfer_request(xfer);</span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>2128</th><td class=\"r\"><span>&nbsp; if (xfer)</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>2129</th><td class=\"r\"><span>&nbsp; {</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>2130</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_ref(xfer);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>2131</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; mwFileTransfer_setClientData(ft, xfer, (GDestroyNotify) gaim_xfer_unref);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>2132</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; xfer-&gt;data = ft;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>2133</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>2134</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_init_fnc(xfer, ft_incoming_init);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>2135</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_cancel_recv_fnc(xfer, ft_incoming_cancel);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>2136</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_request_denied_fnc(xfer, ft_incoming_cancel);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>2137</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>2138</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_filename(xfer, mwFileTransfer_getFileName(ft));</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>2139</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_size(xfer, mwFileTransfer_getFileSize(ft));</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>2140</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_message(xfer, mwFileTransfer_getMessage(ft));</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>2141</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>2142</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_request(xfer);</span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>2143</th><td class=\"r\"><span>&nbsp; }</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>2098</th><th>2144</th><td class=\"l\"><span>}</span>\u00a0</td>\n                  </tr><tr>\n                          <th>2099</th><th>2145</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L3216\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L3262\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>3216</th><th>3262</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>3217</th><th>3263</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>3218</th><th>\u00a0</th><td class=\"l\"><span>static void mw_prpl_tooltip_text(GaimBuddy *b, G<del>String *str</del>, gboolean full) {</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>3264</th><td class=\"r\"><span>static void mw_prpl_tooltip_text(GaimBuddy *b, G<ins>aimNotifyUserInfo *user_info</ins>, gboolean full) {</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>3219</th><th>3265</th><td class=\"l\"><span>&nbsp; GaimConnection *gc;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>3220</th><th>3266</th><td class=\"l\"><span>&nbsp; struct mwGaimPluginData *pd;</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L3233\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L3279\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>3233</th><th>3279</th><td class=\"l\"><span>&nbsp; if(message != NULL &amp;&amp; gaim_utf8_strcasecmp(status, message)) {</span>\u00a0</td>\n                  </tr><tr>\n                          <th>3234</th><th>3280</th><td class=\"l\"><span>&nbsp; &nbsp; tmp = g_markup_escape_text(message, -1);</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>3235</th><th>\u00a0</th><td class=\"l\"><span><del>&nbsp; &nbsp; g_string_append_printf(str, _(\"\\n&lt;b&gt;%s:&lt;/b&gt; %s\")</del>, status, tmp);</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>3281</th><td class=\"r\"><span><ins>&nbsp; &nbsp; &nbsp; &nbsp; gaim_notify_user_info_add_pair(user_info</ins>, status, tmp);</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>3236</th><th>3282</th><td class=\"l\"><span>&nbsp; &nbsp; g_free(tmp);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>3237</th><th>3283</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>3238</th><th>3284</th><td class=\"l\"><span>&nbsp; } else {</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>3239</th><th>\u00a0</th><td class=\"l\"><span><del>&nbsp; &nbsp; g_string_append_printf(str, _(\"\\n&lt;b&gt;Status:&lt;/b&gt; %</del>s\"), status);</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>3285</th><td class=\"r\"><span><ins>&nbsp; &nbsp; &nbsp; &nbsp; gaim_notify_user_info_add_pair(user_info, _(\"Statu</ins>s\"), status);</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>3240</th><th>3286</th><td class=\"l\"><span>&nbsp; }</span>\u00a0</td>\n                  </tr><tr>\n                          <th>3241</th><th>3287</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L3243\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L3289\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>3243</th><th>3289</th><td class=\"l\"><span>&nbsp; &nbsp; tmp = user_supports_text(pd-&gt;srvc_aware, b-&gt;name);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>3244</th><th>3290</th><td class=\"l\"><span>&nbsp; &nbsp; if(tmp) {</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>3245</th><th>\u00a0</th><td class=\"l\"><span><del>&nbsp; &nbsp; &nbsp; g_string_append_printf(str, _(\"\\n&lt;b&gt;Supports:&lt;/b&gt; %</del>s\"), tmp);</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>3291</th><td class=\"r\"><span><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_notify_user_info_add_pair(user_info, _(\"Support</ins>s\"), tmp);</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>3246</th><th>3292</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; g_free(tmp);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>3247</th><th>3293</th><td class=\"l\"><span>&nbsp; &nbsp; }</span>\u00a0</td>\n                  </tr><tr>\n                          <th>3248</th><th>3294</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>3249</th><th>3295</th><td class=\"l\"><span>&nbsp; &nbsp; if(buddy_is_external(b)) {</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>3250</th><th>\u00a0</th><td class=\"l\"><span><del>&nbsp; &nbsp; &nbsp; g_string_append(str, _(\"\\n&lt;b&gt;External User&lt;/b&gt;</del>\"));</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>3296</th><td class=\"r\"><span><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_notify_user_info_add_pair(user_info, NULL, _(\"External User</ins>\"));</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>3251</th><th>3297</th><td class=\"l\"><span>&nbsp; &nbsp; }</span>\u00a0</td>\n                  </tr><tr>\n                          <th>3252</th><th>3298</th><td class=\"l\"><span>&nbsp; }</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L3629\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L3675\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>3629</th><th>3675</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>3630</th><th>3676</th><td class=\"l\"><span>&nbsp; char *user, *pass, *host;</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>3631</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; guint port<del>, client</del>;</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>3677</th><td class=\"r\"><span>&nbsp; guint port<ins></ins>;</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>3632</th><th>3678</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>3633</th><th>3679</th><td class=\"l\"><span>&nbsp; gc = gaim_account_get_connection(account);</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L3670\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L3716\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>3670</th><th>3716</th><td class=\"l\"><span>&nbsp; mwSession_setProperty(pd-&gt;session, mwSession_AUTH_PASSWORD, pass, g_free);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>3671</th><th>3717</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>3672</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; client = mwLogin_MEANWHILE;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>3673</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; if(gaim_account_get_bool(account, MW_KEY_FAKE_IT, FALSE))</span>\u00a0</td>\n                      </tr><tr>\n                        <th>3674</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; client = mwLogin_BINARY;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>3675</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>3676</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; DEBUG_INFO(\"client id: 0x%04x\\n\", client);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>3677</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>3678</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; mwSession_setProperty(pd-&gt;session, mwSession_CLIENT_TYPE_ID,</span>\u00a0</td>\n                      </tr><tr>\n                        <th>3679</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; GUINT_TO_POINTER(client), NULL);</span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>3718</th><td class=\"r\"><span>&nbsp; if(gaim_account_get_bool(account, MW_KEY_FAKE_IT, FALSE)) {</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>3719</th><td class=\"r\"><span>&nbsp; &nbsp; guint client, major, minor;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>3720</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>3721</th><td class=\"r\"><span>&nbsp; &nbsp; /* if we're faking the login, let's also fake the version we're</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>3722</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp;reporting. Let's also allow the actual values to be specified */</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>3723</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>3724</th><td class=\"r\"><span>&nbsp; &nbsp; client = gaim_account_get_int(account, MW_KEY_CLIENT, mwLogin_BINARY);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>3725</th><td class=\"r\"><span>&nbsp; &nbsp; major = gaim_account_get_int(account, MW_KEY_MAJOR, 0x001e);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>3726</th><td class=\"r\"><span>&nbsp; &nbsp; minor = gaim_account_get_int(account, MW_KEY_MINOR, 0x001d);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>3727</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>3728</th><td class=\"r\"><span>&nbsp; &nbsp; DEBUG_INFO(\"client id: 0x%04x\\n\", client);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>3729</th><td class=\"r\"><span>&nbsp; &nbsp; DEBUG_INFO(\"client major: 0x%04x\\n\", major);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>3730</th><td class=\"r\"><span>&nbsp; &nbsp; DEBUG_INFO(\"client minor: 0x%04x\\n\", minor);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>3731</th><td class=\"r\"><span>&nbsp; </span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>3732</th><td class=\"r\"><span>&nbsp; &nbsp; mwSession_setProperty(pd-&gt;session, mwSession_CLIENT_TYPE_ID,</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>3733</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; GUINT_TO_POINTER(client), NULL);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>3734</th><td class=\"r\"><span>&nbsp; &nbsp; </span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>3735</th><td class=\"r\"><span>&nbsp; &nbsp; mwSession_setProperty(pd-&gt;session, mwSession_CLIENT_VER_MAJOR,</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>3736</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; GUINT_TO_POINTER(major), NULL);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>3737</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>3738</th><td class=\"r\"><span>&nbsp; &nbsp; mwSession_setProperty(pd-&gt;session, mwSession_CLIENT_VER_MINOR,</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>3739</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; GUINT_TO_POINTER(minor), NULL);</span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>3740</th><td class=\"r\"><span>&nbsp; }</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>3680</th><th>3741</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>3681</th><th>3742</th><td class=\"l\"><span>&nbsp; gaim_connection_update_progress(gc, _(\"Connecting\"), 1, MW_CONNECT_STEPS);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>3682</th><th>3743</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>3683</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; pd-&gt;connect_data = gaim_proxy_connect(account, host, port, connect_cb, pd);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>3684</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; if(pd-&gt;connect_data == NULL) {</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>3744</th><td class=\"r\"><span>&nbsp; if (gaim_proxy_connect(gc, account, host, port, connect_cb, pd) == NULL) {</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>3685</th><th>3745</th><td class=\"l\"><span>&nbsp; &nbsp; gaim_connection_error(gc, _(\"Unable to connect to host\"));</span>\u00a0</td>\n                  </tr><tr>\n                          <th>3686</th><th>3746</th><td class=\"l\"><span>&nbsp; }</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L3713\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L3773\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>3713</th><th>3773</th><td class=\"l\"><span>&nbsp; &nbsp; gaim_input_remove(gc-&gt;inpa);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>3714</th><th>3774</th><td class=\"l\"><span>&nbsp; &nbsp; gc-&gt;inpa = 0;</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"rem\">\n                  <tr class=\"first\">\n                          <th>3715</th><th>\u00a0</th><td class=\"l\"><del>&nbsp; }</del>\u00a0</td>\n                  </tr><tr>\n                          <th>3716</th><th>\u00a0</th><td class=\"l\"><del></del>\u00a0</td>\n                  </tr><tr>\n                          <th>3717</th><th>\u00a0</th><td class=\"l\"><del>&nbsp; if(pd-&gt;connect_data != NULL) {</del>\u00a0</td>\n                  </tr><tr>\n                          <th>3718</th><th>\u00a0</th><td class=\"l\"><del>&nbsp; &nbsp; gaim_proxy_connect_cancel(pd-&gt;connect_data);</del>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>3719</th><th>\u00a0</th><td class=\"l\"><del>&nbsp; &nbsp; pd-&gt;connect_data = NULL;</del>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>3720</th><th>3775</th><td class=\"l\"><span>&nbsp; }</span>\u00a0</td>\n                  </tr><tr>\n                          <th>3721</th><th>3776</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L3968\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L4023\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>3968</th><th>4023</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>3969</th><th>4024</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>3970</th><th>\u00a0</th><td class=\"l\"><span>static unsigned int mw_prpl_send_typing(GaimConnection *gc, const char *name,</span>\u00a0</td>\n                      </tr><tr>\n                        <th>3971</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;GaimTypingState state) {</span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>4025</th><td class=\"r\"><span>static unsigned int mw_prpl_send_typing(GaimConnection *gc,</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4026</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const char *name,</span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>4027</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; GaimTypingState state) {</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>3972</th><th>4028</th><td class=\"l\"><span>&nbsp; </span>\u00a0</td>\n                  </tr><tr>\n                          <th>3973</th><th>4029</th><td class=\"l\"><span>&nbsp; struct mwGaimPluginData *pd;</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L3984\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L4040\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>3984</th><th>4040</th><td class=\"l\"><span>&nbsp; conv = mwServiceIm_getConversation(pd-&gt;srvc_im, &amp;who);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>3985</th><th>4041</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>3986</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; if(mwConversation_isOpen(conv))</span>\u00a0</td>\n                      </tr><tr>\n                        <th>3987</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; return ! mwConversation_send(conv, mwImSend_TYPING, t);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>3988</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>3989</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; if ((state == GAIM_TYPING) || (state == GAIM_TYPED)) {</span>\u00a0</td>\n                      </tr><tr>\n                        <th>3990</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; /* let's only open a channel for typing, not for not-typing.</span>\u00a0</td>\n                      </tr><tr>\n                        <th>3991</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp;Otherwise two users in psychic mode will continually open</span>\u00a0</td>\n                      </tr><tr>\n                        <th>3992</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp;conversations to each other, never able to get rid of them, as</span>\u00a0</td>\n                      </tr><tr>\n                        <th>3993</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp;when the other person closes, it psychicaly opens again */</span>\u00a0</td>\n                      </tr><tr>\n                        <th>3994</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>4042</th><td class=\"r\"><span>&nbsp; if(mwConversation_isOpen(conv)) {</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4043</th><td class=\"r\"><span>&nbsp; &nbsp; mwConversation_send(conv, mwImSend_TYPING, t);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4044</th><td class=\"r\"><span>&nbsp; &nbsp; </span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4045</th><td class=\"r\"><span>&nbsp; } else if((state == GAIM_TYPING) || (state == GAIM_TYPED)) {</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4046</th><td class=\"r\"><span>&nbsp; &nbsp; /* only open a channel for sending typing notification, not for</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4047</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp;when typing has stopped. There's no point in re-opening a</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4048</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp;channel just to tell someone that this side isn't typing. */</span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>4049</th><td class=\"r\"><span>&nbsp; &nbsp; </span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>3995</th><th>4050</th><td class=\"l\"><span>&nbsp; &nbsp; convo_queue(conv, mwImSend_TYPING, t);</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>3996</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>3997</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; if(! mwConversation_isPending(conv))<del></del></span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>4051</th><td class=\"r\"><span>&nbsp; &nbsp; </span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>4052</th><td class=\"r\"><span>&nbsp; &nbsp; if(! mwConversation_isPending(conv))<ins>&nbsp;{</ins></span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>3998</th><th>4053</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; mwConversation_open(conv);</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>3999</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; }</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4000</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>4001</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; /*</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4002</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp;* TODO: This should probably be \"0.\"&nbsp; When it's set to 1, the Gaim</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4003</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; &nbsp;core will call serv_send_typing(gc, who, GAIM_TYPING) once</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4004</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; &nbsp;every second until the Gaim user stops typing. --KingAnt</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4005</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp;*/</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4006</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; return 1;</span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>4054</th><td class=\"r\"><span>&nbsp; &nbsp; }</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4055</th><td class=\"r\"><span>&nbsp; }</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4056</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>4057</th><td class=\"r\"><span>&nbsp; return 0;</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4007</th><th>4058</th><td class=\"l\"><span>}</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4008</th><th>4059</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L4041\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L4092\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>4041</th><th>4092</th><td class=\"l\"><span>&nbsp; &nbsp; return \"Alphaworks NotesBuddy\";</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4042</th><th>4093</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"first\">\n                          <th>\u00a0</th><th>4094</th><td class=\"r\"><ins>&nbsp; case 0x1305:</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>4095</th><td class=\"r\"><ins>&nbsp; case 0x1306:</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>4096</th><td class=\"r\"><ins>&nbsp; case 0x1307:</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>4097</th><td class=\"r\"><ins>&nbsp; &nbsp; return \"Lotus Sametime Connect 7.5\";</ins>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>\u00a0</th><th>4098</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4043</th><th>4099</th><td class=\"l\"><span>&nbsp; case mwLogin_SANITY:</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4044</th><th>4100</th><td class=\"l\"><span>&nbsp; &nbsp; return \"Sanity\";</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L4067\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L4123\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>4067</th><th>4123</th><td class=\"l\"><span>&nbsp; GaimAccount *acct;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4068</th><th>4124</th><td class=\"l\"><span>&nbsp; GaimBuddy *b;</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>4069</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; <del></del></span>\u00a0</td>\n                      </tr><tr>\n                        <th>4070</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; <del>GString *str</del>;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4071</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; const char *tmp<del></del>;</span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>4125</th><td class=\"r\"><span>&nbsp; <ins>GaimNotifyUserInfo *user_info;</ins></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4126</th><td class=\"r\"><span>&nbsp; <ins>char *tmp</ins>;</span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>4127</th><td class=\"r\"><span>&nbsp; const char *tmp<ins>2</ins>;</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4072</th><th>4128</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>4073</th><th>4129</th><td class=\"l\"><span>&nbsp; g_return_if_fail(who != NULL);</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L4078\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L4134\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>4078</th><th>4134</th><td class=\"l\"><span>&nbsp; acct = gaim_connection_get_account(gc);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4079</th><th>4135</th><td class=\"l\"><span>&nbsp; b = gaim_find_buddy(acct, who);</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>4080</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>4081</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; str = g_string_new(NULL);</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>4136</th><td class=\"r\"><span>&nbsp; user_info = gaim_notify_user_info_new();</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4082</th><th>4137</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>4083</th><th>4138</th><td class=\"l\"><span>&nbsp; if(gaim_str_has_prefix(who, \"@E \")) {</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>4084</th><th>\u00a0</th><td class=\"l\"><span><del>&nbsp; &nbsp; g_string_append(str, _(\"&lt;b&gt;External User&lt;/b&gt;&lt;br&gt;\")</del>);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4085</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; }<del></del></span>\u00a0</td>\n                      </tr><tr>\n                        <th>4086</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>4087</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; g<del>_string_append_printf(str, _(\"&lt;b&gt;User ID:&lt;/b&gt; %s&lt;br&gt;</del>\"), who);</span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>4139</th><td class=\"r\"><span><ins>&nbsp; &nbsp; &nbsp; &nbsp; gaim_notify_user_info_add_pair(user_info, _(\"External User\"), NULL</ins>);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4140</th><td class=\"r\"><span>&nbsp; }<ins></ins></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4141</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>4142</th><td class=\"r\"><span>&nbsp; g<ins>aim_notify_user_info_add_pair(user_info, _(\"User ID</ins>\"), who);</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4088</th><th>4143</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>4089</th><th>4144</th><td class=\"l\"><span>&nbsp; if(b) {</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L4091\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L4146\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>4091</th><th>4146</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>4092</th><th>4147</th><td class=\"l\"><span>&nbsp; &nbsp; if(b-&gt;server_alias) {</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>4093</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; g_string_append_printf(str, _(\"&lt;b&gt;Full Name:&lt;/b&gt; %s&lt;br&gt;\"),</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4094</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;b-&gt;server_alias);</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>4148</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_notify_user_info_add_pair(user_info, _(\"Full Name\"), b-&gt;server_alias);</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4095</th><th>4149</th><td class=\"l\"><span>&nbsp; &nbsp; }</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4096</th><th>4150</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>4097</th><th>4151</th><td class=\"l\"><span>&nbsp; &nbsp; type = gaim_blist_node_get_int((GaimBlistNode *) b, BUDDY_KEY_CLIENT);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4098</th><th>4152</th><td class=\"l\"><span>&nbsp; &nbsp; if(type) {</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>4099</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; g_string_append(str, _(\"&lt;b&gt;Last Known Client:&lt;/b&gt; \"));</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4100</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>4101</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; tmp = mw_client_name(type);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4102</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; if(tmp) {</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4103</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; g_string_append(str, tmp);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4104</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; g_string_append(str, \"&lt;br&gt;\");</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4105</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>\u00a0</td>\n                      </tr><tr>\n                        <th>4106</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; } else {</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4107</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; g_string_append_printf(str, _(\"Unknown (0x%04x)&lt;br&gt;\"), type);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4108</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; }</span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>4153</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmp = g_strdup(mw_client_name(type));</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4154</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!tmp)</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4155</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmp = g_strdup_printf(_(\"Unknown (0x%04x)&lt;br&gt;\"), type);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4156</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4157</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_notify_user_info_add_pair(user_info, _(\"Last Known Client\"), tmp);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4158</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>4159</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g_free(tmp);</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4109</th><th>4160</th><td class=\"l\"><span>&nbsp; &nbsp; }</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4110</th><th>4161</th><td class=\"l\"><span>&nbsp; }</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>4111</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>4162</th><td class=\"r\"><span>&nbsp; </span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4112</th><th>4163</th><td class=\"l\"><span>&nbsp; tmp = user_supports_text(pd-&gt;srvc_aware, who);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4113</th><th>4164</th><td class=\"l\"><span>&nbsp; if(tmp) {</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>4114</th><th>\u00a0</th><td class=\"l\"><span><del>&nbsp; &nbsp; g_string_append_printf(str, _(\"&lt;b&gt;Supports:&lt;/b&gt; %s&lt;br&gt;</del>\"), tmp);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4115</th><th>\u00a0</th><td class=\"l\"><span><del>&nbsp; &nbsp; g_free((char *) </del>tmp);</span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>4165</th><td class=\"r\"><span><ins>&nbsp; &nbsp; &nbsp; &nbsp; gaim_notify_user_info_add_pair(user_info, _(\"Supports</ins>\"), tmp);</span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>4166</th><td class=\"r\"><span><ins>&nbsp; &nbsp; &nbsp; &nbsp; g_free(</ins>tmp);</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4116</th><th>4167</th><td class=\"l\"><span>&nbsp; }</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4117</th><th>4168</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>4118</th><th>4169</th><td class=\"l\"><span>&nbsp; if(b) {</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>4119</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; tmp = status_text(b);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4120</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; g_string_append_printf(str, _(\"&lt;b&gt;Status:&lt;/b&gt; %s\"), tmp);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4121</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>4122</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; g_string_append(str, \"&lt;hr&gt;\");</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4123</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; </span>\u00a0</td>\n                      </tr><tr>\n                        <th>4124</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; tmp = mwServiceAware_getText(pd-&gt;srvc_aware, &amp;idb);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4125</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; if(tmp) {</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4126</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; tmp = g_markup_escape_text(tmp, -1);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4127</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; g_string_append(str, tmp);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4128</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; g_free((char *) tmp);</span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>4170</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gaim_notify_user_info_add_pair(user_info, _(\"Status\"), status_text(b));</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4171</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4172</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; /* XXX Is this adding a status message in its own section rather than with the \"Status\" label? */</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4173</th><td class=\"r\"><span>&nbsp; &nbsp; tmp2 = mwServiceAware_getText(pd-&gt;srvc_aware, &amp;idb);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4174</th><td class=\"r\"><span>&nbsp; &nbsp; if(tmp2) {</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4175</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; tmp = g_markup_escape_text(tmp2, -1);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4176</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_notify_user_info_add_section_break(user_info);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4177</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_notify_user_info_add_pair(user_info, NULL, tmp);</span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>4178</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; g_free(tmp);</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4129</th><th>4179</th><td class=\"l\"><span>&nbsp; &nbsp; }</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4130</th><th>4180</th><td class=\"l\"><span>&nbsp; }</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L4133\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L4183\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>4133</th><th>4183</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp;this notification, so that it can create its own */</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4134</th><th>4184</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>4135</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; gaim_notify_userinfo(gc, who, str-&gt;str, NULL, NULL);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4136</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>4137</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; g_string_free(str, TRUE);</span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>4185</th><td class=\"r\"><span>&nbsp; gaim_notify_userinfo(gc, who, user_info, NULL, NULL);</span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>4186</th><td class=\"r\"><span>&nbsp; gaim_notify_user_info_destroy(user_info);</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4138</th><th>4187</th><td class=\"l\"><span>}</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4139</th><th>4188</th><td class=\"l\"><span>&nbsp;</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L4238\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L4287\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>4238</th><th>4287</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>4239</th><th>4288</th><td class=\"l\"><span>static void notify_add(GaimConnection *gc, GList *row, void *user_data) {</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"first\">\n                          <th>\u00a0</th><th>4289</th><td class=\"r\"><ins>&nbsp; BuddyAddData *data = user_data;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>4290</th><td class=\"r\"><ins>&nbsp; char *group_name = NULL;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>4291</th><td class=\"r\"><ins>&nbsp; </ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>4292</th><td class=\"r\"><ins>&nbsp; if (data &amp;&amp; data-&gt;group) {</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>4293</th><td class=\"r\"><ins>&nbsp; &nbsp; group_name = data-&gt;group-&gt;name;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>4294</th><td class=\"r\"><ins>&nbsp; }</ins>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>\u00a0</th><th>4295</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4240</th><th>4296</th><td class=\"l\"><span>&nbsp; gaim_blist_request_add_buddy(gaim_connection_get_account(gc),</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>4241</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;g_list_nth_data(row, 1), <del>NULL</del>,</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>4297</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;g_list_nth_data(row, 1), <ins>group_name</ins>,</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4242</th><th>4298</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;g_list_nth_data(row, 0));</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4243</th><th>4299</th><td class=\"l\"><span>}</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L4245\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L4301\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>4245</th><th>4301</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>4246</th><th>4302</th><td class=\"l\"><span>static void notify_close(gpointer data) {</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>4247</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; ;</span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>4303</th><td class=\"r\"><span>&nbsp; if (data) {</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4304</th><td class=\"r\"><span>&nbsp; &nbsp; g_free(data);</span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>4305</th><td class=\"r\"><span>&nbsp; }</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4248</th><th>4306</th><td class=\"l\"><span>}</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4249</th><th>4307</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>4250</th><th>4308</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>4251</th><th>4309</th><td class=\"l\"><span>static void multi_resolved_query(struct mwResolveResult *result,</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>4252</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;GaimConnection *gc<del></del>) {</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>4310</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;GaimConnection *gc<ins>, gpointer data</ins>) {</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4253</th><th>4311</th><td class=\"l\"><span>&nbsp; GList *l;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4254</th><th>4312</th><td class=\"l\"><span>&nbsp; const char *msgA;</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L4295\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L4353\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>4295</th><th>4353</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>4296</th><th>4354</th><td class=\"l\"><span>&nbsp; gaim_notify_searchresults(gc, _(\"Select User\"),</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>4297</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; msgA, msg, sres, notify_close, <del>NULL</del>);</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>4355</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; msgA, msg, sres, notify_close, <ins>data</ins>);</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4298</th><th>4356</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>4299</th><th>4357</th><td class=\"l\"><span>&nbsp; g_free(msg);</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L4306\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L4364\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>4306</th><th>4364</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>4307</th><th>4365</th><td class=\"l\"><span>&nbsp; struct mwResolveResult *res = NULL;</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>4308</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; GaimBuddy *buddy = b;</span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>4366</th><td class=\"r\"><span>&nbsp; BuddyAddData *data = b;</span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>4367</th><td class=\"r\"><span>&nbsp; GaimBuddy *buddy = NULL;</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4309</th><th>4368</th><td class=\"l\"><span>&nbsp; GaimConnection *gc;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4310</th><th>4369</th><td class=\"l\"><span>&nbsp; struct mwGaimPluginData *pd;</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"first\">\n                          <th>\u00a0</th><th>4370</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>4371</th><td class=\"r\"><ins>&nbsp; if (data) {</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>4372</th><td class=\"r\"><ins>&nbsp; &nbsp; buddy = data-&gt;buddy;</ins>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>\u00a0</th><th>4373</th><td class=\"r\"><ins>&nbsp; }</ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4311</th><th>4374</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>4312</th><th>4375</th><td class=\"l\"><span>&nbsp; gc = gaim_account_get_connection(buddy-&gt;account);</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L4326\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L4389\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>4326</th><th>4389</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;the user meant to add */</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4327</th><th>4390</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gaim_blist_remove_buddy(buddy);</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>4328</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; multi_resolved_query(res, gc<del></del>);</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>4391</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; multi_resolved_query(res, gc<ins>, data</ins>);</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4329</th><th>4392</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>\u00a0</td>\n                  </tr><tr>\n                          <th>4330</th><th>4393</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; } else {</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L4339\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L4402\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>4339</th><th>4402</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>4340</th><th>4403</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; blist_schedule(pd);</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"first\">\n                          <th>\u00a0</th><th>4404</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>\u00a0</th><th>4405</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; g_free(data);</ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4341</th><th>4406</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; }</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4342</th><th>4407</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; </span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L4344\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L4409\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>4344</th><th>4409</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; /* prompt user if more than one match was returned */</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4345</th><th>4410</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; gaim_blist_remove_buddy(buddy);</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>4346</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; multi_resolved_query(res, gc<del></del>);</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>4411</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; multi_resolved_query(res, gc<ins>, data</ins>);</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4347</th><th>4412</th><td class=\"l\"><span>&nbsp; &nbsp; }</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4348</th><th>4413</th><td class=\"l\"><span>&nbsp; &nbsp; </span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L4350\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L4415\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>4350</th><th>4415</th><td class=\"l\"><span>&nbsp; }</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4351</th><th>4416</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"last first\">\n                          <th>\u00a0</th><th>4417</th><td class=\"r\"><ins>#if 0</ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4352</th><th>4418</th><td class=\"l\"><span>&nbsp; /* fall-through indicates that we couldn't find a matching user in</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4353</th><th>4419</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp;the resolve service (ether error or zero results), so we remove</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4354</th><th>4420</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp;this buddy */</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"first\">\n                          <th>\u00a0</th><th>4421</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>4422</th><td class=\"r\"><ins>&nbsp; /* note: I can't really think of a good reason to alter the buddy</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>4423</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp;list in any way. There has been at least one report where the</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>4424</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp;resolve service isn't returning correct results anyway, so let's</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>4425</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp;just leave them in the list. I'm just going to if0 this section</ins>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>\u00a0</th><th>4426</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp;out unless I can think of a very good reason to do this. -siege */</ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4355</th><th>4427</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>4356</th><th>4428</th><td class=\"l\"><span>&nbsp; DEBUG_INFO(\"no such buddy in community\\n\");</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L4375\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L4447\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>4375</th><th>4447</th><td class=\"l\"><span>&nbsp; &nbsp; g_free(msg);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4376</th><th>4448</th><td class=\"l\"><span>&nbsp; }</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"last first\">\n                          <th>\u00a0</th><th>4449</th><td class=\"r\"><ins>#endif</ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4377</th><th>4450</th><td class=\"l\"><span>}</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4378</th><th>4451</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L4388\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L4461\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>4388</th><th>4461</th><td class=\"l\"><span>&nbsp; guint32 req;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4389</th><th>4462</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"first\">\n                          <th>\u00a0</th><th>4463</th><td class=\"r\"><ins>&nbsp; BuddyAddData *data;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>4464</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>4465</th><td class=\"r\"><ins>&nbsp; data = g_new0(BuddyAddData, 1);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>4466</th><td class=\"r\"><ins>&nbsp; data-&gt;buddy = buddy;</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>4467</th><td class=\"r\"><ins>&nbsp; data-&gt;group = group;</ins>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>\u00a0</th><th>4468</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4390</th><th>4469</th><td class=\"l\"><span>&nbsp; pd = gc-&gt;proto_data;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4391</th><th>4470</th><td class=\"l\"><span>&nbsp; srvc = pd-&gt;srvc_resolve;</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L4401\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L4480\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>4401</th><th>4480</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>4402</th><th>4481</th><td class=\"l\"><span>&nbsp; req = mwServiceResolve_resolve(srvc, query, flags, add_buddy_resolved,</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>4403</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<del>buddy</del>, NULL);</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>4482</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<ins>data</ins>, NULL);</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4404</th><th>4483</th><td class=\"l\"><span>&nbsp; g_list_free(query);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4405</th><th>4484</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L4738\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L4817\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>4738</th><th>4817</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;int id,</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4739</th><th>4818</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const char *message,</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>4740</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <del>&nbsp; &nbsp; &nbsp; &nbsp; </del> GaimMessageFlags flags) {</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>4819</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <ins>&nbsp; &nbsp; </ins> GaimMessageFlags flags) {</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4741</th><th>4820</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>4742</th><th>4821</th><td class=\"l\"><span>&nbsp; struct mwGaimPluginData *pd;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4743</th><th>4822</th><td class=\"l\"><span>&nbsp; struct mwConference *conf;</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"first\">\n                          <th>\u00a0</th><th>4823</th><td class=\"r\"><ins>&nbsp; char *msg;</ins>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>\u00a0</th><th>4824</th><td class=\"r\"><ins>&nbsp; int ret;</ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4744</th><th>4825</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>4745</th><th>4826</th><td class=\"l\"><span>&nbsp; pd = gc-&gt;proto_data;</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L4748\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L4829\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>4748</th><th>4829</th><td class=\"l\"><span>&nbsp; conf = ID_TO_CONF(pd, id);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4749</th><th>4830</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"first\">\n                          <th>\u00a0</th><th>4831</th><td class=\"r\"><ins>&nbsp; msg = gaim_markup_strip_html(message);</ins>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>\u00a0</th><th>4832</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4750</th><th>4833</th><td class=\"l\"><span>&nbsp; if(conf) {</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>4751</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; ret<del>urn ! mwConference_sendText(conf, message</del>);</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>4834</th><td class=\"r\"><span>&nbsp; &nbsp; ret<ins>&nbsp;= ! mwConference_sendText(conf, msg</ins>);</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4752</th><th>4835</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>4753</th><th>4836</th><td class=\"l\"><span>&nbsp; } else {</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L4755\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L4838\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>4755</th><th>4838</th><td class=\"l\"><span>&nbsp; &nbsp; g_return_val_if_fail(place != NULL, 0);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4756</th><th>4839</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>4757</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; return ! mwPlace_sendText(place, message);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4758</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; }</span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>4840</th><td class=\"r\"><span>&nbsp; &nbsp; ret = ! mwPlace_sendText(place, msg);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4841</th><td class=\"r\"><span>&nbsp; }</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4842</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>4843</th><td class=\"r\"><span>&nbsp; g_free(msg);</span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>4844</th><td class=\"r\"><span>&nbsp; return ret;</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4759</th><th>4845</th><td class=\"l\"><span>}</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4760</th><th>4846</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=65#L4982\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/sametime/sametime.c?rev=228#L5068\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>4982</th><th>5068</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>4983</th><th>5069</th><td class=\"l\"><span>&nbsp; xfer = gaim_xfer_new(acct, GAIM_XFER_SEND, who);</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>4984</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; gaim_xfer_set_init_fnc(xfer, ft_outgoing_init);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4985</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; gaim_xfer_set_cancel_send_fnc(xfer, ft_outgoing_cancel);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>4986</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; </span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>5070</th><td class=\"r\"><span>&nbsp; if (xfer)</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>5071</th><td class=\"r\"><span>&nbsp; {</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>5072</th><td class=\"r\"><span>&nbsp; &nbsp; gaim_xfer_set_init_fnc(xfer, ft_outgoing_init);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>5073</th><td class=\"r\"><span>&nbsp; &nbsp; gaim_xfer_set_cancel_send_fnc(xfer, ft_outgoing_cancel);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>5074</th><td class=\"r\"><span>&nbsp; }</span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>5075</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>4987</th><th>5076</th><td class=\"l\"><span>&nbsp; return xfer;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>4988</th><th>5077</th><td class=\"l\"><span>}</span>\u00a0</td>\n                  </tr>\n            </tbody>\n        </table>\n      </li>\n  </ul>\n</div>\n        <div id=\"help\"><strong>Note:</strong> See <a href=\"/LUCICodeRepository/nomaticIM/wiki/TracChangeset\">TracChangeset</a>\n          for help on using the changeset viewer.</div>\n      </div>\n    </div>\n    <div id=\"altlinks\">\n      <h3>Download in other formats:</h3>\n      <ul>\n        <li class=\"first\">\n          <a rel=\"nofollow\" href=\"?format=diff&amp;new=228\" class=\"diff\">Unified Diff</a>\n        </li><li class=\"last\">\n          <a rel=\"nofollow\" href=\"?format=zip&amp;new=228\" class=\"zip\">Zip Archive</a>\n        </li>\n      </ul>\n    </div>\n    </div>\n    <div id=\"footer\" lang=\"en\" xml:lang=\"en\"><hr />\n      <a id=\"tracpowered\" href=\"http://trac.edgewall.org/\"><img src=\"/LUCICodeRepository/nomaticIM/chrome/common/trac_logo_mini.png\" height=\"30\" width=\"107\" alt=\"Trac Powered\" /></a>\n      <p class=\"left\">Powered by <a href=\"/LUCICodeRepository/nomaticIM/about\"><strong>Trac 1.0.1</strong></a><br />\n        By <a href=\"http://www.edgewall.org/\">Edgewall Software</a>.</p>\n      <p class=\"right\">All content copyright 2007-2008 by LUCI <br /><a href=\"http://luci.ics.uci.edu/\">http://luci.ics.uci.edu/</a></p>\n    </div>\n\t\t<div id=\"sitefooter\">\n\t\t\t<script src=\"http://www.google-analytics.com/urchin.js\" type=\"text/javascript\">\n\t\t\t</script>\n\t\t\t<script type=\"text/javascript\">\n\t\t\t\t_uacct = \"UA-338915-2\";\n\t\t\t\turchinTracker();\n\t\t\t</script>\n\t\t</div>\n\t</body>\n</html>", "id": 40007.0}