{"text": "Search LoginPreferencesHelp GuideAbout Trac WikiTimelineRoadmapBrowse SourceView TicketsSearch wiki TracUpgrade Context Navigation Start PageIndexHistory Upgrade Instructions Table of ContentsIndexInstallationCustomizationPluginsUpgradingConfigurationAdministrationBackupLoggingPermissionsThe WikiWiki FormattingTimelineRepository BrowserRevision LogChangesetsTicketsWorkflowRoadmapTicket QueriesBatch ModifyReportsRSS SupportNotification Instructions Typically there are seven steps involved in upgrading to a newer version of Trac 1 Update the Trac Code Get the new version as described in TracInstall or your operating system specific procedure If you already have a 11 version of Trac installed via easy install it might be easiest to also use easy install to upgrade your Trac installation easy install upgrade Trac 12 If you do a manual not operating system specific upgrade you should also stop any running Trac servers before the installation Doing hot upgrades is not advised especially on Windows 7265 You may also want to remove the pre existing Trac code by deleting the trac directory from the Python lib site packages directory or remove Trac egg files from former versions The location of the site packages directory depends on the operating system and the location in which Python was installed However the following locations are typical on Linux usr lib python2 X site packages on Windows C Python2 X lib site packages on MacOSX Library Python 2 X site packages You may also want to remove the Trac cgi bin htdocs templates and wiki default directories that are commonly found in a directory called share trac The exact location depends on your platform This cleanup is not mandatory but makes it easier to troubleshoot issues later on as you won t waste your time looking at code or templates from a previous release that are not being used anymore As usual make a backup before actually deleting things 2 Upgrade the Trac Environment Environment upgrades are not necessary for minor version releases unless otherwise noted After restarting Trac should show the instances which need a manual upgrade via the automated upgrade scripts to ease the pain These scripts are run via trac admin trac admin path to projenv upgrade This command will do nothing if the environment is already up to date Note that a backup of your database will be performed automatically prior to the upgrade This feature is relatively new for the PostgreSQL or MySQL database backends so if it fails you will have to backup the database manually Then to perform the actual upgrade run trac admin path to projenv upgrade no backup 3 Update the Trac Documentation Every Trac environment includes a copy of the Trac documentation for the installed version As you probably want to keep the included documentation in sync with the installed version of Trac trac admin provides a command to upgrade the documentation trac admin path to projenv wiki upgrade Note that this procedure will leave your WikiStart page intact 4 Resynchronize the Trac Environment Against the Source Code Repository Each Trac environment must be resynchronized against the source code repository in order to avoid errors such as No changeset in the repository while browsing the source through the Trac interface trac admin path to projenv repository resync 5 Refresh static resources If you have set up a web server to give out static resources directly accessed using the chrome URL then you will need to refresh them using the same command trac admin path to env deploy deploy path this will extract static resources and CGI scripts trac wsgi etc from new Trac version and its plugins into deploy path Some web browsers cache CSS and Javascript files persistently so you may need to instruct your users to manually erase the contents of their browser s cache 6 Steps specific to a given Trac version Upgrading from Trac 11 to Trac 12 Python 2 3 no longer supported The minimum supported version of python is now 2 4 SQLite v3 x required SQLite v2 x is no longer supported If you still use a Trac database of this format you ll need to convert it to SQLite v3 x first See PySqlite UpgradingSQLitefrom2 xto3 x for details PySqlite 2 required PySqlite 1 1 x is no longer supported Please install 2 5 5 or later if possible see Trac database upgrade below Multiple Repository Support The latest version includes support for multiple repositories If you plan to add more repositories to your Trac instance please refer to TracRepositoryAdmin Migration This may be of interest to users with only one repository since there s now a way to avoid the potentially costly resync check at every request Improved repository synchronization In addition to supporting multiple repositories there is now a more efficient method for synchronizing Trac and your repositories While you can keep the same synchronization as in 11 adding the post commit hook as outlined in TracRepositoryAdmin Synchronization and TracRepositoryAdmin ExplicitSync will allow more efficient synchronization and is more or less required for multiple repositories Note that if you were using the trac post commit hook you re strongly advised to upgrade it to the new hook documented in the above references as the old hook will not work with anything else than the default repository and even for this case it won t trigger the appropriate notifications Authz permission checking The authz permission checking has been migrated to a fine grained permission policy If you use authz permissions aka trac authz file and authz module name you must add AuthzSourcePolicy in front of your permission policies in trac permission policies You must also remove BROWSER VIEW CHANGESET VIEW FILE VIEW and LOG VIEW from your global permissions with trac admin ENV permission remove or the Permissions admin panel Microsecond timestamps All timestamps in database tables except the session table have been changed from seconds since epoch to microseconds since epoch values This change should be transparent to most users except for custom reports If any of your reports use date time columns in calculations e g to pass them to datetime you must divide the values retrieved from the database by 1 Similarly if a report provides a calculated value to be displayed as a date time i e with a column named time datetime changetime date created or modified you must provide a microsecond timestamp that is multiply your previous calculation with 1 Upgrading from Trac 1 to Trac 11 Site Templates and Styles The templating engine has changed in 11 to Genshi please look at TracInterfaceCustomization for more information If you are using custom CSS styles or modified templates in the templates directory of the TracEnvironment you will need to convert them to the Genshi way of doing things To continue to use your style sheet follow the instructions at TracInterfaceCustomization SiteAppearance Trac Macros Plugins The Trac macros will need to be adapted as the old style wiki macros are not supported anymore due to the drop of ClearSilver and the HDF they need to be converted to the new style macros see WikiMacros When they are converted to the new style they need to be placed into the plugins directory instead and not wiki macros which is no longer scanned for macros or plugins For FCGI WSGI CGI users For those who run Trac under the CGI environment run this command in order to obtain the trac gi file trac admin path to env deploy deploy directory path This will create a deploy directory with the following two subdirectories cgi bin and htdocs Then update your Apache configuration file httpd conf with this new trac cgi location and htdocs location Web Admin plugin integrated If you had the webadmin plugin installed you can uninstall it as it is part of the Trac code base since 11 7 Restart the Web Server If you are not running CGI reload the new Trac code by restarting your web server Known Issues parent dir If you use a trac parent env configuration and one of the plugins in one child does not work none of the children work Wiki Upgrade trac admin will not delete or remove default wiki pages that were present in a previous version but are no longer in the new version Trac database upgrade A known issue in some versions of PySqlite 2 5 2 2 5 4 prevents the trac admin upgrade script from successfully upgrading the database format It is advised to use either a newer or older version of the sqlite python bindings to avoid this error For more details see ticket 9434 Upgrading Python Upgrading Python to a newer version will require reinstallation of Python packages Trac of course also easy install if you ve been using that Assuming you re using Subversion you ll also need to upgrade the Python bindings for svn Windows and Python 2 6 If you ve been using CollabNet s Subversion package you may need to uninstall that in favor of Algazam which has the Python bindings readily available see TracSubversion The good news is that works with no tweaking Changing Database Backend SQLite to PostgreSQL The sqlite2pg script on trac hacks org has been written to assist in migrating a SQLite database to a PostgreSQL database Older Versions For upgrades from versions older than Trac 1 refer first to wiki 1 TracUpgrade SpecificVersions See also TracGuide TracInstall Last modified 3 years ago Last modified on Jan 3 2 12 12 53 27 PM Download in other formats Plain Text Powered by Trac 1 1 By Edgewall Software All content copyright 2 7 2 8 by LUCI http luci ics uci edu ", "_id": "http://djp3-pc2.ics.uci.edu/LUCICodeRepository/nomaticIM/wiki/TracUpgrade", "title": "\n      tracupgrade \u2013 nomatic*im\n    ", "html": "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n  \n  \n\n  \n\n\n  <head>\n\t\t<title>\n      TracUpgrade \u2013 Nomatic*IM\n    </title><meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" /><meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" /><link rel=\"search\" href=\"/LUCICodeRepository/nomaticIM/search\" /><link rel=\"help\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracGuide\" /><link rel=\"alternate\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracUpgrade?format=txt\" type=\"text/x-trac-wiki\" title=\"Plain Text\" /><link rel=\"start\" href=\"/LUCICodeRepository/nomaticIM/wiki\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/chrome/common/css/trac.css\" type=\"text/css\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/chrome/common/css/wiki.css\" type=\"text/css\" /><link rel=\"shortcut icon\" href=\"http://luci.ics.uci.edu/logo32by32.gif\" type=\"image/gif\" /><link rel=\"icon\" href=\"http://luci.ics.uci.edu/logo32by32.gif\" type=\"image/gif\" /><link type=\"application/opensearchdescription+xml\" rel=\"search\" href=\"/LUCICodeRepository/nomaticIM/search/opensearch\" title=\"Search Nomatic*IM\" /><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/jquery.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/babel.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/messages/en_US.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/trac.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/search.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/folding.js\"></script><meta name=\"ROBOTS\" content=\"NOINDEX, NOFOLLOW\" /><link rel=\"alternate\" type=\"application/x-wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracUpgrade?action=edit\" title=\"Edit this page\" /><script type=\"text/javascript\">\n      jQuery(document).ready(function($) {\n        $(\"#content\").find(\"h1,h2,h3,h4,h5,h6\").addAnchor(_(\"Link to this section\"));\n        $(\"#content\").find(\".wikianchor\").each(function() {\n          $(this).addAnchor(babel.format(_(\"Link to #%(id)s\"), {id: $(this).attr('id')}));\n        });\n        $(\".foldable\").enableFolding(true, true);\n      });\n    </script>\n\t</head>\n  <body>\n    <div id=\"banner\">\n      <div id=\"header\">\n        <a id=\"logo\" href=\"http://luci.ics.uci.edu/#code\"><img src=\"http://luci.ics.uci.edu/blog/archives/LUCIhorzTight.jpg\" alt=\"LUCI Code Repository\" /></a>\n      </div>\n      <form id=\"search\" action=\"/LUCICodeRepository/nomaticIM/search\" method=\"get\">\n        <div>\n          <label for=\"proj-search\">Search:</label>\n          <input type=\"text\" id=\"proj-search\" name=\"q\" size=\"18\" value=\"\" />\n          <input type=\"submit\" value=\"Search\" />\n        </div>\n      </form>\n      <div id=\"metanav\" class=\"nav\">\n    <ul>\n      <li class=\"first\"><a href=\"/LUCICodeRepository/nomaticIM/login\">Login</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/prefs\">Preferences</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/wiki/TracGuide\">Help/Guide</a></li><li class=\"last\"><a href=\"/LUCICodeRepository/nomaticIM/about\">About Trac</a></li>\n    </ul>\n  </div>\n    </div>\n    <div id=\"mainnav\" class=\"nav\">\n    <ul>\n      <li class=\"first active\"><a href=\"/LUCICodeRepository/nomaticIM/wiki\">Wiki</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/timeline\">Timeline</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/roadmap\">Roadmap</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/browser\">Browse Source</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/report\">View Tickets</a></li><li class=\"last\"><a href=\"/LUCICodeRepository/nomaticIM/search\">Search</a></li>\n    </ul>\n  </div>\n    <div id=\"main\">\n      <div id=\"pagepath\" class=\"noprint\">\n  <a class=\"pathentry first\" title=\"View WikiStart\" href=\"/LUCICodeRepository/nomaticIM/wiki\">wiki:</a><a class=\"pathentry\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracUpgrade\" title=\"View TracUpgrade\">TracUpgrade</a>\n</div>\n      <div id=\"ctxtnav\" class=\"nav\">\n        <h2>Context Navigation</h2>\n        <ul>\n          <li class=\"first\"><a href=\"/LUCICodeRepository/nomaticIM/wiki/WikiStart\">Start Page</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/wiki/TitleIndex\">Index</a></li><li class=\"last\"><a href=\"/LUCICodeRepository/nomaticIM/wiki/TracUpgrade?action=history\">History</a></li>\n        </ul>\n        <hr />\n      </div>\n    <div id=\"content\" class=\"wiki\">\n      <div class=\"wikipage searchable\">\n        \n          <div id=\"wikipage\" class=\"trac-content\"><h1 id=\"UpgradeInstructions\">Upgrade Instructions</h1>\n<p>\n</p><div class=\"wiki-toc\"><h4>Table of Contents</h4><ul><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracGuide\">Index</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracInstall\">Installation</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracInterfaceCustomization\">Customization</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracPlugins\">Plugins</a></li><li class=\"active\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracUpgrade\">Upgrading</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracIni\">Configuration</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracAdmin\">Administration</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracBackup\">Backup</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracLogging\">Logging</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracPermissions\">Permissions</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracWiki\">The Wiki</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/WikiFormatting\">Wiki Formatting</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracTimeline\">Timeline</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracBrowser\">Repository Browser</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracRevisionLog\">Revision Log</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracChangeset\">Changesets</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracTickets\">Tickets</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracWorkflow\">Workflow</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracRoadmap\">Roadmap</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracQuery\">Ticket Queries</a></li><li class=\"False\"><a class=\"missing\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracBatchModify\">Batch Modify</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracReports\">Reports</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracRss\">RSS Support</a></li><li class=\"False\"><a class=\"False\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracNotification\">Notification</a></li></ul></div><p>\n</p>\n<h2 id=\"Instructions\">Instructions</h2>\n<p>\nTypically, there are seven steps involved in upgrading to a newer version of Trac:\n</p>\n<h3 id=\"UpdatetheTracCode\">1. Update the Trac Code</h3>\n<p>\nGet the new version as described in <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracInstall\">TracInstall</a>, or your operating system specific procedure.\n</p>\n<p>\nIf you already have a 0.11 version of Trac installed via <tt>easy_install</tt>, it might be easiest to also use <tt>easy_install</tt> to upgrade your Trac installation:\n</p>\n<pre class=\"wiki\"># easy_install --upgrade Trac==0.12\n</pre><p>\nIf you do a manual (not operating system-specific) upgrade, you should also stop any running Trac servers before the installation. Doing \"hot\" upgrades is not advised, especially on Windows (<a class=\"ext-link\" href=\"http://trac.edgewall.org/intertrac/%237265\" title=\"#7265 in Trac project trac\"><span class=\"icon\">\u200b</span>#7265</a>).\n</p>\n<p>\nYou may also want to remove the pre-existing Trac code by deleting the <tt>trac</tt> directory from the Python <tt>lib/site-packages</tt> directory, or remove Trac <tt>.egg</tt> files from former versions.\nThe location of the site-packages directory depends on the operating system and the location in which Python was installed. However, the following locations are typical:\n</p>\n<ul><li>on Linux: <tt>/usr/lib/python2.X/site-packages</tt>\n</li><li>on Windows: <tt>C:\\Python2.X\\lib\\site-packages</tt>\n</li><li>on MacOSX: <tt>/Library/Python/2.X/site-packages</tt>\n</li></ul><p>\nYou may also want to remove the Trac <tt>cgi-bin</tt>, <tt>htdocs</tt>, <tt>templates</tt> and <tt>wiki-default</tt> directories that are commonly found in a directory called <tt>share/trac</tt>. (The exact location depends on your platform.)\n</p>\n<p>\nThis cleanup is not mandatory, but makes it easier to troubleshoot issues later on, as you won't waste your time looking at code or templates from a previous release that are not being used anymore... As usual, make a backup before actually deleting things.\n</p>\n<h3 id=\"UpgradetheTracEnvironment\">2. Upgrade the Trac Environment</h3>\n<p>\nEnvironment upgrades are not necessary for minor version releases unless otherwise noted. \n</p>\n<p>\nAfter restarting, Trac should show the instances which need a manual upgrade via the automated upgrade scripts to ease the pain. These scripts are run via <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracAdmin\">trac-admin</a>:\n</p>\n<pre class=\"wiki\">trac-admin /path/to/projenv upgrade\n</pre><p>\nThis command will do nothing if the environment is already up-to-date.\n</p>\n<p>\nNote that a backup of your database will be performed automatically prior to the upgrade. \nThis feature is relatively new for the PostgreSQL or MySQL database backends, so if it fails, you will have to backup the database manually. Then, to perform the actual upgrade, run:\n</p>\n<pre class=\"wiki\">trac-admin /path/to/projenv upgrade --no-backup\n</pre><h3 id=\"UpdatetheTracDocumentation\">3. Update the Trac Documentation</h3>\n<p>\nEvery <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracEnvironment\">Trac environment</a> includes a copy of the Trac documentation for the installed version. As you probably want to keep the included documentation in sync with the installed version of Trac, <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracAdmin\">trac-admin</a> provides a command to upgrade the documentation:\n</p>\n<pre class=\"wiki\">trac-admin /path/to/projenv wiki upgrade\n</pre><p>\nNote that this procedure will leave your <tt>WikiStart</tt> page intact.\n</p>\n<h3 id=\"a4.ResynchronizetheTracEnvironmentAgainsttheSourceCodeRepository\">4. Resynchronize the Trac Environment Against the Source Code Repository</h3>\n<p>\nEach <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracEnvironment\">Trac environment</a> must be resynchronized against the source code repository in order to avoid errors such as \"<a class=\"ext-link\" href=\"http://trac.edgewall.org/ticket/6120\"><span class=\"icon\">\u200b</span>No changeset ??? in the repository</a>\" while browsing the source through the Trac interface:\n</p>\n<pre class=\"wiki\">trac-admin /path/to/projenv repository resync '*'\n</pre><h3 id=\"a5.Refreshstaticresources\">5. Refresh static resources</h3>\n<p>\nIf you have set up a web server to give out static resources directly (accessed using the <tt>/chrome/</tt> URL) then you will need to refresh them using the same command:\n</p>\n<pre class=\"wiki\">trac-admin /path/to/env deploy /deploy/path\n</pre><p>\nthis will extract static resources and CGI scripts (<tt>trac.wsgi</tt>, etc) from new Trac version and its plugins into <tt>/deploy/path</tt>.\n</p>\n<p>\nSome web browsers cache CSS and Javascript files persistently, so you may need to instruct your users to manually erase the contents of their browser's cache.\n</p>\n<h3 id=\"a6.StepsspecifictoagivenTracversion\">6. Steps specific to a given Trac version</h3>\n<h4 id=\"UpgradingfromTrac0.11toTrac0.12\">Upgrading from Trac 0.11 to Trac 0.12</h4>\n<h5 id=\"Python2.3nolongersupported\">Python 2.3 no longer supported</h5>\n<p>\nThe minimum supported version of python is now 2.4\n</p>\n<h5 id=\"SQLitev3.xrequired\">SQLite v3.x required</h5>\n<p>\nSQLite v2.x is no longer supported. If you still use a Trac database of this format, you'll need to convert it to SQLite v3.x first. See <a class=\"ext-link\" href=\"http://trac.edgewall.org/intertrac/PySqlite%23UpgradingSQLitefrom2.xto3.x\" title=\"PySqlite#UpgradingSQLitefrom2.xto3.x in Trac project trac\"><span class=\"icon\">\u200b</span>PySqlite#UpgradingSQLitefrom2.xto3.x</a> for details.\n</p>\n<h5 id=\"PySqlite2required\"><a class=\"missing wiki\">PySqlite?</a> 2 required</h5>\n<p>\n<a class=\"missing wiki\">PySqlite?</a> 1.1.x is no longer supported. Please install 2.5.5 or later if possible (see <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracUpgrade#Tracdatabaseupgrade\">Trac database upgrade</a> below).\n</p>\n<h5 id=\"MultipleRepositorySupport\">Multiple Repository Support</h5>\n<p>\nThe latest version includes support for multiple repositories. If you plan to add more repositories to your Trac instance, please refer to <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracRepositoryAdmin#Migration\">TracRepositoryAdmin#Migration</a>.\n</p>\n<p>\nThis may be of interest to users with only one repository, since there's now a way to avoid the potentially costly resync check at every request.\n</p>\n<h5 id=\"Improvedrepositorysynchronization\">Improved repository synchronization</h5>\n<p>\nIn addition to supporting multiple repositories, there is now a more efficient method for synchronizing Trac and your repositories.\n</p>\n<p>\nWhile you can keep the same synchronization as in 0.11 adding the post-commit hook as outlined in <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracRepositoryAdmin#Synchronization\">TracRepositoryAdmin#Synchronization</a> and <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracRepositoryAdmin#ExplicitSync\">TracRepositoryAdmin#ExplicitSync</a> will allow more efficient synchronization and is more or less required for multiple repositories.\n</p>\n<p>\nNote that if you were using the <tt>trac-post-commit-hook</tt>, <em>you're strongly advised to upgrade it</em> to the new hook documented in the above references, as the old hook will not work with anything else than the default repository and even for this case, it won't trigger the appropriate notifications.\n</p>\n<h5 id=\"Authzpermissionchecking\">Authz permission checking</h5>\n<p>\nThe authz permission checking has been migrated to a fine-grained permission policy. If you use authz permissions (aka <tt>[trac] authz_file</tt> and <tt>authz_module_name</tt>), you must add <tt>AuthzSourcePolicy</tt> in front of your permission policies in <tt>[trac] permission_policies</tt>. You must also remove <tt>BROWSER_VIEW</tt>, <tt>CHANGESET_VIEW</tt>, <tt>FILE_VIEW</tt> and <tt>LOG_VIEW</tt> from your global permissions (with <tt>trac-admin $ENV permission remove</tt> or the \"Permissions\" admin panel).\n</p>\n<h5 id=\"Microsecondtimestamps\">Microsecond timestamps</h5>\n<p>\nAll timestamps in database tables (except the <tt>session</tt> table) have been changed from \"seconds since epoch\" to \"microseconds since epoch\" values. This change should be transparent to most users, except for custom reports. If any of your reports use date/time columns in calculations (e.g. to pass them to <tt>datetime()</tt>), you must divide the values retrieved from the database by 1'000'000. Similarly, if a report provides a calculated value to be displayed as a date/time (i.e. with a column named \"time\", \"datetime\", \"changetime\", \"date\", \"created\" or \"modified\"), you must provide a microsecond timestamp, that is, multiply your previous calculation with 1'000'000.\n</p>\n<h4 id=\"UpgradingfromTrac0.10toTrac0.11\">Upgrading from Trac 0.10 to Trac 0.11</h4>\n<h5 id=\"SiteTemplatesandStyles\">Site Templates and Styles</h5>\n<p>\nThe templating engine has changed in 0.11 to Genshi, please look at <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracInterfaceCustomization\">TracInterfaceCustomization</a> for more information.\n</p>\n<p>\nIf you are using custom CSS styles or modified templates in the <tt>templates</tt> directory of the <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracEnvironment\">TracEnvironment</a>, you will need to convert them to the Genshi way of doing things. To continue to use your style sheet, follow the instructions at <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracInterfaceCustomization#SiteAppearance\">TracInterfaceCustomization#SiteAppearance</a>.\n</p>\n<h5 id=\"TracMacrosPlugins\">Trac Macros, Plugins</h5>\n<p>\nThe Trac macros will need to be adapted, as the old-style wiki-macros are not supported anymore (due to the drop of <a class=\"ext-link\" href=\"http://trac.edgewall.org/intertrac/ClearSilver\" title=\"ClearSilver in Trac project trac\"><span class=\"icon\">\u200b</span>ClearSilver</a> and the HDF); they need to be converted to the new-style macros, see <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/WikiMacros\">WikiMacros</a>. When they are converted to the new style, they need to be placed into the plugins directory instead and not wiki-macros, which is no longer scanned for macros or plugins.\n</p>\n<h5 id=\"ForFCGIWSGICGIusers\">For FCGI/WSGI/CGI users</h5>\n<p>\nFor those who run Trac under the CGI environment, run this command in order to obtain the trac.*gi file:\n</p>\n<pre class=\"wiki\">trac-admin /path/to/env deploy /deploy/directory/path\n</pre><p>\nThis will create a deploy directory with the following two subdirectories: <tt>cgi-bin</tt> and <tt>htdocs</tt>. Then update your Apache configuration file <tt>httpd.conf</tt> with this new <tt>trac.cgi</tt> location and <tt>htdocs</tt> location.\n</p>\n<h5 id=\"WebAdminpluginintegrated\">Web Admin plugin integrated</h5>\n<p>\nIf you had the webadmin plugin installed, you can uninstall it as it is part of the Trac code base since 0.11.\n</p>\n<h3 id=\"RestarttheWebServer\">7. Restart the Web Server</h3>\n<p>\nIf you are not running <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracCgi\">CGI</a>, reload the new Trac code by restarting your web server.\n</p>\n<h2 id=\"KnownIssues\">Known Issues</h2>\n<h3 id=\"parentdir\">parent dir</h3>\n<p>\nIf you use a trac parent env configuration and one of the plugins in one child does not work, none of the children work.\n</p>\n<h3 id=\"WikiUpgrade\">Wiki Upgrade</h3>\n<p>\n<tt>trac-admin</tt> will not delete or remove default wiki pages that were present in a previous version but are no longer in the new version.\n</p>\n<h3 id=\"Tracdatabaseupgrade\">Trac database upgrade</h3>\n<p>\nA known issue in some versions of <a class=\"missing wiki\">PySqlite?</a> (2.5.2-2.5.4) prevents the trac-admin upgrade script from successfully upgrading the database format. It is advised to use either a newer or older version of the sqlite python bindings to avoid this error. For more details see ticket <a class=\"ext-link\" href=\"http://trac.edgewall.org/intertrac/%239434\" title=\"#9434 in Trac project trac\"><span class=\"icon\">\u200b</span>#9434</a>.\n</p>\n<h2 id=\"UpgradingPython\">Upgrading Python</h2>\n<p>\nUpgrading Python to a newer version will require reinstallation of Python packages: Trac of course; also <a class=\"ext-link\" href=\"http://pypi.python.org/pypi/setuptools\"><span class=\"icon\">\u200b</span>easy_install</a>, if you've been using that.  Assuming you're using Subversion, you'll also need to upgrade the Python bindings for svn.\n</p>\n<h3 id=\"WindowsandPython2.6\">Windows and Python 2.6</h3>\n<p>\nIf you've been using CollabNet's Subversion package, you may need to uninstall that in favor of <a class=\"ext-link\" href=\"http://alagazam.net/\"><span class=\"icon\">\u200b</span>Algazam</a>, which has the Python bindings readily available (see <a class=\"missing wiki\">TracSubversion?</a>).  The good news is, that works with no tweaking.\n</p>\n<h2 id=\"ChangingDatabaseBackend\">Changing Database Backend</h2>\n<h3 id=\"SQLitetoPostgreSQL\">SQLite to PostgreSQL</h3>\n<p>\nThe <a class=\"ext-link\" href=\"http://trac-hacks.org/wiki/SqliteToPgScript\"><span class=\"icon\">\u200b</span>sqlite2pg</a> script on <a class=\"ext-link\" href=\"http://trac-hacks.org\"><span class=\"icon\">\u200b</span>trac-hacks.org</a> has been written to assist in migrating a SQLite database to a PostgreSQL database\n</p>\n<h2 id=\"OlderVersions\">Older Versions</h2>\n<p>\nFor upgrades from versions older than Trac 0.10, refer first to <a class=\"ext-link\" href=\"http://trac.edgewall.org/intertrac/wiki%3A0.10/TracUpgrade%23SpecificVersions\" title=\"wiki:0.10/TracUpgrade#SpecificVersions in Trac project trac\"><span class=\"icon\">\u200b</span>wiki:0.10/TracUpgrade#SpecificVersions</a>.\n</p>\n<hr />\n<p>\nSee also: <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracGuide\">TracGuide</a>, <a class=\"wiki\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracInstall\">TracInstall</a>\n</p>\n</div>\n          \n          <div class=\"trac-modifiedby\">\n            <span><a href=\"/LUCICodeRepository/nomaticIM/wiki/TracUpgrade?action=diff&amp;version=3\" title=\"Version 3 by trac\">Last modified</a> <a class=\"timeline\" href=\"/LUCICodeRepository/nomaticIM/timeline?from=2012-01-03T12%3A53%3A27-08%3A00&amp;precision=second\" title=\"See timeline at Jan 3, 2012, 12:53:27 PM\">3 years ago</a></span>\n            <span class=\"trac-print\">Last modified on Jan 3, 2012, 12:53:27 PM</span>\n          </div>\n        \n        \n      </div>\n      \n    <div id=\"attachments\">\n    </div>\n\n          <div class=\"buttons\">\n              <form method=\"get\" action=\"/LUCICodeRepository/nomaticIM/wiki/TracUpgrade\" id=\"modifypage\">\n                <div>\n                  <input type=\"hidden\" name=\"action\" value=\"edit\" />\n                      <input type=\"submit\" value=\"Edit this page\" />\n                </div>\n              </form>\n                <form method=\"get\" action=\"/LUCICodeRepository/nomaticIM/attachment/wiki/TracUpgrade/\" id=\"attachfile\">\n  <div>\n    <input type=\"hidden\" name=\"action\" value=\"new\" />\n    <input type=\"submit\" name=\"attachfilebutton\" value=\"Attach file\" />\n  </div>\n</form>\n          </div>\n    </div>\n    <div id=\"altlinks\">\n      <h3>Download in other formats:</h3>\n      <ul>\n        <li class=\"last first\">\n          <a rel=\"nofollow\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracUpgrade?format=txt\">Plain Text</a>\n        </li>\n      </ul>\n    </div>\n    </div>\n    <div id=\"footer\" lang=\"en\" xml:lang=\"en\"><hr />\n      <a id=\"tracpowered\" href=\"http://trac.edgewall.org/\"><img src=\"/LUCICodeRepository/nomaticIM/chrome/common/trac_logo_mini.png\" height=\"30\" width=\"107\" alt=\"Trac Powered\" /></a>\n      <p class=\"left\">Powered by <a href=\"/LUCICodeRepository/nomaticIM/about\"><strong>Trac 1.0.1</strong></a><br />\n        By <a href=\"http://www.edgewall.org/\">Edgewall Software</a>.</p>\n      <p class=\"right\">All content copyright 2007-2008 by LUCI <br /><a href=\"http://luci.ics.uci.edu/\">http://luci.ics.uci.edu/</a></p>\n    </div>\n\t\t<div id=\"sitefooter\">\n\t\t\t<script src=\"http://www.google-analytics.com/urchin.js\" type=\"text/javascript\">\n\t\t\t</script>\n\t\t\t<script type=\"text/javascript\">\n\t\t\t\t_uacct = \"UA-338915-2\";\n\t\t\t\turchinTracker();\n\t\t\t</script>\n\t\t</div>\n\t</body>\n</html>", "id": 34618.0}