{"text": "Search LoginPreferencesHelp GuideAbout Trac WikiTimelineRoadmapBrowse SourceView TicketsSearch Context Navigation BlameRevision Log source nomatic tags NomaticIM 5 buddy bots src twisted python usage py View diff against View revision Visit trunk Last change on this file was 712 checked in by cbaker 7 years ago First draft of nomatic buddy bots oscar bot is functional if you give it good authentication credentials jabber bot is just an example from the web File size 18 3 KB Line 1 test case name twisted test test usage 2 Copyright c 2 1 2 4 Twisted Matrix Laboratories 3 See LICENSE for details 456 7twisted python usage is a module for parsing handling the8command line of your program 91 For information on how to use it see11U http twistedmatrix com projects core documentation howto options html or doc howto options html12in your Twisted directory 13 1415 System Imports16import string17import os18import sys19import getopt2 from os import path2122 Sibling Imports23import reflect24import text25import util2627class UsageError Exception 28 pass293 error UsageError3132class Options dict 33 34 An option list parser class3536 C optFlags and C optParameters are lists of available parameters37 which your program can handle The difference between the two38 is the flags have an on 1 or off state off by default 39 whereas parameters have an assigned value with an optional4 default Compare verbose and verbosity 2 4142 optFlags is assigned a list of lists Each list represents43 a flag parameter as so 4445 optFlags verbose v Makes it tell you what it doing 46 quiet q Be vewy vewy quiet 4748 As you can see the first item is the long option name49 prefixed with on the command line followed by the5 short option name prefixed with and the description 51 The description is used for the built in handling of the52 help switch which prints a usage summary 5354 C optParameters is much the same except the list also contains55 a default value 5657 optParameters outfile O outfile log Description 5859 subCommands is a list of 4 tuples of command name command shortcut 6 parser class documentation If the first non option argument found is61 one of the given command names an instance of the given parser class is62 instantiated and given the remainder of the arguments to parse and63 self opts command is set to the command name For example 6465 subCommands 66 inquisition inquest InquisitionOptions Perform an inquisition 67 holyquest quest HolyQuestOptions Embark upon a holy quest 68 697 In this case C program holyquest horseback for grail will cause71 C HolyQuestOptions to be instantiated and asked to parse72 C horseback for grail Currently only the first sub command73 is parsed and all options following it are passed to its parser If a74 subcommand is found the subCommand attribute is set to its name and the75 subOptions attribute is set to the Option instance that parses the76 remaining options If a subcommand is not given to parseOptions 77 the subCommand attribute will be None You can also mark one of78 the subCommands to be the default 798 defaultSubCommand holyquest 8182 In this case the subCommand attribute will never be None and83 the subOptions attribute will always be set 8485 If you want to handle your own options define a method named86 C opt paramname that takes C self option as arguments C option 87 will be whatever immediately follows the parameter on the88 command line Options fully supports the mapping interface so you89 can do things like C self option val in these methods 9 91 Advanced functionality is covered in the howto documentation 92 available at U http twistedmatrix com projects core documentation howto options html or93 doc howto options html in your Twisted directory 94 9596 subCommand None97 defaultSubCommand None98 parent None99 def init self 1 super Options self init 1 11 2 self opts self1 3 self defaults 1 41 5 These are strings lists we will pass to getopt1 6 self longOpt 1 7 self shortOpt 1 8 self docs 1 9 self synonyms 11 self dispatch 111112113 collectors 114 self gather flags 115 self gather parameters 116 self gather handlers 117 118119 for c in collectors 12 longOpt shortOpt docs settings synonyms dispatch c 121 self longOpt extend longOpt 122 self shortOpt self shortOpt shortOpt123 self docs update docs 124125 self opts update settings 126 self defaults update settings 127128 self synonyms update synonyms 129 self dispatch update dispatch 13 131 def hash self 132 133 Define a custom hash function so that Options instances can be used134 as dictionary keys This is an internal feature used to implement135 the parser Do not rely on it in application code 136 137 return int id self sys maxint 138139 def opt help self 14 Display this help and exit 141 print self str 142 sys exit 143144 def opt version self 145 from twisted import copyright146 print Twisted version copyright version147 sys exit 148149 opt h opt help this conflicted with existing host options 15 151 def parseOptions self options None 152 The guts of the command line parser 153 154155 if options is None 156 options sys argv 1 157 try 158 opts args getopt getopt options 159 self shortOpt self longOpt 16 except getopt error e 161 raise UsageError str e 162163164 for opt arg in opts 165 if opt 1 166 opt opt 2 167 else 168 opt opt 1 16917 optMangled opt171 if not self synonyms has key optMangled 172 optMangled string replace opt 173 if not self synonyms has key optMangled 174 raise UsageError No such option s opt 175176 optMangled self synonyms optMangled 177 self dispatch optMangled optMangled arg 178179 if getattr self subCommands None 18 and args or self defaultSubCommand is not None 181 if not args 182 args self defaultSubCommand 183 sub rest args args 1 184 for cmd short parser doc in self subCommands 185 if sub cmd or sub short 186 self subCommand cmd187 self subOptions parser 188 self subOptions parent self189 self subOptions parseOptions rest 19 break191 else 192 raise UsageError Unknown command s sub 193 else 194 try 195 self parseArgs args 196 except TypeError 197 raise UsageError Wrong number of arguments 198199 self postOptions 2 2 1 def postOptions self 2 2 I am called after the options are parsed 2 32 4 Override this method in your subclass to do something after2 5 the options have been parsed and assigned like validate that2 6 all options are sane 2 7 2 8 pass2 921 211 def parseArgs self 212 I am called with any leftover arguments which were not options 213214 Override me to do something with the remaining arguments on215 the command line those which were not flags or options e g 216 interpret them as a list of files to operate on 217218 Note that if there more arguments on the command line219 than this method accepts parseArgs will blow up with22 a getopt error This means if you don t override me 221 parseArgs will blow up if I am passed any arguments at222 all 223 224 pass225226 def generic flag self flagName value None 227 if value not in None 228 raise UsageError Flag s takes no argument 229 Not even s flagName value 23 231 self opts flagName 1232233 def generic parameter self parameterName value 234 if value is None 235 raise UsageError Parameter s requires an argument 236 parameterName 237238 self opts parameterName value23924 def gather flags self 241 Gather up boolean flag options 242 243244 longOpt shortOpt 245 docs settings synonyms dispatch 246247 flags 248 reflect accumulateClassList self class optFlags flags 24925 for flag in flags 251 long short doc util padTo 3 flag 252 if not long 253 raise ValueError A flag cannot be without a name 254255 docs long doc256 settings long 257 if short 258 shortOpt shortOpt short259 synonyms short long26 longOpt append long 261 synonyms long long262 dispatch long self generic flag263264 return longOpt shortOpt docs settings synonyms dispatch265266267 def gather parameters self 268 Gather options which take a value 269 27 longOpt shortOpt 271 docs settings synonyms dispatch 272273 parameters 274275 reflect accumulateClassList self class optStrings 276 parameters 277 if parameters 278 import warnings279 warnings warn Options optStrings is deprecated please use optParameters instead stacklevel 2 28 281 reflect accumulateClassList self class optParameters 282 parameters 283284 synonyms 285286 for parameter in parameters 287 long short default doc util padTo 4 parameter 288 if not long 289 raise ValueError A parameter cannot be without a name 29 291 docs long doc292 settings long default293 if short 294 shortOpt shortOpt short 295 synonyms short long296 longOpt append long 297 synonyms long long298 dispatch long self generic parameter2993 return longOpt shortOpt docs settings synonyms dispatch3 13 23 3 def gather handlers self 3 4 Gather up options with their own handler methods 3 5 3 63 7 longOpt shortOpt 3 8 docs settings synonyms dispatch 3 931 dct 311 reflect addMethodNamesToDict self class dct opt 312313 for name in dct keys 314 method getattr self opt name 315316 takesArg not flagFunction method name 317318 prettyName string replace name 319 doc getattr method doc None 32 if doc 321 Only use the first line 322 docs name string split doc n 323 docs prettyName doc324 else 325 docs prettyName self docs get prettyName 326327 synonyms prettyName prettyName328329 A little slight of hand here makes dispatching much easier33 in parseOptions as it makes all option methods have the331 same signature 332 if takesArg 333 fn lambda name value m method m value 334 else 335 XXX This won t raise a TypeError if it s called336 with a value when it shouldn t be 337 fn lambda name value None m method m 338339 dispatch prettyName fn34 341 if len name 1 342 shortOpt shortOpt name343 if takesArg 344 shortOpt shortOpt 345 else 346 if takesArg 347 prettyName prettyName 348 longOpt append prettyName 34935 reverse dct 351 Map synonyms352 for name in dct keys 353 method getattr self opt name 354 if not reverse dct has key method 355 reverse dct method 356 reverse dct method append name 357358 cmpLength lambda a b cmp len a len b 35936 for method names in reverse dct items 361 if len names 2 362 continue363 names names 364 names sort cmpLength 365 longest names pop 366 for name in names 367 synonyms name longest368369 return longOpt shortOpt docs settings synonyms dispatch37 371372 def str self 373 return self getSynopsis n self getUsage width None 374375 def getSynopsis self 376 Returns a string containing a description of these options and how to377 pass them to the executed file 378 37938 default s s path basename sys argv 381 self longOpt and options or 382 if self parent is None 383 default Usage s s path basename sys argv 384 self longOpt and options or 385 else 386 default s self longOpt and options or 387 synopsis getattr self synopsis default 388389 synopsis synopsis rstrip 39 391 if self parent is not None 392 synopsis join self parent getSynopsis self parent subCommand synopsis 393394 return synopsis395396 def getUsage self width None 397 If subOptions exists by now then there was probably an error while398 parsing its options 399 if hasattr self subOptions 4 return self subOptions getUsage width width 4 14 2 if not width 4 3 width int os environ get COLUMNS 8 4 44 5 if hasattr self subCommands 4 6 cmdDicts 4 7 for cmd short parser desc in self subCommands 4 8 cmdDicts append 4 9 long cmd 41 short short 411 doc desc 412 optType command 413 default None414 415 chunks docMakeChunks cmdDicts width 416 commands Commands n join chunks 417 else 418 commands 41942 longToShort 421 for key value in self synonyms items 422 longname value423 if key longname and len key 1 424 longToShort longname key425 else 426 if not longToShort has key longname 427 longToShort longname None428 else 429 pass43 431 optDicts 432 for opt in self longOpt 433 if opt 1 434 optType parameter 435 opt opt 1 436 else 437 optType flag 438439 optDicts append 44 long opt 441 short longToShort opt 442 doc self docs opt 443 optType optType 444 default self defaults get opt None 445 446447 if not getattr self longdesc None is None 448 longdesc self longdesc449 else 45 import main 451 if getattr main doc None 452 longdesc main doc 453 else 454 longdesc 455456 if longdesc 457 longdesc n 458 string join text wordWrap longdesc width n strip 459 n 46 461 if optDicts 462 chunks docMakeChunks optDicts width 463 s Options n s string join chunks 464 else 465 s Options None n 466467 return s longdesc commands468469 def repr self 47 XXX It d be cool if we could return a succinct representation471 of which flags and options are set here 472473474def docMakeChunks optList width 8 475 Makes doc chunks for option declarations 476477 Takes a list of dictionaries each of which may have one or more478 of the keys long short doc default optType 47948 Returns a list of strings 481 The strings may be multiple lines 482 all of them end with a newline 483 484485 XXX sanity check to make sure we have a sane combination of keys 486487 maxOptLen 488 for opt in optList 489 optLen len opt get long 49 if optLen 491 if opt get optType None parameter 492 these take up an extra character493 optLen optLen 1494 maxOptLen max optLen maxOptLen 495496 colWidth1 maxOptLen len s 497 colWidth2 width colWidth1498 XXX impose some sane minimum limit 499 Then if we don t have enough room for the option and the doc5 to share one line they can take turns on alternating lines 5 15 2 colFiller1 colWidth15 35 4 optChunks 5 5 seen 5 6 for opt in optList 5 7 if seen has key opt get short None 5 8 or seen has key opt get long None 5 9 continue51 for x in opt get short None opt get long None 511 if x is not None 512 seen x 1513514 optLines 515 comma 516 if opt get short None 517 short c opt short 518 else 519 short 52 521 if opt get long None 522 long opt long 523 if opt get optType None parameter 524 long long 525526 long s maxOptLen long 527 if short 528 comma 529 else 53 long maxOptLen len 531532 if opt get optType None command 533 column1 s long534 else 535 column1 2s c s short comma long 536537 if opt get doc 538 doc opt doc strip 539 else 54 doc 541542 if opt get optType None parameter 543 and not opt get default None is None 544 doc s default s doc opt default 545546 if doc 547 column2 l text wordWrap doc colWidth2 548 else 549 column2 l 55 551 optLines append s s n column1 column2 l pop 552553 for line in column2 l 554 optLines append s s n colFiller1 line 555556 optChunks append string join optLines 557558 return optChunks55956 def flagFunction method name None 561 reqArgs method im func func code co argcount562 if reqArgs 2 563 raise UsageError Invalid Option function for s name or method func name 564 if reqArgs 2 565 argName method im func func code co varnames 1 566 return 567 return 1 Note See TracBrowser for help on using the repository browser Download in other formats Plain Text Original Format Powered by Trac 1 1 By Edgewall Software All content copyright 2 7 2 8 by LUCI http luci ics uci edu ", "_id": "http://djp3-pc2.ics.uci.edu/LUCICodeRepository/nomaticIM/browser/nomatic/tags/NomaticIM-0.0.5/buddy_bots/src/twisted/python/usage.py", "title": "\n      usage.py in nomatic/tags/nomaticim-0.0.5/buddy_bots/src/twisted/python\n     \u2013 nomatic*im\n    ", "html": "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n  \n  \n\n  \n\n\n  <head>\n\t\t<title>\n      usage.py in nomatic/tags/NomaticIM-0.0.5/buddy_bots/src/twisted/python\n     \u2013 Nomatic*IM\n    </title><meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" /><meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" /><link rel=\"search\" href=\"/LUCICodeRepository/nomaticIM/search\" /><link rel=\"help\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracGuide\" /><link rel=\"alternate\" href=\"/LUCICodeRepository/nomaticIM/browser/nomatic/tags/NomaticIM-0.0.5/buddy_bots/src/twisted/python/usage.py?format=txt\" type=\"text/plain\" title=\"Plain Text\" /><link rel=\"alternate\" href=\"/LUCICodeRepository/nomaticIM/export/1312/nomatic/tags/NomaticIM-0.0.5/buddy_bots/src/twisted/python/usage.py\" type=\"application/x-python; charset=iso-8859-15\" title=\"Original Format\" /><link rel=\"start\" href=\"/LUCICodeRepository/nomaticIM/wiki\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/chrome/common/css/trac.css\" type=\"text/css\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/chrome/common/css/code.css\" type=\"text/css\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/pygments/trac.css\" type=\"text/css\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/chrome/common/css/browser.css\" type=\"text/css\" /><link rel=\"shortcut icon\" href=\"http://luci.ics.uci.edu/logo32by32.gif\" type=\"image/gif\" /><link rel=\"icon\" href=\"http://luci.ics.uci.edu/logo32by32.gif\" type=\"image/gif\" /><link type=\"application/opensearchdescription+xml\" rel=\"search\" href=\"/LUCICodeRepository/nomaticIM/search/opensearch\" title=\"Search Nomatic*IM\" /><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/jquery.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/babel.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/messages/en_US.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/trac.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/search.js\"></script><script type=\"text/javascript\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/folding.js\"></script><script type=\"text/javascript\">\n      jQuery(document).ready(function($) {\n        $(\".trac-toggledeleted\").show().click(function() {\n                  $(this).siblings().find(\".trac-deleted\").toggle();\n                  return false;\n        }).click();\n        $(\"#jumploc input\").hide();\n        $(\"#jumploc select\").change(function () {\n          this.parentNode.parentNode.submit();\n        });\n          $('#preview table.code').enableCollapsibleColumns($('#preview table.code thead th.content'));\n      });\n    </script>\n\t</head>\n  <body>\n    <div id=\"banner\">\n      <div id=\"header\">\n        <a id=\"logo\" href=\"http://luci.ics.uci.edu/#code\"><img src=\"http://luci.ics.uci.edu/blog/archives/LUCIhorzTight.jpg\" alt=\"LUCI Code Repository\" /></a>\n      </div>\n      <form id=\"search\" action=\"/LUCICodeRepository/nomaticIM/search\" method=\"get\">\n        <div>\n          <label for=\"proj-search\">Search:</label>\n          <input type=\"text\" id=\"proj-search\" name=\"q\" size=\"18\" value=\"\" />\n          <input type=\"submit\" value=\"Search\" />\n        </div>\n      </form>\n      <div id=\"metanav\" class=\"nav\">\n    <ul>\n      <li class=\"first\"><a href=\"/LUCICodeRepository/nomaticIM/login\">Login</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/prefs\">Preferences</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/wiki/TracGuide\">Help/Guide</a></li><li class=\"last\"><a href=\"/LUCICodeRepository/nomaticIM/about\">About Trac</a></li>\n    </ul>\n  </div>\n    </div>\n    <div id=\"mainnav\" class=\"nav\">\n    <ul>\n      <li class=\"first\"><a href=\"/LUCICodeRepository/nomaticIM/wiki\">Wiki</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/timeline\">Timeline</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/roadmap\">Roadmap</a></li><li class=\"active\"><a href=\"/LUCICodeRepository/nomaticIM/browser\">Browse Source</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/report\">View Tickets</a></li><li class=\"last\"><a href=\"/LUCICodeRepository/nomaticIM/search\">Search</a></li>\n    </ul>\n  </div>\n    <div id=\"main\">\n      <div id=\"ctxtnav\" class=\"nav\">\n        <h2>Context Navigation</h2>\n        <ul>\n          <li class=\"first\"><a href=\"/LUCICodeRepository/nomaticIM/browser/nomatic/trunk/buddy_bots/twisted/python/usage.py?annotate=blame\" title=\"Annotate each line with the last changed revision (this can be time consuming...)\">Blame</a></li><li class=\"last\"><a href=\"/LUCICodeRepository/nomaticIM/log/nomatic/tags/NomaticIM-0.0.5/buddy_bots/src/twisted/python/usage.py\">Revision Log</a></li>\n        </ul>\n        <hr />\n      </div>\n    <div id=\"content\" class=\"browser\">\n        <h1>\n          \n<a class=\"pathentry first\" href=\"/LUCICodeRepository/nomaticIM/browser?order=name\" title=\"Go to repository root\">source:</a>\n<a class=\"pathentry\" href=\"/LUCICodeRepository/nomaticIM/browser/nomatic?order=name\" title=\"View nomatic\">nomatic</a><span class=\"pathentry sep\">/</span><a class=\"pathentry\" href=\"/LUCICodeRepository/nomaticIM/browser/nomatic/tags?order=name\" title=\"View tags\">tags</a><span class=\"pathentry sep\">/</span><a class=\"pathentry\" href=\"/LUCICodeRepository/nomaticIM/browser/nomatic/tags/NomaticIM-0.0.5?order=name\" title=\"View NomaticIM-0.0.5\">NomaticIM-0.0.5</a><span class=\"pathentry sep\">/</span><a class=\"pathentry\" href=\"/LUCICodeRepository/nomaticIM/browser/nomatic/tags/NomaticIM-0.0.5/buddy_bots?order=name\" title=\"View buddy_bots\">buddy_bots</a><span class=\"pathentry sep\">/</span><a class=\"pathentry\" href=\"/LUCICodeRepository/nomaticIM/browser/nomatic/tags/NomaticIM-0.0.5/buddy_bots/src?order=name\" title=\"View src\">src</a><span class=\"pathentry sep\">/</span><a class=\"pathentry\" href=\"/LUCICodeRepository/nomaticIM/browser/nomatic/tags/NomaticIM-0.0.5/buddy_bots/src/twisted?order=name\" title=\"View twisted\">twisted</a><span class=\"pathentry sep\">/</span><a class=\"pathentry\" href=\"/LUCICodeRepository/nomaticIM/browser/nomatic/tags/NomaticIM-0.0.5/buddy_bots/src/twisted/python?order=name\" title=\"View python\">python</a><span class=\"pathentry sep\">/</span><a class=\"pathentry\" href=\"/LUCICodeRepository/nomaticIM/browser/nomatic/tags/NomaticIM-0.0.5/buddy_bots/src/twisted/python/usage.py?order=name\" title=\"View usage.py\">usage.py</a>\n<br style=\"clear: both\" />\n\n        </h1>\n        <div id=\"diffrev\">\n          <form action=\"/LUCICodeRepository/nomaticIM/changeset\" method=\"get\">\n            <div>\n              <label title=\"Show the diff against a specific revision\">\n                View diff against: <input type=\"text\" name=\"old\" size=\"6\" />\n                <input type=\"hidden\" name=\"old_path\" value=\"nomatic/tags/NomaticIM-0.0.5/buddy_bots/src/twisted/python/usage.py\" />\n                <input type=\"hidden\" name=\"new\" />\n                <input type=\"hidden\" name=\"new_path\" value=\"nomatic/tags/NomaticIM-0.0.5/buddy_bots/src/twisted/python/usage.py\" />\n              </label>\n            </div>\n          </form>\n        </div>\n        <div id=\"jumprev\">\n          <form action=\"\" method=\"get\">\n            <div>\n              <label for=\"rev\">\n                View revision:</label>\n              <input type=\"text\" id=\"rev\" name=\"rev\" size=\"6\" />\n            </div>\n          </form>\n        </div>\n        <div id=\"jumploc\">\n          <form action=\"\" method=\"get\">\n            <div class=\"buttons\">\n              <label for=\"preselected\">Visit:</label>\n              <select id=\"preselected\" name=\"preselected\">\n                <option selected=\"selected\"></option>\n                <optgroup label=\"branches\">\n                  <option value=\"/LUCICodeRepository/nomaticIM/browser/trunk\">trunk</option>\n                </optgroup>\n              </select>\n              <input type=\"submit\" value=\"Go!\" title=\"Jump to the chosen preselected path\" />\n            </div>\n          </form>\n        </div>\n        <div class=\"trac-tags\">\n        </div>\n      <table id=\"info\" summary=\"Revision info\">\n        <tr>\n          <th>\n                <a href=\"/LUCICodeRepository/nomaticIM/changeset/712/nomatic/trunk/buddy_bots/twisted/python/usage.py\" title=\"View differences\">Last change</a>\n                  on this file was\n                  <a href=\"/LUCICodeRepository/nomaticIM/changeset/712/\" title=\"View changeset 712\">712</a>,\n                  checked in by cbaker, <a class=\"timeline\" href=\"/LUCICodeRepository/nomaticIM/timeline?from=2008-02-16T08%3A16%3A53-08%3A00&amp;precision=second\" title=\"See timeline at Feb 16, 2008, 8:16:53 AM\">7 years ago</a>\n          </th>\n        </tr>\n        <tr>\n          <td class=\"message searchable\">\n              <p>\nFirst draft of nomatic buddy bots. oscar_bot is functional if you give it good authentication credentials, jabber_bot is just an example from the web <br />\n</p>\n          </td>\n        </tr>\n        <tr><td colspan=\"2\">\n            <strong>File size:</strong>\n            <span title=\"18750 bytes\">18.3 KB</span>\n          </td></tr>\n      </table>\n      <div id=\"preview\" class=\"searchable\">\n        \n  <table class=\"code\"><thead><tr><th class=\"lineno\" title=\"Line numbers\">Line</th><th class=\"content\">\u00a0</th></tr></thead><tbody><tr><th id=\"L1\"><a href=\"#L1\">1</a></th><td><span class=\"c\"># -*- test-case-name: twisted.test.test_usage -*-</span></td></tr><tr><th id=\"L2\"><a href=\"#L2\">2</a></th><td><span class=\"c\"># Copyright (c) 2001-2004 Twisted Matrix Laboratories.</span></td></tr><tr><th id=\"L3\"><a href=\"#L3\">3</a></th><td><span class=\"c\"># See LICENSE for details.</span></td></tr><tr><th id=\"L4\"><a href=\"#L4\">4</a></th><td></td></tr><tr><th id=\"L5\"><a href=\"#L5\">5</a></th><td></td></tr><tr><th id=\"L6\"><a href=\"#L6\">6</a></th><td><span class=\"sd\">\"\"\"</span></td></tr><tr><th id=\"L7\"><a href=\"#L7\">7</a></th><td><span class=\"sd\">twisted.python.usage is a module for parsing/handling the</span></td></tr><tr><th id=\"L8\"><a href=\"#L8\">8</a></th><td><span class=\"sd\">command line of your program.</span></td></tr><tr><th id=\"L9\"><a href=\"#L9\">9</a></th><td><span class=\"sd\"></span></td></tr><tr><th id=\"L10\"><a href=\"#L10\">10</a></th><td><span class=\"sd\">For information on how to use it, see</span></td></tr><tr><th id=\"L11\"><a href=\"#L11\">11</a></th><td><span class=\"sd\">U{http://twistedmatrix.com/projects/core/documentation/howto/options.html}, or doc/howto/options.html</span></td></tr><tr><th id=\"L12\"><a href=\"#L12\">12</a></th><td><span class=\"sd\">in your Twisted directory.</span></td></tr><tr><th id=\"L13\"><a href=\"#L13\">13</a></th><td><span class=\"sd\">\"\"\"</span></td></tr><tr><th id=\"L14\"><a href=\"#L14\">14</a></th><td></td></tr><tr><th id=\"L15\"><a href=\"#L15\">15</a></th><td><span class=\"c\"># System Imports</span></td></tr><tr><th id=\"L16\"><a href=\"#L16\">16</a></th><td><span class=\"kn\">import</span>\u00a0<span class=\"nn\">string</span></td></tr><tr><th id=\"L17\"><a href=\"#L17\">17</a></th><td><span class=\"kn\">import</span>\u00a0<span class=\"nn\">os</span></td></tr><tr><th id=\"L18\"><a href=\"#L18\">18</a></th><td><span class=\"kn\">import</span>\u00a0<span class=\"nn\">sys</span></td></tr><tr><th id=\"L19\"><a href=\"#L19\">19</a></th><td><span class=\"kn\">import</span>\u00a0<span class=\"nn\">getopt</span></td></tr><tr><th id=\"L20\"><a href=\"#L20\">20</a></th><td><span class=\"kn\">from</span>\u00a0<span class=\"nn\">os</span>\u00a0<span class=\"kn\">import</span>\u00a0path</td></tr><tr><th id=\"L21\"><a href=\"#L21\">21</a></th><td></td></tr><tr><th id=\"L22\"><a href=\"#L22\">22</a></th><td><span class=\"c\"># Sibling Imports</span></td></tr><tr><th id=\"L23\"><a href=\"#L23\">23</a></th><td><span class=\"kn\">import</span>\u00a0<span class=\"nn\">reflect</span></td></tr><tr><th id=\"L24\"><a href=\"#L24\">24</a></th><td><span class=\"kn\">import</span>\u00a0<span class=\"nn\">text</span></td></tr><tr><th id=\"L25\"><a href=\"#L25\">25</a></th><td><span class=\"kn\">import</span>\u00a0<span class=\"nn\">util</span></td></tr><tr><th id=\"L26\"><a href=\"#L26\">26</a></th><td></td></tr><tr><th id=\"L27\"><a href=\"#L27\">27</a></th><td><span class=\"k\">class</span>\u00a0<span class=\"nc\">UsageError</span><span class=\"p\">(</span><span class=\"ne\">Exception</span><span class=\"p\">):</span></td></tr><tr><th id=\"L28\"><a href=\"#L28\">28</a></th><td>\u00a0 \u00a0 <span class=\"k\">pass</span></td></tr><tr><th id=\"L29\"><a href=\"#L29\">29</a></th><td></td></tr><tr><th id=\"L30\"><a href=\"#L30\">30</a></th><td>error <span class=\"o\">=</span>\u00a0UsageError</td></tr><tr><th id=\"L31\"><a href=\"#L31\">31</a></th><td></td></tr><tr><th id=\"L32\"><a href=\"#L32\">32</a></th><td><span class=\"k\">class</span>\u00a0<span class=\"nc\">Options</span><span class=\"p\">(</span><span class=\"nb\">dict</span><span class=\"p\">):</span></td></tr><tr><th id=\"L33\"><a href=\"#L33\">33</a></th><td>\u00a0 \u00a0 <span class=\"sd\">\"\"\"</span></td></tr><tr><th id=\"L34\"><a href=\"#L34\">34</a></th><td><span class=\"sd\">\u00a0 \u00a0 An option list parser class</span></td></tr><tr><th id=\"L35\"><a href=\"#L35\">35</a></th><td><span class=\"sd\"></span></td></tr><tr><th id=\"L36\"><a href=\"#L36\">36</a></th><td><span class=\"sd\">\u00a0 \u00a0 C{optFlags} and C{optParameters} are lists of available parameters</span></td></tr><tr><th id=\"L37\"><a href=\"#L37\">37</a></th><td><span class=\"sd\">\u00a0 \u00a0 which your program can handle. The difference between the two</span></td></tr><tr><th id=\"L38\"><a href=\"#L38\">38</a></th><td><span class=\"sd\">\u00a0 \u00a0 is the 'flags' have an on(1) or off(0) state (off by default)</span></td></tr><tr><th id=\"L39\"><a href=\"#L39\">39</a></th><td><span class=\"sd\">\u00a0 \u00a0 whereas 'parameters' have an assigned value, with an optional</span></td></tr><tr><th id=\"L40\"><a href=\"#L40\">40</a></th><td><span class=\"sd\">\u00a0 \u00a0 default. (Compare '--verbose' and '--verbosity=2')</span></td></tr><tr><th id=\"L41\"><a href=\"#L41\">41</a></th><td><span class=\"sd\"></span></td></tr><tr><th id=\"L42\"><a href=\"#L42\">42</a></th><td><span class=\"sd\">\u00a0 \u00a0 optFlags is assigned a list of lists. Each list represents</span></td></tr><tr><th id=\"L43\"><a href=\"#L43\">43</a></th><td><span class=\"sd\">\u00a0 \u00a0 a flag parameter, as so::</span></td></tr><tr><th id=\"L44\"><a href=\"#L44\">44</a></th><td><span class=\"sd\"></span></td></tr><tr><th id=\"L45\"><a href=\"#L45\">45</a></th><td><span class=\"sd\">\u00a0 \u00a0 |\u00a0 \u00a0 optFlags = [['verbose', 'v', 'Makes it tell you what it doing.'],</span></td></tr><tr><th id=\"L46\"><a href=\"#L46\">46</a></th><td><span class=\"sd\">\u00a0 \u00a0 |\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ['quiet', 'q', 'Be vewy vewy quiet.']]</span></td></tr><tr><th id=\"L47\"><a href=\"#L47\">47</a></th><td><span class=\"sd\"></span></td></tr><tr><th id=\"L48\"><a href=\"#L48\">48</a></th><td><span class=\"sd\">\u00a0 \u00a0 As you can see, the first item is the long option name</span></td></tr><tr><th id=\"L49\"><a href=\"#L49\">49</a></th><td><span class=\"sd\">\u00a0 \u00a0 (prefixed with '--' on the command line), followed by the</span></td></tr><tr><th id=\"L50\"><a href=\"#L50\">50</a></th><td><span class=\"sd\">\u00a0 \u00a0 short option name (prefixed with '-'), and the description.</span></td></tr><tr><th id=\"L51\"><a href=\"#L51\">51</a></th><td><span class=\"sd\">\u00a0 \u00a0 The description is used for the built-in handling of the</span></td></tr><tr><th id=\"L52\"><a href=\"#L52\">52</a></th><td><span class=\"sd\">\u00a0 \u00a0 --help switch, which prints a usage summary.</span></td></tr><tr><th id=\"L53\"><a href=\"#L53\">53</a></th><td><span class=\"sd\"></span></td></tr><tr><th id=\"L54\"><a href=\"#L54\">54</a></th><td><span class=\"sd\">\u00a0 \u00a0 C{optParameters} is much the same, except the list also contains</span></td></tr><tr><th id=\"L55\"><a href=\"#L55\">55</a></th><td><span class=\"sd\">\u00a0 \u00a0 a default value::</span></td></tr><tr><th id=\"L56\"><a href=\"#L56\">56</a></th><td><span class=\"sd\"></span></td></tr><tr><th id=\"L57\"><a href=\"#L57\">57</a></th><td><span class=\"sd\">\u00a0 \u00a0 | optParameters = [['outfile', 'O', 'outfile.log', 'Description...']]</span></td></tr><tr><th id=\"L58\"><a href=\"#L58\">58</a></th><td><span class=\"sd\"></span></td></tr><tr><th id=\"L59\"><a href=\"#L59\">59</a></th><td><span class=\"sd\">\u00a0 \u00a0 subCommands is a list of 4-tuples of (command name, command shortcut,</span></td></tr><tr><th id=\"L60\"><a href=\"#L60\">60</a></th><td><span class=\"sd\">\u00a0 \u00a0 parser class, documentation).\u00a0 If the first non-option argument found is</span></td></tr><tr><th id=\"L61\"><a href=\"#L61\">61</a></th><td><span class=\"sd\">\u00a0 \u00a0 one of the given command names, an instance of the given parser class is</span></td></tr><tr><th id=\"L62\"><a href=\"#L62\">62</a></th><td><span class=\"sd\">\u00a0 \u00a0 instantiated and given the remainder of the arguments to parse and</span></td></tr><tr><th id=\"L63\"><a href=\"#L63\">63</a></th><td><span class=\"sd\">\u00a0 \u00a0 self.opts[command] is set to the command name.\u00a0 For example::</span></td></tr><tr><th id=\"L64\"><a href=\"#L64\">64</a></th><td><span class=\"sd\"></span></td></tr><tr><th id=\"L65\"><a href=\"#L65\">65</a></th><td><span class=\"sd\">\u00a0 \u00a0 | subCommands = [</span></td></tr><tr><th id=\"L66\"><a href=\"#L66\">66</a></th><td><span class=\"sd\">\u00a0 \u00a0 |\u00a0 \u00a0 \u00a0 ['inquisition', 'inquest', InquisitionOptions, 'Perform an inquisition'],</span></td></tr><tr><th id=\"L67\"><a href=\"#L67\">67</a></th><td><span class=\"sd\">\u00a0 \u00a0 |\u00a0 \u00a0 \u00a0 ['holyquest', 'quest', HolyQuestOptions, 'Embark upon a holy quest']</span></td></tr><tr><th id=\"L68\"><a href=\"#L68\">68</a></th><td><span class=\"sd\">\u00a0 \u00a0 |\u00a0 ]</span></td></tr><tr><th id=\"L69\"><a href=\"#L69\">69</a></th><td><span class=\"sd\"></span></td></tr><tr><th id=\"L70\"><a href=\"#L70\">70</a></th><td><span class=\"sd\">\u00a0 \u00a0 In this case, C{\"&lt;program&gt; holyquest --horseback --for-grail\"} will cause</span></td></tr><tr><th id=\"L71\"><a href=\"#L71\">71</a></th><td><span class=\"sd\">\u00a0 \u00a0 C{HolyQuestOptions} to be instantiated and asked to parse</span></td></tr><tr><th id=\"L72\"><a href=\"#L72\">72</a></th><td><span class=\"sd\">\u00a0 \u00a0 C{['--horseback', '--for-grail']}.\u00a0 Currently, only the first sub-command</span></td></tr><tr><th id=\"L73\"><a href=\"#L73\">73</a></th><td><span class=\"sd\">\u00a0 \u00a0 is parsed, and all options following it are passed to its parser.\u00a0 If a</span></td></tr><tr><th id=\"L74\"><a href=\"#L74\">74</a></th><td><span class=\"sd\">\u00a0 \u00a0 subcommand is found, the subCommand attribute is set to its name and the</span></td></tr><tr><th id=\"L75\"><a href=\"#L75\">75</a></th><td><span class=\"sd\">\u00a0 \u00a0 subOptions attribute is set to the Option instance that parses the</span></td></tr><tr><th id=\"L76\"><a href=\"#L76\">76</a></th><td><span class=\"sd\">\u00a0 \u00a0 remaining options. If a subcommand is not given to parseOptions,</span></td></tr><tr><th id=\"L77\"><a href=\"#L77\">77</a></th><td><span class=\"sd\">\u00a0 \u00a0 the subCommand attribute will be None. You can also mark one of</span></td></tr><tr><th id=\"L78\"><a href=\"#L78\">78</a></th><td><span class=\"sd\">\u00a0 \u00a0 the subCommands to be the default.</span></td></tr><tr><th id=\"L79\"><a href=\"#L79\">79</a></th><td><span class=\"sd\"></span></td></tr><tr><th id=\"L80\"><a href=\"#L80\">80</a></th><td><span class=\"sd\">\u00a0 \u00a0 | defaultSubCommand = 'holyquest'</span></td></tr><tr><th id=\"L81\"><a href=\"#L81\">81</a></th><td><span class=\"sd\"></span></td></tr><tr><th id=\"L82\"><a href=\"#L82\">82</a></th><td><span class=\"sd\">\u00a0 \u00a0 In this case, the subCommand attribute will never be None, and</span></td></tr><tr><th id=\"L83\"><a href=\"#L83\">83</a></th><td><span class=\"sd\">\u00a0 \u00a0 the subOptions attribute will always be set.</span></td></tr><tr><th id=\"L84\"><a href=\"#L84\">84</a></th><td><span class=\"sd\"></span></td></tr><tr><th id=\"L85\"><a href=\"#L85\">85</a></th><td><span class=\"sd\">\u00a0 \u00a0 If you want to handle your own options, define a method named</span></td></tr><tr><th id=\"L86\"><a href=\"#L86\">86</a></th><td><span class=\"sd\">\u00a0 \u00a0 C{opt_paramname} that takes C{(self, option)} as arguments. C{option}</span></td></tr><tr><th id=\"L87\"><a href=\"#L87\">87</a></th><td><span class=\"sd\">\u00a0 \u00a0 will be whatever immediately follows the parameter on the</span></td></tr><tr><th id=\"L88\"><a href=\"#L88\">88</a></th><td><span class=\"sd\">\u00a0 \u00a0 command line. Options fully supports the mapping interface, so you</span></td></tr><tr><th id=\"L89\"><a href=\"#L89\">89</a></th><td><span class=\"sd\">\u00a0 \u00a0 can do things like C{'self[\"option\"] = val'} in these methods.</span></td></tr><tr><th id=\"L90\"><a href=\"#L90\">90</a></th><td><span class=\"sd\"></span></td></tr><tr><th id=\"L91\"><a href=\"#L91\">91</a></th><td><span class=\"sd\">\u00a0 \u00a0 Advanced functionality is covered in the howto documentation,</span></td></tr><tr><th id=\"L92\"><a href=\"#L92\">92</a></th><td><span class=\"sd\">\u00a0 \u00a0 available at U{http://twistedmatrix.com/projects/core/documentation/howto/options.html}, or</span></td></tr><tr><th id=\"L93\"><a href=\"#L93\">93</a></th><td><span class=\"sd\">\u00a0 \u00a0 doc/howto/options.html in your Twisted directory.</span></td></tr><tr><th id=\"L94\"><a href=\"#L94\">94</a></th><td><span class=\"sd\">\u00a0 \u00a0 \"\"\"</span></td></tr><tr><th id=\"L95\"><a href=\"#L95\">95</a></th><td></td></tr><tr><th id=\"L96\"><a href=\"#L96\">96</a></th><td>\u00a0 \u00a0 subCommand <span class=\"o\">=</span>\u00a0<span class=\"bp\">None</span></td></tr><tr><th id=\"L97\"><a href=\"#L97\">97</a></th><td>\u00a0 \u00a0 defaultSubCommand <span class=\"o\">=</span>\u00a0<span class=\"bp\">None</span></td></tr><tr><th id=\"L98\"><a href=\"#L98\">98</a></th><td>\u00a0 \u00a0 parent <span class=\"o\">=</span>\u00a0<span class=\"bp\">None</span></td></tr><tr><th id=\"L99\"><a href=\"#L99\">99</a></th><td>\u00a0 \u00a0 <span class=\"k\">def</span>\u00a0<span class=\"nf\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span></td></tr><tr><th id=\"L100\"><a href=\"#L100\">100</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"nb\">super</span><span class=\"p\">(</span>Options<span class=\"p\">,</span>\u00a0<span class=\"bp\">self</span><span class=\"p\">)</span><span class=\"o\">.</span>__init__<span class=\"p\">()</span></td></tr><tr><th id=\"L101\"><a href=\"#L101\">101</a></th><td></td></tr><tr><th id=\"L102\"><a href=\"#L102\">102</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"bp\">self</span><span class=\"o\">.</span>opts <span class=\"o\">=</span>\u00a0<span class=\"bp\">self</span></td></tr><tr><th id=\"L103\"><a href=\"#L103\">103</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"bp\">self</span><span class=\"o\">.</span>defaults <span class=\"o\">=</span>\u00a0<span class=\"p\">{}</span></td></tr><tr><th id=\"L104\"><a href=\"#L104\">104</a></th><td></td></tr><tr><th id=\"L105\"><a href=\"#L105\">105</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"c\"># These are strings/lists we will pass to getopt</span></td></tr><tr><th id=\"L106\"><a href=\"#L106\">106</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"bp\">self</span><span class=\"o\">.</span>longOpt <span class=\"o\">=</span>\u00a0<span class=\"p\">[]</span></td></tr><tr><th id=\"L107\"><a href=\"#L107\">107</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"bp\">self</span><span class=\"o\">.</span>shortOpt <span class=\"o\">=</span>\u00a0<span class=\"s\">''</span></td></tr><tr><th id=\"L108\"><a href=\"#L108\">108</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"bp\">self</span><span class=\"o\">.</span>docs <span class=\"o\">=</span>\u00a0<span class=\"p\">{}</span></td></tr><tr><th id=\"L109\"><a href=\"#L109\">109</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"bp\">self</span><span class=\"o\">.</span>synonyms <span class=\"o\">=</span>\u00a0<span class=\"p\">{}</span></td></tr><tr><th id=\"L110\"><a href=\"#L110\">110</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"bp\">self</span><span class=\"o\">.</span>__dispatch <span class=\"o\">=</span>\u00a0<span class=\"p\">{}</span></td></tr><tr><th id=\"L111\"><a href=\"#L111\">111</a></th><td></td></tr><tr><th id=\"L112\"><a href=\"#L112\">112</a></th><td></td></tr><tr><th id=\"L113\"><a href=\"#L113\">113</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 collectors <span class=\"o\">=</span>\u00a0<span class=\"p\">[</span></td></tr><tr><th id=\"L114\"><a href=\"#L114\">114</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"bp\">self</span><span class=\"o\">.</span>_gather_flags<span class=\"p\">,</span></td></tr><tr><th id=\"L115\"><a href=\"#L115\">115</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"bp\">self</span><span class=\"o\">.</span>_gather_parameters<span class=\"p\">,</span></td></tr><tr><th id=\"L116\"><a href=\"#L116\">116</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"bp\">self</span><span class=\"o\">.</span>_gather_handlers<span class=\"p\">,</span></td></tr><tr><th id=\"L117\"><a href=\"#L117\">117</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"p\">]</span></td></tr><tr><th id=\"L118\"><a href=\"#L118\">118</a></th><td></td></tr><tr><th id=\"L119\"><a href=\"#L119\">119</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">for</span>\u00a0c <span class=\"ow\">in</span>\u00a0collectors<span class=\"p\">:</span></td></tr><tr><th id=\"L120\"><a href=\"#L120\">120</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"p\">(</span>longOpt<span class=\"p\">,</span>\u00a0shortOpt<span class=\"p\">,</span>\u00a0docs<span class=\"p\">,</span>\u00a0settings<span class=\"p\">,</span>\u00a0synonyms<span class=\"p\">,</span>\u00a0dispatch<span class=\"p\">)</span>\u00a0<span class=\"o\">=</span>\u00a0c<span class=\"p\">()</span></td></tr><tr><th id=\"L121\"><a href=\"#L121\">121</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"bp\">self</span><span class=\"o\">.</span>longOpt<span class=\"o\">.</span>extend<span class=\"p\">(</span>longOpt<span class=\"p\">)</span></td></tr><tr><th id=\"L122\"><a href=\"#L122\">122</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"bp\">self</span><span class=\"o\">.</span>shortOpt <span class=\"o\">=</span>\u00a0<span class=\"bp\">self</span><span class=\"o\">.</span>shortOpt <span class=\"o\">+</span>\u00a0shortOpt</td></tr><tr><th id=\"L123\"><a href=\"#L123\">123</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"bp\">self</span><span class=\"o\">.</span>docs<span class=\"o\">.</span>update<span class=\"p\">(</span>docs<span class=\"p\">)</span></td></tr><tr><th id=\"L124\"><a href=\"#L124\">124</a></th><td></td></tr><tr><th id=\"L125\"><a href=\"#L125\">125</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"bp\">self</span><span class=\"o\">.</span>opts<span class=\"o\">.</span>update<span class=\"p\">(</span>settings<span class=\"p\">)</span></td></tr><tr><th id=\"L126\"><a href=\"#L126\">126</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"bp\">self</span><span class=\"o\">.</span>defaults<span class=\"o\">.</span>update<span class=\"p\">(</span>settings<span class=\"p\">)</span></td></tr><tr><th id=\"L127\"><a href=\"#L127\">127</a></th><td></td></tr><tr><th id=\"L128\"><a href=\"#L128\">128</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"bp\">self</span><span class=\"o\">.</span>synonyms<span class=\"o\">.</span>update<span class=\"p\">(</span>synonyms<span class=\"p\">)</span></td></tr><tr><th id=\"L129\"><a href=\"#L129\">129</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"bp\">self</span><span class=\"o\">.</span>__dispatch<span class=\"o\">.</span>update<span class=\"p\">(</span>dispatch<span class=\"p\">)</span></td></tr><tr><th id=\"L130\"><a href=\"#L130\">130</a></th><td></td></tr><tr><th id=\"L131\"><a href=\"#L131\">131</a></th><td>\u00a0 \u00a0 <span class=\"k\">def</span>\u00a0<span class=\"nf\">__hash__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span></td></tr><tr><th id=\"L132\"><a href=\"#L132\">132</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"sd\">\"\"\"</span></td></tr><tr><th id=\"L133\"><a href=\"#L133\">133</a></th><td><span class=\"sd\">\u00a0 \u00a0 \u00a0 \u00a0 Define a custom hash function so that Options instances can be used</span></td></tr><tr><th id=\"L134\"><a href=\"#L134\">134</a></th><td><span class=\"sd\">\u00a0 \u00a0 \u00a0 \u00a0 as dictionary keys.\u00a0 This is an internal feature used to implement</span></td></tr><tr><th id=\"L135\"><a href=\"#L135\">135</a></th><td><span class=\"sd\">\u00a0 \u00a0 \u00a0 \u00a0 the parser.\u00a0 Do not rely on it in application code.</span></td></tr><tr><th id=\"L136\"><a href=\"#L136\">136</a></th><td><span class=\"sd\">\u00a0 \u00a0 \u00a0 \u00a0 \"\"\"</span></td></tr><tr><th id=\"L137\"><a href=\"#L137\">137</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">return</span>\u00a0<span class=\"nb\">int</span><span class=\"p\">(</span><span class=\"nb\">id</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">)</span>\u00a0<span class=\"o\">%</span>\u00a0sys<span class=\"o\">.</span>maxint<span class=\"p\">)</span></td></tr><tr><th id=\"L138\"><a href=\"#L138\">138</a></th><td></td></tr><tr><th id=\"L139\"><a href=\"#L139\">139</a></th><td>\u00a0 \u00a0 <span class=\"k\">def</span>\u00a0<span class=\"nf\">opt_help</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span></td></tr><tr><th id=\"L140\"><a href=\"#L140\">140</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"sd\">\"\"\"Display this help and exit.\"\"\"</span></td></tr><tr><th id=\"L141\"><a href=\"#L141\">141</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">print</span>\u00a0<span class=\"bp\">self</span><span class=\"o\">.</span>__str__<span class=\"p\">()</span></td></tr><tr><th id=\"L142\"><a href=\"#L142\">142</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 sys<span class=\"o\">.</span>exit<span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span></td></tr><tr><th id=\"L143\"><a href=\"#L143\">143</a></th><td></td></tr><tr><th id=\"L144\"><a href=\"#L144\">144</a></th><td>\u00a0 \u00a0 <span class=\"k\">def</span>\u00a0<span class=\"nf\">opt_version</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span></td></tr><tr><th id=\"L145\"><a href=\"#L145\">145</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"kn\">from</span>\u00a0<span class=\"nn\">twisted</span>\u00a0<span class=\"kn\">import</span>\u00a0copyright</td></tr><tr><th id=\"L146\"><a href=\"#L146\">146</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">print</span>\u00a0<span class=\"s\">\"Twisted version:\"</span><span class=\"p\">,</span>\u00a0copyright<span class=\"o\">.</span>version</td></tr><tr><th id=\"L147\"><a href=\"#L147\">147</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 sys<span class=\"o\">.</span>exit<span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span></td></tr><tr><th id=\"L148\"><a href=\"#L148\">148</a></th><td></td></tr><tr><th id=\"L149\"><a href=\"#L149\">149</a></th><td>\u00a0 \u00a0 <span class=\"c\">#opt_h = opt_help # this conflicted with existing 'host' options.</span></td></tr><tr><th id=\"L150\"><a href=\"#L150\">150</a></th><td></td></tr><tr><th id=\"L151\"><a href=\"#L151\">151</a></th><td>\u00a0 \u00a0 <span class=\"k\">def</span>\u00a0<span class=\"nf\">parseOptions</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span>\u00a0options<span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">):</span></td></tr><tr><th id=\"L152\"><a href=\"#L152\">152</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"sd\">\"\"\"The guts of the command-line parser.</span></td></tr><tr><th id=\"L153\"><a href=\"#L153\">153</a></th><td><span class=\"sd\">\u00a0 \u00a0 \u00a0 \u00a0 \"\"\"</span></td></tr><tr><th id=\"L154\"><a href=\"#L154\">154</a></th><td></td></tr><tr><th id=\"L155\"><a href=\"#L155\">155</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0options <span class=\"ow\">is</span>\u00a0<span class=\"bp\">None</span><span class=\"p\">:</span></td></tr><tr><th id=\"L156\"><a href=\"#L156\">156</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 options <span class=\"o\">=</span>\u00a0sys<span class=\"o\">.</span>argv<span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">:]</span></td></tr><tr><th id=\"L157\"><a href=\"#L157\">157</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">try</span><span class=\"p\">:</span></td></tr><tr><th id=\"L158\"><a href=\"#L158\">158</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 opts<span class=\"p\">,</span>\u00a0args <span class=\"o\">=</span>\u00a0getopt<span class=\"o\">.</span>getopt<span class=\"p\">(</span>options<span class=\"p\">,</span></td></tr><tr><th id=\"L159\"><a href=\"#L159\">159</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0<span class=\"bp\">self</span><span class=\"o\">.</span>shortOpt<span class=\"p\">,</span>\u00a0<span class=\"bp\">self</span><span class=\"o\">.</span>longOpt<span class=\"p\">)</span></td></tr><tr><th id=\"L160\"><a href=\"#L160\">160</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">except</span>\u00a0getopt<span class=\"o\">.</span>error<span class=\"p\">,</span>\u00a0e<span class=\"p\">:</span></td></tr><tr><th id=\"L161\"><a href=\"#L161\">161</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">raise</span>\u00a0UsageError<span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">(</span>e<span class=\"p\">))</span></td></tr><tr><th id=\"L162\"><a href=\"#L162\">162</a></th><td></td></tr><tr><th id=\"L163\"><a href=\"#L163\">163</a></th><td></td></tr><tr><th id=\"L164\"><a href=\"#L164\">164</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">for</span>\u00a0opt<span class=\"p\">,</span>\u00a0arg <span class=\"ow\">in</span>\u00a0opts<span class=\"p\">:</span></td></tr><tr><th id=\"L165\"><a href=\"#L165\">165</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0opt<span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span>\u00a0<span class=\"o\">==</span>\u00a0<span class=\"s\">'-'</span><span class=\"p\">:</span></td></tr><tr><th id=\"L166\"><a href=\"#L166\">166</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 opt <span class=\"o\">=</span>\u00a0opt<span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">:]</span></td></tr><tr><th id=\"L167\"><a href=\"#L167\">167</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">else</span><span class=\"p\">:</span></td></tr><tr><th id=\"L168\"><a href=\"#L168\">168</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 opt <span class=\"o\">=</span>\u00a0opt<span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">:]</span></td></tr><tr><th id=\"L169\"><a href=\"#L169\">169</a></th><td></td></tr><tr><th id=\"L170\"><a href=\"#L170\">170</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 optMangled <span class=\"o\">=</span>\u00a0opt</td></tr><tr><th id=\"L171\"><a href=\"#L171\">171</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0<span class=\"ow\">not</span>\u00a0<span class=\"bp\">self</span><span class=\"o\">.</span>synonyms<span class=\"o\">.</span>has_key<span class=\"p\">(</span>optMangled<span class=\"p\">):</span></td></tr><tr><th id=\"L172\"><a href=\"#L172\">172</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 optMangled <span class=\"o\">=</span>\u00a0string<span class=\"o\">.</span>replace<span class=\"p\">(</span>opt<span class=\"p\">,</span>\u00a0<span class=\"s\">\"-\"</span><span class=\"p\">,</span>\u00a0<span class=\"s\">\"_\"</span><span class=\"p\">)</span></td></tr><tr><th id=\"L173\"><a href=\"#L173\">173</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0<span class=\"ow\">not</span>\u00a0<span class=\"bp\">self</span><span class=\"o\">.</span>synonyms<span class=\"o\">.</span>has_key<span class=\"p\">(</span>optMangled<span class=\"p\">):</span></td></tr><tr><th id=\"L174\"><a href=\"#L174\">174</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">raise</span>\u00a0UsageError<span class=\"p\">,</span>\u00a0<span class=\"s\">\"No such option '</span><span class=\"si\">%s</span><span class=\"s\">'\"</span>\u00a0<span class=\"o\">%</span>\u00a0<span class=\"p\">(</span>opt<span class=\"p\">,)</span></td></tr><tr><th id=\"L175\"><a href=\"#L175\">175</a></th><td></td></tr><tr><th id=\"L176\"><a href=\"#L176\">176</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 optMangled <span class=\"o\">=</span>\u00a0<span class=\"bp\">self</span><span class=\"o\">.</span>synonyms<span class=\"p\">[</span>optMangled<span class=\"p\">]</span></td></tr><tr><th id=\"L177\"><a href=\"#L177\">177</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"bp\">self</span><span class=\"o\">.</span>__dispatch<span class=\"p\">[</span>optMangled<span class=\"p\">](</span>optMangled<span class=\"p\">,</span>\u00a0arg<span class=\"p\">)</span></td></tr><tr><th id=\"L178\"><a href=\"#L178\">178</a></th><td></td></tr><tr><th id=\"L179\"><a href=\"#L179\">179</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0<span class=\"p\">(</span><span class=\"nb\">getattr</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span>\u00a0<span class=\"s\">'subCommands'</span><span class=\"p\">,</span>\u00a0<span class=\"bp\">None</span><span class=\"p\">)</span></td></tr><tr><th id=\"L180\"><a href=\"#L180\">180</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"ow\">and</span>\u00a0<span class=\"p\">(</span>args <span class=\"ow\">or</span>\u00a0<span class=\"bp\">self</span><span class=\"o\">.</span>defaultSubCommand <span class=\"ow\">is</span>\u00a0<span class=\"ow\">not</span>\u00a0<span class=\"bp\">None</span><span class=\"p\">)):</span></td></tr><tr><th id=\"L181\"><a href=\"#L181\">181</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0<span class=\"ow\">not</span>\u00a0args<span class=\"p\">:</span></td></tr><tr><th id=\"L182\"><a href=\"#L182\">182</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 args <span class=\"o\">=</span>\u00a0<span class=\"p\">[</span><span class=\"bp\">self</span><span class=\"o\">.</span>defaultSubCommand<span class=\"p\">]</span></td></tr><tr><th id=\"L183\"><a href=\"#L183\">183</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 sub<span class=\"p\">,</span>\u00a0rest <span class=\"o\">=</span>\u00a0args<span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">],</span>\u00a0args<span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">:]</span></td></tr><tr><th id=\"L184\"><a href=\"#L184\">184</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">for</span>\u00a0<span class=\"p\">(</span>cmd<span class=\"p\">,</span>\u00a0short<span class=\"p\">,</span>\u00a0parser<span class=\"p\">,</span>\u00a0doc<span class=\"p\">)</span>\u00a0<span class=\"ow\">in</span>\u00a0<span class=\"bp\">self</span><span class=\"o\">.</span>subCommands<span class=\"p\">:</span></td></tr><tr><th id=\"L185\"><a href=\"#L185\">185</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0sub <span class=\"o\">==</span>\u00a0cmd <span class=\"ow\">or</span>\u00a0sub <span class=\"o\">==</span>\u00a0short<span class=\"p\">:</span></td></tr><tr><th id=\"L186\"><a href=\"#L186\">186</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"bp\">self</span><span class=\"o\">.</span>subCommand <span class=\"o\">=</span>\u00a0cmd</td></tr><tr><th id=\"L187\"><a href=\"#L187\">187</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"bp\">self</span><span class=\"o\">.</span>subOptions <span class=\"o\">=</span>\u00a0parser<span class=\"p\">()</span></td></tr><tr><th id=\"L188\"><a href=\"#L188\">188</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"bp\">self</span><span class=\"o\">.</span>subOptions<span class=\"o\">.</span>parent <span class=\"o\">=</span>\u00a0<span class=\"bp\">self</span></td></tr><tr><th id=\"L189\"><a href=\"#L189\">189</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"bp\">self</span><span class=\"o\">.</span>subOptions<span class=\"o\">.</span>parseOptions<span class=\"p\">(</span>rest<span class=\"p\">)</span></td></tr><tr><th id=\"L190\"><a href=\"#L190\">190</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">break</span></td></tr><tr><th id=\"L191\"><a href=\"#L191\">191</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">else</span><span class=\"p\">:</span></td></tr><tr><th id=\"L192\"><a href=\"#L192\">192</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">raise</span>\u00a0UsageError<span class=\"p\">(</span><span class=\"s\">\"Unknown command: </span><span class=\"si\">%s</span><span class=\"s\">\"</span>\u00a0<span class=\"o\">%</span>\u00a0sub<span class=\"p\">)</span></td></tr><tr><th id=\"L193\"><a href=\"#L193\">193</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">else</span><span class=\"p\">:</span></td></tr><tr><th id=\"L194\"><a href=\"#L194\">194</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">try</span><span class=\"p\">:</span></td></tr><tr><th id=\"L195\"><a href=\"#L195\">195</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"bp\">self</span><span class=\"o\">.</span>parseArgs<span class=\"p\">(</span><span class=\"o\">*</span>args<span class=\"p\">)</span></td></tr><tr><th id=\"L196\"><a href=\"#L196\">196</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">except</span>\u00a0<span class=\"ne\">TypeError</span><span class=\"p\">:</span></td></tr><tr><th id=\"L197\"><a href=\"#L197\">197</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">raise</span>\u00a0UsageError<span class=\"p\">(</span><span class=\"s\">\"Wrong number of arguments.\"</span><span class=\"p\">)</span></td></tr><tr><th id=\"L198\"><a href=\"#L198\">198</a></th><td></td></tr><tr><th id=\"L199\"><a href=\"#L199\">199</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"bp\">self</span><span class=\"o\">.</span>postOptions<span class=\"p\">()</span></td></tr><tr><th id=\"L200\"><a href=\"#L200\">200</a></th><td></td></tr><tr><th id=\"L201\"><a href=\"#L201\">201</a></th><td>\u00a0 \u00a0 <span class=\"k\">def</span>\u00a0<span class=\"nf\">postOptions</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span></td></tr><tr><th id=\"L202\"><a href=\"#L202\">202</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"sd\">\"\"\"I am called after the options are parsed.</span></td></tr><tr><th id=\"L203\"><a href=\"#L203\">203</a></th><td><span class=\"sd\"></span></td></tr><tr><th id=\"L204\"><a href=\"#L204\">204</a></th><td><span class=\"sd\">\u00a0 \u00a0 \u00a0 \u00a0 Override this method in your subclass to do something after</span></td></tr><tr><th id=\"L205\"><a href=\"#L205\">205</a></th><td><span class=\"sd\">\u00a0 \u00a0 \u00a0 \u00a0 the options have been parsed and assigned, like validate that</span></td></tr><tr><th id=\"L206\"><a href=\"#L206\">206</a></th><td><span class=\"sd\">\u00a0 \u00a0 \u00a0 \u00a0 all options are sane.</span></td></tr><tr><th id=\"L207\"><a href=\"#L207\">207</a></th><td><span class=\"sd\">\u00a0 \u00a0 \u00a0 \u00a0 \"\"\"</span></td></tr><tr><th id=\"L208\"><a href=\"#L208\">208</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">pass</span></td></tr><tr><th id=\"L209\"><a href=\"#L209\">209</a></th><td></td></tr><tr><th id=\"L210\"><a href=\"#L210\">210</a></th><td></td></tr><tr><th id=\"L211\"><a href=\"#L211\">211</a></th><td>\u00a0 \u00a0 <span class=\"k\">def</span>\u00a0<span class=\"nf\">parseArgs</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span></td></tr><tr><th id=\"L212\"><a href=\"#L212\">212</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"sd\">\"\"\"I am called with any leftover arguments which were not options.</span></td></tr><tr><th id=\"L213\"><a href=\"#L213\">213</a></th><td><span class=\"sd\"></span></td></tr><tr><th id=\"L214\"><a href=\"#L214\">214</a></th><td><span class=\"sd\">\u00a0 \u00a0 \u00a0 \u00a0 Override me to do something with the remaining arguments on</span></td></tr><tr><th id=\"L215\"><a href=\"#L215\">215</a></th><td><span class=\"sd\">\u00a0 \u00a0 \u00a0 \u00a0 the command line, those which were not flags or options. e.g.</span></td></tr><tr><th id=\"L216\"><a href=\"#L216\">216</a></th><td><span class=\"sd\">\u00a0 \u00a0 \u00a0 \u00a0 interpret them as a list of files to operate on.</span></td></tr><tr><th id=\"L217\"><a href=\"#L217\">217</a></th><td><span class=\"sd\"></span></td></tr><tr><th id=\"L218\"><a href=\"#L218\">218</a></th><td><span class=\"sd\">\u00a0 \u00a0 \u00a0 \u00a0 Note that if there more arguments on the command line</span></td></tr><tr><th id=\"L219\"><a href=\"#L219\">219</a></th><td><span class=\"sd\">\u00a0 \u00a0 \u00a0 \u00a0 than this method accepts, parseArgs will blow up with</span></td></tr><tr><th id=\"L220\"><a href=\"#L220\">220</a></th><td><span class=\"sd\">\u00a0 \u00a0 \u00a0 \u00a0 a getopt.error.\u00a0 This means if you don't override me,</span></td></tr><tr><th id=\"L221\"><a href=\"#L221\">221</a></th><td><span class=\"sd\">\u00a0 \u00a0 \u00a0 \u00a0 parseArgs will blow up if I am passed any arguments at</span></td></tr><tr><th id=\"L222\"><a href=\"#L222\">222</a></th><td><span class=\"sd\">\u00a0 \u00a0 \u00a0 \u00a0 all!</span></td></tr><tr><th id=\"L223\"><a href=\"#L223\">223</a></th><td><span class=\"sd\">\u00a0 \u00a0 \u00a0 \u00a0 \"\"\"</span></td></tr><tr><th id=\"L224\"><a href=\"#L224\">224</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">pass</span></td></tr><tr><th id=\"L225\"><a href=\"#L225\">225</a></th><td></td></tr><tr><th id=\"L226\"><a href=\"#L226\">226</a></th><td>\u00a0 \u00a0 <span class=\"k\">def</span>\u00a0<span class=\"nf\">_generic_flag</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span>\u00a0flagName<span class=\"p\">,</span>\u00a0value<span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">):</span></td></tr><tr><th id=\"L227\"><a href=\"#L227\">227</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0value <span class=\"ow\">not</span>\u00a0<span class=\"ow\">in</span>\u00a0<span class=\"p\">(</span><span class=\"s\">''</span><span class=\"p\">,</span>\u00a0<span class=\"bp\">None</span><span class=\"p\">):</span></td></tr><tr><th id=\"L228\"><a href=\"#L228\">228</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">raise</span>\u00a0UsageError<span class=\"p\">,</span>\u00a0<span class=\"p\">(</span><span class=\"s\">\"Flag '</span><span class=\"si\">%s</span><span class=\"s\">' takes no argument.\"</span></td></tr><tr><th id=\"L229\"><a href=\"#L229\">229</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0<span class=\"s\">\" Not even </span><span class=\"se\">\\\"</span><span class=\"si\">%s</span><span class=\"se\">\\\"</span><span class=\"s\">.\"</span>\u00a0<span class=\"o\">%</span>\u00a0<span class=\"p\">(</span>flagName<span class=\"p\">,</span>\u00a0value<span class=\"p\">))</span></td></tr><tr><th id=\"L230\"><a href=\"#L230\">230</a></th><td></td></tr><tr><th id=\"L231\"><a href=\"#L231\">231</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"bp\">self</span><span class=\"o\">.</span>opts<span class=\"p\">[</span>flagName<span class=\"p\">]</span>\u00a0<span class=\"o\">=</span>\u00a0<span class=\"mi\">1</span></td></tr><tr><th id=\"L232\"><a href=\"#L232\">232</a></th><td></td></tr><tr><th id=\"L233\"><a href=\"#L233\">233</a></th><td>\u00a0 \u00a0 <span class=\"k\">def</span>\u00a0<span class=\"nf\">_generic_parameter</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span>\u00a0parameterName<span class=\"p\">,</span>\u00a0value<span class=\"p\">):</span></td></tr><tr><th id=\"L234\"><a href=\"#L234\">234</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0value <span class=\"ow\">is</span>\u00a0<span class=\"bp\">None</span><span class=\"p\">:</span></td></tr><tr><th id=\"L235\"><a href=\"#L235\">235</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">raise</span>\u00a0UsageError<span class=\"p\">,</span>\u00a0<span class=\"p\">(</span><span class=\"s\">\"Parameter '</span><span class=\"si\">%s</span><span class=\"s\">' requires an argument.\"</span></td></tr><tr><th id=\"L236\"><a href=\"#L236\">236</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0<span class=\"o\">%</span>\u00a0<span class=\"p\">(</span>parameterName<span class=\"p\">,))</span></td></tr><tr><th id=\"L237\"><a href=\"#L237\">237</a></th><td></td></tr><tr><th id=\"L238\"><a href=\"#L238\">238</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"bp\">self</span><span class=\"o\">.</span>opts<span class=\"p\">[</span>parameterName<span class=\"p\">]</span>\u00a0<span class=\"o\">=</span>\u00a0value</td></tr><tr><th id=\"L239\"><a href=\"#L239\">239</a></th><td></td></tr><tr><th id=\"L240\"><a href=\"#L240\">240</a></th><td>\u00a0 \u00a0 <span class=\"k\">def</span>\u00a0<span class=\"nf\">_gather_flags</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span></td></tr><tr><th id=\"L241\"><a href=\"#L241\">241</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"sd\">\"\"\"Gather up boolean (flag) options.</span></td></tr><tr><th id=\"L242\"><a href=\"#L242\">242</a></th><td><span class=\"sd\">\u00a0 \u00a0 \u00a0 \u00a0 \"\"\"</span></td></tr><tr><th id=\"L243\"><a href=\"#L243\">243</a></th><td></td></tr><tr><th id=\"L244\"><a href=\"#L244\">244</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 longOpt<span class=\"p\">,</span>\u00a0shortOpt <span class=\"o\">=</span>\u00a0<span class=\"p\">[],</span>\u00a0<span class=\"s\">''</span></td></tr><tr><th id=\"L245\"><a href=\"#L245\">245</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 docs<span class=\"p\">,</span>\u00a0settings<span class=\"p\">,</span>\u00a0synonyms<span class=\"p\">,</span>\u00a0dispatch <span class=\"o\">=</span>\u00a0<span class=\"p\">{},</span>\u00a0<span class=\"p\">{},</span>\u00a0<span class=\"p\">{},</span>\u00a0<span class=\"p\">{}</span></td></tr><tr><th id=\"L246\"><a href=\"#L246\">246</a></th><td></td></tr><tr><th id=\"L247\"><a href=\"#L247\">247</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 flags <span class=\"o\">=</span>\u00a0<span class=\"p\">[]</span></td></tr><tr><th id=\"L248\"><a href=\"#L248\">248</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 reflect<span class=\"o\">.</span>accumulateClassList<span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span>__class__<span class=\"p\">,</span>\u00a0<span class=\"s\">'optFlags'</span><span class=\"p\">,</span>\u00a0flags<span class=\"p\">)</span></td></tr><tr><th id=\"L249\"><a href=\"#L249\">249</a></th><td></td></tr><tr><th id=\"L250\"><a href=\"#L250\">250</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">for</span>\u00a0flag <span class=\"ow\">in</span>\u00a0flags<span class=\"p\">:</span></td></tr><tr><th id=\"L251\"><a href=\"#L251\">251</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"nb\">long</span><span class=\"p\">,</span>\u00a0short<span class=\"p\">,</span>\u00a0doc <span class=\"o\">=</span>\u00a0util<span class=\"o\">.</span>padTo<span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">,</span>\u00a0flag<span class=\"p\">)</span></td></tr><tr><th id=\"L252\"><a href=\"#L252\">252</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0<span class=\"ow\">not</span>\u00a0<span class=\"nb\">long</span><span class=\"p\">:</span></td></tr><tr><th id=\"L253\"><a href=\"#L253\">253</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">raise</span>\u00a0<span class=\"ne\">ValueError</span><span class=\"p\">,</span>\u00a0<span class=\"s\">\"A flag cannot be without a name.\"</span></td></tr><tr><th id=\"L254\"><a href=\"#L254\">254</a></th><td></td></tr><tr><th id=\"L255\"><a href=\"#L255\">255</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 docs<span class=\"p\">[</span><span class=\"nb\">long</span><span class=\"p\">]</span>\u00a0<span class=\"o\">=</span>\u00a0doc</td></tr><tr><th id=\"L256\"><a href=\"#L256\">256</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 settings<span class=\"p\">[</span><span class=\"nb\">long</span><span class=\"p\">]</span>\u00a0<span class=\"o\">=</span>\u00a0<span class=\"mi\">0</span></td></tr><tr><th id=\"L257\"><a href=\"#L257\">257</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0short<span class=\"p\">:</span></td></tr><tr><th id=\"L258\"><a href=\"#L258\">258</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 shortOpt <span class=\"o\">=</span>\u00a0shortOpt <span class=\"o\">+</span>\u00a0short</td></tr><tr><th id=\"L259\"><a href=\"#L259\">259</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 synonyms<span class=\"p\">[</span>short<span class=\"p\">]</span>\u00a0<span class=\"o\">=</span>\u00a0<span class=\"nb\">long</span></td></tr><tr><th id=\"L260\"><a href=\"#L260\">260</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 longOpt<span class=\"o\">.</span>append<span class=\"p\">(</span><span class=\"nb\">long</span><span class=\"p\">)</span></td></tr><tr><th id=\"L261\"><a href=\"#L261\">261</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 synonyms<span class=\"p\">[</span><span class=\"nb\">long</span><span class=\"p\">]</span>\u00a0<span class=\"o\">=</span>\u00a0<span class=\"nb\">long</span></td></tr><tr><th id=\"L262\"><a href=\"#L262\">262</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 dispatch<span class=\"p\">[</span><span class=\"nb\">long</span><span class=\"p\">]</span>\u00a0<span class=\"o\">=</span>\u00a0<span class=\"bp\">self</span><span class=\"o\">.</span>_generic_flag</td></tr><tr><th id=\"L263\"><a href=\"#L263\">263</a></th><td></td></tr><tr><th id=\"L264\"><a href=\"#L264\">264</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">return</span>\u00a0longOpt<span class=\"p\">,</span>\u00a0shortOpt<span class=\"p\">,</span>\u00a0docs<span class=\"p\">,</span>\u00a0settings<span class=\"p\">,</span>\u00a0synonyms<span class=\"p\">,</span>\u00a0dispatch</td></tr><tr><th id=\"L265\"><a href=\"#L265\">265</a></th><td></td></tr><tr><th id=\"L266\"><a href=\"#L266\">266</a></th><td></td></tr><tr><th id=\"L267\"><a href=\"#L267\">267</a></th><td>\u00a0 \u00a0 <span class=\"k\">def</span>\u00a0<span class=\"nf\">_gather_parameters</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span></td></tr><tr><th id=\"L268\"><a href=\"#L268\">268</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"sd\">\"\"\"Gather options which take a value.</span></td></tr><tr><th id=\"L269\"><a href=\"#L269\">269</a></th><td><span class=\"sd\">\u00a0 \u00a0 \u00a0 \u00a0 \"\"\"</span></td></tr><tr><th id=\"L270\"><a href=\"#L270\">270</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 longOpt<span class=\"p\">,</span>\u00a0shortOpt <span class=\"o\">=</span>\u00a0<span class=\"p\">[],</span>\u00a0<span class=\"s\">''</span></td></tr><tr><th id=\"L271\"><a href=\"#L271\">271</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 docs<span class=\"p\">,</span>\u00a0settings<span class=\"p\">,</span>\u00a0synonyms<span class=\"p\">,</span>\u00a0dispatch <span class=\"o\">=</span>\u00a0<span class=\"p\">{},</span>\u00a0<span class=\"p\">{},</span>\u00a0<span class=\"p\">{},</span>\u00a0<span class=\"p\">{}</span></td></tr><tr><th id=\"L272\"><a href=\"#L272\">272</a></th><td></td></tr><tr><th id=\"L273\"><a href=\"#L273\">273</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 parameters <span class=\"o\">=</span>\u00a0<span class=\"p\">[]</span></td></tr><tr><th id=\"L274\"><a href=\"#L274\">274</a></th><td></td></tr><tr><th id=\"L275\"><a href=\"#L275\">275</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 reflect<span class=\"o\">.</span>accumulateClassList<span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span>__class__<span class=\"p\">,</span>\u00a0<span class=\"s\">'optStrings'</span><span class=\"p\">,</span></td></tr><tr><th id=\"L276\"><a href=\"#L276\">276</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 parameters<span class=\"p\">)</span></td></tr><tr><th id=\"L277\"><a href=\"#L277\">277</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0parameters<span class=\"p\">:</span></td></tr><tr><th id=\"L278\"><a href=\"#L278\">278</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"kn\">import</span>\u00a0<span class=\"nn\">warnings</span></td></tr><tr><th id=\"L279\"><a href=\"#L279\">279</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 warnings<span class=\"o\">.</span>warn<span class=\"p\">(</span><span class=\"s\">\"Options.optStrings is deprecated, please use optParameters instead.\"</span><span class=\"p\">,</span>\u00a0stacklevel<span class=\"o\">=</span><span class=\"mi\">2</span><span class=\"p\">)</span></td></tr><tr><th id=\"L280\"><a href=\"#L280\">280</a></th><td></td></tr><tr><th id=\"L281\"><a href=\"#L281\">281</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 reflect<span class=\"o\">.</span>accumulateClassList<span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span>__class__<span class=\"p\">,</span>\u00a0<span class=\"s\">'optParameters'</span><span class=\"p\">,</span></td></tr><tr><th id=\"L282\"><a href=\"#L282\">282</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 parameters<span class=\"p\">)</span></td></tr><tr><th id=\"L283\"><a href=\"#L283\">283</a></th><td></td></tr><tr><th id=\"L284\"><a href=\"#L284\">284</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 synonyms <span class=\"o\">=</span>\u00a0<span class=\"p\">{}</span></td></tr><tr><th id=\"L285\"><a href=\"#L285\">285</a></th><td></td></tr><tr><th id=\"L286\"><a href=\"#L286\">286</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">for</span>\u00a0parameter <span class=\"ow\">in</span>\u00a0parameters<span class=\"p\">:</span></td></tr><tr><th id=\"L287\"><a href=\"#L287\">287</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"nb\">long</span><span class=\"p\">,</span>\u00a0short<span class=\"p\">,</span>\u00a0default<span class=\"p\">,</span>\u00a0doc <span class=\"o\">=</span>\u00a0util<span class=\"o\">.</span>padTo<span class=\"p\">(</span><span class=\"mi\">4</span><span class=\"p\">,</span>\u00a0parameter<span class=\"p\">)</span></td></tr><tr><th id=\"L288\"><a href=\"#L288\">288</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0<span class=\"ow\">not</span>\u00a0<span class=\"nb\">long</span><span class=\"p\">:</span></td></tr><tr><th id=\"L289\"><a href=\"#L289\">289</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">raise</span>\u00a0<span class=\"ne\">ValueError</span><span class=\"p\">,</span>\u00a0<span class=\"s\">\"A parameter cannot be without a name.\"</span></td></tr><tr><th id=\"L290\"><a href=\"#L290\">290</a></th><td></td></tr><tr><th id=\"L291\"><a href=\"#L291\">291</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 docs<span class=\"p\">[</span><span class=\"nb\">long</span><span class=\"p\">]</span>\u00a0<span class=\"o\">=</span>\u00a0doc</td></tr><tr><th id=\"L292\"><a href=\"#L292\">292</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 settings<span class=\"p\">[</span><span class=\"nb\">long</span><span class=\"p\">]</span>\u00a0<span class=\"o\">=</span>\u00a0default</td></tr><tr><th id=\"L293\"><a href=\"#L293\">293</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0short<span class=\"p\">:</span></td></tr><tr><th id=\"L294\"><a href=\"#L294\">294</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 shortOpt <span class=\"o\">=</span>\u00a0shortOpt <span class=\"o\">+</span>\u00a0short <span class=\"o\">+</span>\u00a0<span class=\"s\">':'</span></td></tr><tr><th id=\"L295\"><a href=\"#L295\">295</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 synonyms<span class=\"p\">[</span>short<span class=\"p\">]</span>\u00a0<span class=\"o\">=</span>\u00a0<span class=\"nb\">long</span></td></tr><tr><th id=\"L296\"><a href=\"#L296\">296</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 longOpt<span class=\"o\">.</span>append<span class=\"p\">(</span><span class=\"nb\">long</span>\u00a0<span class=\"o\">+</span>\u00a0<span class=\"s\">'='</span><span class=\"p\">)</span></td></tr><tr><th id=\"L297\"><a href=\"#L297\">297</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 synonyms<span class=\"p\">[</span><span class=\"nb\">long</span><span class=\"p\">]</span>\u00a0<span class=\"o\">=</span>\u00a0<span class=\"nb\">long</span></td></tr><tr><th id=\"L298\"><a href=\"#L298\">298</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 dispatch<span class=\"p\">[</span><span class=\"nb\">long</span><span class=\"p\">]</span>\u00a0<span class=\"o\">=</span>\u00a0<span class=\"bp\">self</span><span class=\"o\">.</span>_generic_parameter</td></tr><tr><th id=\"L299\"><a href=\"#L299\">299</a></th><td></td></tr><tr><th id=\"L300\"><a href=\"#L300\">300</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">return</span>\u00a0longOpt<span class=\"p\">,</span>\u00a0shortOpt<span class=\"p\">,</span>\u00a0docs<span class=\"p\">,</span>\u00a0settings<span class=\"p\">,</span>\u00a0synonyms<span class=\"p\">,</span>\u00a0dispatch</td></tr><tr><th id=\"L301\"><a href=\"#L301\">301</a></th><td></td></tr><tr><th id=\"L302\"><a href=\"#L302\">302</a></th><td></td></tr><tr><th id=\"L303\"><a href=\"#L303\">303</a></th><td>\u00a0 \u00a0 <span class=\"k\">def</span>\u00a0<span class=\"nf\">_gather_handlers</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span></td></tr><tr><th id=\"L304\"><a href=\"#L304\">304</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"sd\">\"\"\"Gather up options with their own handler methods.</span></td></tr><tr><th id=\"L305\"><a href=\"#L305\">305</a></th><td><span class=\"sd\">\u00a0 \u00a0 \u00a0 \u00a0 \"\"\"</span></td></tr><tr><th id=\"L306\"><a href=\"#L306\">306</a></th><td></td></tr><tr><th id=\"L307\"><a href=\"#L307\">307</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 longOpt<span class=\"p\">,</span>\u00a0shortOpt <span class=\"o\">=</span>\u00a0<span class=\"p\">[],</span>\u00a0<span class=\"s\">''</span></td></tr><tr><th id=\"L308\"><a href=\"#L308\">308</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 docs<span class=\"p\">,</span>\u00a0settings<span class=\"p\">,</span>\u00a0synonyms<span class=\"p\">,</span>\u00a0dispatch <span class=\"o\">=</span>\u00a0<span class=\"p\">{},</span>\u00a0<span class=\"p\">{},</span>\u00a0<span class=\"p\">{},</span>\u00a0<span class=\"p\">{}</span></td></tr><tr><th id=\"L309\"><a href=\"#L309\">309</a></th><td></td></tr><tr><th id=\"L310\"><a href=\"#L310\">310</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 dct <span class=\"o\">=</span>\u00a0<span class=\"p\">{}</span></td></tr><tr><th id=\"L311\"><a href=\"#L311\">311</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 reflect<span class=\"o\">.</span>addMethodNamesToDict<span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span>__class__<span class=\"p\">,</span>\u00a0dct<span class=\"p\">,</span>\u00a0<span class=\"s\">\"opt_\"</span><span class=\"p\">)</span></td></tr><tr><th id=\"L312\"><a href=\"#L312\">312</a></th><td></td></tr><tr><th id=\"L313\"><a href=\"#L313\">313</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">for</span>\u00a0name <span class=\"ow\">in</span>\u00a0dct<span class=\"o\">.</span>keys<span class=\"p\">():</span></td></tr><tr><th id=\"L314\"><a href=\"#L314\">314</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 method <span class=\"o\">=</span>\u00a0<span class=\"nb\">getattr</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span>\u00a0<span class=\"s\">'opt_'</span><span class=\"o\">+</span>name<span class=\"p\">)</span></td></tr><tr><th id=\"L315\"><a href=\"#L315\">315</a></th><td></td></tr><tr><th id=\"L316\"><a href=\"#L316\">316</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 takesArg <span class=\"o\">=</span>\u00a0<span class=\"ow\">not</span>\u00a0flagFunction<span class=\"p\">(</span>method<span class=\"p\">,</span>\u00a0name<span class=\"p\">)</span></td></tr><tr><th id=\"L317\"><a href=\"#L317\">317</a></th><td></td></tr><tr><th id=\"L318\"><a href=\"#L318\">318</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 prettyName <span class=\"o\">=</span>\u00a0string<span class=\"o\">.</span>replace<span class=\"p\">(</span>name<span class=\"p\">,</span>\u00a0<span class=\"s\">'_'</span><span class=\"p\">,</span>\u00a0<span class=\"s\">'-'</span><span class=\"p\">)</span></td></tr><tr><th id=\"L319\"><a href=\"#L319\">319</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 doc <span class=\"o\">=</span>\u00a0<span class=\"nb\">getattr</span><span class=\"p\">(</span>method<span class=\"p\">,</span>\u00a0<span class=\"s\">'__doc__'</span><span class=\"p\">,</span>\u00a0<span class=\"bp\">None</span><span class=\"p\">)</span></td></tr><tr><th id=\"L320\"><a href=\"#L320\">320</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0doc<span class=\"p\">:</span></td></tr><tr><th id=\"L321\"><a href=\"#L321\">321</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"c\">## Only use the first line.</span></td></tr><tr><th id=\"L322\"><a href=\"#L322\">322</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"c\">#docs[name] = string.split(doc, '\\n')[0]</span></td></tr><tr><th id=\"L323\"><a href=\"#L323\">323</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 docs<span class=\"p\">[</span>prettyName<span class=\"p\">]</span>\u00a0<span class=\"o\">=</span>\u00a0doc</td></tr><tr><th id=\"L324\"><a href=\"#L324\">324</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">else</span><span class=\"p\">:</span></td></tr><tr><th id=\"L325\"><a href=\"#L325\">325</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 docs<span class=\"p\">[</span>prettyName<span class=\"p\">]</span>\u00a0<span class=\"o\">=</span>\u00a0<span class=\"bp\">self</span><span class=\"o\">.</span>docs<span class=\"o\">.</span>get<span class=\"p\">(</span>prettyName<span class=\"p\">)</span></td></tr><tr><th id=\"L326\"><a href=\"#L326\">326</a></th><td></td></tr><tr><th id=\"L327\"><a href=\"#L327\">327</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 synonyms<span class=\"p\">[</span>prettyName<span class=\"p\">]</span>\u00a0<span class=\"o\">=</span>\u00a0prettyName</td></tr><tr><th id=\"L328\"><a href=\"#L328\">328</a></th><td></td></tr><tr><th id=\"L329\"><a href=\"#L329\">329</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"c\"># A little slight-of-hand here makes dispatching much easier</span></td></tr><tr><th id=\"L330\"><a href=\"#L330\">330</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"c\"># in parseOptions, as it makes all option-methods have the</span></td></tr><tr><th id=\"L331\"><a href=\"#L331\">331</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"c\"># same signature.</span></td></tr><tr><th id=\"L332\"><a href=\"#L332\">332</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0takesArg<span class=\"p\">:</span></td></tr><tr><th id=\"L333\"><a href=\"#L333\">333</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 fn <span class=\"o\">=</span>\u00a0<span class=\"k\">lambda</span>\u00a0name<span class=\"p\">,</span>\u00a0value<span class=\"p\">,</span>\u00a0m<span class=\"o\">=</span>method<span class=\"p\">:</span>\u00a0m<span class=\"p\">(</span>value<span class=\"p\">)</span></td></tr><tr><th id=\"L334\"><a href=\"#L334\">334</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">else</span><span class=\"p\">:</span></td></tr><tr><th id=\"L335\"><a href=\"#L335\">335</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"c\"># XXX: This won't raise a TypeError if it's called</span></td></tr><tr><th id=\"L336\"><a href=\"#L336\">336</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"c\"># with a value when it shouldn't be.</span></td></tr><tr><th id=\"L337\"><a href=\"#L337\">337</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 fn <span class=\"o\">=</span>\u00a0<span class=\"k\">lambda</span>\u00a0name<span class=\"p\">,</span>\u00a0value<span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">,</span>\u00a0m<span class=\"o\">=</span>method<span class=\"p\">:</span>\u00a0m<span class=\"p\">()</span></td></tr><tr><th id=\"L338\"><a href=\"#L338\">338</a></th><td></td></tr><tr><th id=\"L339\"><a href=\"#L339\">339</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 dispatch<span class=\"p\">[</span>prettyName<span class=\"p\">]</span>\u00a0<span class=\"o\">=</span>\u00a0fn</td></tr><tr><th id=\"L340\"><a href=\"#L340\">340</a></th><td></td></tr><tr><th id=\"L341\"><a href=\"#L341\">341</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0<span class=\"nb\">len</span><span class=\"p\">(</span>name<span class=\"p\">)</span>\u00a0<span class=\"o\">==</span>\u00a0<span class=\"mi\">1</span><span class=\"p\">:</span></td></tr><tr><th id=\"L342\"><a href=\"#L342\">342</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 shortOpt <span class=\"o\">=</span>\u00a0shortOpt <span class=\"o\">+</span>\u00a0name</td></tr><tr><th id=\"L343\"><a href=\"#L343\">343</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0takesArg<span class=\"p\">:</span></td></tr><tr><th id=\"L344\"><a href=\"#L344\">344</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 shortOpt <span class=\"o\">=</span>\u00a0shortOpt <span class=\"o\">+</span>\u00a0<span class=\"s\">':'</span></td></tr><tr><th id=\"L345\"><a href=\"#L345\">345</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">else</span><span class=\"p\">:</span></td></tr><tr><th id=\"L346\"><a href=\"#L346\">346</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0takesArg<span class=\"p\">:</span></td></tr><tr><th id=\"L347\"><a href=\"#L347\">347</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 prettyName <span class=\"o\">=</span>\u00a0prettyName <span class=\"o\">+</span>\u00a0<span class=\"s\">'='</span></td></tr><tr><th id=\"L348\"><a href=\"#L348\">348</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 longOpt<span class=\"o\">.</span>append<span class=\"p\">(</span>prettyName<span class=\"p\">)</span></td></tr><tr><th id=\"L349\"><a href=\"#L349\">349</a></th><td></td></tr><tr><th id=\"L350\"><a href=\"#L350\">350</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 reverse_dct <span class=\"o\">=</span>\u00a0<span class=\"p\">{}</span></td></tr><tr><th id=\"L351\"><a href=\"#L351\">351</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"c\"># Map synonyms</span></td></tr><tr><th id=\"L352\"><a href=\"#L352\">352</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">for</span>\u00a0name <span class=\"ow\">in</span>\u00a0dct<span class=\"o\">.</span>keys<span class=\"p\">():</span></td></tr><tr><th id=\"L353\"><a href=\"#L353\">353</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 method <span class=\"o\">=</span>\u00a0<span class=\"nb\">getattr</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span>\u00a0<span class=\"s\">'opt_'</span><span class=\"o\">+</span>name<span class=\"p\">)</span></td></tr><tr><th id=\"L354\"><a href=\"#L354\">354</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0<span class=\"ow\">not</span>\u00a0reverse_dct<span class=\"o\">.</span>has_key<span class=\"p\">(</span>method<span class=\"p\">):</span></td></tr><tr><th id=\"L355\"><a href=\"#L355\">355</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 reverse_dct<span class=\"p\">[</span>method<span class=\"p\">]</span>\u00a0<span class=\"o\">=</span>\u00a0<span class=\"p\">[]</span></td></tr><tr><th id=\"L356\"><a href=\"#L356\">356</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 reverse_dct<span class=\"p\">[</span>method<span class=\"p\">]</span><span class=\"o\">.</span>append<span class=\"p\">(</span>name<span class=\"p\">)</span></td></tr><tr><th id=\"L357\"><a href=\"#L357\">357</a></th><td></td></tr><tr><th id=\"L358\"><a href=\"#L358\">358</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 cmpLength <span class=\"o\">=</span>\u00a0<span class=\"k\">lambda</span>\u00a0a<span class=\"p\">,</span>\u00a0b<span class=\"p\">:</span>\u00a0<span class=\"nb\">cmp</span><span class=\"p\">(</span><span class=\"nb\">len</span><span class=\"p\">(</span>a<span class=\"p\">),</span>\u00a0<span class=\"nb\">len</span><span class=\"p\">(</span>b<span class=\"p\">))</span></td></tr><tr><th id=\"L359\"><a href=\"#L359\">359</a></th><td></td></tr><tr><th id=\"L360\"><a href=\"#L360\">360</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">for</span>\u00a0method<span class=\"p\">,</span>\u00a0names <span class=\"ow\">in</span>\u00a0reverse_dct<span class=\"o\">.</span>items<span class=\"p\">():</span></td></tr><tr><th id=\"L361\"><a href=\"#L361\">361</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0<span class=\"nb\">len</span><span class=\"p\">(</span>names<span class=\"p\">)</span>\u00a0<span class=\"o\">&lt;</span>\u00a0<span class=\"mi\">2</span><span class=\"p\">:</span></td></tr><tr><th id=\"L362\"><a href=\"#L362\">362</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">continue</span></td></tr><tr><th id=\"L363\"><a href=\"#L363\">363</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 names_ <span class=\"o\">=</span>\u00a0names<span class=\"p\">[:]</span></td></tr><tr><th id=\"L364\"><a href=\"#L364\">364</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 names_<span class=\"o\">.</span>sort<span class=\"p\">(</span>cmpLength<span class=\"p\">)</span></td></tr><tr><th id=\"L365\"><a href=\"#L365\">365</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 longest <span class=\"o\">=</span>\u00a0names_<span class=\"o\">.</span>pop<span class=\"p\">()</span></td></tr><tr><th id=\"L366\"><a href=\"#L366\">366</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">for</span>\u00a0name <span class=\"ow\">in</span>\u00a0names_<span class=\"p\">:</span></td></tr><tr><th id=\"L367\"><a href=\"#L367\">367</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 synonyms<span class=\"p\">[</span>name<span class=\"p\">]</span>\u00a0<span class=\"o\">=</span>\u00a0longest</td></tr><tr><th id=\"L368\"><a href=\"#L368\">368</a></th><td></td></tr><tr><th id=\"L369\"><a href=\"#L369\">369</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">return</span>\u00a0longOpt<span class=\"p\">,</span>\u00a0shortOpt<span class=\"p\">,</span>\u00a0docs<span class=\"p\">,</span>\u00a0settings<span class=\"p\">,</span>\u00a0synonyms<span class=\"p\">,</span>\u00a0dispatch</td></tr><tr><th id=\"L370\"><a href=\"#L370\">370</a></th><td></td></tr><tr><th id=\"L371\"><a href=\"#L371\">371</a></th><td></td></tr><tr><th id=\"L372\"><a href=\"#L372\">372</a></th><td>\u00a0 \u00a0 <span class=\"k\">def</span>\u00a0<span class=\"nf\">__str__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span></td></tr><tr><th id=\"L373\"><a href=\"#L373\">373</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">return</span>\u00a0<span class=\"bp\">self</span><span class=\"o\">.</span>getSynopsis<span class=\"p\">()</span>\u00a0<span class=\"o\">+</span>\u00a0<span class=\"s\">'</span><span class=\"se\">\\n</span><span class=\"s\">'</span>\u00a0<span class=\"o\">+</span>\u00a0<span class=\"bp\">self</span><span class=\"o\">.</span>getUsage<span class=\"p\">(</span>width<span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">)</span></td></tr><tr><th id=\"L374\"><a href=\"#L374\">374</a></th><td></td></tr><tr><th id=\"L375\"><a href=\"#L375\">375</a></th><td>\u00a0 \u00a0 <span class=\"k\">def</span>\u00a0<span class=\"nf\">getSynopsis</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span></td></tr><tr><th id=\"L376\"><a href=\"#L376\">376</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"sd\">\"\"\" Returns a string containing a description of these options and how to</span></td></tr><tr><th id=\"L377\"><a href=\"#L377\">377</a></th><td><span class=\"sd\">\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 pass them to the executed file.</span></td></tr><tr><th id=\"L378\"><a href=\"#L378\">378</a></th><td><span class=\"sd\">\u00a0 \u00a0 \u00a0 \u00a0 \"\"\"</span></td></tr><tr><th id=\"L379\"><a href=\"#L379\">379</a></th><td></td></tr><tr><th id=\"L380\"><a href=\"#L380\">380</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 default <span class=\"o\">=</span>\u00a0<span class=\"s\">\"</span><span class=\"si\">%s%s</span><span class=\"s\">\"</span>\u00a0<span class=\"o\">%</span>\u00a0<span class=\"p\">(</span>path<span class=\"o\">.</span>basename<span class=\"p\">(</span>sys<span class=\"o\">.</span>argv<span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]),</span></td></tr><tr><th id=\"L381\"><a href=\"#L381\">381</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span>longOpt <span class=\"ow\">and</span>\u00a0<span class=\"s\">\" [options]\"</span><span class=\"p\">)</span>\u00a0<span class=\"ow\">or</span>\u00a0<span class=\"s\">''</span><span class=\"p\">)</span></td></tr><tr><th id=\"L382\"><a href=\"#L382\">382</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0<span class=\"bp\">self</span><span class=\"o\">.</span>parent <span class=\"ow\">is</span>\u00a0<span class=\"bp\">None</span><span class=\"p\">:</span></td></tr><tr><th id=\"L383\"><a href=\"#L383\">383</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 default <span class=\"o\">=</span>\u00a0<span class=\"s\">\"Usage: </span><span class=\"si\">%s%s</span><span class=\"s\">\"</span>\u00a0<span class=\"o\">%</span>\u00a0<span class=\"p\">(</span>path<span class=\"o\">.</span>basename<span class=\"p\">(</span>sys<span class=\"o\">.</span>argv<span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]),</span></td></tr><tr><th id=\"L384\"><a href=\"#L384\">384</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0<span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span>longOpt <span class=\"ow\">and</span>\u00a0<span class=\"s\">\" [options]\"</span><span class=\"p\">)</span>\u00a0<span class=\"ow\">or</span>\u00a0<span class=\"s\">''</span><span class=\"p\">)</span></td></tr><tr><th id=\"L385\"><a href=\"#L385\">385</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">else</span><span class=\"p\">:</span></td></tr><tr><th id=\"L386\"><a href=\"#L386\">386</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 default <span class=\"o\">=</span>\u00a0<span class=\"s\">'</span><span class=\"si\">%s</span><span class=\"s\">'</span>\u00a0<span class=\"o\">%</span>\u00a0<span class=\"p\">((</span><span class=\"bp\">self</span><span class=\"o\">.</span>longOpt <span class=\"ow\">and</span>\u00a0<span class=\"s\">\"[options]\"</span><span class=\"p\">)</span>\u00a0<span class=\"ow\">or</span>\u00a0<span class=\"s\">''</span><span class=\"p\">)</span></td></tr><tr><th id=\"L387\"><a href=\"#L387\">387</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 synopsis <span class=\"o\">=</span>\u00a0<span class=\"nb\">getattr</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span>\u00a0<span class=\"s\">\"synopsis\"</span><span class=\"p\">,</span>\u00a0default<span class=\"p\">)</span></td></tr><tr><th id=\"L388\"><a href=\"#L388\">388</a></th><td></td></tr><tr><th id=\"L389\"><a href=\"#L389\">389</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 synopsis <span class=\"o\">=</span>\u00a0synopsis<span class=\"o\">.</span>rstrip<span class=\"p\">()</span></td></tr><tr><th id=\"L390\"><a href=\"#L390\">390</a></th><td></td></tr><tr><th id=\"L391\"><a href=\"#L391\">391</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0<span class=\"bp\">self</span><span class=\"o\">.</span>parent <span class=\"ow\">is</span>\u00a0<span class=\"ow\">not</span>\u00a0<span class=\"bp\">None</span><span class=\"p\">:</span></td></tr><tr><th id=\"L392\"><a href=\"#L392\">392</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 synopsis <span class=\"o\">=</span>\u00a0<span class=\"s\">' '</span><span class=\"o\">.</span>join<span class=\"p\">((</span><span class=\"bp\">self</span><span class=\"o\">.</span>parent<span class=\"o\">.</span>getSynopsis<span class=\"p\">(),</span>\u00a0<span class=\"bp\">self</span><span class=\"o\">.</span>parent<span class=\"o\">.</span>subCommand<span class=\"p\">,</span>\u00a0synopsis<span class=\"p\">))</span></td></tr><tr><th id=\"L393\"><a href=\"#L393\">393</a></th><td></td></tr><tr><th id=\"L394\"><a href=\"#L394\">394</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">return</span>\u00a0synopsis</td></tr><tr><th id=\"L395\"><a href=\"#L395\">395</a></th><td></td></tr><tr><th id=\"L396\"><a href=\"#L396\">396</a></th><td>\u00a0 \u00a0 <span class=\"k\">def</span>\u00a0<span class=\"nf\">getUsage</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span>\u00a0width<span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">):</span></td></tr><tr><th id=\"L397\"><a href=\"#L397\">397</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"c\">#If subOptions exists by now, then there was probably an error while</span></td></tr><tr><th id=\"L398\"><a href=\"#L398\">398</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"c\">#parsing its options.</span></td></tr><tr><th id=\"L399\"><a href=\"#L399\">399</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0<span class=\"nb\">hasattr</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span>\u00a0<span class=\"s\">'subOptions'</span><span class=\"p\">):</span></td></tr><tr><th id=\"L400\"><a href=\"#L400\">400</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">return</span>\u00a0<span class=\"bp\">self</span><span class=\"o\">.</span>subOptions<span class=\"o\">.</span>getUsage<span class=\"p\">(</span>width<span class=\"o\">=</span>width<span class=\"p\">)</span></td></tr><tr><th id=\"L401\"><a href=\"#L401\">401</a></th><td></td></tr><tr><th id=\"L402\"><a href=\"#L402\">402</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0<span class=\"ow\">not</span>\u00a0width<span class=\"p\">:</span></td></tr><tr><th id=\"L403\"><a href=\"#L403\">403</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 width <span class=\"o\">=</span>\u00a0<span class=\"nb\">int</span><span class=\"p\">(</span>os<span class=\"o\">.</span>environ<span class=\"o\">.</span>get<span class=\"p\">(</span><span class=\"s\">'COLUMNS'</span><span class=\"p\">,</span>\u00a0<span class=\"s\">'80'</span><span class=\"p\">))</span></td></tr><tr><th id=\"L404\"><a href=\"#L404\">404</a></th><td></td></tr><tr><th id=\"L405\"><a href=\"#L405\">405</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0<span class=\"nb\">hasattr</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span>\u00a0<span class=\"s\">'subCommands'</span><span class=\"p\">):</span></td></tr><tr><th id=\"L406\"><a href=\"#L406\">406</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 cmdDicts <span class=\"o\">=</span>\u00a0<span class=\"p\">[]</span></td></tr><tr><th id=\"L407\"><a href=\"#L407\">407</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">for</span>\u00a0<span class=\"p\">(</span>cmd<span class=\"p\">,</span>\u00a0short<span class=\"p\">,</span>\u00a0parser<span class=\"p\">,</span>\u00a0desc<span class=\"p\">)</span>\u00a0<span class=\"ow\">in</span>\u00a0<span class=\"bp\">self</span><span class=\"o\">.</span>subCommands<span class=\"p\">:</span></td></tr><tr><th id=\"L408\"><a href=\"#L408\">408</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 cmdDicts<span class=\"o\">.</span>append<span class=\"p\">(</span></td></tr><tr><th id=\"L409\"><a href=\"#L409\">409</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"p\">{</span><span class=\"s\">'long'</span><span class=\"p\">:</span>\u00a0cmd<span class=\"p\">,</span></td></tr><tr><th id=\"L410\"><a href=\"#L410\">410</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0<span class=\"s\">'short'</span><span class=\"p\">:</span>\u00a0short<span class=\"p\">,</span></td></tr><tr><th id=\"L411\"><a href=\"#L411\">411</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0<span class=\"s\">'doc'</span><span class=\"p\">:</span>\u00a0desc<span class=\"p\">,</span></td></tr><tr><th id=\"L412\"><a href=\"#L412\">412</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0<span class=\"s\">'optType'</span><span class=\"p\">:</span>\u00a0<span class=\"s\">'command'</span><span class=\"p\">,</span></td></tr><tr><th id=\"L413\"><a href=\"#L413\">413</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0<span class=\"s\">'default'</span><span class=\"p\">:</span>\u00a0<span class=\"bp\">None</span></td></tr><tr><th id=\"L414\"><a href=\"#L414\">414</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"p\">})</span></td></tr><tr><th id=\"L415\"><a href=\"#L415\">415</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 chunks <span class=\"o\">=</span>\u00a0docMakeChunks<span class=\"p\">(</span>cmdDicts<span class=\"p\">,</span>\u00a0width<span class=\"p\">)</span></td></tr><tr><th id=\"L416\"><a href=\"#L416\">416</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 commands <span class=\"o\">=</span>\u00a0<span class=\"s\">'Commands:</span><span class=\"se\">\\n</span><span class=\"s\">'</span>\u00a0<span class=\"o\">+</span>\u00a0<span class=\"s\">''</span><span class=\"o\">.</span>join<span class=\"p\">(</span>chunks<span class=\"p\">)</span></td></tr><tr><th id=\"L417\"><a href=\"#L417\">417</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">else</span><span class=\"p\">:</span></td></tr><tr><th id=\"L418\"><a href=\"#L418\">418</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 commands <span class=\"o\">=</span>\u00a0<span class=\"s\">''</span></td></tr><tr><th id=\"L419\"><a href=\"#L419\">419</a></th><td></td></tr><tr><th id=\"L420\"><a href=\"#L420\">420</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 longToShort <span class=\"o\">=</span>\u00a0<span class=\"p\">{}</span></td></tr><tr><th id=\"L421\"><a href=\"#L421\">421</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">for</span>\u00a0key<span class=\"p\">,</span>\u00a0value <span class=\"ow\">in</span>\u00a0<span class=\"bp\">self</span><span class=\"o\">.</span>synonyms<span class=\"o\">.</span>items<span class=\"p\">():</span></td></tr><tr><th id=\"L422\"><a href=\"#L422\">422</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 longname <span class=\"o\">=</span>\u00a0value</td></tr><tr><th id=\"L423\"><a href=\"#L423\">423</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0<span class=\"p\">(</span>key <span class=\"o\">!=</span>\u00a0longname<span class=\"p\">)</span>\u00a0<span class=\"ow\">and</span>\u00a0<span class=\"p\">(</span><span class=\"nb\">len</span><span class=\"p\">(</span>key<span class=\"p\">)</span>\u00a0<span class=\"o\">==</span>\u00a0<span class=\"mi\">1</span><span class=\"p\">):</span></td></tr><tr><th id=\"L424\"><a href=\"#L424\">424</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 longToShort<span class=\"p\">[</span>longname<span class=\"p\">]</span>\u00a0<span class=\"o\">=</span>\u00a0key</td></tr><tr><th id=\"L425\"><a href=\"#L425\">425</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">else</span><span class=\"p\">:</span></td></tr><tr><th id=\"L426\"><a href=\"#L426\">426</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0<span class=\"ow\">not</span>\u00a0longToShort<span class=\"o\">.</span>has_key<span class=\"p\">(</span>longname<span class=\"p\">):</span></td></tr><tr><th id=\"L427\"><a href=\"#L427\">427</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 longToShort<span class=\"p\">[</span>longname<span class=\"p\">]</span>\u00a0<span class=\"o\">=</span>\u00a0<span class=\"bp\">None</span></td></tr><tr><th id=\"L428\"><a href=\"#L428\">428</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">else</span><span class=\"p\">:</span></td></tr><tr><th id=\"L429\"><a href=\"#L429\">429</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">pass</span></td></tr><tr><th id=\"L430\"><a href=\"#L430\">430</a></th><td></td></tr><tr><th id=\"L431\"><a href=\"#L431\">431</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 optDicts <span class=\"o\">=</span>\u00a0<span class=\"p\">[]</span></td></tr><tr><th id=\"L432\"><a href=\"#L432\">432</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">for</span>\u00a0opt <span class=\"ow\">in</span>\u00a0<span class=\"bp\">self</span><span class=\"o\">.</span>longOpt<span class=\"p\">:</span></td></tr><tr><th id=\"L433\"><a href=\"#L433\">433</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0opt<span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span>\u00a0<span class=\"o\">==</span>\u00a0<span class=\"s\">'='</span><span class=\"p\">:</span></td></tr><tr><th id=\"L434\"><a href=\"#L434\">434</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 optType <span class=\"o\">=</span>\u00a0<span class=\"s\">'parameter'</span></td></tr><tr><th id=\"L435\"><a href=\"#L435\">435</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 opt <span class=\"o\">=</span>\u00a0opt<span class=\"p\">[:</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span></td></tr><tr><th id=\"L436\"><a href=\"#L436\">436</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">else</span><span class=\"p\">:</span></td></tr><tr><th id=\"L437\"><a href=\"#L437\">437</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 optType <span class=\"o\">=</span>\u00a0<span class=\"s\">'flag'</span></td></tr><tr><th id=\"L438\"><a href=\"#L438\">438</a></th><td></td></tr><tr><th id=\"L439\"><a href=\"#L439\">439</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 optDicts<span class=\"o\">.</span>append<span class=\"p\">(</span></td></tr><tr><th id=\"L440\"><a href=\"#L440\">440</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"p\">{</span><span class=\"s\">'long'</span><span class=\"p\">:</span>\u00a0opt<span class=\"p\">,</span></td></tr><tr><th id=\"L441\"><a href=\"#L441\">441</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0<span class=\"s\">'short'</span><span class=\"p\">:</span>\u00a0longToShort<span class=\"p\">[</span>opt<span class=\"p\">],</span></td></tr><tr><th id=\"L442\"><a href=\"#L442\">442</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0<span class=\"s\">'doc'</span><span class=\"p\">:</span>\u00a0<span class=\"bp\">self</span><span class=\"o\">.</span>docs<span class=\"p\">[</span>opt<span class=\"p\">],</span></td></tr><tr><th id=\"L443\"><a href=\"#L443\">443</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0<span class=\"s\">'optType'</span><span class=\"p\">:</span>\u00a0optType<span class=\"p\">,</span></td></tr><tr><th id=\"L444\"><a href=\"#L444\">444</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0<span class=\"s\">'default'</span><span class=\"p\">:</span>\u00a0<span class=\"bp\">self</span><span class=\"o\">.</span>defaults<span class=\"o\">.</span>get<span class=\"p\">(</span>opt<span class=\"p\">,</span>\u00a0<span class=\"bp\">None</span><span class=\"p\">)</span></td></tr><tr><th id=\"L445\"><a href=\"#L445\">445</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0<span class=\"p\">})</span></td></tr><tr><th id=\"L446\"><a href=\"#L446\">446</a></th><td></td></tr><tr><th id=\"L447\"><a href=\"#L447\">447</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0<span class=\"ow\">not</span>\u00a0<span class=\"p\">(</span><span class=\"nb\">getattr</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span>\u00a0<span class=\"s\">\"longdesc\"</span><span class=\"p\">,</span>\u00a0<span class=\"bp\">None</span><span class=\"p\">)</span>\u00a0<span class=\"ow\">is</span>\u00a0<span class=\"bp\">None</span><span class=\"p\">):</span></td></tr><tr><th id=\"L448\"><a href=\"#L448\">448</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 longdesc <span class=\"o\">=</span>\u00a0<span class=\"bp\">self</span><span class=\"o\">.</span>longdesc</td></tr><tr><th id=\"L449\"><a href=\"#L449\">449</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">else</span><span class=\"p\">:</span></td></tr><tr><th id=\"L450\"><a href=\"#L450\">450</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"kn\">import</span>\u00a0<span class=\"nn\">__main__</span></td></tr><tr><th id=\"L451\"><a href=\"#L451\">451</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0<span class=\"nb\">getattr</span><span class=\"p\">(</span>__main__<span class=\"p\">,</span>\u00a0<span class=\"s\">'__doc__'</span><span class=\"p\">,</span>\u00a0<span class=\"bp\">None</span><span class=\"p\">):</span></td></tr><tr><th id=\"L452\"><a href=\"#L452\">452</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 longdesc <span class=\"o\">=</span>\u00a0__main__<span class=\"o\">.</span>__doc__</td></tr><tr><th id=\"L453\"><a href=\"#L453\">453</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">else</span><span class=\"p\">:</span></td></tr><tr><th id=\"L454\"><a href=\"#L454\">454</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 longdesc <span class=\"o\">=</span>\u00a0<span class=\"s\">''</span></td></tr><tr><th id=\"L455\"><a href=\"#L455\">455</a></th><td></td></tr><tr><th id=\"L456\"><a href=\"#L456\">456</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0longdesc<span class=\"p\">:</span></td></tr><tr><th id=\"L457\"><a href=\"#L457\">457</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 longdesc <span class=\"o\">=</span>\u00a0<span class=\"p\">(</span><span class=\"s\">'</span><span class=\"se\">\\n</span><span class=\"s\">'</span>\u00a0<span class=\"o\">+</span></td></tr><tr><th id=\"L458\"><a href=\"#L458\">458</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 string<span class=\"o\">.</span>join<span class=\"p\">(</span>text<span class=\"o\">.</span>wordWrap<span class=\"p\">(</span>longdesc<span class=\"p\">,</span>\u00a0width<span class=\"p\">),</span>\u00a0<span class=\"s\">'</span><span class=\"se\">\\n</span><span class=\"s\">'</span><span class=\"p\">)</span><span class=\"o\">.</span>strip<span class=\"p\">()</span></td></tr><tr><th id=\"L459\"><a href=\"#L459\">459</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"o\">+</span>\u00a0<span class=\"s\">'</span><span class=\"se\">\\n</span><span class=\"s\">'</span><span class=\"p\">)</span></td></tr><tr><th id=\"L460\"><a href=\"#L460\">460</a></th><td></td></tr><tr><th id=\"L461\"><a href=\"#L461\">461</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0optDicts<span class=\"p\">:</span></td></tr><tr><th id=\"L462\"><a href=\"#L462\">462</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 chunks <span class=\"o\">=</span>\u00a0docMakeChunks<span class=\"p\">(</span>optDicts<span class=\"p\">,</span>\u00a0width<span class=\"p\">)</span></td></tr><tr><th id=\"L463\"><a href=\"#L463\">463</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 s <span class=\"o\">=</span>\u00a0<span class=\"s\">\"Options:</span><span class=\"se\">\\n</span><span class=\"si\">%s</span><span class=\"s\">\"</span>\u00a0<span class=\"o\">%</span>\u00a0<span class=\"p\">(</span>string<span class=\"o\">.</span>join<span class=\"p\">(</span>chunks<span class=\"p\">,</span>\u00a0<span class=\"s\">''</span><span class=\"p\">))</span></td></tr><tr><th id=\"L464\"><a href=\"#L464\">464</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">else</span><span class=\"p\">:</span></td></tr><tr><th id=\"L465\"><a href=\"#L465\">465</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 s <span class=\"o\">=</span>\u00a0<span class=\"s\">\"Options: None</span><span class=\"se\">\\n</span><span class=\"s\">\"</span></td></tr><tr><th id=\"L466\"><a href=\"#L466\">466</a></th><td></td></tr><tr><th id=\"L467\"><a href=\"#L467\">467</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">return</span>\u00a0s <span class=\"o\">+</span>\u00a0longdesc <span class=\"o\">+</span>\u00a0commands</td></tr><tr><th id=\"L468\"><a href=\"#L468\">468</a></th><td></td></tr><tr><th id=\"L469\"><a href=\"#L469\">469</a></th><td>\u00a0 \u00a0 <span class=\"c\">#def __repr__(self):</span></td></tr><tr><th id=\"L470\"><a href=\"#L470\">470</a></th><td>\u00a0 \u00a0 <span class=\"c\">#\u00a0 \u00a0 XXX: It'd be cool if we could return a succinct representation</span></td></tr><tr><th id=\"L471\"><a href=\"#L471\">471</a></th><td>\u00a0 \u00a0 <span class=\"c\">#\u00a0 \u00a0 \u00a0 \u00a0 of which flags and options are set here.</span></td></tr><tr><th id=\"L472\"><a href=\"#L472\">472</a></th><td></td></tr><tr><th id=\"L473\"><a href=\"#L473\">473</a></th><td></td></tr><tr><th id=\"L474\"><a href=\"#L474\">474</a></th><td><span class=\"k\">def</span>\u00a0<span class=\"nf\">docMakeChunks</span><span class=\"p\">(</span>optList<span class=\"p\">,</span>\u00a0width<span class=\"o\">=</span><span class=\"mi\">80</span><span class=\"p\">):</span></td></tr><tr><th id=\"L475\"><a href=\"#L475\">475</a></th><td>\u00a0 \u00a0 <span class=\"sd\">\"\"\"Makes doc chunks for option declarations.</span></td></tr><tr><th id=\"L476\"><a href=\"#L476\">476</a></th><td><span class=\"sd\"></span></td></tr><tr><th id=\"L477\"><a href=\"#L477\">477</a></th><td><span class=\"sd\">\u00a0 \u00a0 Takes a list of dictionaries, each of which may have one or more</span></td></tr><tr><th id=\"L478\"><a href=\"#L478\">478</a></th><td><span class=\"sd\">\u00a0 \u00a0 of the keys 'long', 'short', 'doc', 'default', 'optType'.</span></td></tr><tr><th id=\"L479\"><a href=\"#L479\">479</a></th><td><span class=\"sd\"></span></td></tr><tr><th id=\"L480\"><a href=\"#L480\">480</a></th><td><span class=\"sd\">\u00a0 \u00a0 Returns a list of strings.</span></td></tr><tr><th id=\"L481\"><a href=\"#L481\">481</a></th><td><span class=\"sd\">\u00a0 \u00a0 The strings may be multiple lines,</span></td></tr><tr><th id=\"L482\"><a href=\"#L482\">482</a></th><td><span class=\"sd\">\u00a0 \u00a0 all of them end with a newline.</span></td></tr><tr><th id=\"L483\"><a href=\"#L483\">483</a></th><td><span class=\"sd\">\u00a0 \u00a0 \"\"\"</span></td></tr><tr><th id=\"L484\"><a href=\"#L484\">484</a></th><td></td></tr><tr><th id=\"L485\"><a href=\"#L485\">485</a></th><td>\u00a0 \u00a0 <span class=\"c\"># XXX: sanity check to make sure we have a sane combination of keys.</span></td></tr><tr><th id=\"L486\"><a href=\"#L486\">486</a></th><td></td></tr><tr><th id=\"L487\"><a href=\"#L487\">487</a></th><td>\u00a0 \u00a0 maxOptLen <span class=\"o\">=</span>\u00a0<span class=\"mi\">0</span></td></tr><tr><th id=\"L488\"><a href=\"#L488\">488</a></th><td>\u00a0 \u00a0 <span class=\"k\">for</span>\u00a0opt <span class=\"ow\">in</span>\u00a0optList<span class=\"p\">:</span></td></tr><tr><th id=\"L489\"><a href=\"#L489\">489</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 optLen <span class=\"o\">=</span>\u00a0<span class=\"nb\">len</span><span class=\"p\">(</span>opt<span class=\"o\">.</span>get<span class=\"p\">(</span><span class=\"s\">'long'</span><span class=\"p\">,</span>\u00a0<span class=\"s\">''</span><span class=\"p\">))</span></td></tr><tr><th id=\"L490\"><a href=\"#L490\">490</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0optLen<span class=\"p\">:</span></td></tr><tr><th id=\"L491\"><a href=\"#L491\">491</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0opt<span class=\"o\">.</span>get<span class=\"p\">(</span><span class=\"s\">'optType'</span><span class=\"p\">,</span>\u00a0<span class=\"bp\">None</span><span class=\"p\">)</span>\u00a0<span class=\"o\">==</span>\u00a0<span class=\"s\">\"parameter\"</span><span class=\"p\">:</span></td></tr><tr><th id=\"L492\"><a href=\"#L492\">492</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"c\"># these take up an extra character</span></td></tr><tr><th id=\"L493\"><a href=\"#L493\">493</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 optLen <span class=\"o\">=</span>\u00a0optLen <span class=\"o\">+</span>\u00a0<span class=\"mi\">1</span></td></tr><tr><th id=\"L494\"><a href=\"#L494\">494</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 maxOptLen <span class=\"o\">=</span>\u00a0<span class=\"nb\">max</span><span class=\"p\">(</span>optLen<span class=\"p\">,</span>\u00a0maxOptLen<span class=\"p\">)</span></td></tr><tr><th id=\"L495\"><a href=\"#L495\">495</a></th><td></td></tr><tr><th id=\"L496\"><a href=\"#L496\">496</a></th><td>\u00a0 \u00a0 colWidth1 <span class=\"o\">=</span>\u00a0maxOptLen <span class=\"o\">+</span>\u00a0<span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"s\">\"\u00a0 -s, --\u00a0 \"</span><span class=\"p\">)</span></td></tr><tr><th id=\"L497\"><a href=\"#L497\">497</a></th><td>\u00a0 \u00a0 colWidth2 <span class=\"o\">=</span>\u00a0width <span class=\"o\">-</span>\u00a0colWidth1</td></tr><tr><th id=\"L498\"><a href=\"#L498\">498</a></th><td>\u00a0 \u00a0 <span class=\"c\"># XXX - impose some sane minimum limit.</span></td></tr><tr><th id=\"L499\"><a href=\"#L499\">499</a></th><td>\u00a0 \u00a0 <span class=\"c\"># Then if we don't have enough room for the option and the doc</span></td></tr><tr><th id=\"L500\"><a href=\"#L500\">500</a></th><td>\u00a0 \u00a0 <span class=\"c\"># to share one line, they can take turns on alternating lines.</span></td></tr><tr><th id=\"L501\"><a href=\"#L501\">501</a></th><td></td></tr><tr><th id=\"L502\"><a href=\"#L502\">502</a></th><td>\u00a0 \u00a0 colFiller1 <span class=\"o\">=</span>\u00a0<span class=\"s\">\" \"</span>\u00a0<span class=\"o\">*</span>\u00a0colWidth1</td></tr><tr><th id=\"L503\"><a href=\"#L503\">503</a></th><td></td></tr><tr><th id=\"L504\"><a href=\"#L504\">504</a></th><td>\u00a0 \u00a0 optChunks <span class=\"o\">=</span>\u00a0<span class=\"p\">[]</span></td></tr><tr><th id=\"L505\"><a href=\"#L505\">505</a></th><td>\u00a0 \u00a0 seen <span class=\"o\">=</span>\u00a0<span class=\"p\">{}</span></td></tr><tr><th id=\"L506\"><a href=\"#L506\">506</a></th><td>\u00a0 \u00a0 <span class=\"k\">for</span>\u00a0opt <span class=\"ow\">in</span>\u00a0optList<span class=\"p\">:</span></td></tr><tr><th id=\"L507\"><a href=\"#L507\">507</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0seen<span class=\"o\">.</span>has_key<span class=\"p\">(</span>opt<span class=\"o\">.</span>get<span class=\"p\">(</span><span class=\"s\">'short'</span><span class=\"p\">,</span>\u00a0<span class=\"bp\">None</span><span class=\"p\">))</span>\u00a0\\</td></tr><tr><th id=\"L508\"><a href=\"#L508\">508</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0<span class=\"ow\">or</span>\u00a0seen<span class=\"o\">.</span>has_key<span class=\"p\">(</span>opt<span class=\"o\">.</span>get<span class=\"p\">(</span><span class=\"s\">'long'</span><span class=\"p\">,</span>\u00a0<span class=\"bp\">None</span><span class=\"p\">)):</span></td></tr><tr><th id=\"L509\"><a href=\"#L509\">509</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">continue</span></td></tr><tr><th id=\"L510\"><a href=\"#L510\">510</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">for</span>\u00a0x <span class=\"ow\">in</span>\u00a0opt<span class=\"o\">.</span>get<span class=\"p\">(</span><span class=\"s\">'short'</span><span class=\"p\">,</span>\u00a0<span class=\"bp\">None</span><span class=\"p\">),</span>\u00a0opt<span class=\"o\">.</span>get<span class=\"p\">(</span><span class=\"s\">'long'</span><span class=\"p\">,</span>\u00a0<span class=\"bp\">None</span><span class=\"p\">):</span></td></tr><tr><th id=\"L511\"><a href=\"#L511\">511</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0x <span class=\"ow\">is</span>\u00a0<span class=\"ow\">not</span>\u00a0<span class=\"bp\">None</span><span class=\"p\">:</span></td></tr><tr><th id=\"L512\"><a href=\"#L512\">512</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 seen<span class=\"p\">[</span>x<span class=\"p\">]</span><span class=\"o\">=</span><span class=\"mi\">1</span></td></tr><tr><th id=\"L513\"><a href=\"#L513\">513</a></th><td></td></tr><tr><th id=\"L514\"><a href=\"#L514\">514</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 optLines <span class=\"o\">=</span>\u00a0<span class=\"p\">[]</span></td></tr><tr><th id=\"L515\"><a href=\"#L515\">515</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 comma <span class=\"o\">=</span>\u00a0<span class=\"s\">\" \"</span></td></tr><tr><th id=\"L516\"><a href=\"#L516\">516</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0opt<span class=\"o\">.</span>get<span class=\"p\">(</span><span class=\"s\">'short'</span><span class=\"p\">,</span>\u00a0<span class=\"bp\">None</span><span class=\"p\">):</span></td></tr><tr><th id=\"L517\"><a href=\"#L517\">517</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 short <span class=\"o\">=</span>\u00a0<span class=\"s\">\"-</span><span class=\"si\">%c</span><span class=\"s\">\"</span>\u00a0<span class=\"o\">%</span>\u00a0<span class=\"p\">(</span>opt<span class=\"p\">[</span><span class=\"s\">'short'</span><span class=\"p\">],)</span></td></tr><tr><th id=\"L518\"><a href=\"#L518\">518</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">else</span><span class=\"p\">:</span></td></tr><tr><th id=\"L519\"><a href=\"#L519\">519</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 short <span class=\"o\">=</span>\u00a0<span class=\"s\">''</span></td></tr><tr><th id=\"L520\"><a href=\"#L520\">520</a></th><td></td></tr><tr><th id=\"L521\"><a href=\"#L521\">521</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0opt<span class=\"o\">.</span>get<span class=\"p\">(</span><span class=\"s\">'long'</span><span class=\"p\">,</span>\u00a0<span class=\"bp\">None</span><span class=\"p\">):</span></td></tr><tr><th id=\"L522\"><a href=\"#L522\">522</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"nb\">long</span>\u00a0<span class=\"o\">=</span>\u00a0opt<span class=\"p\">[</span><span class=\"s\">'long'</span><span class=\"p\">]</span></td></tr><tr><th id=\"L523\"><a href=\"#L523\">523</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0opt<span class=\"o\">.</span>get<span class=\"p\">(</span><span class=\"s\">\"optType\"</span><span class=\"p\">,</span>\u00a0<span class=\"bp\">None</span><span class=\"p\">)</span>\u00a0<span class=\"o\">==</span>\u00a0<span class=\"s\">\"parameter\"</span><span class=\"p\">:</span></td></tr><tr><th id=\"L524\"><a href=\"#L524\">524</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"nb\">long</span>\u00a0<span class=\"o\">=</span>\u00a0<span class=\"nb\">long</span>\u00a0<span class=\"o\">+</span>\u00a0<span class=\"s\">'='</span></td></tr><tr><th id=\"L525\"><a href=\"#L525\">525</a></th><td></td></tr><tr><th id=\"L526\"><a href=\"#L526\">526</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"nb\">long</span>\u00a0<span class=\"o\">=</span>\u00a0<span class=\"s\">\"</span><span class=\"si\">%-*s</span><span class=\"s\">\"</span>\u00a0<span class=\"o\">%</span>\u00a0<span class=\"p\">(</span>maxOptLen<span class=\"p\">,</span>\u00a0<span class=\"nb\">long</span><span class=\"p\">)</span></td></tr><tr><th id=\"L527\"><a href=\"#L527\">527</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0short<span class=\"p\">:</span></td></tr><tr><th id=\"L528\"><a href=\"#L528\">528</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 comma <span class=\"o\">=</span>\u00a0<span class=\"s\">\",\"</span></td></tr><tr><th id=\"L529\"><a href=\"#L529\">529</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">else</span><span class=\"p\">:</span></td></tr><tr><th id=\"L530\"><a href=\"#L530\">530</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <span class=\"nb\">long</span>\u00a0<span class=\"o\">=</span>\u00a0<span class=\"s\">\" \"</span>\u00a0<span class=\"o\">*</span>\u00a0<span class=\"p\">(</span>maxOptLen <span class=\"o\">+</span>\u00a0<span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"s\">'--'</span><span class=\"p\">))</span></td></tr><tr><th id=\"L531\"><a href=\"#L531\">531</a></th><td></td></tr><tr><th id=\"L532\"><a href=\"#L532\">532</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0opt<span class=\"o\">.</span>get<span class=\"p\">(</span><span class=\"s\">'optType'</span><span class=\"p\">,</span>\u00a0<span class=\"bp\">None</span><span class=\"p\">)</span>\u00a0<span class=\"o\">==</span>\u00a0<span class=\"s\">'command'</span><span class=\"p\">:</span></td></tr><tr><th id=\"L533\"><a href=\"#L533\">533</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 column1 <span class=\"o\">=</span>\u00a0<span class=\"s\">'\u00a0 \u00a0 </span><span class=\"si\">%s</span><span class=\"s\">\u00a0 \u00a0 \u00a0 '</span>\u00a0<span class=\"o\">%</span>\u00a0<span class=\"nb\">long</span></td></tr><tr><th id=\"L534\"><a href=\"#L534\">534</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">else</span><span class=\"p\">:</span></td></tr><tr><th id=\"L535\"><a href=\"#L535\">535</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 column1 <span class=\"o\">=</span>\u00a0<span class=\"s\">\"\u00a0 </span><span class=\"si\">%2s%c</span><span class=\"s\">\u00a0--</span><span class=\"si\">%s</span><span class=\"s\">\u00a0 \"</span>\u00a0<span class=\"o\">%</span>\u00a0<span class=\"p\">(</span>short<span class=\"p\">,</span>\u00a0comma<span class=\"p\">,</span>\u00a0<span class=\"nb\">long</span><span class=\"p\">)</span></td></tr><tr><th id=\"L536\"><a href=\"#L536\">536</a></th><td></td></tr><tr><th id=\"L537\"><a href=\"#L537\">537</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0opt<span class=\"o\">.</span>get<span class=\"p\">(</span><span class=\"s\">'doc'</span><span class=\"p\">,</span>\u00a0<span class=\"s\">''</span><span class=\"p\">):</span></td></tr><tr><th id=\"L538\"><a href=\"#L538\">538</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 doc <span class=\"o\">=</span>\u00a0opt<span class=\"p\">[</span><span class=\"s\">'doc'</span><span class=\"p\">]</span><span class=\"o\">.</span>strip<span class=\"p\">()</span></td></tr><tr><th id=\"L539\"><a href=\"#L539\">539</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">else</span><span class=\"p\">:</span></td></tr><tr><th id=\"L540\"><a href=\"#L540\">540</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 doc <span class=\"o\">=</span>\u00a0<span class=\"s\">''</span></td></tr><tr><th id=\"L541\"><a href=\"#L541\">541</a></th><td></td></tr><tr><th id=\"L542\"><a href=\"#L542\">542</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0<span class=\"p\">(</span>opt<span class=\"o\">.</span>get<span class=\"p\">(</span><span class=\"s\">\"optType\"</span><span class=\"p\">,</span>\u00a0<span class=\"bp\">None</span><span class=\"p\">)</span>\u00a0<span class=\"o\">==</span>\u00a0<span class=\"s\">\"parameter\"</span><span class=\"p\">)</span>\u00a0\\</td></tr><tr><th id=\"L543\"><a href=\"#L543\">543</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0<span class=\"ow\">and</span>\u00a0<span class=\"ow\">not</span>\u00a0<span class=\"p\">(</span>opt<span class=\"o\">.</span>get<span class=\"p\">(</span><span class=\"s\">'default'</span><span class=\"p\">,</span>\u00a0<span class=\"bp\">None</span><span class=\"p\">)</span>\u00a0<span class=\"ow\">is</span>\u00a0<span class=\"bp\">None</span><span class=\"p\">):</span></td></tr><tr><th id=\"L544\"><a href=\"#L544\">544</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 doc <span class=\"o\">=</span>\u00a0<span class=\"s\">\"</span><span class=\"si\">%s</span><span class=\"s\">\u00a0[default: </span><span class=\"si\">%s</span><span class=\"s\">]\"</span>\u00a0<span class=\"o\">%</span>\u00a0<span class=\"p\">(</span>doc<span class=\"p\">,</span>\u00a0opt<span class=\"p\">[</span><span class=\"s\">'default'</span><span class=\"p\">])</span></td></tr><tr><th id=\"L545\"><a href=\"#L545\">545</a></th><td></td></tr><tr><th id=\"L546\"><a href=\"#L546\">546</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">if</span>\u00a0doc<span class=\"p\">:</span></td></tr><tr><th id=\"L547\"><a href=\"#L547\">547</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 column2_l <span class=\"o\">=</span>\u00a0text<span class=\"o\">.</span>wordWrap<span class=\"p\">(</span>doc<span class=\"p\">,</span>\u00a0colWidth2<span class=\"p\">)</span></td></tr><tr><th id=\"L548\"><a href=\"#L548\">548</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">else</span><span class=\"p\">:</span></td></tr><tr><th id=\"L549\"><a href=\"#L549\">549</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 column2_l <span class=\"o\">=</span>\u00a0<span class=\"p\">[</span><span class=\"s\">''</span><span class=\"p\">]</span></td></tr><tr><th id=\"L550\"><a href=\"#L550\">550</a></th><td></td></tr><tr><th id=\"L551\"><a href=\"#L551\">551</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 optLines<span class=\"o\">.</span>append<span class=\"p\">(</span><span class=\"s\">\"</span><span class=\"si\">%s%s</span><span class=\"se\">\\n</span><span class=\"s\">\"</span>\u00a0<span class=\"o\">%</span>\u00a0<span class=\"p\">(</span>column1<span class=\"p\">,</span>\u00a0column2_l<span class=\"o\">.</span>pop<span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)))</span></td></tr><tr><th id=\"L552\"><a href=\"#L552\">552</a></th><td></td></tr><tr><th id=\"L553\"><a href=\"#L553\">553</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">for</span>\u00a0line <span class=\"ow\">in</span>\u00a0column2_l<span class=\"p\">:</span></td></tr><tr><th id=\"L554\"><a href=\"#L554\">554</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 optLines<span class=\"o\">.</span>append<span class=\"p\">(</span><span class=\"s\">\"</span><span class=\"si\">%s%s</span><span class=\"se\">\\n</span><span class=\"s\">\"</span>\u00a0<span class=\"o\">%</span>\u00a0<span class=\"p\">(</span>colFiller1<span class=\"p\">,</span>\u00a0line<span class=\"p\">))</span></td></tr><tr><th id=\"L555\"><a href=\"#L555\">555</a></th><td></td></tr><tr><th id=\"L556\"><a href=\"#L556\">556</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 optChunks<span class=\"o\">.</span>append<span class=\"p\">(</span>string<span class=\"o\">.</span>join<span class=\"p\">(</span>optLines<span class=\"p\">,</span>\u00a0<span class=\"s\">''</span><span class=\"p\">))</span></td></tr><tr><th id=\"L557\"><a href=\"#L557\">557</a></th><td></td></tr><tr><th id=\"L558\"><a href=\"#L558\">558</a></th><td>\u00a0 \u00a0 <span class=\"k\">return</span>\u00a0optChunks</td></tr><tr><th id=\"L559\"><a href=\"#L559\">559</a></th><td></td></tr><tr><th id=\"L560\"><a href=\"#L560\">560</a></th><td><span class=\"k\">def</span>\u00a0<span class=\"nf\">flagFunction</span><span class=\"p\">(</span>method<span class=\"p\">,</span>\u00a0name <span class=\"o\">=</span>\u00a0<span class=\"bp\">None</span><span class=\"p\">):</span></td></tr><tr><th id=\"L561\"><a href=\"#L561\">561</a></th><td>\u00a0 \u00a0 reqArgs <span class=\"o\">=</span>\u00a0method<span class=\"o\">.</span>im_func<span class=\"o\">.</span>func_code<span class=\"o\">.</span>co_argcount</td></tr><tr><th id=\"L562\"><a href=\"#L562\">562</a></th><td>\u00a0 \u00a0 <span class=\"k\">if</span>\u00a0reqArgs <span class=\"o\">&gt;</span>\u00a0<span class=\"mi\">2</span><span class=\"p\">:</span></td></tr><tr><th id=\"L563\"><a href=\"#L563\">563</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">raise</span>\u00a0UsageError<span class=\"p\">(</span><span class=\"s\">'Invalid Option function for </span><span class=\"si\">%s</span><span class=\"s\">'</span>\u00a0<span class=\"o\">%</span>\u00a0<span class=\"p\">(</span>name <span class=\"ow\">or</span>\u00a0method<span class=\"o\">.</span>func_name<span class=\"p\">))</span></td></tr><tr><th id=\"L564\"><a href=\"#L564\">564</a></th><td>\u00a0 \u00a0 <span class=\"k\">if</span>\u00a0reqArgs <span class=\"o\">==</span>\u00a0<span class=\"mi\">2</span><span class=\"p\">:</span></td></tr><tr><th id=\"L565\"><a href=\"#L565\">565</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"c\"># argName = method.im_func.func_code.co_varnames[1]</span></td></tr><tr><th id=\"L566\"><a href=\"#L566\">566</a></th><td>\u00a0 \u00a0 \u00a0 \u00a0 <span class=\"k\">return</span>\u00a0<span class=\"mi\">0</span></td></tr><tr><th id=\"L567\"><a href=\"#L567\">567</a></th><td>\u00a0 \u00a0 <span class=\"k\">return</span>\u00a0<span class=\"mi\">1</span></td></tr></tbody></table>\n\n      </div>\n      <div id=\"anydiff\">\n        <form action=\"/LUCICodeRepository/nomaticIM/diff\" method=\"get\">\n          <div class=\"buttons\">\n            <input type=\"hidden\" name=\"new_path\" value=\"/nomatic/tags/NomaticIM-0.0.5/buddy_bots/src/twisted/python/usage.py\" />\n            <input type=\"hidden\" name=\"old_path\" value=\"/nomatic/tags/NomaticIM-0.0.5/buddy_bots/src/twisted/python/usage.py\" />\n            <input type=\"hidden\" name=\"new_rev\" />\n            <input type=\"hidden\" name=\"old_rev\" />\n            <input type=\"submit\" value=\"View changes...\" title=\"Select paths and revs for Diff\" />\n          </div>\n        </form>\n      </div>\n      <div id=\"help\"><strong>Note:</strong> See <a href=\"/LUCICodeRepository/nomaticIM/wiki/TracBrowser\">TracBrowser</a>\n        for help on using the repository browser.</div>\n    </div>\n    <div id=\"altlinks\">\n      <h3>Download in other formats:</h3>\n      <ul>\n        <li class=\"first\">\n          <a rel=\"nofollow\" href=\"/LUCICodeRepository/nomaticIM/browser/nomatic/tags/NomaticIM-0.0.5/buddy_bots/src/twisted/python/usage.py?format=txt\">Plain Text</a>\n        </li><li class=\"last\">\n          <a rel=\"nofollow\" href=\"/LUCICodeRepository/nomaticIM/export/1312/nomatic/tags/NomaticIM-0.0.5/buddy_bots/src/twisted/python/usage.py\">Original Format</a>\n        </li>\n      </ul>\n    </div>\n    </div>\n    <div id=\"footer\" lang=\"en\" xml:lang=\"en\"><hr />\n      <a id=\"tracpowered\" href=\"http://trac.edgewall.org/\"><img src=\"/LUCICodeRepository/nomaticIM/chrome/common/trac_logo_mini.png\" height=\"30\" width=\"107\" alt=\"Trac Powered\" /></a>\n      <p class=\"left\">Powered by <a href=\"/LUCICodeRepository/nomaticIM/about\"><strong>Trac 1.0.1</strong></a><br />\n        By <a href=\"http://www.edgewall.org/\">Edgewall Software</a>.</p>\n      <p class=\"right\">All content copyright 2007-2008 by LUCI <br /><a href=\"http://luci.ics.uci.edu/\">http://luci.ics.uci.edu/</a></p>\n    </div>\n\t\t<div id=\"sitefooter\">\n\t\t\t<script src=\"http://www.google-analytics.com/urchin.js\" type=\"text/javascript\">\n\t\t\t</script>\n\t\t\t<script type=\"text/javascript\">\n\t\t\t\t_uacct = \"UA-338915-2\";\n\t\t\t\turchinTracker();\n\t\t\t</script>\n\t\t</div>\n\t</body>\n</html>", "id": 44472.0}