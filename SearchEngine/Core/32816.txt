{"text": "View Javadoc 1 package swirl workspace 2 3 import javax servlet http HttpServletRequest 4 import javax servlet http HttpServletResponse 5 6 import org apache commons httpclient HttpMethod 7 import org apache commons logging Log 8 import org apache commons logging LogFactory 9 import org apache webdav lib methods UnlockMethod 1 11 12 Proxies an WebDAV UNLOCK command to a specific peer 13 14 author Kari Nies 15 16 public class UnlockCommand extends ProxyCommand 17 18 commons logging log that maps to this Command 19 private Log log LogFactory getLog this getClass 2 21 22 Constructor that calls super constructor 23 24 param req see super 25 param resp see super 26 param host see super 27 param path see super 28 param peerManager see super 29 3 public UnlockCommand final HttpServletRequest req 31 final HttpServletResponse resp final String host 32 final String path final PeerManager peerManager 33 34 super req resp host path peerManager 35 36 37 38 Implements the abstract method from ProxyCommand to return a WebDAV 39 UNLOCK method 4 41 param url the url to execute the method on 42 43 return an instance of UnlockMethod 44 45 public HttpMethod createMethod final String url 46 47 UnlockMethod method new UnlockMethod url 48 49 set Lock Token header 5 String lockTokenHeader getRequest getHeader Lock Token 51 52 if log isDebugEnabled 53 54 log debug LockToken lockTokenHeader 55 56 57 if lockTokenHeader null 58 59 method setLockToken lockTokenHeader 6 61 62 set Authorization header 63 String authorizationHeader getRequest getHeader Authorization 64 65 if log isDebugEnabled 66 67 log debug Authorization authorizationHeader 68 69 7 if authorizationHeader null 71 72 method setRequestHeader Authorization authorizationHeader 73 74 75 return method 76 77 This page was automatically generated by Maven", "_id": "http://drzaius.ics.uci.edu/~swirl/impromptu-0.20/xref/swirl/workspace/UnlockCommand.html", "title": "unlockcommand xref", "html": "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\n<head>\n<meta http-equiv=\"content-type\" content=\"text/html; charset=ISO-8859-1\" /><title>UnlockCommand xref</title>\n<link type=\"text/css\" rel=\"stylesheet\" href=\"../../stylesheet.css\" />\n</head>\n<body>\n<div id=\"overview\"><a href=\"../../../apidocs/swirl/workspace/UnlockCommand.html\">View Javadoc</a></div><pre>\n\n<a name=\"1\" href=\"#1\">1</a>   <strong>package</strong> <a href=\"../../swirl/workspace/package-summary.html\">swirl.workspace</a>;\n<a name=\"2\" href=\"#2\">2</a>   \n<a name=\"3\" href=\"#3\">3</a>   <strong>import</strong> javax.servlet.http.HttpServletRequest;\n<a name=\"4\" href=\"#4\">4</a>   <strong>import</strong> javax.servlet.http.HttpServletResponse;\n<a name=\"5\" href=\"#5\">5</a>   \n<a name=\"6\" href=\"#6\">6</a>   <strong>import</strong> org.apache.commons.httpclient.HttpMethod;\n<a name=\"7\" href=\"#7\">7</a>   <strong>import</strong> org.apache.commons.logging.Log;\n<a name=\"8\" href=\"#8\">8</a>   <strong>import</strong> org.apache.commons.logging.LogFactory;\n<a name=\"9\" href=\"#9\">9</a>   <strong>import</strong> org.apache.webdav.lib.methods.UnlockMethod;\n<a name=\"10\" href=\"#10\">10</a>  \n<a name=\"11\" href=\"#11\">11</a>  <em>/**<em>*</em></em>\n<a name=\"12\" href=\"#12\">12</a>  <em> * Proxies an WebDAV UNLOCK command to a specific peer</em>\n<a name=\"13\" href=\"#13\">13</a>  <em> *</em>\n<a name=\"14\" href=\"#14\">14</a>  <em> * @author Kari Nies</em>\n<a name=\"15\" href=\"#15\">15</a>  <em> */</em>\n<a name=\"16\" href=\"#16\">16</a>  <strong>public</strong> <strong>class</strong> <a href=\"../../swirl/workspace/UnlockCommand.html\">UnlockCommand</a> <strong>extends</strong> <a href=\"../../swirl/workspace/ProxyCommand.html\">ProxyCommand</a>\n<a name=\"17\" href=\"#17\">17</a>  {\n<a name=\"18\" href=\"#18\">18</a>      <em>/**<em>* commons-logging log that maps to this Command */</em></em>\n<a name=\"19\" href=\"#19\">19</a>      <strong>private</strong> Log log = LogFactory.getLog(<strong>this</strong>.getClass());\n<a name=\"20\" href=\"#20\">20</a>  \n<a name=\"21\" href=\"#21\">21</a>      <em>/**<em>*</em></em>\n<a name=\"22\" href=\"#22\">22</a>  <em>     * Constructor that calls super constructor</em>\n<a name=\"23\" href=\"#23\">23</a>  <em>     *</em>\n<a name=\"24\" href=\"#24\">24</a>  <em>     * @param req see super</em>\n<a name=\"25\" href=\"#25\">25</a>  <em>     * @param resp see super</em>\n<a name=\"26\" href=\"#26\">26</a>  <em>     * @param host see super</em>\n<a name=\"27\" href=\"#27\">27</a>  <em>     * @param path see super</em>\n<a name=\"28\" href=\"#28\">28</a>  <em>     * @param peerManager see super</em>\n<a name=\"29\" href=\"#29\">29</a>  <em>     */</em>\n<a name=\"30\" href=\"#30\">30</a>      <strong>public</strong> <a href=\"../../swirl/workspace/UnlockCommand.html\">UnlockCommand</a>(<strong>final</strong> HttpServletRequest req,\n<a name=\"31\" href=\"#31\">31</a>                           <strong>final</strong> HttpServletResponse resp, <strong>final</strong> String host,\n<a name=\"32\" href=\"#32\">32</a>                           <strong>final</strong> String path, <strong>final</strong> <a href=\"../../swirl/workspace/PeerManager.html\">PeerManager</a> peerManager)\n<a name=\"33\" href=\"#33\">33</a>      {\n<a name=\"34\" href=\"#34\">34</a>          <strong>super</strong>(req, resp, host, path, peerManager);\n<a name=\"35\" href=\"#35\">35</a>      }\n<a name=\"36\" href=\"#36\">36</a>  \n<a name=\"37\" href=\"#37\">37</a>      <em>/**<em>*</em></em>\n<a name=\"38\" href=\"#38\">38</a>  <em>     * Implements the abstract method from ProxyCommand to return a WebDAV</em>\n<a name=\"39\" href=\"#39\">39</a>  <em>     * UNLOCK method</em>\n<a name=\"40\" href=\"#40\">40</a>  <em>     *</em>\n<a name=\"41\" href=\"#41\">41</a>  <em>     * @param url the url to execute the method on</em>\n<a name=\"42\" href=\"#42\">42</a>  <em>     *</em>\n<a name=\"43\" href=\"#43\">43</a>  <em>     * @return an instance of UnlockMethod</em>\n<a name=\"44\" href=\"#44\">44</a>  <em>     */</em>\n<a name=\"45\" href=\"#45\">45</a>      <strong>public</strong> HttpMethod createMethod(<strong>final</strong> String url)\n<a name=\"46\" href=\"#46\">46</a>      {\n<a name=\"47\" href=\"#47\">47</a>          UnlockMethod method = <strong>new</strong> UnlockMethod(url);\n<a name=\"48\" href=\"#48\">48</a>  \n<a name=\"49\" href=\"#49\">49</a>          <em class=\"comment\">//set Lock-Token header</em>\n<a name=\"50\" href=\"#50\">50</a>          String lockTokenHeader = getRequest().getHeader(<span class=\"string\">\"Lock-Token\"</span>);\n<a name=\"51\" href=\"#51\">51</a>  \n<a name=\"52\" href=\"#52\">52</a>          <strong>if</strong>(log.isDebugEnabled())\n<a name=\"53\" href=\"#53\">53</a>          {\n<a name=\"54\" href=\"#54\">54</a>              log.debug(<span class=\"string\">\"LockToken: \"</span> + lockTokenHeader);\n<a name=\"55\" href=\"#55\">55</a>          }\n<a name=\"56\" href=\"#56\">56</a>  \n<a name=\"57\" href=\"#57\">57</a>          <strong>if</strong>(lockTokenHeader != <strong>null</strong>)\n<a name=\"58\" href=\"#58\">58</a>          {\n<a name=\"59\" href=\"#59\">59</a>              method.setLockToken(lockTokenHeader);\n<a name=\"60\" href=\"#60\">60</a>          }\n<a name=\"61\" href=\"#61\">61</a>  \n<a name=\"62\" href=\"#62\">62</a>          <em class=\"comment\">//set Authorization header</em>\n<a name=\"63\" href=\"#63\">63</a>          String authorizationHeader = getRequest().getHeader(<span class=\"string\">\"Authorization\"</span>);\n<a name=\"64\" href=\"#64\">64</a>  \n<a name=\"65\" href=\"#65\">65</a>          <strong>if</strong>(log.isDebugEnabled())\n<a name=\"66\" href=\"#66\">66</a>          {\n<a name=\"67\" href=\"#67\">67</a>              log.debug(<span class=\"string\">\"Authorization: \"</span> + authorizationHeader);\n<a name=\"68\" href=\"#68\">68</a>          }\n<a name=\"69\" href=\"#69\">69</a>  \n<a name=\"70\" href=\"#70\">70</a>          <strong>if</strong>(authorizationHeader != <strong>null</strong>)\n<a name=\"71\" href=\"#71\">71</a>          {\n<a name=\"72\" href=\"#72\">72</a>              method.setRequestHeader(<span class=\"string\">\"Authorization\"</span>, authorizationHeader);\n<a name=\"73\" href=\"#73\">73</a>          }\n<a name=\"74\" href=\"#74\">74</a>  \n<a name=\"75\" href=\"#75\">75</a>          <strong>return</strong> method;\n<a name=\"76\" href=\"#76\">76</a>      }\n<a name=\"77\" href=\"#77\">77</a>  }\n</pre>\n<hr/><div id=\"footer\">This page was automatically generated by <a href=\"http://maven.apache.org/\">Maven</a></div></body>\n</html>\n\n", "id": 32816.0}