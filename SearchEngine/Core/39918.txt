{"text": "Search LoginPreferencesHelp GuideAbout Trac WikiTimelineRoadmapBrowse SourceView TicketsSearch Context Navigation Previous ChangeNext Change Changeset 228 for vendor current libgaim buddyicon c View differences inlineside by side Show lines around each change Show the changes in full context Ignore Blank lines Case changes White space changes Timestamp Mar 6 2 7 1 39 26 PM 8 years ago Author djp3Message Updating from gaim Repository File 1 edited vendor current libgaim buddyicon c modified 8 diffs Legend UnmodifiedAddedRemoved vendor current libgaim buddyicon c r65 r228 7878 gaim buddy icon ref icon 7979 gaim buddy icon set data icon icon data icon len 8 gaim buddy icon set path icon NULL 8 81 8182 gaim buddy icon set data makes blist c or 135136 g free icon username 136137 g free icon data 138 g free icon path 137139 GAIM DBUS UNREGISTER POINTER icon 13814 g free icon 262264 gaim debug error buddyicon Unable to create file s s n 263265 filename strerror errno 266 g free filename 267 g free random 268 return 264269 26527 337342 338343 344void 345gaim buddy icon set path GaimBuddyIcon icon const gchar path 346 347 g return if fail icon NULL 348 349 g free icon path 35 icon path g strdup path 351 352 339353GaimAccount 34 354gaim buddy icon get account const GaimBuddyIcon icon 362376 363377 return icon data 378 379 38 const char 381gaim buddy icon get path GaimBuddyIcon icon 382 383 g return val if fail icon NULL NULL 384 385 return icon path 364386 365387 392414void 393415gaim buddy icons set for user GaimAccount account const char username 394 void icon data size t icon len 416 void icon data size t icon len 395417 396418 g return if fail account NULL 49 512 491513char gaim buddy icons get full path const char icon 492 struct stat st 493 494514 if icon NULL 495515 return NULL 496516 497 if g stat icon st 517 if g file test icon G FILE TEST IS REGULAR 498518 return g strdup icon 499519 else 527547void gaim buddy icon get scale size GaimBuddyIconSpec spec int width int height 528548 529 if spec spec scale rules GAIM ICON SCALE DISPLAY 53 int new width new height 531 532 new width width 533 new height height 534 535 if width spec min width 536 new width spec min width 537 else if width spec max width 538 new width spec max width 539 54 if height spec min height 541 new height spec min height 542 else if height spec max height 543 new height spec max height 544 545 preserve aspect ratio 546 if double height double new width 547 double width double new height 548 new width 5 double width double new height double height 549 else 55 new height 5 double height double new width double width 551 552 553 width new width 554 height new height 555 556 557 549 int new width new height 55 551 new width width 552 new height height 553 554 if width spec min width 555 new width spec min width 556 else if width spec max width 557 new width spec max width 558 559 if height spec min height 56 new height spec min height 561 else if height spec max height 562 new height spec max height 563 564 preserve aspect ratio 565 if double height double new width 566 double width double new height 567 new width 5 double width double new height double height 568 else 569 new height 5 double height double new width double width 57 571 572 width new width 573 height new height 574 575 Note See TracChangeset for help on using the changeset viewer Download in other formats Unified Diff Zip Archive Powered by Trac 1 1 By Edgewall Software All content copyright 2 7 2 8 by LUCI http luci ics uci edu ", "_id": "http://djp3-pc2.ics.uci.edu/LUCICodeRepository/nomaticIM/changeset/228/vendor/current/libgaim/buddyicon.c", "title": "\n      changeset 228 for vendor/current/libgaim/buddyicon.c \u2013 nomatic*im\n    ", "html": "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n  \n  \n\n  \n\n\n  <head>\n\t\t<title>\n      Changeset 228 for vendor/current/libgaim/buddyicon.c \u2013 Nomatic*IM\n    </title><meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" /><meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" /><link rel=\"search\" href=\"/LUCICodeRepository/nomaticIM/search\" /><link rel=\"help\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracGuide\" /><link rel=\"alternate\" href=\"?format=diff&amp;new=228\" type=\"text/plain\" class=\"diff\" title=\"Unified Diff\" /><link rel=\"alternate\" href=\"?format=zip&amp;new=228\" type=\"application/zip\" class=\"zip\" title=\"Zip Archive\" /><link rel=\"next\" href=\"/LUCICodeRepository/nomaticIM/changeset/274\" title=\"Changeset 274 for vendor/current/libgaim/buddyicon.c\" /><link rel=\"start\" href=\"/LUCICodeRepository/nomaticIM/wiki\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/chrome/common/css/trac.css\" type=\"text/css\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/chrome/common/css/changeset.css\" type=\"text/css\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/chrome/common/css/diff.css\" type=\"text/css\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/chrome/common/css/code.css\" type=\"text/css\" /><link rel=\"prev\" href=\"/LUCICodeRepository/nomaticIM/changeset/65/vendor/current/libgaim/buddyicon.c\" title=\"Changeset 65 for vendor/current/libgaim/buddyicon.c\" /><link rel=\"shortcut icon\" href=\"http://luci.ics.uci.edu/logo32by32.gif\" type=\"image/gif\" /><link rel=\"icon\" href=\"http://luci.ics.uci.edu/logo32by32.gif\" type=\"image/gif\" /><link type=\"application/opensearchdescription+xml\" rel=\"search\" href=\"/LUCICodeRepository/nomaticIM/search/opensearch\" title=\"Search Nomatic*IM\" /><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/jquery.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/babel.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/messages/en_US.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/trac.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/search.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/diff.js\"></script><script type=\"text/javascript\">\n      jQuery(document).ready(function($) {\n        $(\".trac-toggledeleted\").show().click(function() {\n                  $(this).siblings().find(\".trac-deleted\").toggle();\n                  return false;\n        }).click();\n        $(\"#content\").find(\"li.entry h2 a\").parent().addAnchor(_(\"Link to this diff\"));\n      });\n    </script>\n\t</head>\n  <body>\n    <div id=\"banner\">\n      <div id=\"header\">\n        <a id=\"logo\" href=\"http://luci.ics.uci.edu/#code\"><img src=\"http://luci.ics.uci.edu/blog/archives/LUCIhorzTight.jpg\" alt=\"LUCI Code Repository\" /></a>\n      </div>\n      <form id=\"search\" action=\"/LUCICodeRepository/nomaticIM/search\" method=\"get\">\n        <div>\n          <label for=\"proj-search\">Search:</label>\n          <input type=\"text\" id=\"proj-search\" name=\"q\" size=\"18\" value=\"\" />\n          <input type=\"submit\" value=\"Search\" />\n        </div>\n      </form>\n      <div id=\"metanav\" class=\"nav\">\n    <ul>\n      <li class=\"first\"><a href=\"/LUCICodeRepository/nomaticIM/login\">Login</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/prefs\">Preferences</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/wiki/TracGuide\">Help/Guide</a></li><li class=\"last\"><a href=\"/LUCICodeRepository/nomaticIM/about\">About Trac</a></li>\n    </ul>\n  </div>\n    </div>\n    <div id=\"mainnav\" class=\"nav\">\n    <ul>\n      <li class=\"first\"><a href=\"/LUCICodeRepository/nomaticIM/wiki\">Wiki</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/timeline\">Timeline</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/roadmap\">Roadmap</a></li><li class=\"active\"><a href=\"/LUCICodeRepository/nomaticIM/browser\">Browse Source</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/report\">View Tickets</a></li><li class=\"last\"><a href=\"/LUCICodeRepository/nomaticIM/search\">Search</a></li>\n    </ul>\n  </div>\n    <div id=\"main\">\n      <div id=\"ctxtnav\" class=\"nav\">\n        <h2>Context Navigation</h2>\n        <ul>\n          <li class=\"first\"><span>&larr; <a class=\"prev\" href=\"/LUCICodeRepository/nomaticIM/changeset/65/vendor/current/libgaim/buddyicon.c\" title=\"Changeset 65 for vendor/current/libgaim/buddyicon.c\">Previous Change</a></span></li><li class=\"last\"><span><a class=\"next\" href=\"/LUCICodeRepository/nomaticIM/changeset/274\" title=\"Changeset 274 for vendor/current/libgaim/buddyicon.c\">Next Change</a> &rarr;</span></li>\n        </ul>\n        <hr />\n      </div>\n    <div id=\"content\" class=\"changeset\">\n      <div id=\"title\">\n            <h1>Changeset <a title=\"Show full changeset\" href=\"/LUCICodeRepository/nomaticIM/changeset/228\">228</a>\n              for <a title=\"Show entry in browser\" href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/buddyicon.c?rev=228\">vendor/current/libgaim/buddyicon.c</a></h1>\n      </div>\n      <form id=\"prefs\" action=\"\">\n        <div>\n          \n  <label for=\"style\">View differences</label>\n  <select id=\"style\" name=\"style\">\n    <option selected=\"selected\" value=\"inline\">inline</option>\n    <option value=\"sidebyside\">side by side</option>\n  </select>\n  <div class=\"field\">\n    <label><input type=\"radio\" name=\"contextall\" value=\"0\" checked=\"checked\" />\n             Show</label>\n      <label><input type=\"text\" name=\"contextlines\" id=\"contextlines\" size=\"2\" maxlength=\"3\" value=\"2\" />\n             lines around each change</label><br />\n    <label><input type=\"radio\" name=\"contextall\" value=\"1\" />\n           Show the changes in full context</label>\n  </div>\n  <fieldset id=\"ignore\">\n    <legend>Ignore:</legend>\n    <div class=\"field\">\n      <input type=\"checkbox\" id=\"ignoreblanklines\" name=\"ignoreblanklines\" />\n      <label for=\"ignoreblanklines\">Blank lines</label>\n    </div>\n    <div class=\"field\">\n      <input type=\"checkbox\" id=\"ignorecase\" name=\"ignorecase\" />\n      <label for=\"ignorecase\">Case changes</label>\n    </div>\n    <div class=\"field\">\n      <input type=\"checkbox\" id=\"ignorewhitespace\" name=\"ignorewhitespace\" />\n      <label for=\"ignorewhitespace\">White space changes</label>\n    </div>\n  </fieldset>\n  <div class=\"buttons\">\n    <input type=\"submit\" name=\"update\" value=\"Update\" />\n  </div>\n\n        </div>\n      </form>\n      <dl id=\"overview\">\n          <dt class=\"property time\">Timestamp:</dt>\n          <dd class=\"time\">\n             Mar 6, 2007, 10:39:26 PM\n             (<a class=\"timeline\" href=\"/LUCICodeRepository/nomaticIM/timeline?from=2007-03-06T22%3A39%3A26-08%3A00&amp;precision=second\" title=\"See timeline at Mar 6, 2007, 10:39:26 PM\">8 years</a> ago)\n          </dd>\n          <dt class=\"property author\">Author:</dt>\n          <dd class=\"author\">djp3</dd>\n          <dt class=\"property message\">Message:</dt>\n          <dd class=\"message searchable\">\n            \n            \n              <p>\nUpdating from gaim Repository<br />\n</p>\n\n            \n            \n          </dd>\n        <dt class=\"property files\">\n          File:\n        </dt>\n        <dd class=\"files\">\n          <div class=\"legend\" id=\"file-legend\">\n            <dl>\n              <dt class=\"mod\"></dt><dd>1 edited</dd>\n            </dl>\n          </div>\n          <br />\n          <ul>\n            <li>\n          <div class=\"mod\"> </div>\n            <a title=\"Show entry in browser\" href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/buddyicon.c?rev=228\">\n              vendor/current/libgaim/buddyicon.c\n            </a>\n          <span class=\"comment\">(modified)</span>\n              (<a title=\"Show differences\" href=\"#file0\">8 diffs</a>)\n            </li>\n          </ul>\n        </dd>\n      </dl>\n      <div class=\"diff\">\n        <div class=\"legend\" id=\"diff-legend\">\n          <h3>Legend:</h3>\n          <dl>\n            <dt class=\"unmod\"></dt><dd>Unmodified</dd>\n            <dt class=\"add\"></dt><dd>Added</dd>\n            <dt class=\"rem\"></dt><dd>Removed</dd>\n          </dl>\n        </div>\n        <div class=\"diff\">\n  <ul class=\"entries\">\n      <li class=\"entry\">\n        <h2 id=\"file0\">\n          <a href=\"/LUCICodeRepository/nomaticIM/changeset/228/vendor/current/libgaim/buddyicon.c\" title=\"Show the changeset 228 restricted to vendor/current/libgaim/buddyicon.c\">vendor/current/libgaim/buddyicon.c</a>\n        </h2>\n        <table class=\"trac-diff inline\" summary=\"Differences\" cellspacing=\"0\">\n              <colgroup><col class=\"lineno\" /><col class=\"lineno\" /><col class=\"content\" /></colgroup>\n              <thead>\n                <tr>\n                  <th title=\"Revision 65\">\n                    <a title=\"Show revision 65 of this file in browser\" href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/buddyicon.c?rev=65#L78\">\n                      r65</a>\n                  </th>\n                  <th title=\"Revision 228\">\n                    <a title=\"Show revision 228 of this file in browser\" href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/buddyicon.c?rev=228#L78\">\n                      r228</a>\n                  </th>\n                  <td>\u00a0</td>\n                </tr>\n              </thead>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>78</th><th>78</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gaim_buddy_icon_ref(icon);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>79</th><th>79</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gaim_buddy_icon_set_data(icon, icon_data, icon_len);</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"last first\">\n                          <th>\u00a0</th><th>80</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; gaim_buddy_icon_set_path(icon, NULL);</ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>80</th><th>81</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>81</th><th>82</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; /* gaim_buddy_icon_set_data() makes blist.c or</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/buddyicon.c?rev=65#L135\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/buddyicon.c?rev=228#L136\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>135</th><th>136</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; g_free(icon-&gt;username);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>136</th><th>137</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; g_free(icon-&gt;data);</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"last first\">\n                          <th>\u00a0</th><th>138</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; g_free(icon-&gt;path);</ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>137</th><th>139</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; GAIM_DBUS_UNREGISTER_POINTER(icon);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>138</th><th>140</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; g_free(icon);</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/buddyicon.c?rev=65#L262\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/buddyicon.c?rev=228#L264\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>262</th><th>264</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_debug_error(\"buddyicon\", \"Unable to create file %s: %s\\n\",</span>\u00a0</td>\n                  </tr><tr>\n                          <th>263</th><th>265</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;filename, strerror(errno));</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"first\">\n                          <th>\u00a0</th><th>266</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g_free(filename);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>267</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g_free(random);</ins>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>\u00a0</th><th>268</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;</ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>264</th><th>269</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span>\u00a0</td>\n                  </tr><tr>\n                          <th>265</th><th>270</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/buddyicon.c?rev=65#L337\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/buddyicon.c?rev=228#L342\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>337</th><th>342</th><td class=\"l\"><span>}</span>\u00a0</td>\n                  </tr><tr>\n                          <th>338</th><th>343</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"first\">\n                          <th>\u00a0</th><th>344</th><td class=\"r\"><ins>void </ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>345</th><td class=\"r\"><ins>gaim_buddy_icon_set_path(GaimBuddyIcon *icon, const gchar *path)</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>346</th><td class=\"r\"><ins>{</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>347</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; g_return_if_fail(icon != NULL);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>348</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; </ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>349</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; g_free(icon-&gt;path);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>350</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; icon-&gt;path = g_strdup(path);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>351</th><td class=\"r\"><ins>}</ins>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>\u00a0</th><th>352</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>339</th><th>353</th><td class=\"l\"><span>GaimAccount *</span>\u00a0</td>\n                  </tr><tr>\n                          <th>340</th><th>354</th><td class=\"l\"><span>gaim_buddy_icon_get_account(const GaimBuddyIcon *icon)</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/buddyicon.c?rev=65#L362\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/buddyicon.c?rev=228#L376\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>362</th><th>376</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>363</th><th>377</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; return icon-&gt;data;</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"add\">\n                  <tr class=\"first\">\n                          <th>\u00a0</th><th>378</th><td class=\"r\"><ins>}</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>379</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>380</th><td class=\"r\"><ins>const char *</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>381</th><td class=\"r\"><ins>gaim_buddy_icon_get_path(GaimBuddyIcon *icon)</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>382</th><td class=\"r\"><ins>{</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>383</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; g_return_val_if_fail(icon != NULL, NULL);</ins>\u00a0</td>\n                  </tr><tr>\n                          <th>\u00a0</th><th>384</th><td class=\"r\"><ins></ins>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>\u00a0</th><th>385</th><td class=\"r\"><ins>&nbsp; &nbsp; &nbsp; &nbsp; return icon-&gt;path;</ins>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>364</th><th>386</th><td class=\"l\"><span>}</span>\u00a0</td>\n                  </tr><tr>\n                          <th>365</th><th>387</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/buddyicon.c?rev=65#L392\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/buddyicon.c?rev=228#L414\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>392</th><th>414</th><td class=\"l\"><span>void</span>\u00a0</td>\n                  </tr><tr>\n                          <th>393</th><th>415</th><td class=\"l\"><span>gaim_buddy_icons_set_for_user(GaimAccount *account, const char *username,</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>394</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <del>&nbsp; </del>void *icon_data, size_t icon_len)</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>416</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <ins></ins>void *icon_data, size_t icon_len)</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>395</th><th>417</th><td class=\"l\"><span>{</span>\u00a0</td>\n                  </tr><tr>\n                          <th>396</th><th>418</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; g_return_if_fail(account&nbsp; != NULL);</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/buddyicon.c?rev=65#L490\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/buddyicon.c?rev=228#L512\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>490</th><th>512</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>491</th><th>513</th><td class=\"l\"><span>char *gaim_buddy_icons_get_full_path(const char *icon) {</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"rem\">\n                  <tr class=\"first\">\n                          <th>492</th><th>\u00a0</th><td class=\"l\"><del>&nbsp; &nbsp; &nbsp; &nbsp; struct stat st;</del>\u00a0</td>\n                  </tr><tr class=\"last\">\n                          <th>493</th><th>\u00a0</th><td class=\"l\"><del></del>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>494</th><th>514</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; if (icon == NULL)</span>\u00a0</td>\n                  </tr><tr>\n                          <th>495</th><th>515</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return NULL;</span>\u00a0</td>\n                  </tr><tr>\n                          <th>496</th><th>516</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>497</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; if (g_<del>stat(icon, &amp;st) == 0</del>)</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>517</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; if (g_<ins>file_test(icon, G_FILE_TEST_IS_REGULAR)</ins>)</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>498</th><th>518</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return g_strdup(icon);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>499</th><th>519</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; else</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/buddyicon.c?rev=65#L527\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/buddyicon.c?rev=228#L547\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>527</th><th>547</th><td class=\"l\"><span>void gaim_buddy_icon_get_scale_size(GaimBuddyIconSpec *spec, int *width, int *height)</span>\u00a0</td>\n                  </tr><tr>\n                          <th>528</th><th>548</th><td class=\"l\"><span>{</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>529</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; if(spec &amp;&amp; spec-&gt;scale_rules &amp; GAIM_ICON_SCALE_DISPLAY) {</span>\u00a0</td>\n                      </tr><tr>\n                        <th>530</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; int new_width, new_height;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>531</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>532</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new_width = *width;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>533</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new_height = *height;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>534</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>535</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(*width &lt; spec-&gt;min_width)</span>\u00a0</td>\n                      </tr><tr>\n                        <th>536</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new_width = spec-&gt;min_width;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>537</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if(*width &gt; spec-&gt;max_width)</span>\u00a0</td>\n                      </tr><tr>\n                        <th>538</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new_width = spec-&gt;max_width;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>539</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>540</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(*height &lt; spec-&gt;min_height)</span>\u00a0</td>\n                      </tr><tr>\n                        <th>541</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new_height = spec-&gt;min_height;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>542</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if(*height&nbsp; &gt; spec-&gt;max_height)</span>\u00a0</td>\n                      </tr><tr>\n                        <th>543</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new_height = spec-&gt;max_height;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>544</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>545</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* preserve aspect ratio */</span>\u00a0</td>\n                      </tr><tr>\n                        <th>546</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ((double)*height * (double)new_width &gt;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>547</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (double)*width * (double)new_height) {</span>\u00a0</td>\n                      </tr><tr>\n                        <th>548</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new_width = 0.5 + (double)*width * (double)new_height / (double)*height;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>549</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span>\u00a0</td>\n                      </tr><tr>\n                        <th>550</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new_height = 0.5 + (double)*height * (double)new_width / (double)*width;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>551</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span>\u00a0</td>\n                      </tr><tr>\n                        <th>552</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>553</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *width = new_width;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>554</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *height = new_height;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>555</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span>\u00a0</td>\n                      </tr><tr>\n                        <th>556</th><th>\u00a0</th><td class=\"l\"><span>}</span>\u00a0</td>\n                      </tr><tr>\n                        <th>557</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>549</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; int new_width, new_height;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>550</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>551</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; new_width = *width;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>552</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; new_height = *height;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>553</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>554</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; if (*width &lt; spec-&gt;min_width)</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>555</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new_width = spec-&gt;min_width;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>556</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; else if (*width &gt; spec-&gt;max_width)</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>557</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new_width = spec-&gt;max_width;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>558</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>559</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; if (*height &lt; spec-&gt;min_height)</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>560</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new_height = spec-&gt;min_height;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>561</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; else if (*height &gt; spec-&gt;max_height)</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>562</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new_height = spec-&gt;max_height;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>563</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>564</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; /* preserve aspect ratio */</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>565</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; if ((double)*height * (double)new_width &gt;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>566</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (double)*width * (double)new_height) {</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>567</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new_width = 0.5 + (double)*width * (double)new_height / (double)*height;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>568</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; } else {</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>569</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new_height = 0.5 + (double)*height * (double)new_width / (double)*width;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>570</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>571</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>572</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; *width = new_width;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>573</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; *height = new_height;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>574</th><td class=\"r\"><span>}</span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>575</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr>\n            </tbody>\n        </table>\n      </li>\n  </ul>\n</div>\n        <div id=\"help\"><strong>Note:</strong> See <a href=\"/LUCICodeRepository/nomaticIM/wiki/TracChangeset\">TracChangeset</a>\n          for help on using the changeset viewer.</div>\n      </div>\n    </div>\n    <div id=\"altlinks\">\n      <h3>Download in other formats:</h3>\n      <ul>\n        <li class=\"first\">\n          <a rel=\"nofollow\" href=\"?format=diff&amp;new=228\" class=\"diff\">Unified Diff</a>\n        </li><li class=\"last\">\n          <a rel=\"nofollow\" href=\"?format=zip&amp;new=228\" class=\"zip\">Zip Archive</a>\n        </li>\n      </ul>\n    </div>\n    </div>\n    <div id=\"footer\" lang=\"en\" xml:lang=\"en\"><hr />\n      <a id=\"tracpowered\" href=\"http://trac.edgewall.org/\"><img src=\"/LUCICodeRepository/nomaticIM/chrome/common/trac_logo_mini.png\" height=\"30\" width=\"107\" alt=\"Trac Powered\" /></a>\n      <p class=\"left\">Powered by <a href=\"/LUCICodeRepository/nomaticIM/about\"><strong>Trac 1.0.1</strong></a><br />\n        By <a href=\"http://www.edgewall.org/\">Edgewall Software</a>.</p>\n      <p class=\"right\">All content copyright 2007-2008 by LUCI <br /><a href=\"http://luci.ics.uci.edu/\">http://luci.ics.uci.edu/</a></p>\n    </div>\n\t\t<div id=\"sitefooter\">\n\t\t\t<script src=\"http://www.google-analytics.com/urchin.js\" type=\"text/javascript\">\n\t\t\t</script>\n\t\t\t<script type=\"text/javascript\">\n\t\t\t\t_uacct = \"UA-338915-2\";\n\t\t\t\turchinTracker();\n\t\t\t</script>\n\t\t</div>\n\t</body>\n</html>", "id": 39918.0}