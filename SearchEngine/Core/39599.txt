{"text": " src server 28 February 2 6 index home todd release pdb2pqr 1 1 src server py CGI Server for PDB2PQR This module contains the various functions necessary to run PDB2PQR from a web server PDB2PQR An automated pipeline for the setup execution and analysis of Poisson Boltzmann electrostatics calculations Nathan A Baker baker biochem wustl edu Todd Dolinsky todd ccb wustl edu Dept of Biochemistry and Molecular Biophysics Center for Computational Biology Washington University in St Louis Jens Nielsen Jens Nielsen ucd ie University College Dublin Additional contributing authors listed in documentation and supporting package licenses Copyright c 2 3 2 6 Washington University in St Louis All Rights Reserved This file is part of PDB2PQR PDB2PQR is free software you can redistribute it and or modify it under the terms of the GNU General Public License as published by the Free Software Foundation either version 2 of the License or at your option any later version PDB2PQR is distributed in the hope that it will be useful but WITHOUT ANY WARRANTY without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE See the GNU General Public License for more details You should have received a copy of the GNU General Public License along with PDB2PQR if not write to the Free Software Foundation Inc 59 Temple Place Suite 33 Boston MA 2111 13 7 USA Modules os string sys time Functions cleanTmpdir Clean up the temp directory for CGI If the size of the directory is greater than LIMIT delete the older half of the files Since the files are stored by system time of creation this is an easier task createError name details Create an error results page for CGI based runs Parameters name The result file root name based on local time string details The details of the error string createResults header input name time Create the results web page for CGI based runs Parameters header The header of the PQR file string input A flag whether an input file has been created int tmpdir The resulting file directory string name The result file root name based on local time string time The time taken to run the script float getLoads Get the system load information for output and logging Returns loads A three entry list containing the 1 5 and 15 minute loads If the load file is not found return None getQuote path Get a quote to display for the refresh page Uses fortune to generate a quote Parameters path The path to the fortune script str Returns quote The quote to display str logRun options nettime size ff ip Log the CGI run for data analysis Log file format is as follows DATE FF SIZE OPTIONS TIME Parameters options The options used for this run dict nettime The total time taken for the run float size The final number of non HETATM atoms in the PDB file int ff The name of the ff used ip The ip address of the user printAcceptance name Print the first message to stdout web browser set the refresh to the id tmp html file Parameters name The ID of the HTML page to redirect to string printProgress name refreshname reftime starttime Print the progress of the server Parameters name The ID of the HTML page to write to string refreshname The name of the HTML page to refresh to string reftime The length of time to set the refresh wait to int starttime The time as returned by time time that the run started float setID time Given a floating point time time generate an ID Use the tenths of a second to differentiate Parameters time The current time time float Returns id The file id string startServer name Start the PDB2PQR server This function is necessary so that useful information can be displayed to the user otherwise nothing would be returned until the complete run finishes Parameters name The ID name of the final file to create string Returns pqrpath The complete path to the pqr file string Data LIMIT 5 LOADPATH proc loadavg LOCALPATH export home www html test LOGPATH export home www html test tmp usage txt REFRESHTIME 1 STYLESHEET http agave wustl edu css baker css TMPDIR tmp WEBNAME server html WEBSITE http agave wustl edu test author Todd Dolinsky date 28 February 2 6 Author Todd Dolinsky", "_id": "http://www.ics.uci.edu/~dock/pdb2pqr/pydoc/src.server.html", "title": "python: module src.server", "html": "\n<!doctype html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\">\n<html><head><title>Python: module src.server</title>\n</head><body bgcolor=\"#f0f0f8\">\n\n<table width=\"100%\" cellspacing=0 cellpadding=2 border=0 summary=\"heading\">\n<tr bgcolor=\"#7799ee\">\n<td valign=bottom>&nbsp;<br>\n<font color=\"#ffffff\" face=\"helvetica, arial\">&nbsp;<br><big><big><strong><a href=\"src.html\"><font color=\"#ffffff\">src</font></a>.server</strong></big></big> (28 February 2006)</font></td\n><td align=right valign=bottom\n><font color=\"#ffffff\" face=\"helvetica, arial\"><a href=\".\">index</a><br><a href=\"file:/home/todd/release/pdb2pqr-1.1.0/src/server.py\">/home/todd/release/pdb2pqr-1.1.0/src/server.py</a></font></td></tr></table>\n    <p><tt>CGI&nbsp;Server&nbsp;for&nbsp;PDB2PQR<br>\n&nbsp;<br>\nThis&nbsp;module&nbsp;contains&nbsp;the&nbsp;various&nbsp;functions&nbsp;necessary&nbsp;to&nbsp;run&nbsp;PDB2PQR<br>\nfrom&nbsp;a&nbsp;web&nbsp;server.<br>\n&nbsp;<br>\n----------------------------<br>\n&nbsp;<br>\nPDB2PQR&nbsp;--&nbsp;An&nbsp;automated&nbsp;pipeline&nbsp;for&nbsp;the&nbsp;setup,&nbsp;execution,&nbsp;and&nbsp;analysis&nbsp;of<br>\nPoisson-Boltzmann&nbsp;electrostatics&nbsp;calculations<br>\n&nbsp;<br>\nNathan&nbsp;A.&nbsp;Baker&nbsp;(baker@biochem.wustl.edu)<br>\nTodd&nbsp;Dolinsky&nbsp;(todd@ccb.wustl.edu)<br>\nDept.&nbsp;of&nbsp;Biochemistry&nbsp;and&nbsp;Molecular&nbsp;Biophysics<br>\nCenter&nbsp;for&nbsp;Computational&nbsp;Biology<br>\nWashington&nbsp;University&nbsp;in&nbsp;St.&nbsp;Louis<br>\n&nbsp;<br>\nJens&nbsp;Nielsen&nbsp;(Jens.Nielsen@ucd.ie)<br>\nUniversity&nbsp;College&nbsp;Dublin<br>\n&nbsp;<br>\nAdditional&nbsp;contributing&nbsp;authors&nbsp;listed&nbsp;in&nbsp;documentation&nbsp;and&nbsp;supporting<br>\npackage&nbsp;licenses.<br>\n&nbsp;<br>\nCopyright&nbsp;(c)&nbsp;2003-2006.&nbsp;&nbsp;Washington&nbsp;University&nbsp;in&nbsp;St.&nbsp;Louis.&nbsp;&nbsp;<br>\nAll&nbsp;Rights&nbsp;Reserved.<br>\n&nbsp;<br>\nThis&nbsp;file&nbsp;is&nbsp;part&nbsp;of&nbsp;PDB2PQR.<br>\n&nbsp;<br>\nPDB2PQR&nbsp;is&nbsp;free&nbsp;software;&nbsp;you&nbsp;can&nbsp;redistribute&nbsp;it&nbsp;and/or&nbsp;modify<br>\nit&nbsp;under&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;GNU&nbsp;General&nbsp;Public&nbsp;License&nbsp;as&nbsp;published&nbsp;by<br>\nthe&nbsp;Free&nbsp;Software&nbsp;Foundation;&nbsp;either&nbsp;version&nbsp;2&nbsp;of&nbsp;the&nbsp;License,&nbsp;or<br>\n(at&nbsp;your&nbsp;option)&nbsp;any&nbsp;later&nbsp;version.<br>\n&nbsp;<br>\nPDB2PQR&nbsp;is&nbsp;distributed&nbsp;in&nbsp;the&nbsp;hope&nbsp;that&nbsp;it&nbsp;will&nbsp;be&nbsp;useful,<br>\nbut&nbsp;WITHOUT&nbsp;ANY&nbsp;WARRANTY;&nbsp;without&nbsp;even&nbsp;the&nbsp;implied&nbsp;warranty&nbsp;of<br>\nMERCHANTABILITY&nbsp;or&nbsp;FITNESS&nbsp;FOR&nbsp;A&nbsp;PARTICULAR&nbsp;PURPOSE.&nbsp;&nbsp;See&nbsp;the<br>\nGNU&nbsp;General&nbsp;Public&nbsp;License&nbsp;for&nbsp;more&nbsp;details.<br>\n&nbsp;<br>\nYou&nbsp;should&nbsp;have&nbsp;received&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;GNU&nbsp;General&nbsp;Public&nbsp;License<br>\nalong&nbsp;with&nbsp;PDB2PQR;&nbsp;if&nbsp;not,&nbsp;write&nbsp;to&nbsp;the&nbsp;Free&nbsp;Software<br>\nFoundation,&nbsp;Inc.,&nbsp;59&nbsp;Temple&nbsp;Place,&nbsp;Suite&nbsp;330,&nbsp;Boston,&nbsp;MA&nbsp;02111-1307&nbsp;&nbsp;USA<br>\n&nbsp;<br>\n----------------------------</tt></p>\n<p>\n<table width=\"100%\" cellspacing=0 cellpadding=2 border=0 summary=\"section\">\n<tr bgcolor=\"#aa55cc\">\n<td colspan=3 valign=bottom>&nbsp;<br>\n<font color=\"#fffff\" face=\"helvetica, arial\"><big><strong>Modules</strong></big></font></td></tr>\n    \n<tr><td bgcolor=\"#aa55cc\"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>\n<td width=\"100%\"><table width=\"100%\" summary=\"list\"><tr><td width=\"25%\" valign=top><a href=\"os.html\">os</a><br>\n</td><td width=\"25%\" valign=top><a href=\"string.html\">string</a><br>\n</td><td width=\"25%\" valign=top><a href=\"sys.html\">sys</a><br>\n</td><td width=\"25%\" valign=top><a href=\"time.html\">time</a><br>\n</td></tr></table></td></tr></table><p>\n<table width=\"100%\" cellspacing=0 cellpadding=2 border=0 summary=\"section\">\n<tr bgcolor=\"#eeaa77\">\n<td colspan=3 valign=bottom>&nbsp;<br>\n<font color=\"#ffffff\" face=\"helvetica, arial\"><big><strong>Functions</strong></big></font></td></tr>\n    \n<tr><td bgcolor=\"#eeaa77\"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>\n<td width=\"100%\"><dl><dt><a name=\"-cleanTmpdir\"><strong>cleanTmpdir</strong></a>()</dt><dd><tt>Clean&nbsp;up&nbsp;the&nbsp;temp&nbsp;directory&nbsp;for&nbsp;CGI.&nbsp;&nbsp;If&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;directory<br>\nis&nbsp;greater&nbsp;than&nbsp;LIMIT,&nbsp;delete&nbsp;the&nbsp;older&nbsp;half&nbsp;of&nbsp;the&nbsp;files.&nbsp;&nbsp;Since<br>\nthe&nbsp;files&nbsp;are&nbsp;stored&nbsp;by&nbsp;system&nbsp;time&nbsp;of&nbsp;creation,&nbsp;this&nbsp;is&nbsp;an<br>\neasier&nbsp;task.</tt></dd></dl>\n <dl><dt><a name=\"-createError\"><strong>createError</strong></a>(name, details)</dt><dd><tt>Create&nbsp;an&nbsp;error&nbsp;results&nbsp;page&nbsp;for&nbsp;CGI-based&nbsp;runs<br>\n&nbsp;<br>\nParameters<br>\n&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;result&nbsp;file&nbsp;root&nbsp;name,&nbsp;based&nbsp;on&nbsp;local&nbsp;time&nbsp;(string)<br>\n&nbsp;&nbsp;&nbsp;&nbsp;details:&nbsp;The&nbsp;details&nbsp;of&nbsp;the&nbsp;error&nbsp;(string)</tt></dd></dl>\n <dl><dt><a name=\"-createResults\"><strong>createResults</strong></a>(header, input, name, time)</dt><dd><tt>Create&nbsp;the&nbsp;results&nbsp;web&nbsp;page&nbsp;for&nbsp;CGI-based&nbsp;runs<br>\n&nbsp;<br>\nParameters<br>\n&nbsp;&nbsp;&nbsp;&nbsp;header:&nbsp;The&nbsp;header&nbsp;of&nbsp;the&nbsp;PQR&nbsp;file&nbsp;(string)<br>\n&nbsp;&nbsp;&nbsp;&nbsp;input:&nbsp;&nbsp;&nbsp;A&nbsp;flag&nbsp;whether&nbsp;an&nbsp;input&nbsp;file&nbsp;has&nbsp;been&nbsp;created&nbsp;(int)<br>\n&nbsp;&nbsp;&nbsp;&nbsp;tmpdir:&nbsp;&nbsp;The&nbsp;resulting&nbsp;file&nbsp;directory&nbsp;(string)<br>\n&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;result&nbsp;file&nbsp;root&nbsp;name,&nbsp;based&nbsp;on&nbsp;local&nbsp;time&nbsp;(string)<br>\n&nbsp;&nbsp;&nbsp;&nbsp;time:&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;time&nbsp;taken&nbsp;to&nbsp;run&nbsp;the&nbsp;script&nbsp;(float)</tt></dd></dl>\n <dl><dt><a name=\"-getLoads\"><strong>getLoads</strong></a>()</dt><dd><tt>Get&nbsp;the&nbsp;system&nbsp;load&nbsp;information&nbsp;for&nbsp;output&nbsp;and&nbsp;logging<br>\n&nbsp;<br>\nReturns<br>\n&nbsp;&nbsp;&nbsp;&nbsp;loads:&nbsp;&nbsp;A&nbsp;three&nbsp;entry&nbsp;list&nbsp;containing&nbsp;the&nbsp;1,&nbsp;5,&nbsp;and<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15&nbsp;minute&nbsp;loads.&nbsp;If&nbsp;the&nbsp;load&nbsp;file&nbsp;is&nbsp;not&nbsp;found,<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None.</tt></dd></dl>\n <dl><dt><a name=\"-getQuote\"><strong>getQuote</strong></a>(path)</dt><dd><tt>Get&nbsp;a&nbsp;quote&nbsp;to&nbsp;display&nbsp;for&nbsp;the&nbsp;refresh&nbsp;page.<br>\nUses&nbsp;fortune&nbsp;to&nbsp;generate&nbsp;a&nbsp;quote.<br>\n&nbsp;<br>\nParameters:<br>\n&nbsp;&nbsp;&nbsp;&nbsp;path:&nbsp;&nbsp;&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;fortune&nbsp;script&nbsp;(str)<br>\nReturns:<br>\n&nbsp;&nbsp;&nbsp;&nbsp;quote:&nbsp;&nbsp;&nbsp;The&nbsp;quote&nbsp;to&nbsp;display&nbsp;(str)</tt></dd></dl>\n <dl><dt><a name=\"-logRun\"><strong>logRun</strong></a>(options, nettime, size, ff, ip)</dt><dd><tt>Log&nbsp;the&nbsp;CGI&nbsp;run&nbsp;for&nbsp;data&nbsp;analysis.&nbsp;&nbsp;Log&nbsp;file&nbsp;format&nbsp;is&nbsp;as&nbsp;follows:<br>\n&nbsp;<br>\nDATE&nbsp;&nbsp;FF&nbsp;&nbsp;SIZE&nbsp;&nbsp;OPTIONS&nbsp;&nbsp;&nbsp;TIME<br>\n&nbsp;<br>\nParameters<br>\n&nbsp;&nbsp;&nbsp;&nbsp;options:&nbsp;The&nbsp;options&nbsp;used&nbsp;for&nbsp;this&nbsp;run&nbsp;(dict)<br>\n&nbsp;&nbsp;&nbsp;&nbsp;nettime:&nbsp;The&nbsp;total&nbsp;time&nbsp;taken&nbsp;for&nbsp;the&nbsp;run&nbsp;(float)<br>\n&nbsp;&nbsp;&nbsp;&nbsp;size:&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;final&nbsp;number&nbsp;of&nbsp;non-HETATM&nbsp;atoms&nbsp;in&nbsp;the&nbsp;PDB&nbsp;file&nbsp;(int)<br>\n&nbsp;&nbsp;&nbsp;&nbsp;ff:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;name&nbsp;of&nbsp;the&nbsp;ff&nbsp;used<br>\n&nbsp;&nbsp;&nbsp;&nbsp;ip:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;ip&nbsp;address&nbsp;of&nbsp;the&nbsp;user</tt></dd></dl>\n <dl><dt><a name=\"-printAcceptance\"><strong>printAcceptance</strong></a>(name)</dt><dd><tt>Print&nbsp;the&nbsp;first&nbsp;message&nbsp;to&nbsp;stdout&nbsp;(web&nbsp;browser)&nbsp;-&nbsp;set&nbsp;the<br>\nrefresh&nbsp;to&nbsp;the&nbsp;&lt;id&gt;-tmp.html&nbsp;file.<br>\n&nbsp;<br>\nParameters<br>\n&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;HTML&nbsp;page&nbsp;to&nbsp;redirect&nbsp;to&nbsp;(string)</tt></dd></dl>\n <dl><dt><a name=\"-printProgress\"><strong>printProgress</strong></a>(name, refreshname, reftime, starttime)</dt><dd><tt>Print&nbsp;the&nbsp;progress&nbsp;of&nbsp;the&nbsp;server<br>\n&nbsp;<br>\nParameters<br>\n&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;HTML&nbsp;page&nbsp;to&nbsp;write&nbsp;to&nbsp;(string)<br>\n&nbsp;&nbsp;&nbsp;&nbsp;refreshname:&nbsp;The&nbsp;name&nbsp;of&nbsp;the&nbsp;HTML&nbsp;page&nbsp;to&nbsp;refresh&nbsp;to&nbsp;(string)<br>\n&nbsp;&nbsp;&nbsp;&nbsp;reftime:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;length&nbsp;of&nbsp;time&nbsp;to&nbsp;set&nbsp;the&nbsp;refresh&nbsp;wait&nbsp;to&nbsp;(int)<br>\n&nbsp;&nbsp;&nbsp;&nbsp;starttime:&nbsp;&nbsp;&nbsp;The&nbsp;time&nbsp;as&nbsp;returned&nbsp;by&nbsp;time.time()&nbsp;that&nbsp;the&nbsp;run&nbsp;started&nbsp;(float)</tt></dd></dl>\n <dl><dt><a name=\"-setID\"><strong>setID</strong></a>(time)</dt><dd><tt>Given&nbsp;a&nbsp;floating&nbsp;point&nbsp;time.time(),&nbsp;generate&nbsp;an&nbsp;ID.<br>\nUse&nbsp;the&nbsp;tenths&nbsp;of&nbsp;a&nbsp;second&nbsp;to&nbsp;differentiate.<br>\n&nbsp;<br>\nParameters<br>\n&nbsp;&nbsp;&nbsp;&nbsp;time:&nbsp;&nbsp;The&nbsp;current&nbsp;time.time()&nbsp;(float)<br>\nReturns<br>\n&nbsp;&nbsp;&nbsp;&nbsp;id&nbsp;&nbsp;:&nbsp;&nbsp;The&nbsp;file&nbsp;id&nbsp;(string)</tt></dd></dl>\n <dl><dt><a name=\"-startServer\"><strong>startServer</strong></a>(name)</dt><dd><tt>Start&nbsp;the&nbsp;PDB2PQR&nbsp;server.&nbsp;&nbsp;This&nbsp;function&nbsp;is&nbsp;necessary&nbsp;so<br>\nthat&nbsp;useful&nbsp;information&nbsp;can&nbsp;be&nbsp;displayed&nbsp;to&nbsp;the&nbsp;user&nbsp;-&nbsp;otherwise<br>\nnothing&nbsp;would&nbsp;be&nbsp;returned&nbsp;until&nbsp;the&nbsp;complete&nbsp;run&nbsp;finishes.<br>\n&nbsp;<br>\nParameters<br>\n&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;ID&nbsp;name&nbsp;of&nbsp;the&nbsp;final&nbsp;file&nbsp;to&nbsp;create&nbsp;(string)<br>\nReturns<br>\n&nbsp;&nbsp;&nbsp;&nbsp;pqrpath:&nbsp;The&nbsp;complete&nbsp;path&nbsp;to&nbsp;the&nbsp;pqr&nbsp;file&nbsp;(string)</tt></dd></dl>\n</td></tr></table><p>\n<table width=\"100%\" cellspacing=0 cellpadding=2 border=0 summary=\"section\">\n<tr bgcolor=\"#55aa55\">\n<td colspan=3 valign=bottom>&nbsp;<br>\n<font color=\"#ffffff\" face=\"helvetica, arial\"><big><strong>Data</strong></big></font></td></tr>\n    \n<tr><td bgcolor=\"#55aa55\"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>\n<td width=\"100%\"><strong>LIMIT</strong> = 500.0<br>\n<strong>LOADPATH</strong> = '/proc/loadavg'<br>\n<strong>LOCALPATH</strong> = '/export/home/www/html/test/'<br>\n<strong>LOGPATH</strong> = '/export/home/www/html/test//tmp//usage.txt'<br>\n<strong>REFRESHTIME</strong> = 10<br>\n<strong>STYLESHEET</strong> = 'http://agave.wustl.edu/css/baker.css'<br>\n<strong>TMPDIR</strong> = 'tmp/'<br>\n<strong>WEBNAME</strong> = 'server.html'<br>\n<strong>WEBSITE</strong> = 'http://agave.wustl.edu/test/'<br>\n<strong>__author__</strong> = 'Todd Dolinsky'<br>\n<strong>__date__</strong> = '28 February 2006'</td></tr></table><p>\n<table width=\"100%\" cellspacing=0 cellpadding=2 border=0 summary=\"section\">\n<tr bgcolor=\"#7799ee\">\n<td colspan=3 valign=bottom>&nbsp;<br>\n<font color=\"#ffffff\" face=\"helvetica, arial\"><big><strong>Author</strong></big></font></td></tr>\n    \n<tr><td bgcolor=\"#7799ee\"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>\n<td width=\"100%\">Todd&nbsp;Dolinsky</td></tr></table>\n</body></html>", "id": 39599.0}