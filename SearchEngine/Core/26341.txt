{"text": "Project 3b Character Rigging Goal To rig a simple character Prerequisite Exercises Hierarchy Character rigging involves a lot of complexity and a certain amount of indirection To allow a character to animate you place a set of joints inside it which will act similar to bones in a human skeleton Eventually when a joint rotates it will deform the mesh around it like you might expect However animators will not be touching the joints directly Instead they will animate cons For controls also called anims that will control the bones that will deform the mesh This may seem convoluted but it allows a lot of flexibility to give the animator what they need We will be using the Animation menu set for this project Unlike most of what you ve done in Maya so far many of the results of rigging can t be seen in the viewport You ll have to use a combination of the outliner and the Hypergraph editor to see what is really going on So here are a couple of tips Follow the directions carefully With rigging the order you do things and even the order you select things matters You may even want to check off the steps on a printout as you go Test test test These are going to be the control setups that animators are going to be using for hours on end so keep checking to make sure they work as they are supposed to Oh yeah and test The first task is to download several files We will be rigging the Mouse character You will also need these scripts this shelf and these icons These scripts were created by Jason Scheifer a superstar of rigging and will occasionally useful for this assignment You will also need the following anim files for setting up anim curves In Windows navigate to Libraries Documents maya 2 13 In a Mac navigate to users username Library Preferences Autodesk maya 2 13 Extract the scripts zip archive into the scripts folder Go back up to maya 2 13 then navigate to the prefs folder Place the shelf Rigging mel in shelvesExtract the icons zip into the icons folder If you already have Maya open you will have to restart When you do you should have a new Rigging shelf We will explain the different scripts as we need them First we have to design the skeleton that will move the mouse We will start with the spine Open up the mouse file In the Side view use the Skeleton Joint Tool to create a joint chain along the spine Start at the base of the mouse and work up following the picture below If the joints appear too big or small you can adjust their size by going to Display Animation Joint Size this only affects how they are displayed and not any internal structure While in the joint tool Backspace will undo the last joint Enter will complete the joint chain and exit the joint tool From the bottom up name these four joints root joint spine 1 joint spine 2 joint and head joint They will appear in the outliner grouped under each other so use the symbol to expand Having a clear and consistent naming scheme is a great help in rigging since it allows you to automatically handle certain tasks with scripts Now we will set up the skeleton for the tail Create a three joint chain 3 clicks 3 joints 2 bones from the base of the tail to the tip We will now split the chain into 8 segments Make sure the first two joints of the chain are selected Use the Split selected joint script from the Rigging shelf to split both joints into 4 segments which will split the chain into a total of 8 segments Rename the joints tail 1 joint tail 2 joint tail 3 joint etc This can be done manually or the Hash Rename script can help with this Select the joints in the order you want them to be numbered Press the Hash Rename script button on your rigging shelf Type tail joint into the box and press Enter The script will replace the hash mark with a number in the order the joints were selected Parent tail 1 joint under the root joint once you are done We will need to create a number of joint chains to control the various parts of the head The mouth and nose chains are the simplest and can be created in the Side view Create one joint at the base of the jaw and another at the tip Name these joints mouth 1 joint and mouth 2 joint Repeat for the nose naming the joints nose 1 joint and nose 2 joint Parent these chains under the head joint Now we will create the ear joint chains Create a simple joint chain in the Side view from the base of the ear to the tip 2 joints 1 bone In the perspective view use translate in the negative X direction to move the base joint to the base of the left ear The joint chain will still not be completely inside the ear so rotate the base joint until the tip is inside Do not move the end joint only rotate the base After you have rotated the base joint select it and go to Modify Freeze Transformations This will eliminate the rotate that you added Name these joints left ear 1 joint left ear 2 joint Now mirror the chain Selecting the base joint and go to Skeleton Mirror Joint Options Miror across YZ miror behavior and have it replace left with right in the joints Click Apply and you have a pair of right ear joints that are properly named Parent these chains under the head joint Our last set of joints will be for controlling the eyes Create a single joint for each eye To place the joint exactly in the middle of the eye we are going to create and then remove a constraint Select the eye then the joint in that order it may be easiest to select them in the outliner using Ctrl click to select multiple objects Then go to Constrain Point Options Un check Maintain offset and click Add Delete the constraint that is created under the joint in the Outliner The constraint should be created under the joint If it was created under the eye you selected the eye and the joint in the wrong order and you will need to use Undo to get the eye back where it should be Once the constraint is deleted the joint should remain in the center of the eye Name these joints left eye joint and right eye joint Parent these joints under the head joint Now that we have our basic joints in place we can start adding more sophisticated control over them We ll start with the tail It would be a hassle to control each individual joint in the tail and so we will use an IK Spline to control them instead First we create the curve that the tail will try to follow To start use the CV Curve Tool found in Create CV Curve Tool to create a curve passing through the tail Make sure the Curve degree is set to 3 Cubic in the Tool Settings Snap each new CV to a joint in the tail chain using vertex snapping the v key It may be helpful to temporarily hide the body geometry so you don t snap to verticies on either side of the tail Check that your curve is straight from the top view and un hide the body if you hid it Name this curve tail curve Now we will create the actual IK Spline to control the joints Go to Skeleton IK Spline Handle Tool Options and disable Auto create curve Using the tool select tail 9 joint then tail 1 joint then tail curve The IK handle will be created as soon as you select the curve Name the newly created IK Handle tail ik handle You will not be able to control the tail just yet Select the tail curve and create a group Edit Group or Ctrl g Name this group tail grp Place the tail ik handle into this group Eventually we will place other things associated with controlling the tail in this group Unparent the tail grp select and press Shift P Create three single joints snapping them to tail 1 joint tail 5 joint and tail 9 joint respectively Holding the v key and clicking will not work because the joint tool will just try to start a chain from the joint you clicked on Instead use point constraint creation deletion to do the snapping Name these joints curve control 1 joint curve control 2 joint and curve control 3 joint It would be annoying if the animator had to select these control joints and so we will make some anims for them to animate instead Create three NURBS circles and place them near the three curve control joints Snap each of the pivots to the respective control joint Name these anims tail base anim tail mid anim and tail end anim Place the tail anims into the tail grp Be sure to Freeze Transformations on these anims Parent each control joint under its anim We will now set up the anims to control the IK spline curve we created earlier Before we do this we want to make sure everything is properly zeroed out Select the tail grp and Freeze Transformations on it first in Freeze Transformations Options uncheck Scale be sure to recheck when done Select the three control joints and then the tail curve and go to Skin Bind Skin Smooth Bind This will make the curve control joints deform the curve which will in turn deform the tail joint chain Test Try moving the control anims and see how the tail joints react More testing try rotating the tail grp Here we see a problem known as double rotation The tail curve and the tail anims are both children of the tail group so they both see the rotation The tail curve also sees the rotation through the binding of the tail control joints to the tail curve To fix this we need to break one of these rotation paths Go to the attributes of the tail curve and turn off Inherits Transform Test Now when you rotate the tail grp everything should work as expected Now we need to reduce the clutter an animator has to deal with Lock and hide all the channels but the rotate ones on the tail base anim Lock and hide all the channels but the rotate and translate ones for tail mid anim and tail end anim Hide tail curve tail ik handle and curve control joints Let s move to the body and create anims for it Create some NURBS circles for the spine anims Manipulate them so that they fit around the body near the four spine joints Freeze Transformations on the anims and name them root anim spine 1 anim spine 2 anim and head anim Lock and hide all channels except the rotation for the top three spine anims Leave the rotate and translate unlocked and visible for the root anim Parent the head anim under spine 2 anim Parent spine 2 anim under spine 1 anim Parent spine 1 anim under root anim We will have these anims control the spine through a set of constraints Select the root anim then the root joint and use Constrain Parent Options and make sure to create the constriant with Maintain offset checked For the other three spine joints Constrain Orient Options them to their respective anims with Maintain offset turned on To make the tail follow the root anim select the root anim then the tail grp and go to Constrain Parent Test move the root anim the whole skeleton and tail anims should move with it We will deal with the mouth nose and ears in a similar manner Place a NURBS circle near the nose mouth and the ears Freeze Transformations on these circles and name them mouth anim nose anim left ear anim and right ear anim Lock and hide all channels except rotate for these anims Use Orient constraints to allow these anims to control the first joint of these chains Move the pivot of each anim to the center of the joint it is rotating Group all the head anims into a head anims group Select the head anim then the head anims group and go to Constrain Parent Test the head anims should follow when you turn the head each head anim should control the expected joint To rig the eyes first we will bind the eye geometry to the eye joints so that we can see if our eye rig is working Select one of the eye joints and its respective geometry and go to Skin Bind Skin Smooth Bind Options In the options set Bind to to Selected joints Do the same for the other eye Test ensure that moving the joint moves the eye don t forget to set it back to rotation Now when you rotate the eye joints the eye geometry should follow Go to the front view and create two NURBS circles snapping their centers to the middle of the eyes Move these circles out in front of the face Freeze Transformations on them and name them left eye anim and right eye anim Create another NURBS circle that surrounds the other two Freeze Transformations on this and name it both eyes anim Parent both eye anims under the both eyes anim Now to make the anims control the eyes Select either the left or right eye anim then its respective eye joint and go to Constrain Aim Options Turn on Maintain offset and change the Aim vector to 1 Do this for the other eye as well We want the eyes to move with the head so parent both eyes anim to the head anim Lock and hide all channels on all three eye anims except translate Test make sure the eyes follow when both eyes anim is moved and that each eye anim controls the eyes individually Now for some clean up and organization Use file Import Opions and uncheck Group and Use namespaces and press Import Find the circleArrow ma file which should be in the rig controls zip archive you downloaded and import it Scale it until it covers the base of the mouse Freeze Transformations on it and name it mouse top con Group all the geometry and name the group mesh grp Parent the mesh grp tail grp head anims root joint and root anim under the mouse top con The mouse top con should now be the only top level object besides the cameras and default sets Test move the top con around You may notice that when you move the top con that the eyes fly out of the head Let s fix that Like with the tail the eyes are being translated by the eye joints but are also a child of the top con and so receive a translation when it is moved The solution to this is simple Go to the attributes of the mesh grp and turn off Inherits Transform The eyes should now move correctly The rest of the geometry won t move but we will fix that soon Create a new Display Layer called anims and add all of your anims except the top con to it Create another layer called mesh and add the mesh grp to it Create another layer called joints and add root joint to it Before we bind the skeleton first we are going to create a few Blend Shapes Blend Shapes are customized deformations that can capture subtle and complex changes that would be difficult to control with joints First we need to create a new shape to blend to Duplicate the body geometry and move it to the side Now move the geometry verticies around to get the shape you want In this case we will be making the left eye blink Create the Blend Shape select the deformed geometry then the original and go to Create Deformers Blend Shape Options Call the BlendShape node eye blinks You can animate the Blend Shape by going to Window Animation Editors Blend Shape Starting with making another duplicate of the body geometry repeat the process for the right eye but instead of going through Create Deformers use Edit Deformers Blend Shape Add instead If you want to modify your Blend Shapes later rename the duplicated geometry to something meaningful and hide it If you like the deformation you can delete the geometry and the Blend Shape will remain The last step is to bind the geometry to the skeleton and then do some touch up Select the body geometry and the root joint and go to Skin Bind Skin Smooth Bind Options Reset the settings to the defaults and then set Normalize Weights to Interactive Max influences to 1 turn off Maintain max influences and create NOTE If you are experiencing issues using the Flood operation try rebinding with max influences set to 2 To unbind an old skin select the bound mesh and go to Skin Detach Skin Now when you move your joints the geometry should deform with them You will probably notice that most of the deformations aren t that great To make sure that the correct parts of the mesh deform when a joint is moved you must go through a process called weight painting Selecting the mesh and going to Skin Edit Smooth Skin Paint Skin Weights Tool In the Tool Settings double check that Normalize Weights is set to Interactive In the Tool Settings you can select a joint and then you can paint what that joint affects on the mesh IMPORTANT For the Painter operation you should use Add or Smooth The Replace operation can give some strange results and so should be avoided Explanation Basically every vertex needs weights from different joints totaling up to one So if Replace causes the total joint weights to fall below that value Maya will attempt to distribute those unnassigned weight values to what it believes are the correct joints In this Maya is usually wrong Hold b and click and drag to adjust the brush size To save time you can use the Skin Edit Smooth Skin Mirror Skin Weights Options Make sure Mirror Across YZ and Closest point on surface are selected Choose positive to negative if you weight painted the left side of the mouse leave unchecked if you painted the right Tip Try flooding the Smooth operation several times on the tail joints to quickly get decently blended weights Make sure the Smooth radio button is selected then push the Flood button This will apply smooth to the entire mouse for that joint s weights Don t use flood with the Add operation otherwise the joint you have selected will start affecting ALL of your geometry The last step is to test the rig Make sure everything works correctly and touch up any weight painting that needs work Turn In You will be graded on the following Following instructionsWorking mouse rig remember to test Proper channels locked and hiddenCorrect anims Frozen transforms correct locked and hidden channelsMesh deforms as expectedClean Outliner Turn in the following A Maya file containing the rigged mouse with the following name convention lastname firstname project3b ma Credits This homework assignment was prepared by Barbara Mones ", "_id": "http://www.ics.uci.edu/~dramanan/teaching/ics162_fall12/hw/hw3b/", "title": "project 3b", "html": "<html>\n<head>\n\t<title>Project 3b</title>\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"../../style.css\" />\n</head>\n\n<body>\n<div class=\"bodyDiv\">\n\n<center><h1>Project 3b: Character Rigging</h1></center>\n\n<fieldset>\n<legend><strong>Goal</strong></legend>\nTo rig a simple character.\n</fieldset>\n\n<fieldset>\n<legend><strong>Prerequisite Exercises</strong></legend>\n<ul>\n\t<li><a href=\"../../exercises/hierarchy_exercise.html\">Hierarchy</a></li>\n</ul>\n</fieldset>\n\n<p>\nCharacter rigging involves a lot of complexity and a certain amount of indirection. To allow a character to animate, you place a set of joints inside it, which will act similar to bones in a human skeleton. Eventually, when a joint rotates, it will deform the mesh around it like you might expect. However, animators will not be touching the joints directly. Instead they will animate cons (For \"controls\", also called \"anims\") that will control the bones that will deform the mesh. This may seem convoluted, but it allows a lot of flexibility to give the animator what they need. We will be using the Animation menu set for this project.\n</p>\n<p>\nUnlike most of what you've done in Maya so far, many of the results of rigging can't be seen in the viewport.  You'll have to use a combination\nof the outliner and the Hypergraph editor to see what is really going on. So here are a couple of tips:\n<h3><ul>\n  <li> Follow the directions carefully.  With rigging, the order you do things, and even the order you select things matters. You may even want to check off the steps on a printout as you go.</li>\n  <li> Test, test, test.  These are going to be the control setups that animators are going to be using for hours on end, so keep checking to make sure they work as they are supposed to. Oh yeah, and test.</li>\n</ul></h3>\n</p>\n\n<ol>\n<li class=\"step\">\n<p>\nThe first task is to download several files. We will be rigging the <a href=\"../../maya_files/mouse.ma\">Mouse</a> character. You will also need these <a href=\"../../maya_files/scripts.zip\">scripts</a>, this <a href=\"../../maya_files/shelf_Rigging.mel\">shelf</a>, and these <a href=\"../../maya_files/icons.zip\">icons</a>. These scripts were created by Jason Scheifer, a superstar of rigging, and will occasionally useful for this assignment. You will also need the following <a href=\"../../maya_files/rig_controls.zip\">anim files</a> for setting up anim curves.</p>\n</li>\n\n<li class=\"step\">\n<p>In Windows, navigate to <strong>Libraries\\Documents\\maya\\2013</strong>. In a Mac, navigate to <strong>/users/[username]/Library/Preferences/Autodesk/maya/2013</strong>.\n<ul>\n\t<li>Extract the scripts.zip archive into the <strong>scripts</strong> folder. </li>\n\t<li>Go back up to ...\\maya\\2013\\ then navigate to the <strong>prefs</strong> folder. </li>\n\t<li>Place the shelf_Rigging.mel in <strong>shelves</strong></li>\n\t<li>Extract the icons.zip into the <strong>icons</strong> folder.</li>\n\t<li> If you already have Maya open, you will have to restart.</li>\n</ul>\t\nWhen you do you should have a new Rigging shelf. We will explain the different scripts as we need them.</p>\n</li>\n\n<img class=\"thumb\" src=\"images/shelf.png\" />\n\n<li class=\"step\">\n<p>\nFirst, we have to design the skeleton that will move the mouse.  We will start with the spine.\n<ul>\n\t<li>Open up the mouse file. </li>\n\t<li>In the Side view, use the <strong>Skeleton &rarr; Joint Tool</strong> to create a joint chain along the spine. Start at the base of the mouse and work up, following the picture below. If the joints appear too big or small, you can adjust their size by going to <strong>Display &rarr; Animation &rarr; Joint Size...</strong> (this only affects how they are displayed, and not any internal structure).\n\t<ul> While in the joint tool:\n\t  <li>Backspace will undo the last joint.</li>\n\t  <li>Enter will complete the joint chain and exit the joint tool.</li>\n</ul></li>\n\t<li> From the bottom up, name these four joints: <strong>root_joint, spine_1_joint, spine_2_joint</strong>, and <strong>head_joint</strong>. They will appear in the outliner grouped under each other, so use the + symbol to expand.  Having a clear and consistent naming scheme is a great help in rigging since it allows you to automatically handle certain tasks with scripts.</li>\n</ul></p>\n</li>\n\n<img class=\"thumb\" src=\"images/spine.jpg\" />\n\n<li class=\"step\">\n<p>\nNow we will set up the skeleton for the tail.\n\n<ul> \n\t  <li>Create a three joint chain (3 clicks, 3 joints, 2 bones) from the base of the tail to the tip.</li>\n\t  <li>We will now split the chain into <strong>8</strong> segments.\n\t\t<ul><li>Make sure the first two joints of the chain are selected</li> \n\t\t<li> Use the \"Split selected joint\" script from the Rigging shelf (<img style=\"vertical-align:middle; width:22; height:20;\" src=\"images/split_selected_joint_script.png\">) to split both joints into 4 segments, which will split the chain into a total of <strong>8</strong> segments.</li>\n\t</ul></li>\n</ul>\n</p>\n\n\n<img class=\"thumb\" src=\"images/tail.png\" />\n\n<ul>\n<li>Rename the joints <strong>tail_1_joint, tail_2_joint, tail_3_joint</strong>, etc. This can be done manually, or the &quot;Hash Rename&quot; script (<img style=\"vertical-align:middle; width:26; height:20;\" src=\"images/hash_rename_script.png\">) can help with this:\n<ul>\n  <li> Select the joints in the order you want them to be numbered</li>\n  <li> Press the &quot;Hash Rename&quot; script (<img style=\"vertical-align:middle; width:26; height:20;\" src=\"images/hash_rename_script.png\">) button on your rigging shelf.</li>\n  <li> Type <strong>tail_#_joint</strong> into the box and press <strong>Enter</strong>. The script will replace the hash mark with a number in the order the joints were selected.</li>\n</ul>\n<li>Parent <strong>tail_1_joint</strong> under the root_joint once you are done.</li>\n</ul>\n</li>\n\n<li class=\"step\">\n<p>\nWe will need to create a number of joint chains to control the various parts of the head. The mouth and nose chains are the simplest and can be created in the Side view. \n<ul>\n  <li> Create one joint at the base of the jaw and another at the tip. </li>\n  <li> Name these joints <strong>mouth_1_joint and mouth_2_joint</strong></li>\n  <li> Repeat for the nose, naming the joints <strong>nose_1_joint</strong> and <strong>nose_2_joint</strong>. </li>\n  <li> Parent these chains under the head_joint.</li>\n</ul></p>\n</li>\n\n<img class=\"thumb\" src=\"images/jaw_mouth.jpg\" />\n\n<li class=\"step\">\n<p>\nNow we will create the ear joint chains.\n <ul>\n  <li>Create a simple joint chain in the Side view from the base of the ear to the tip (2 joints, 1 bone). </li>\n  <li>In the perspective view, use translate in the negative X direction to move the base joint to the base of the left ear. The joint chain will still not be completely inside the ear, so rotate the base joint until the tip is inside. Do not move the end joint, only rotate the base.  </li>\n  <li>After you have rotated the base joint, select it and go to <strong>Modify &rarr; Freeze Transformations</strong>. This will eliminate the rotate that you added. </li>\n  <li>Name these joints <strong>left_ear_1_joint, left_ear_2_joint</strong> </li>\n  <li>Now mirror the chain. Selecting the base joint and go to <strong>Skeleton &rarr; Mirror Joint (Options)</strong>. Miror across YZ, miror behavior, and have it replace left with right in the joints.  Click Apply and you have a pair of right ear joints that are properly named. </li>\n  <li> Parent these chains under the head_joint.</li>\n</ul>\n</li>\n\n<img class=\"thumb\" src=\"images/ears.jpg\" />\n\n<li class=\"step\">\n<p> Our last set of joints will be for controlling the eyes.\n<ul>\n  <li>Create a single joint for each eye. To place the joint exactly in the middle of the eye, we are going to create and then remove a constraint.\n    <ul>\n      <li> Select the eye, then the joint <legend> in that order</legend> (it may be easiest to select them in the outliner using <strong>Ctrl-click</strong> to select multiple objects). Then go to <strong>Constrain &rarr; Point(Options)</strong>. Un-check <strong>Maintain offset</strong> and click <strong>Add</strong>.</li>\n      <li> Delete the constraint that is created under the joint in the Outliner. The constraint should be created under the joint. If it was created under the eye, you selected the eye and the joint in the wrong order and you will need to use <strong>Undo</strong> to get the eye back where it should be.  Once the constraint is deleted, the joint should remain in the center of the eye.</li>\n    </ul>\n  <li>Name these joints <strong>left_eye_joint</strong> and <strong>right_eye_joint</strong>. </li>\n  <li>Parent these joints under the head_joint.</li>\n</ul></p>\n</li>\n\n<img class=\"small\" src=\"images/head_side.jpg\" />\n<img class=\"small\" src=\"images/head_persp.jpg\" />\n\n<li class=\"step\">\n<p>\nNow that we have our basic joints in place, we can start adding more sophisticated control over them. We'll start with the tail. It would be a hassle to control each individual joint in the tail and so we will use an IK Spline to control them instead. First, we create the curve that the tail will try to follow:\n<ul>\n  <li> To start, use the CV Curve Tool (found in <b>Create &rarr; CV Curve Tool</b>) to create a curve passing through the tail. Make sure the Curve degree is set to \"3 Cubic\" in the Tool Settings.  Snap each new CV to a joint in the tail chain using vertex snapping (the <strong>v</strong> key). It may be helpful to temporarily hide the body geometry so you don't snap to verticies on either side of the tail. </li>\n  <li> Check that your curve is straight from the top view (and un-hide the body if you hid it).</li>\n  <li> Name this curve <strong>tail_curve</strong>.</li>\n  \n</ul>\nNow we will create the actual IK Spline to control the joints.\n<ul>\n  <li> Go to <strong>Skeleton &rarr; IK Spline Handle Tool (Options)</strong> and disable <strong>Auto create curve</strong>. </li>\n  <li> Using the tool, select tail_9_joint, then tail_1_joint, then tail_curve.  The IK handle will be created as soon as you select the curve. </li>\n  <li> Name the newly created IK Handle <strong>tail_ik_handle</strong>. You will not be able to control the tail just yet.</li>\n  <li> Select the tail_curve and create a group (<strong>Edit &rarr; Group</strong> or <strong>Ctrl-g</strong>).</li>\n  <li> Name this group <strong>tail_grp</strong>.</li>\n  <li> Place the <strong>tail_ik_handle</strong> into this group.  Eventually we will place other things associated with controlling the tail in this group.</li>\n  <li> Unparent the tail_grp (select and press <strong>Shift-P</strong>).</li>\n  <li> Create three single joints, snapping them to tail_1_joint, tail_5_joint, and tail_9_joint respectively. Holding the <strong>v</strong> key and clicking will not work, because the joint tool will just try to start a chain from the joint you clicked on.  Instead, use point constraint creation/deletion to do the snapping. </li>\n  <li> Name these joints <strong>curve_control_1_joint, curve_control_2_joint</strong>, and <strong>curve_control_3_joint</strong>. </li>\n</ul></p>\n</li>\n\n\n<li class=\"step\">\n<p>\nIt would be annoying if the animator had to select these control joints and so we will make some anims for them to animate instead. \n<ul>\n  <li> Create three NURBS circles and place them near the three curve control joints. </li>\n  <li> Snap each of the pivots to the respective control joint. </li>\n  <li> Name these anims <strong>tail_base_anim, tail_mid_anim</strong>, and <strong>tail_end_anim</strong>.</li>\n  <li> Place the tail anims into the tail_grp. </li>\n  <li>  Be sure to Freeze Transformations on these anims </li>\n  <li>  Parent each control joint under its anim.</li>\n</ul> </p>\n<img class=\"thumb\" src=\"images/tail_anims.jpg\" />\n<p>\nWe will now set up the anims to control the IK spline curve we created earlier.  Before we do this, we want to make sure everything is properly\nzeroed out. \n\n<ul>\n\t<li> Select the tail_grp and Freeze Transformations on it (first in Freeze Transformations Options uncheck Scale &mdash; be sure to recheck when done). </li>\n\t<li> Select the three control joints and then the <strong>tail_curve</strong> and go to <strong>Skin &rarr; Bind Skin &rarr; Smooth Bind</strong>.\n  This will make the curve control joints deform the curve, which will in turn deform the tail joint chain. </li>\n  <li> Test -- Try moving the control anims and see how the tail joints react.</li>\n<img class=\"thumb\" src=\"images/tail_curve.jpg\" />\n  <li> More testing -- try rotating the tail_grp.  Here we see a problem known as double rotation.  The tail curve and the tail anims are both children of the tail group, so they both see the rotation.  The tail curve also sees the rotation through the binding of the tail control joints to the tail curve. </li>\n  \n<img class=\"thumb\" src=\"images/double_rotate.png\" />\n  \n  <li> To fix this, we need to break one of these rotation paths.  Go to the attributes of the tail_curve and turn off Inherits Transform.</li>\n  <li> Test --  Now when you rotate the tail_grp, everything should work as expected.</li>\n  <img class=\"thumb\" src=\"images/single_rotate.png\" /></p>\n</ul>\nNow we need to reduce the clutter an animator has to deal with.\n <ul>\n  <li> Lock and hide all the channels but the rotate ones on the tail_base_anim.</li>\n  <li> Lock and hide all the channels but the rotate and translate ones for tail_mid_anim and tail_end_anim. </li>\n  <li> Hide tail_curve, tail_ik_handle, and curve control joints.</li>\n</ul>\n</li>\n\n\n\n<li class=\"step\">\n<p>\nLet's move to the body and create anims for it.\n <ul>\n  <li>Create some NURBS circles for the spine anims.</li>\n  <li> Manipulate them so that they fit around the body near the four spine joints.</li>\n  <li> Freeze Transformations on the anims and name them <strong>root_anim, spine_1_anim, spine_2_anim</strong>, and <strong>head_anim</strong>.</li>\n  <li> Lock and hide all channels except the rotation for the top three spine anims.</li>\n  <li> Leave the rotate and translate unlocked and visible for the root_anim.</li>\n  <li> Parent the head_anim under spine_2_anim. Parent spine_2_anim under spine_1_anim. Parent spine_1_anim under root_anim.</li>\n</ul></p>\n\n<p>\nWe will have these anims control the spine through a set of constraints. \n <ul>\n  <li>Select the root_anim, then the root_joint and use <strong>Constrain &rarr; Parent(Options)</strong> and make sure to create the constriant with <strong> Maintain offset</strong> checked.</li>\n  <li> For the other three spine joints, <strong>Constrain &rarr; Orient(Options)</strong> them to their respective anims with Maintain offset turned on.</li>\n  <li> To make the tail follow the root_anim, select the root_anim then the tail_grp and go to <strong>Constrain &rarr; Parent</strong>.</li>\n  <li> Test -- move the root anim, the whole skeleton and tail anims should move with it.</li>\n</ul></p>\n</li>\n\n<img class=\"thumb\" src=\"images/spine_anims.jpg\" />\n\n<li class=\"step\">\n<p>\nWe will deal with the mouth, nose, and ears in a similar manner. \n <ul>\n  <li>Place a NURBS circle near the nose, mouth, and the ears.</li>\n  <li> Freeze Transformations on these circles and name them <strong>mouth_anim, nose_anim, left_ear_anim</strong>, and <strong>right_ear_anim</strong>.</li>\n  <li> Lock and hide all channels except rotate for these anims.</li>\n  <li> Use Orient constraints to allow these anims to control the first joint of these chains.</li>\n  <li> Move the pivot of each anim to the center of the joint it is rotating.</li>\n  <li> Group all the head anims into a <strong>head_anims</strong> group.</li>\n  <li> Select the head_anim, then the head_anims group and go to <strong>Constrain &rarr; Parent</strong>.</li>\n  <li> Test - the head anims should follow when you turn the head, each head anim should control the expected joint.</li>\n</ul></p>\n</li>\n\n<img class=\"thumb\" src=\"images/head_anims.jpg\" />\n\n<li class=\"step\">\n<p>\nTo rig the eyes, first we will bind the eye geometry to the eye joints so that we can see if our eye rig is working. \n <ul>\n  <li>Select one of the eye joints and its respective geometry and go to <strong>Skin &rarr; Bind Skin &rarr; Smooth Bind (Options)</strong>. In the options, set \"Bind to\" to <strong>Selected joints</strong>.</li>\n  <li> Do the same for the other eye.</li>\n  <li> Test -- ensure that moving the joint moves the eye -- don't forget to set it back to 0 rotation.</li>\n</ul>\n  \nNow when you rotate the eye joints, the eye geometry should follow.</p>\n\n<p>\n <ul>\n  <li>Go to the front view and create two NURBS circles, snapping their centers to the middle of the eyes.</li>\n  <li> Move these circles out in front of the face.</li>\n  <li> Freeze Transformations on them and name them <strong>left_eye_anim</strong> and <strong>right_eye_anim</strong>.</li>\n  <li> Create another NURBS circle that surrounds the other two.</li>\n  <li> Freeze Transformations on this and name it <strong>both_eyes_anim</strong>.</li>\n  <li> Parent both eye anims under the both_eyes_anim.</li>\n</ul></p>\n\n<p>\nNow to make the anims control the eyes. \n <ul>\n  <li>Select either the left or right eye anim, then its respective eye joint and go to <strong>Constrain &rarr; Aim (Options)</strong>.</li>\n  <li> Turn on Maintain offset and change the Aim vector to <strong>(0, 0, 1)</strong>.</li>\n  <li> Do this for the other eye as well.</li>\n  <li> We want the eyes to move with the head so parent both_eyes_anim to the head_anim.</li>\n  <li> Lock and hide all channels on all three eye anims except translate.</li>\n  <li> Test -- make sure the eyes follow when both_eyes_anim is moved, and that each eye anim controls the eyes individually.</li>\n</ul></p>\n</li>\n\n<center>\n<img class=\"small\" src=\"images/eye_anims.jpg\" />\n<img class=\"small\" src=\"images/looking.jpg\" />\n</center>\n\n<li class=\"step\">\n<p>\nNow for some clean up and organization. \n <ul>\n  <li> Use file Import(Opions) and uncheck Group and Use namespaces and press Import.  Find the circleArrow.ma file, which should be in the rig_controls.zip archive you downloaded and import it.</li>\n  <li> Scale it until it covers the base of the mouse.</li>\n  <li> Freeze Transformations on it and name it <strong>mouse_top_con</strong>.</li>\n  <li> Group all the geometry and name the group <strong>mesh_grp</strong>.</li>\n  <li> Parent the mesh_grp, tail_grp, head_anims, root_joint, and root_anim under the mouse_top_con.</li>\n  <li> The mouse_top_con should now be the only top level object besides the cameras and default sets.</li>\n  <li> Test -- move the top con around. You may notice that when you move the top con that the eyes fly out of the head. Let's fix that.</li>\n</ul></p>\n\n<p>\n  Like with the tail, the eyes are being translated by the eye joints, but are also a child of the top con and so receive a translation when it is moved. The solution to this is simple.  \n  \n<ul>\n  <li>Go to the attributes of the mesh_grp and turn off Inherits Transform.</li>\n</ul>\n  \nThe eyes should now move correctly. The rest of the geometry won't move, but we will fix that soon.</p>\n\n<p>\n <ul>\n  <li>Create a new Display Layer called <strong>anims</strong> and add all of your anims except the top con to it.</li>\n  <li> Create another layer called <strong>mesh</strong> and add the mesh_grp to it.</li>\n  <li> Create another layer called <strong>joints</strong> and add root_joint to it.</li>\n</ul></p>\n</li>\n\n<img class=\"thumb\" src=\"images/top_con.jpg\" />\n\n<li class=\"step\">\n<p>\nBefore we bind the skeleton, first we are going to create a few Blend Shapes. Blend Shapes are customized deformations that can capture subtle and complex changes that would be difficult to control with joints. First we need to create a new shape to blend to.\n<ul>\n  <li> Duplicate the body geometry and move it to the side.</li>\n  <li>  Now move the geometry (verticies) around to get the shape you want. In this case, we will be making the left eye blink.</li>\n</ul></p>\n\n<p>\n <ul>\n  <li> Create the Blend Shape - select the deformed geometry, then the original and go to <strong>Create Deformers &rarr; Blend Shape (Options)</strong>.</li>\n  <li> Call the BlendShape node <strong>eye_blinks</strong>.</li>\n  <li> You can animate the Blend Shape by going to <strong>Window &rarr; Animation Editors &rarr; Blend Shape</strong>. </li>\n  <li> Starting with making another duplicate of the body geometry, repeat the process for the right eye, but instead of going through Create Deformers, use <strong>Edit Deformers &rarr; Blend Shape &rarr; Add</strong> instead. </li>\n  <li> If you want to modify your Blend Shapes later, rename the duplicated geometry to something meaningful and hide it. If you like the deformation you can delete the geometry and the Blend Shape will remain.</li>\n</ul></p>\n</li>\n\n<img class=\"thumb\" src=\"images/blink.jpg\" />\n\n<li class=\"step\">\n<p>\nThe last step is to bind the geometry to the skeleton and then do some touch up.  <ul>\n  <li>Select the body geometry and the root_joint and go to <strong>Skin &rarr; Bind Skin &rarr; Smooth Bind (Options)</strong>.</li>\n  <li>  Reset the settings to the defaults and then set Normalize Weights to <strong>Interactive</strong>, Max influences to <strong>1</strong>, turn  <strong>off</strong> Maintain max influences and create. <i>(NOTE: If you are experiencing issues using the \"Flood\" operation, try rebinding with max influences set to <b>2</b>.  To unbind an old skin select the bound mesh and go to Skin -> Detach Skin.)</i></li>\n</ul>\n<br>\n  Now when you move your joints, the geometry should deform with them. You will probably notice that most of the deformations aren't that great.</p>\n\n<p>\nTo make sure that the correct parts of the mesh deform when a joint is moved you must go through a process called weight painting.  \n<ul>\n  <li>Selecting the mesh and going to <strong>Skin &rarr; Edit Smooth Skin &rarr; Paint Skin Weights Tool</strong>. </li>\n  <li> In the Tool Settings, double check that <strong>Normalize Weights</strong> is set to <strong>Interactive</strong>.</li>\n  <li> In the Tool Settings, you can select a joint and then you can paint what that joint affects on the mesh. <b>IMPORTANT: For the Painter operation, you should use Add or Smooth.</b> The Replace operation can give some strange results and so should be avoided. <i>(Explanation: Basically every vertex needs weights from different joints totaling up to one.  So if Replace causes the total joint weights to fall below that value, Maya will attempt to distribute those unnassigned weight values to what it believes are the correct joints.  In this, Maya is usually wrong.)</i></li>\n  <li> Hold <strong>b</strong> and click and drag to adjust the brush size.</li>\n  <li> To save time, you can use the <strong>Skin &rarr; Edit Smooth Skin &rarr; Mirror Skin Weights(Options)</strong>. Make sure Mirror Across YZ and Closest point on surface are selected.  Choose positive to negative if you weight painted the left side of the mouse, leave unchecked if you painted the right. </li>\n</ul></p>\n\n<p>\n(Tip: Try flooding the <strong>Smooth</strong> operation several times on the tail joints to quickly get decently blended weights. Make sure the Smooth radio button is selected, then push the Flood button.  This will apply smooth to the entire mouse for that joint's weights.   Don't use flood with the <strong>Add</strong> operation, otherwise the joint you have selected will start affecting ALL of your geometry. )</p>\n\n</li>\n\n<img class=\"thumb\" src=\"images/weights.jpg\" />\n\n<li class=\"step\">\n<p>\nThe last step is to test the rig. Make sure everything works correctly and touch up any weight painting that needs work.</p>\n</li>\n\n<img class=\"thumb\" src=\"images/jumping.jpg\" />\n</ol>\n\n<fieldset>\n<legend><strong>Turn In</strong></legend>\nYou will be graded on the following:\n<ul>\n\t<li>Following instructions</li>\n\t<li><strong>Working</strong> mouse rig (remember to test)</li>\n\t<li>Proper channels locked and hidden</li>\n\t<li>Correct anims: Frozen transforms, correct locked and hidden channels</li>\n\t<li>Mesh deforms as expected</li>\n\t<li>Clean Outliner</li>\n</ul>\n\nTurn in the following:\n<ul>\n\t<li>A Maya file containing the rigged mouse with the following name convention: <strong>lastname_firstname_project3b.ma</strong></li>\n</ul>\n</fieldset>\n\n<h2>Credits</h2>\nThis homework assignment was prepared by <a\nhref=\"http://www.cs.washington.edu/education/courses/cse458/11au/\">Barbara\nMones</a>.\n\n</div>\n</body>\n</html>\n", "id": 26341.0}