{"text": "Lab 7 Datapath Synthesis and Gate level simulation Please read ALL instructions carefully Only properly submitted assignments will be graded Make sure to create a zip file named by your student id and submit required files in it Download this file to start It contains 2 directories Syn for synthesis and Sim for simulation If you have made some changes in the given interface between the datapath and the CPU controller to support shifting instructions keep all those changes in this lab Synthesis The goal of this lab is to have you synthesize the complete datapath with Quartus II design tool and then simulate the whole CPU including the synthesized gate level datapath and your controller from lab 6 The VHDL description of your design will be transformed into FPGA hardware The output of the synthesizer is a gate level design for a specific device selected This output can be used as an input to the ModelSim simulator to simulate at gate level with more realistic information delays etc Information to program an actual device is also generated First create a new project in Quartus II using the new project wizard When you start the program a window will pop out click Create a new project In the next screen enter the project directory project name and top level entity name The top level entity name should be datapath unless you change it In the next screen add all the files You can use the button besides the File Name box to browse Use the SYN directory from the zip file In the next screen select the target device Use the family Cyclone IV E and select Auto device selected by the Fitter The design tool will find the device where our design can fit In the next screen select the tool change like this Click Finish and you are done Now we ve have our project set up in Quartus II Next there are some changes you need to make to make the project synthesizable Change the memory model by adding a clock signal to it Now memory operation is synchronized with the falling edge of the clock Why falling edge You can use the memory model provided in the Sim directory this change has been applied to it Add an output port to the datapath to help debugging The synthesis tool will make the signals disappear In order to see what happens after synthesis we have to specifically assign a signal to the port This would show contents of ALUOut RegA RegB depending on your needs when you debug After you are done editing start the synthesis process by clicking this button Simulation The synthesis tool will generate a gate level VHDL code for the datapath as well as the delay information We can simulate this gate level VHDL code with delay information and with your controller from lab 6 in ModelSim First create a new project with the files in the Sim directory Second add the DATAPATH VHO file generated by the synthesis tool to the project It should be located under Syn simulation modelsim Next start simulation In the Start Simulation window click the SDF tab and add the delay information file XYZ sdo like this Remember to use INSTANCE names to correctly identify your datapath in the Apply to Region box Add signals to the waveform and simulate Submission A synthesis report including Device NameTotal logic elements usedTotal registers usedTotal pins usedTotal memory bits usedMaximum frequency All your files used for simulation including the synthesized datapath Screen shots capturing ModelSim Simulation Capture 3 different types of instructions and show the delays in signal change ", "_id": "http://www.ics.uci.edu/~ntdang/CS154/lab7.html", "title": "cs 154 lab 7: synthesis", "html": "<html xmlns:v=\"urn:schemas-microsoft-com:vml\"\r\nxmlns:o=\"urn:schemas-microsoft-com:office:office\"\r\nxmlns:w=\"urn:schemas-microsoft-com:office:word\"\r\nxmlns:x=\"urn:schemas-microsoft-com:office:excel\"\r\nxmlns:m=\"http://schemas.microsoft.com/office/2004/12/omml\"\r\nxmlns=\"http://www.w3.org/TR/REC-html40\" xmlns:ns0=\"http://macVmlSchemaUri\">\r\n\r\n<head>\r\n<meta http-equiv=Content-Type content=\"text/html; charset=windows-1252\">\r\n<meta name=ProgId content=Word.Document>\r\n<meta name=Generator content=\"Microsoft Word 12\">\r\n<meta name=Originator content=\"Microsoft Word 12\">\r\n<link rel=File-List href=\"lab7_1_files/filelist.xml\">\r\n<link rel=Edit-Time-Data href=\"lab7_1_files/editdata.mso\">\r\n<!--[if !mso]>\r\n<style>\r\nv\\:* {behavior:url(#default#VML);}\r\no\\:* {behavior:url(#default#VML);}\r\nw\\:* {behavior:url(#default#VML);}\r\n.shape {behavior:url(#default#VML);}\r\n</style>\r\n<![endif]-->\r\n<title>CS 154 Lab 7: Synthesis</title>\r\n<!--[if gte mso 9]><xml>\r\n <o:DocumentProperties>\r\n  <o:Author>Dang,Nga Thi Thanh</o:Author>\r\n  <o:Template>Normal</o:Template>\r\n  <o:LastAuthor>Dang,Nga Thi Thanh</o:LastAuthor>\r\n  <o:Revision>2</o:Revision>\r\n  <o:TotalTime>54</o:TotalTime>\r\n  <o:Created>2014-06-04T03:03:00Z</o:Created>\r\n  <o:LastSaved>2014-06-04T03:03:00Z</o:LastSaved>\r\n  <o:Pages>2</o:Pages>\r\n  <o:Words>607</o:Words>\r\n  <o:Characters>3465</o:Characters>\r\n  <o:Company>Bren School of Information and Computer Sciences</o:Company>\r\n  <o:Lines>28</o:Lines>\r\n  <o:Paragraphs>8</o:Paragraphs>\r\n  <o:CharactersWithSpaces>4064</o:CharactersWithSpaces>\r\n  <o:Version>12.00</o:Version>\r\n </o:DocumentProperties>\r\n <o:OfficeDocumentSettings>\r\n  <o:AllowPNG/>\r\n </o:OfficeDocumentSettings>\r\n</xml><![endif]-->\r\n<link rel=themeData href=\"lab7_1_files/themedata.thmx\">\r\n<link rel=colorSchemeMapping href=\"lab7_1_files/colorschememapping.xml\">\r\n<!--[if gte mso 9]><xml>\r\n <w:WordDocument>\r\n  <w:Zoom>150</w:Zoom>\r\n  <w:SpellingState>Clean</w:SpellingState>\r\n  <w:GrammarState>Clean</w:GrammarState>\r\n  <w:TrackMoves>false</w:TrackMoves>\r\n  <w:TrackFormatting/>\r\n  <w:ValidateAgainstSchemas/>\r\n  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>\r\n  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>\r\n  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>\r\n  <w:DoNotPromoteQF/>\r\n  <w:LidThemeOther>EN-US</w:LidThemeOther>\r\n  <w:LidThemeAsian>X-NONE</w:LidThemeAsian>\r\n  <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript>\r\n  <w:Compatibility>\r\n   <w:BreakWrappedTables/>\r\n   <w:SnapToGridInCell/>\r\n   <w:WrapTextWithPunct/>\r\n   <w:UseAsianBreakRules/>\r\n   <w:DontGrowAutofit/>\r\n   <w:SplitPgBreakAndParaMark/>\r\n   <w:DontVertAlignCellWithSp/>\r\n   <w:DontBreakConstrainedForcedTables/>\r\n   <w:DontVertAlignInTxbx/>\r\n   <w:Word11KerningPairs/>\r\n   <w:CachedColBalance/>\r\n  </w:Compatibility>\r\n  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>\r\n  <m:mathPr>\r\n   <m:mathFont m:val=\"Cambria Math\"/>\r\n   <m:brkBin m:val=\"before\"/>\r\n   <m:brkBinSub m:val=\"&#45;-\"/>\r\n   <m:smallFrac m:val=\"off\"/>\r\n   <m:dispDef/>\r\n   <m:lMargin m:val=\"0\"/>\r\n   <m:rMargin m:val=\"0\"/>\r\n   <m:defJc m:val=\"centerGroup\"/>\r\n   <m:wrapIndent m:val=\"1440\"/>\r\n   <m:intLim m:val=\"subSup\"/>\r\n   <m:naryLim m:val=\"undOvr\"/>\r\n  </m:mathPr></w:WordDocument>\r\n</xml><![endif]--><!--[if gte mso 9]><xml>\r\n <w:LatentStyles DefLockedState=\"false\" DefUnhideWhenUsed=\"false\"\r\n  DefSemiHidden=\"false\" DefQFormat=\"false\" LatentStyleCount=\"267\">\r\n  <w:LsdException Locked=\"false\" QFormat=\"true\" Name=\"Normal\"/>\r\n  <w:LsdException Locked=\"false\" Priority=\"9\" QFormat=\"true\" Name=\"heading 1\"/>\r\n  <w:LsdException Locked=\"false\" Priority=\"9\" QFormat=\"true\" Name=\"heading 2\"/>\r\n  <w:LsdException Locked=\"false\" Priority=\"9\" QFormat=\"true\" Name=\"heading 3\"/>\r\n  <w:LsdException Locked=\"false\" SemiHidden=\"true\" UnhideWhenUsed=\"true\"\r\n   QFormat=\"true\" Name=\"heading 4\"/>\r\n  <w:LsdException Locked=\"false\" SemiHidden=\"true\" UnhideWhenUsed=\"true\"\r\n   QFormat=\"true\" Name=\"heading 5\"/>\r\n  <w:LsdException Locked=\"false\" SemiHidden=\"true\" UnhideWhenUsed=\"true\"\r\n   QFormat=\"true\" Name=\"heading 6\"/>\r\n  <w:LsdException Locked=\"false\" SemiHidden=\"true\" UnhideWhenUsed=\"true\"\r\n   QFormat=\"true\" Name=\"heading 7\"/>\r\n  <w:LsdException Locked=\"false\" SemiHidden=\"true\" UnhideWhenUsed=\"true\"\r\n   QFormat=\"true\" Name=\"heading 8\"/>\r\n  <w:LsdException Locked=\"false\" SemiHidden=\"true\" UnhideWhenUsed=\"true\"\r\n   QFormat=\"true\" Name=\"heading 9\"/>\r\n  <w:LsdException Locked=\"false\" SemiHidden=\"true\" UnhideWhenUsed=\"true\"\r\n   QFormat=\"true\" Name=\"caption\"/>\r\n  <w:LsdException Locked=\"false\" QFormat=\"true\" Name=\"Title\"/>\r\n  <w:LsdException Locked=\"false\" Priority=\"1\" Name=\"Default Paragraph Font\"/>\r\n  <w:LsdException Locked=\"false\" QFormat=\"true\" Name=\"Subtitle\"/>\r\n  <w:LsdException Locked=\"false\" QFormat=\"true\" Name=\"Strong\"/>\r\n  <w:LsdException Locked=\"false\" QFormat=\"true\" Name=\"Emphasis\"/>\r\n  <w:LsdException Locked=\"false\" Priority=\"99\" Name=\"Normal (Web)\"/>\r\n  <w:LsdException Locked=\"false\" Priority=\"99\" Name=\"No List\"/>\r\n  <w:LsdException Locked=\"false\" Priority=\"99\" Name=\"Balloon Text\"/>\r\n  <w:LsdException Locked=\"false\" QFormat=\"true\" Name=\"No Spacing\"/>\r\n  <w:LsdException Locked=\"false\" QFormat=\"true\" Name=\"List Paragraph\"/>\r\n  <w:LsdException Locked=\"false\" QFormat=\"true\" Name=\"Quote\"/>\r\n  <w:LsdException Locked=\"false\" QFormat=\"true\" Name=\"Intense Quote\"/>\r\n  <w:LsdException Locked=\"false\" QFormat=\"true\" Name=\"Subtle Emphasis\"/>\r\n  <w:LsdException Locked=\"false\" QFormat=\"true\" Name=\"Intense Emphasis\"/>\r\n  <w:LsdException Locked=\"false\" QFormat=\"true\" Name=\"Subtle Reference\"/>\r\n  <w:LsdException Locked=\"false\" QFormat=\"true\" Name=\"Intense Reference\"/>\r\n  <w:LsdException Locked=\"false\" QFormat=\"true\" Name=\"Book Title\"/>\r\n  <w:LsdException Locked=\"false\" SemiHidden=\"true\" UnhideWhenUsed=\"true\"\r\n   QFormat=\"true\" Name=\"TOC Heading\"/>\r\n </w:LatentStyles>\r\n</xml><![endif]-->\r\n<style>\r\n<!--\r\n /* Font Definitions */\r\n @font-face\r\n\t{font-family:\"Cambria Math\";\r\n\tpanose-1:2 4 5 3 5 4 6 3 2 4;\r\n\tmso-font-charset:0;\r\n\tmso-generic-font-family:roman;\r\n\tmso-font-pitch:variable;\r\n\tmso-font-signature:-536870145 1107305727 0 0 415 0;}\r\n@font-face\r\n\t{font-family:Tahoma;\r\n\tpanose-1:2 11 6 4 3 5 4 4 2 4;\r\n\tmso-font-charset:0;\r\n\tmso-generic-font-family:swiss;\r\n\tmso-font-pitch:variable;\r\n\tmso-font-signature:-520081665 -1073717157 41 0 66047 0;}\r\n /* Style Definitions */\r\n p.MsoNormal, li.MsoNormal, div.MsoNormal\r\n\t{mso-style-unhide:no;\r\n\tmso-style-qformat:yes;\r\n\tmso-style-parent:\"\";\r\n\tmargin:0in;\r\n\tmargin-bottom:.0001pt;\r\n\tmso-pagination:widow-orphan;\r\n\tfont-size:12.0pt;\r\n\tfont-family:\"Times New Roman\",\"serif\";\r\n\tmso-fareast-font-family:\"Times New Roman\";\r\n\tmso-fareast-theme-font:minor-fareast;\r\n\tmso-bidi-font-family:\"Times New Roman\";\r\n\tmso-bidi-theme-font:minor-bidi;}\r\nh1\r\n\t{mso-style-priority:9;\r\n\tmso-style-unhide:no;\r\n\tmso-style-qformat:yes;\r\n\tmso-style-link:\"Heading 1 Char\";\r\n\tmargin:0in;\r\n\tmargin-bottom:.0001pt;\r\n\tmso-pagination:widow-orphan;\r\n\tmso-outline-level:1;\r\n\tfont-size:24.0pt;\r\n\tfont-family:\"Times New Roman\",\"serif\";\r\n\tmso-fareast-font-family:\"Times New Roman\";\r\n\tmso-fareast-theme-font:minor-fareast;\r\n\tmso-bidi-font-family:\"Times New Roman\";\r\n\tmso-bidi-theme-font:minor-bidi;\r\n\tfont-weight:bold;}\r\nh2\r\n\t{mso-style-priority:9;\r\n\tmso-style-unhide:no;\r\n\tmso-style-qformat:yes;\r\n\tmso-style-link:\"Heading 2 Char\";\r\n\tmargin:0in;\r\n\tmargin-bottom:.0001pt;\r\n\tmso-pagination:widow-orphan;\r\n\tmso-outline-level:2;\r\n\tfont-size:18.0pt;\r\n\tfont-family:\"Times New Roman\",\"serif\";\r\n\tmso-fareast-font-family:\"Times New Roman\";\r\n\tmso-fareast-theme-font:minor-fareast;\r\n\tmso-bidi-font-family:\"Times New Roman\";\r\n\tmso-bidi-theme-font:minor-bidi;\r\n\tfont-weight:bold;}\r\nh3\r\n\t{mso-style-priority:9;\r\n\tmso-style-unhide:no;\r\n\tmso-style-qformat:yes;\r\n\tmso-style-link:\"Heading 3 Char\";\r\n\tmargin:0in;\r\n\tmargin-bottom:.0001pt;\r\n\tmso-pagination:widow-orphan;\r\n\tmso-outline-level:3;\r\n\tfont-size:13.5pt;\r\n\tfont-family:\"Times New Roman\",\"serif\";\r\n\tmso-fareast-font-family:\"Times New Roman\";\r\n\tmso-fareast-theme-font:minor-fareast;\r\n\tmso-bidi-font-family:\"Times New Roman\";\r\n\tmso-bidi-theme-font:minor-bidi;\r\n\tfont-weight:bold;}\r\na:link, span.MsoHyperlink\r\n\t{mso-style-unhide:no;\r\n\tcolor:blue;\r\n\ttext-decoration:underline;\r\n\ttext-underline:single;}\r\na:visited, span.MsoHyperlinkFollowed\r\n\t{mso-style-unhide:no;\r\n\tcolor:purple;\r\n\ttext-decoration:underline;\r\n\ttext-underline:single;}\r\np\r\n\t{mso-style-priority:99;\r\n\tmso-style-unhide:no;\r\n\tmargin:0in;\r\n\tmargin-bottom:.0001pt;\r\n\tmso-pagination:widow-orphan;\r\n\tfont-size:12.0pt;\r\n\tfont-family:\"Times New Roman\",\"serif\";\r\n\tmso-fareast-font-family:\"Times New Roman\";\r\n\tmso-fareast-theme-font:minor-fareast;}\r\np.MsoAcetate, li.MsoAcetate, div.MsoAcetate\r\n\t{mso-style-priority:99;\r\n\tmso-style-unhide:no;\r\n\tmso-style-link:\"Balloon Text Char\";\r\n\tmargin:0in;\r\n\tmargin-bottom:.0001pt;\r\n\tmso-pagination:widow-orphan;\r\n\tfont-size:8.0pt;\r\n\tfont-family:\"Tahoma\",\"sans-serif\";\r\n\tmso-fareast-font-family:\"Times New Roman\";\r\n\tmso-fareast-theme-font:minor-fareast;\r\n\tmso-bidi-font-family:\"Times New Roman\";\r\n\tmso-bidi-theme-font:minor-bidi;}\r\nspan.Heading1Char\r\n\t{mso-style-name:\"Heading 1 Char\";\r\n\tmso-style-priority:9;\r\n\tmso-style-unhide:no;\r\n\tmso-style-locked:yes;\r\n\tmso-style-link:\"Heading 1\";\r\n\tmso-ansi-font-size:14.0pt;\r\n\tmso-bidi-font-size:14.0pt;\r\n\tfont-family:\"Cambria\",\"serif\";\r\n\tmso-ascii-font-family:Cambria;\r\n\tmso-ascii-theme-font:major-latin;\r\n\tmso-fareast-font-family:\"Times New Roman\";\r\n\tmso-fareast-theme-font:major-fareast;\r\n\tmso-hansi-font-family:Cambria;\r\n\tmso-hansi-theme-font:major-latin;\r\n\tmso-bidi-font-family:\"Times New Roman\";\r\n\tmso-bidi-theme-font:major-bidi;\r\n\tcolor:#365F91;\r\n\tfont-weight:bold;}\r\nspan.Heading2Char\r\n\t{mso-style-name:\"Heading 2 Char\";\r\n\tmso-style-priority:9;\r\n\tmso-style-unhide:no;\r\n\tmso-style-locked:yes;\r\n\tmso-style-link:\"Heading 2\";\r\n\tmso-ansi-font-size:13.0pt;\r\n\tmso-bidi-font-size:13.0pt;\r\n\tfont-family:\"Cambria\",\"serif\";\r\n\tmso-ascii-font-family:Cambria;\r\n\tmso-ascii-theme-font:major-latin;\r\n\tmso-fareast-font-family:\"Times New Roman\";\r\n\tmso-fareast-theme-font:major-fareast;\r\n\tmso-hansi-font-family:Cambria;\r\n\tmso-hansi-theme-font:major-latin;\r\n\tmso-bidi-font-family:\"Times New Roman\";\r\n\tmso-bidi-theme-font:major-bidi;\r\n\tcolor:#4F81BD;\r\n\tfont-weight:bold;}\r\nspan.Heading3Char\r\n\t{mso-style-name:\"Heading 3 Char\";\r\n\tmso-style-priority:9;\r\n\tmso-style-unhide:no;\r\n\tmso-style-locked:yes;\r\n\tmso-style-link:\"Heading 3\";\r\n\tmso-ansi-font-size:12.0pt;\r\n\tmso-bidi-font-size:12.0pt;\r\n\tfont-family:\"Cambria\",\"serif\";\r\n\tmso-ascii-font-family:Cambria;\r\n\tmso-ascii-theme-font:major-latin;\r\n\tmso-fareast-font-family:\"Times New Roman\";\r\n\tmso-fareast-theme-font:major-fareast;\r\n\tmso-hansi-font-family:Cambria;\r\n\tmso-hansi-theme-font:major-latin;\r\n\tmso-bidi-font-family:\"Times New Roman\";\r\n\tmso-bidi-theme-font:major-bidi;\r\n\tcolor:#4F81BD;\r\n\tfont-weight:bold;}\r\nspan.BalloonTextChar\r\n\t{mso-style-name:\"Balloon Text Char\";\r\n\tmso-style-priority:99;\r\n\tmso-style-unhide:no;\r\n\tmso-style-locked:yes;\r\n\tmso-style-link:\"Balloon Text\";\r\n\tmso-ansi-font-size:8.0pt;\r\n\tmso-bidi-font-size:8.0pt;\r\n\tfont-family:\"Tahoma\",\"sans-serif\";\r\n\tmso-ascii-font-family:Tahoma;\r\n\tmso-fareast-font-family:\"Times New Roman\";\r\n\tmso-fareast-theme-font:minor-fareast;\r\n\tmso-hansi-font-family:Tahoma;\r\n\tmso-bidi-font-family:Tahoma;}\r\nspan.SpellE\r\n\t{mso-style-name:\"\";\r\n\tmso-spl-e:yes;}\r\n.MsoChpDefault\r\n\t{mso-style-type:export-only;\r\n\tmso-default-props:yes;\r\n\tfont-size:10.0pt;\r\n\tmso-ansi-font-size:10.0pt;\r\n\tmso-bidi-font-size:10.0pt;}\r\n@page WordSection1\r\n\t{size:8.5in 11.0in;\r\n\tmargin:1.0in 1.0in 1.0in 1.0in;\r\n\tmso-header-margin:.5in;\r\n\tmso-footer-margin:.5in;\r\n\tmso-paper-source:0;}\r\ndiv.WordSection1\r\n\t{page:WordSection1;}\r\n /* List Definitions */\r\n @list l0\r\n\t{mso-list-id:146173090;\r\n\tmso-list-template-ids:-1637314926;}\r\n@list l0:level1\r\n\t{mso-level-tab-stop:.5in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l0:level2\r\n\t{mso-level-tab-stop:1.0in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l0:level3\r\n\t{mso-level-tab-stop:1.5in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l0:level4\r\n\t{mso-level-tab-stop:2.0in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l0:level5\r\n\t{mso-level-tab-stop:2.5in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l0:level6\r\n\t{mso-level-tab-stop:3.0in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l0:level7\r\n\t{mso-level-tab-stop:3.5in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l0:level8\r\n\t{mso-level-tab-stop:4.0in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l0:level9\r\n\t{mso-level-tab-stop:4.5in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l1\r\n\t{mso-list-id:536889991;\r\n\tmso-list-template-ids:-577592336;}\r\n@list l1:level1\r\n\t{mso-level-number-format:bullet;\r\n\tmso-level-text:\\F0B7;\r\n\tmso-level-tab-stop:.5in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;\r\n\tmso-ansi-font-size:10.0pt;\r\n\tfont-family:Symbol;}\r\n@list l1:level2\r\n\t{mso-level-number-format:bullet;\r\n\tmso-level-text:o;\r\n\tmso-level-tab-stop:1.0in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;\r\n\tmso-ansi-font-size:10.0pt;\r\n\tfont-family:\"Courier New\";\r\n\tmso-bidi-font-family:\"Times New Roman\";}\r\n@list l1:level3\r\n\t{mso-level-tab-stop:1.5in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l1:level4\r\n\t{mso-level-tab-stop:2.0in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l1:level5\r\n\t{mso-level-tab-stop:2.5in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l1:level6\r\n\t{mso-level-tab-stop:3.0in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l1:level7\r\n\t{mso-level-tab-stop:3.5in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l1:level8\r\n\t{mso-level-tab-stop:4.0in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l1:level9\r\n\t{mso-level-tab-stop:4.5in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l2\r\n\t{mso-list-id:1277102009;\r\n\tmso-list-template-ids:-80815468;}\r\n@list l2:level1\r\n\t{mso-level-number-format:bullet;\r\n\tmso-level-text:\\F0B7;\r\n\tmso-level-tab-stop:.5in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;\r\n\tmso-ansi-font-size:10.0pt;\r\n\tfont-family:Symbol;}\r\n@list l2:level2\r\n\t{mso-level-tab-stop:1.0in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l2:level3\r\n\t{mso-level-tab-stop:1.5in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l2:level4\r\n\t{mso-level-tab-stop:2.0in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l2:level5\r\n\t{mso-level-tab-stop:2.5in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l2:level6\r\n\t{mso-level-tab-stop:3.0in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l2:level7\r\n\t{mso-level-tab-stop:3.5in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l2:level8\r\n\t{mso-level-tab-stop:4.0in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l2:level9\r\n\t{mso-level-tab-stop:4.5in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l3\r\n\t{mso-list-id:1745953155;\r\n\tmso-list-template-ids:-1900803776;}\r\n@list l3:level1\r\n\t{mso-level-tab-stop:.5in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l3:level2\r\n\t{mso-level-tab-stop:1.0in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l3:level3\r\n\t{mso-level-tab-stop:1.5in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l3:level4\r\n\t{mso-level-tab-stop:2.0in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l3:level5\r\n\t{mso-level-tab-stop:2.5in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l3:level6\r\n\t{mso-level-tab-stop:3.0in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l3:level7\r\n\t{mso-level-tab-stop:3.5in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l3:level8\r\n\t{mso-level-tab-stop:4.0in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\n@list l3:level9\r\n\t{mso-level-tab-stop:4.5in;\r\n\tmso-level-number-position:left;\r\n\ttext-indent:-.25in;}\r\nol\r\n\t{margin-bottom:0in;}\r\nul\r\n\t{margin-bottom:0in;}\r\n-->\r\n</style>\r\n<!--[if gte mso 10]>\r\n<style>\r\n /* Style Definitions */\r\n table.MsoNormalTable\r\n\t{mso-style-name:\"Table Normal\";\r\n\tmso-tstyle-rowband-size:0;\r\n\tmso-tstyle-colband-size:0;\r\n\tmso-style-noshow:yes;\r\n\tmso-style-priority:99;\r\n\tmso-style-qformat:yes;\r\n\tmso-style-parent:\"\";\r\n\tmso-padding-alt:0in 5.4pt 0in 5.4pt;\r\n\tmso-para-margin:0in;\r\n\tmso-para-margin-bottom:.0001pt;\r\n\tmso-pagination:widow-orphan;\r\n\tfont-size:10.0pt;\r\n\tfont-family:\"Times New Roman\",\"serif\";}\r\n</style>\r\n<![endif]-->\r\n<meta name=Title content=\"CS 154 Lab 7: Synthesis\">\r\n<meta name=Keywords content=\"\">\r\n<!--[if gte mso 9]><xml>\r\n <o:shapedefaults v:ext=\"edit\" spidmax=\"3074\"/>\r\n</xml><![endif]--><!--[if gte mso 9]><xml>\r\n <o:shapelayout v:ext=\"edit\">\r\n  <o:idmap v:ext=\"edit\" data=\"1\"/>\r\n </o:shapelayout></xml><![endif]-->\r\n</head>\r\n\r\n<body lang=EN-US link=blue vlink=purple style='tab-interval:.5in'>\r\n\r\n<div class=WordSection1>\r\n\r\n<h1 style='margin-top:.1pt;margin-right:0in;margin-bottom:.1pt;margin-left:\r\n0in'><span style='mso-fareast-font-family:\"Times New Roman\"'>Lab 7: Datapath\r\nSynthesis and Gate-level simulation<o:p></o:p></span></h1>\r\n\r\n<h1 style='margin-top:.1pt;margin-right:0in;margin-bottom:.1pt;margin-left:\r\n0in'><span style='mso-fareast-font-family:\"Times New Roman\"'><o:p>&nbsp;</o:p></span></h1>\r\n\r\n<p style='margin-top:.1pt;margin-right:0in;margin-bottom:.1pt;margin-left:0in'>Please\r\nread <b style='mso-bidi-font-weight:normal'>ALL</b> instructions carefully. <b\r\nstyle='mso-bidi-font-weight:normal'>Only</b> <a href=\"index.html#SUBMISSION\">properly\r\nsubmitted</a> assignments will be graded. Make sure to create a zip file, named\r\nby your student id, and submit required files in it.</p>\r\n\r\n<p style='margin-top:.1pt;margin-right:0in;margin-bottom:.1pt;margin-left:0in'><o:p>&nbsp;</o:p></p>\r\n\r\n<p style='margin-top:.1pt;margin-right:0in;margin-bottom:.1pt;margin-left:0in'>Download\r\n<a href=\"lab7.zip\">this file</a> to start. It contains 2 directories: &quot;<span\r\nclass=SpellE>Syn</span>&quot; for synthesis and &quot;<span class=SpellE>Sim</span>&quot;\r\nfor simulation. If you have made some changes in the given interface between\r\nthe datapath and the CPU controller to support shifting instructions, keep all\r\nthose changes in this lab.</p>\r\n\r\n<h3 style='margin-top:10.0pt;margin-right:0in;margin-bottom:6.0pt;margin-left:\r\n0in'><span style='mso-fareast-font-family:\"Times New Roman\"'>Synthesis<o:p></o:p></span></h3>\r\n\r\n<p style='margin-top:.1pt;margin-right:0in;margin-bottom:.1pt;margin-left:0in'>The\r\ngoal of this lab is to have you synthesize the complete datapath with Quartus\r\nII design tool and then simulate the whole CPU including the synthesized\r\ngate-level datapath and your controller (from lab 6). The VHDL description of\r\nyour design will be transformed into FPGA hardware. The output of the\r\nsynthesizer is a gate-level design for a specific device selected. This output\r\ncan be used as an input to the ModelSim simulator to simulate at gate level,\r\nwith more realistic information (delays, etc). Information to program an actual\r\ndevice is also generated.</p>\r\n\r\n<p style='margin-top:.1pt;margin-right:0in;margin-bottom:.1pt;margin-left:0in'><o:p>&nbsp;</o:p></p>\r\n\r\n<p style='margin-top:.1pt;margin-right:0in;margin-bottom:.1pt;margin-left:0in'>First,\r\ncreate a new project in Quartus II using the &quot;new project wizard&quot;.</p>\r\n\r\n<ol style='margin-top:0in' start=1 type=1>\r\n <li class=MsoNormal style='margin-top:.1pt;margin-bottom:.1pt;mso-para-margin-top:\r\n     .01gd;mso-para-margin-bottom:.01gd;mso-list:l0 level1 lfo1;tab-stops:list .5in'><span\r\n     style='mso-fareast-font-family:\"Times New Roman\"'>When you start the\r\n     program, a window will pop out, click &quot;Create a new project&quot;<o:p></o:p></span></li>\r\n <li class=MsoNormal style='margin-top:.1pt;margin-bottom:.1pt;mso-para-margin-top:\r\n     .01gd;mso-para-margin-bottom:.01gd;mso-list:l0 level1 lfo1;tab-stops:list .5in'><span\r\n     style='mso-fareast-font-family:\"Times New Roman\"'>In the next screen,\r\n     enter the project directory, project name, and top-level entity name. The\r\n     top-level entity name should be &quot;datapath&quot; unless you change it.<o:p></o:p></span></li>\r\n <li class=MsoNormal style='margin-top:.1pt;margin-bottom:.1pt;mso-para-margin-top:\r\n     .01gd;mso-para-margin-bottom:.01gd;mso-list:l0 level1 lfo1;tab-stops:list .5in'><span\r\n     style='mso-fareast-font-family:\"Times New Roman\"'>In the next screen, add\r\n     all the files. You can use the &quot;...&quot; button besides the\r\n     &quot;File Name&quot; box to browse. Use the &quot;SYN&quot; directory\r\n     from the zip file.<o:p></o:p></span></li>\r\n <li class=MsoNormal style='margin-top:.1pt;margin-bottom:.1pt;mso-para-margin-top:\r\n     .01gd;mso-para-margin-bottom:.01gd;mso-list:l0 level1 lfo1;tab-stops:list .5in'><span\r\n     style='mso-fareast-font-family:\"Times New Roman\"'>In the next screen,\r\n     select the target device. Use the family &quot;Cyclone IV E&quot; and\r\n     select &quot;Auto device selected by the Fitter&quot;. The design tool\r\n     will find the device where our design can fit.<o:p></o:p></span></li>\r\n <li class=MsoNormal style='margin-top:.1pt;margin-bottom:.1pt;mso-para-margin-top:\r\n     .01gd;mso-para-margin-bottom:.01gd;mso-list:l0 level1 lfo1;tab-stops:list .5in'><span\r\n     style='mso-fareast-font-family:\"Times New Roman\"'>In the next screen,\r\n     select the tool change like this:</span><span style='mso-fareast-font-family:\r\n     \"Times New Roman\";mso-no-proof:yes'><img border=0 width=917 height=366\r\n     id=\"_x0000_i1027\" src=\"image/toolchain.PNG\" alt=\"ool chain select.\"></span><span\r\n     style='mso-fareast-font-family:\"Times New Roman\"'><o:p></o:p></span></li>\r\n</ol>\r\n\r\n<p class=MsoNormal style='margin-top:.1pt;margin-right:0in;margin-bottom:.1pt;\r\nmargin-left:.25in;mso-para-margin-top:.01gd;mso-para-margin-right:0in;\r\nmso-para-margin-bottom:.01gd;mso-para-margin-left:.25in'><span\r\nstyle='mso-fareast-font-family:\"Times New Roman\"'><o:p>&nbsp;</o:p></span></p>\r\n\r\n<ol style='margin-top:0in' start=6 type=1>\r\n <li class=MsoNormal style='margin-top:.1pt;margin-bottom:.1pt;mso-para-margin-top:\r\n     .01gd;mso-para-margin-bottom:.01gd;mso-list:l0 level1 lfo1;tab-stops:list .5in'><span\r\n     style='mso-fareast-font-family:\"Times New Roman\"'>Click Finish and you are\r\n     done.<o:p></o:p></span></li>\r\n</ol>\r\n\r\n<p class=MsoNormal style='margin-top:.1pt;margin-right:0in;margin-bottom:.1pt;\r\nmargin-left:.25in;mso-para-margin-top:.01gd;mso-para-margin-right:0in;\r\nmso-para-margin-bottom:.01gd;mso-para-margin-left:.25in'><span\r\nstyle='mso-fareast-font-family:\"Times New Roman\"'><o:p>&nbsp;</o:p></span></p>\r\n\r\n<p class=MsoNormal><span style='mso-fareast-font-family:\"Times New Roman\";\r\nmso-bidi-font-family:\"Times New Roman\"'>Now we've have our project set up in\r\nQuartus II. <o:p></o:p></span></p>\r\n\r\n<p class=MsoNormal><span style='mso-fareast-font-family:\"Times New Roman\";\r\nmso-bidi-font-family:\"Times New Roman\"'><o:p>&nbsp;</o:p></span></p>\r\n\r\n<p class=MsoNormal><span style='mso-fareast-font-family:\"Times New Roman\";\r\nmso-bidi-font-family:\"Times New Roman\"'>Next, there are some changes you need\r\nto make to make the project synthesizable:<o:p></o:p></span></p>\r\n\r\n<ol style='margin-top:0in' start=1 type=1>\r\n <li class=MsoNormal style='margin-top:.1pt;margin-bottom:.1pt;mso-para-margin-top:\r\n     .01gd;mso-para-margin-bottom:.01gd;mso-list:l3 level1 lfo2;tab-stops:list .5in'><span\r\n     style='mso-fareast-font-family:\"Times New Roman\"'>Change the memory model\r\n     by adding a clock signal to it. Now memory operation is synchronized with\r\n     the falling edge of the clock (Why falling edge?). You can use the memory\r\n     model provided in the </span>&quot;<span class=SpellE>Sim</span>&quot;\r\n     directory, this change has been applied to it.<span style='mso-fareast-font-family:\r\n     \"Times New Roman\"'><o:p></o:p></span></li>\r\n <li class=MsoNormal style='margin-top:.1pt;margin-bottom:.1pt;mso-para-margin-top:\r\n     .01gd;mso-para-margin-bottom:.01gd;mso-list:l3 level1 lfo2;tab-stops:list .5in'><span\r\n     style='mso-fareast-font-family:\"Times New Roman\"'>Add an output port to\r\n     the datapath to help debugging. The synthesis tool will make the signals\r\n     disappear. In order to see what happens after synthesis, we have to\r\n     specifically assign a signal to the port. This would show contents of <span\r\n     class=SpellE>ALUOut</span>, <span class=SpellE>RegA</span>, <span\r\n     class=SpellE>RegB</span> ... depending on your needs when you debug.<o:p></o:p></span></li>\r\n</ol>\r\n\r\n<p class=MsoNormal><span style='mso-fareast-font-family:\"Times New Roman\";\r\nmso-bidi-font-family:\"Times New Roman\"'>After you are done editing, start the\r\nsynthesis process by clicking this button: </span><span style='mso-fareast-font-family:\r\n\"Times New Roman\";mso-bidi-font-family:\"Times New Roman\";mso-no-proof:yes'><img\r\nborder=0 width=39 height=34 id=\"_x0000_i1026\" src=\"image/syn_button.PNG\"\r\nalt=\"ynthesis button\"></span><span style='mso-fareast-font-family:\"Times New Roman\";\r\nmso-bidi-font-family:\"Times New Roman\";mso-no-proof:yes'><o:p></o:p></span></p>\r\n\r\n<h3 style='margin-top:10.0pt;margin-right:0in;margin-bottom:6.0pt;margin-left:\r\n0in'><span style='mso-fareast-font-family:\"Times New Roman\"'>Simulation<o:p></o:p></span></h3>\r\n\r\n<p style='margin-top:.1pt;margin-right:0in;margin-bottom:.1pt;margin-left:0in'>The\r\nsynthesis tool will generate a gate-level VHDL code for the datapath as well as\r\nthe delay information. We can simulate this gate-level VHDL code, with delay\r\ninformation, and with your controller (from lab 6), in ModelSim.</p>\r\n\r\n<p style='margin-top:.1pt;margin-right:0in;margin-bottom:.1pt;margin-left:0in'><o:p>&nbsp;</o:p></p>\r\n\r\n<p style='margin-top:.1pt;margin-right:0in;margin-bottom:.1pt;margin-left:0in'>First,\r\ncreate a new project with the files in the &quot;<span class=SpellE>Sim</span>&quot;\r\ndirectory.</p>\r\n\r\n<p style='margin-top:.1pt;margin-right:0in;margin-bottom:.1pt;margin-left:0in'><o:p>&nbsp;</o:p></p>\r\n\r\n<p style='margin-top:.1pt;margin-right:0in;margin-bottom:.1pt;margin-left:0in'>Second,\r\nadd the DATAPATH.VHO file generated by the synthesis tool to the project. It\r\nshould be located under &quot;<span class=SpellE>Syn</span>\\simulation\\<span\r\nclass=SpellE>modelsim</span>&quot;.&nbsp;</p>\r\n\r\n<p style='margin-top:.1pt;margin-right:0in;margin-bottom:.1pt;margin-left:0in'><o:p>&nbsp;</o:p></p>\r\n\r\n<p style='margin-top:.1pt;margin-right:0in;margin-bottom:.1pt;margin-left:0in'>Next,\r\nstart simulation. In the &quot;Start Simulation&quot; window, click the\r\n&quot;SDF&quot; tab, and add the delay information file &quot;XYZ.sdo&quot;\r\nlike this: (Remember to use INSTANCE names to correctly identify your datapath\r\nin the &quot;Apply to Region&quot; box.)</p>\r\n\r\n<p class=MsoNormal><span style='mso-fareast-font-family:\"Times New Roman\";\r\nmso-bidi-font-family:\"Times New Roman\";mso-no-proof:yes'><img border=0\r\nwidth=739 height=636 id=\"_x0000_i1025\" src=\"image/SDF.PNG\" alt=\"elect sdf file\"></span><span\r\nstyle='mso-fareast-font-family:\"Times New Roman\";mso-bidi-font-family:\"Times New Roman\"'><o:p></o:p></span></p>\r\n\r\n<p style='margin-top:.1pt;margin-right:0in;margin-bottom:.1pt;margin-left:0in'><o:p>&nbsp;</o:p></p>\r\n\r\n<p style='margin-top:.1pt;margin-right:0in;margin-bottom:.1pt;margin-left:0in'>Add\r\nsignals to the waveform and simulate.</p>\r\n\r\n<h3 style='margin-top:.1pt;margin-right:0in;margin-bottom:.1pt;margin-left:\r\n0in'><span style='mso-fareast-font-family:\"Times New Roman\"'><o:p>&nbsp;</o:p></span></h3>\r\n\r\n<h3 style='margin-top:.1pt;margin-right:0in;margin-bottom:.1pt;margin-left:\r\n0in'><span style='mso-fareast-font-family:\"Times New Roman\"'>Submission:<o:p></o:p></span></h3>\r\n\r\n<ul style='margin-top:0in' type=disc>\r\n <li class=MsoNormal style='margin-top:.1pt;margin-bottom:.1pt;mso-para-margin-top:\r\n     .01gd;mso-para-margin-bottom:.01gd;mso-list:l1 level1 lfo3;tab-stops:list .5in'><span\r\n     style='mso-fareast-font-family:\"Times New Roman\"'>A synthesis report\r\n     including:<o:p></o:p></span></li>\r\n <ul style='margin-top:0in' type=circle>\r\n  <li class=MsoNormal style='margin-top:.1pt;margin-bottom:.1pt;mso-para-margin-top:\r\n      .01gd;mso-para-margin-bottom:.01gd;mso-list:l1 level2 lfo3;tab-stops:\r\n      list 1.0in'><span style='mso-fareast-font-family:\"Times New Roman\"'>Device\r\n      Name<o:p></o:p></span></li>\r\n  <li class=MsoNormal style='margin-top:.1pt;margin-bottom:.1pt;mso-para-margin-top:\r\n      .01gd;mso-para-margin-bottom:.01gd;mso-list:l1 level2 lfo3;tab-stops:\r\n      list 1.0in'><span style='mso-fareast-font-family:\"Times New Roman\"'>Total\r\n      logic elements used<o:p></o:p></span></li>\r\n  <li class=MsoNormal style='margin-top:.1pt;margin-bottom:.1pt;mso-para-margin-top:\r\n      .01gd;mso-para-margin-bottom:.01gd;mso-list:l1 level2 lfo3;tab-stops:\r\n      list 1.0in'><span style='mso-fareast-font-family:\"Times New Roman\"'>Total\r\n      registers used<o:p></o:p></span></li>\r\n  <li class=MsoNormal style='margin-top:.1pt;margin-bottom:.1pt;mso-para-margin-top:\r\n      .01gd;mso-para-margin-bottom:.01gd;mso-list:l1 level2 lfo3;tab-stops:\r\n      list 1.0in'><span style='mso-fareast-font-family:\"Times New Roman\"'>Total\r\n      pins used<o:p></o:p></span></li>\r\n  <li class=MsoNormal style='margin-top:.1pt;margin-bottom:.1pt;mso-para-margin-top:\r\n      .01gd;mso-para-margin-bottom:.01gd;mso-list:l1 level2 lfo3;tab-stops:\r\n      list 1.0in'><span style='mso-fareast-font-family:\"Times New Roman\"'>Total\r\n      memory bits used<o:p></o:p></span></li>\r\n  <li class=MsoNormal style='margin-top:.1pt;margin-bottom:.1pt;mso-para-margin-top:\r\n      .01gd;mso-para-margin-bottom:.01gd;mso-list:l1 level2 lfo3;tab-stops:\r\n      list 1.0in'><span style='mso-fareast-font-family:\"Times New Roman\"'>Maximum\r\n      frequency.<o:p></o:p></span></li>\r\n </ul>\r\n</ul>\r\n\r\n<ul style='margin-top:0in' type=disc>\r\n <li class=MsoNormal style='margin-top:.1pt;margin-bottom:.1pt;mso-para-margin-top:\r\n     .01gd;mso-para-margin-bottom:.01gd;mso-list:l2 level1 lfo4;tab-stops:list .5in'><span\r\n     style='mso-fareast-font-family:\"Times New Roman\"'>All your files used for\r\n     simulation, including the synthesized datapath.<o:p></o:p></span></li>\r\n <li class=MsoNormal style='margin-top:.1pt;margin-bottom:.1pt;mso-para-margin-top:\r\n     .01gd;mso-para-margin-bottom:.01gd;mso-list:l2 level1 lfo4;tab-stops:list .5in'><span\r\n     style='mso-fareast-font-family:\"Times New Roman\"'>Screen shots capturing\r\n     ModelSim Simulation. Capture 3 different types of instructions and show\r\n     the delays in signal change.<o:p></o:p></span></li>\r\n</ul>\r\n\r\n<p class=MsoNormal style='margin-top:.1pt;margin-right:0in;margin-bottom:.1pt;\r\nmargin-left:.5in;mso-para-margin-top:.01gd;mso-para-margin-right:0in;\r\nmso-para-margin-bottom:.01gd;mso-para-margin-left:.5in'><span style='mso-fareast-font-family:\r\n\"Times New Roman\"'><o:p>&nbsp;</o:p></span></p>\r\n\r\n</div>\r\n\r\n</body>\r\n\r\n</html>\r\n", "id": 1321.0}