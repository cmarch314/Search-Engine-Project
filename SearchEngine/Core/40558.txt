{"text": "Search LoginPreferencesHelp GuideAbout Trac WikiTimelineRoadmapBrowse SourceView TicketsSearch Context Navigation Previous ChangeNext Change Changeset 228 for vendor current libgaim protocols yahoo yahoo filexfer c View differences inlineside by side Show lines around each change Show the changes in full context Ignore Blank lines Case changes White space changes Timestamp Mar 6 2 7 1 39 26 PM 8 years ago Author djp3Message Updating from gaim Repository File 1 edited vendor current libgaim protocols yahoo yahoo filexfer c modified 5 diffs Legend UnmodifiedAddedRemoved vendor current libgaim protocols yahoo yahoo filexfer c r65 r228 262262 if gaim xfer get type xfer GAIM XFER SEND 263263 if yd jp 264 if gaim proxy connect account gaim account get string account xferjp host YAHOOJP XFER HOST 264 if gaim proxy connect NULL account gaim account get string account xferjp host YAHOOJP XFER HOST 265265 gaim account get int account xfer port YAHOO XFER PORT 266266 yahoo sendfile connected xfer NULL 271271 272272 else 273 if gaim proxy connect account gaim account get string account xfer host YAHOO XFER HOST 273 if gaim proxy connect NULL account gaim account get string account xfer host YAHOO XFER HOST 274274 gaim account get int account xfer port YAHOO XFER PORT 275275 yahoo sendfile connected xfer NULL 282282 else 283283 TODO Using xfer fd like this is probably a bad thing 284 if gaim proxy connect account xfer data host xfer data port 284 if gaim proxy connect NULL account xfer data host xfer data port 285285 yahoo receivefile connected xfer NULL 286286 xfer fd 1 576576 Build the file transfer handle 577577 xfer gaim xfer new gc account GAIM XFER RECEIVE from 578 xfer data xfer data 579 58 Set the info about the incoming file 581 if filename 582 char utf8 filename yahoo string decode gc filename TRUE 583 gaim xfer set filename xfer utf8 filename 584 g free utf8 filename 585 else 586 gchar start end 587 start g strrstr xfer data path 588 if start 589 start 59 end g strrstr xfer data path 591 if start start end 592 char utf8 filename 593 filename g strndup start end start 594 utf8 filename yahoo string decode gc filename TRUE 595 g free filename 578 if xfer 579 58 xfer data xfer data 581 582 Set the info about the incoming file 583 if filename 584 char utf8 filename yahoo string decode gc filename TRUE 596585 gaim xfer set filename xfer utf8 filename 597586 g free utf8 filename 598 filename NULL 587 else 588 gchar start end 589 start g strrstr xfer data path 59 if start 591 start 592 end g strrstr xfer data path 593 if start start end 594 char utf8 filename 595 filename g strndup start end start 596 utf8 filename yahoo string decode gc filename TRUE 597 g free filename 598 gaim xfer set filename xfer utf8 filename 599 g free utf8 filename 6 filename NULL 6 1 5996 2 6 6 1 6 2 gaim xfer set size xfer filesize 6 3 6 4 Setup our I O op functions 6 5 gaim xfer set init fnc xfer yahoo xfer init 6 6 gaim xfer set start fnc xfer yahoo xfer start 6 7 gaim xfer set end fnc xfer yahoo xfer end 6 8 gaim xfer set cancel send fnc xfer yahoo xfer cancel send 6 9 gaim xfer set cancel recv fnc xfer yahoo xfer cancel recv 61 gaim xfer set read fnc xfer yahoo xfer read 611 gaim xfer set write fnc xfer yahoo xfer write 612 613 Now perform the request 614 gaim xfer request xfer 6 3 6 4 gaim xfer set size xfer filesize 6 5 6 6 Setup our I O op functions 6 7 gaim xfer set init fnc xfer yahoo xfer init 6 8 gaim xfer set start fnc xfer yahoo xfer start 6 9 gaim xfer set end fnc xfer yahoo xfer end 61 gaim xfer set cancel send fnc xfer yahoo xfer cancel send 611 gaim xfer set cancel recv fnc xfer yahoo xfer cancel recv 612 gaim xfer set read fnc xfer yahoo xfer read 613 gaim xfer set write fnc xfer yahoo xfer write 614 615 Now perform the request 616 gaim xfer request xfer 617 615618 616619 62763 Build the file transfer handle 628631 xfer gaim xfer new gc account GAIM XFER SEND who 629 xfer data xfer data 63 631 Setup our I O op functions 632 gaim xfer set init fnc xfer yahoo xfer init 633 gaim xfer set start fnc xfer yahoo xfer start 634 gaim xfer set end fnc xfer yahoo xfer end 635 gaim xfer set cancel send fnc xfer yahoo xfer cancel send 636 gaim xfer set cancel recv fnc xfer yahoo xfer cancel recv 637 gaim xfer set read fnc xfer yahoo xfer read 638 gaim xfer set write fnc xfer yahoo xfer write 632 if xfer 633 634 xfer data xfer data 635 636 Setup our I O op functions 637 gaim xfer set init fnc xfer yahoo xfer init 638 gaim xfer set start fnc xfer yahoo xfer start 639 gaim xfer set end fnc xfer yahoo xfer end 64 gaim xfer set cancel send fnc xfer yahoo xfer cancel send 641 gaim xfer set cancel recv fnc xfer yahoo xfer cancel recv 642 gaim xfer set read fnc xfer yahoo xfer read 643 gaim xfer set write fnc xfer yahoo xfer write 644 639645 64 646 return xfer Note See TracChangeset for help on using the changeset viewer Download in other formats Unified Diff Zip Archive Powered by Trac 1 1 By Edgewall Software All content copyright 2 7 2 8 by LUCI http luci ics uci edu ", "_id": "http://djp3-pc2.ics.uci.edu/LUCICodeRepository/nomaticIM/changeset/228/vendor/current/libgaim/protocols/yahoo/yahoo_filexfer.c", "title": "\n      changeset 228 for vendor/current/libgaim/protocols/yahoo/yahoo_filexfer.c \u2013 nomatic*im\n    ", "html": "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n  \n  \n\n  \n\n\n  <head>\n\t\t<title>\n      Changeset 228 for vendor/current/libgaim/protocols/yahoo/yahoo_filexfer.c \u2013 Nomatic*IM\n    </title><meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" /><meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" /><link rel=\"search\" href=\"/LUCICodeRepository/nomaticIM/search\" /><link rel=\"help\" href=\"/LUCICodeRepository/nomaticIM/wiki/TracGuide\" /><link rel=\"alternate\" href=\"?format=diff&amp;new=228\" type=\"text/plain\" class=\"diff\" title=\"Unified Diff\" /><link rel=\"alternate\" href=\"?format=zip&amp;new=228\" type=\"application/zip\" class=\"zip\" title=\"Zip Archive\" /><link rel=\"next\" href=\"/LUCICodeRepository/nomaticIM/changeset/274\" title=\"Changeset 274 for vendor/current/libgaim/protocols/yahoo/yahoo_filexfer.c\" /><link rel=\"start\" href=\"/LUCICodeRepository/nomaticIM/wiki\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/chrome/common/css/trac.css\" type=\"text/css\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/chrome/common/css/changeset.css\" type=\"text/css\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/chrome/common/css/diff.css\" type=\"text/css\" /><link rel=\"stylesheet\" href=\"/LUCICodeRepository/nomaticIM/chrome/common/css/code.css\" type=\"text/css\" /><link rel=\"prev\" href=\"/LUCICodeRepository/nomaticIM/changeset/65/vendor/current/libgaim/protocols/yahoo/yahoo_filexfer.c\" title=\"Changeset 65 for vendor/current/libgaim/protocols/yahoo/yahoo_filexfer.c\" /><link rel=\"shortcut icon\" href=\"http://luci.ics.uci.edu/logo32by32.gif\" type=\"image/gif\" /><link rel=\"icon\" href=\"http://luci.ics.uci.edu/logo32by32.gif\" type=\"image/gif\" /><link type=\"application/opensearchdescription+xml\" rel=\"search\" href=\"/LUCICodeRepository/nomaticIM/search/opensearch\" title=\"Search Nomatic*IM\" /><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/jquery.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/babel.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/messages/en_US.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/trac.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/search.js\"></script><script type=\"text/javascript\" charset=\"utf-8\" src=\"/LUCICodeRepository/nomaticIM/chrome/common/js/diff.js\"></script><script type=\"text/javascript\">\n      jQuery(document).ready(function($) {\n        $(\".trac-toggledeleted\").show().click(function() {\n                  $(this).siblings().find(\".trac-deleted\").toggle();\n                  return false;\n        }).click();\n        $(\"#content\").find(\"li.entry h2 a\").parent().addAnchor(_(\"Link to this diff\"));\n      });\n    </script>\n\t</head>\n  <body>\n    <div id=\"banner\">\n      <div id=\"header\">\n        <a id=\"logo\" href=\"http://luci.ics.uci.edu/#code\"><img src=\"http://luci.ics.uci.edu/blog/archives/LUCIhorzTight.jpg\" alt=\"LUCI Code Repository\" /></a>\n      </div>\n      <form id=\"search\" action=\"/LUCICodeRepository/nomaticIM/search\" method=\"get\">\n        <div>\n          <label for=\"proj-search\">Search:</label>\n          <input type=\"text\" id=\"proj-search\" name=\"q\" size=\"18\" value=\"\" />\n          <input type=\"submit\" value=\"Search\" />\n        </div>\n      </form>\n      <div id=\"metanav\" class=\"nav\">\n    <ul>\n      <li class=\"first\"><a href=\"/LUCICodeRepository/nomaticIM/login\">Login</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/prefs\">Preferences</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/wiki/TracGuide\">Help/Guide</a></li><li class=\"last\"><a href=\"/LUCICodeRepository/nomaticIM/about\">About Trac</a></li>\n    </ul>\n  </div>\n    </div>\n    <div id=\"mainnav\" class=\"nav\">\n    <ul>\n      <li class=\"first\"><a href=\"/LUCICodeRepository/nomaticIM/wiki\">Wiki</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/timeline\">Timeline</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/roadmap\">Roadmap</a></li><li class=\"active\"><a href=\"/LUCICodeRepository/nomaticIM/browser\">Browse Source</a></li><li><a href=\"/LUCICodeRepository/nomaticIM/report\">View Tickets</a></li><li class=\"last\"><a href=\"/LUCICodeRepository/nomaticIM/search\">Search</a></li>\n    </ul>\n  </div>\n    <div id=\"main\">\n      <div id=\"ctxtnav\" class=\"nav\">\n        <h2>Context Navigation</h2>\n        <ul>\n          <li class=\"first\"><span>&larr; <a class=\"prev\" href=\"/LUCICodeRepository/nomaticIM/changeset/65/vendor/current/libgaim/protocols/yahoo/yahoo_filexfer.c\" title=\"Changeset 65 for vendor/current/libgaim/protocols/yahoo/yahoo_filexfer.c\">Previous Change</a></span></li><li class=\"last\"><span><a class=\"next\" href=\"/LUCICodeRepository/nomaticIM/changeset/274\" title=\"Changeset 274 for vendor/current/libgaim/protocols/yahoo/yahoo_filexfer.c\">Next Change</a> &rarr;</span></li>\n        </ul>\n        <hr />\n      </div>\n    <div id=\"content\" class=\"changeset\">\n      <div id=\"title\">\n            <h1>Changeset <a title=\"Show full changeset\" href=\"/LUCICodeRepository/nomaticIM/changeset/228\">228</a>\n              for <a title=\"Show entry in browser\" href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/yahoo/yahoo_filexfer.c?rev=228\">vendor/current/libgaim/protocols/yahoo/yahoo_filexfer.c</a></h1>\n      </div>\n      <form id=\"prefs\" action=\"\">\n        <div>\n          \n  <label for=\"style\">View differences</label>\n  <select id=\"style\" name=\"style\">\n    <option selected=\"selected\" value=\"inline\">inline</option>\n    <option value=\"sidebyside\">side by side</option>\n  </select>\n  <div class=\"field\">\n    <label><input type=\"radio\" name=\"contextall\" value=\"0\" checked=\"checked\" />\n             Show</label>\n      <label><input type=\"text\" name=\"contextlines\" id=\"contextlines\" size=\"2\" maxlength=\"3\" value=\"2\" />\n             lines around each change</label><br />\n    <label><input type=\"radio\" name=\"contextall\" value=\"1\" />\n           Show the changes in full context</label>\n  </div>\n  <fieldset id=\"ignore\">\n    <legend>Ignore:</legend>\n    <div class=\"field\">\n      <input type=\"checkbox\" id=\"ignoreblanklines\" name=\"ignoreblanklines\" />\n      <label for=\"ignoreblanklines\">Blank lines</label>\n    </div>\n    <div class=\"field\">\n      <input type=\"checkbox\" id=\"ignorecase\" name=\"ignorecase\" />\n      <label for=\"ignorecase\">Case changes</label>\n    </div>\n    <div class=\"field\">\n      <input type=\"checkbox\" id=\"ignorewhitespace\" name=\"ignorewhitespace\" />\n      <label for=\"ignorewhitespace\">White space changes</label>\n    </div>\n  </fieldset>\n  <div class=\"buttons\">\n    <input type=\"submit\" name=\"update\" value=\"Update\" />\n  </div>\n\n        </div>\n      </form>\n      <dl id=\"overview\">\n          <dt class=\"property time\">Timestamp:</dt>\n          <dd class=\"time\">\n             Mar 6, 2007, 10:39:26 PM\n             (<a class=\"timeline\" href=\"/LUCICodeRepository/nomaticIM/timeline?from=2007-03-06T22%3A39%3A26-08%3A00&amp;precision=second\" title=\"See timeline at Mar 6, 2007, 10:39:26 PM\">8 years</a> ago)\n          </dd>\n          <dt class=\"property author\">Author:</dt>\n          <dd class=\"author\">djp3</dd>\n          <dt class=\"property message\">Message:</dt>\n          <dd class=\"message searchable\">\n            \n            \n              <p>\nUpdating from gaim Repository<br />\n</p>\n\n            \n            \n          </dd>\n        <dt class=\"property files\">\n          File:\n        </dt>\n        <dd class=\"files\">\n          <div class=\"legend\" id=\"file-legend\">\n            <dl>\n              <dt class=\"mod\"></dt><dd>1 edited</dd>\n            </dl>\n          </div>\n          <br />\n          <ul>\n            <li>\n          <div class=\"mod\"> </div>\n            <a title=\"Show entry in browser\" href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/yahoo/yahoo_filexfer.c?rev=228\">\n              vendor/current/libgaim/protocols/yahoo/yahoo_filexfer.c\n            </a>\n          <span class=\"comment\">(modified)</span>\n              (<a title=\"Show differences\" href=\"#file0\">5 diffs</a>)\n            </li>\n          </ul>\n        </dd>\n      </dl>\n      <div class=\"diff\">\n        <div class=\"legend\" id=\"diff-legend\">\n          <h3>Legend:</h3>\n          <dl>\n            <dt class=\"unmod\"></dt><dd>Unmodified</dd>\n            <dt class=\"add\"></dt><dd>Added</dd>\n            <dt class=\"rem\"></dt><dd>Removed</dd>\n          </dl>\n        </div>\n        <div class=\"diff\">\n  <ul class=\"entries\">\n      <li class=\"entry\">\n        <h2 id=\"file0\">\n          <a href=\"/LUCICodeRepository/nomaticIM/changeset/228/vendor/current/libgaim/protocols/yahoo/yahoo_filexfer.c\" title=\"Show the changeset 228 restricted to vendor/current/libgaim/protocols/yahoo/yahoo_filexfer.c\">vendor/current/libgaim/protocols/yahoo/yahoo_filexfer.c</a>\n        </h2>\n        <table class=\"trac-diff inline\" summary=\"Differences\" cellspacing=\"0\">\n              <colgroup><col class=\"lineno\" /><col class=\"lineno\" /><col class=\"content\" /></colgroup>\n              <thead>\n                <tr>\n                  <th title=\"Revision 65\">\n                    <a title=\"Show revision 65 of this file in browser\" href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/yahoo/yahoo_filexfer.c?rev=65#L262\">\n                      r65</a>\n                  </th>\n                  <th title=\"Revision 228\">\n                    <a title=\"Show revision 228 of this file in browser\" href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/yahoo/yahoo_filexfer.c?rev=228#L262\">\n                      r228</a>\n                  </th>\n                  <td>\u00a0</td>\n                </tr>\n              </thead>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>262</th><th>262</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; if (gaim_xfer_get_type(xfer) == GAIM_XFER_SEND) {</span>\u00a0</td>\n                  </tr><tr>\n                          <th>263</th><th>263</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (yd-&gt;jp) {</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>264</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (gaim_proxy_connect(<del></del>account, gaim_account_get_string(account, \"xferjp_host\",&nbsp; YAHOOJP_XFER_HOST),</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>264</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (gaim_proxy_connect(<ins>NULL, </ins>account, gaim_account_get_string(account, \"xferjp_host\",&nbsp; YAHOOJP_XFER_HOST),</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>265</th><th>265</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;gaim_account_get_int(account, \"xfer_port\", YAHOO_XFER_PORT),</span>\u00a0</td>\n                  </tr><tr>\n                          <th>266</th><th>266</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;yahoo_sendfile_connected, xfer) == NULL)</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/yahoo/yahoo_filexfer.c?rev=65#L271\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/yahoo/yahoo_filexfer.c?rev=228#L271\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>271</th><th>271</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span>\u00a0</td>\n                  </tr><tr>\n                          <th>272</th><th>272</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>273</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (gaim_proxy_connect(<del></del>account, gaim_account_get_string(account, \"xfer_host\",&nbsp; YAHOO_XFER_HOST),</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>273</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (gaim_proxy_connect(<ins>NULL, </ins>account, gaim_account_get_string(account, \"xfer_host\",&nbsp; YAHOO_XFER_HOST),</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>274</th><th>274</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;gaim_account_get_int(account, \"xfer_port\", YAHOO_XFER_PORT),</span>\u00a0</td>\n                  </tr><tr>\n                          <th>275</th><th>275</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;yahoo_sendfile_connected, xfer) == NULL)</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/yahoo/yahoo_filexfer.c?rev=65#L282\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/yahoo/yahoo_filexfer.c?rev=228#L282\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>282</th><th>282</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; } else {</span>\u00a0</td>\n                  </tr><tr>\n                          <th>283</th><th>283</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* TODO: Using xfer-&gt;fd like this is probably a bad thing... */</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>284</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (gaim_proxy_connect(<del></del>account, xfer_data-&gt;host, xfer_data-&gt;port,</span>\u00a0</td>\n                      </tr>\n                      <tr class=\"last\">\n                        <th>\u00a0</th><th>284</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (gaim_proxy_connect(<ins>NULL, </ins>account, xfer_data-&gt;host, xfer_data-&gt;port,</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>285</th><th>285</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yahoo_receivefile_connected, xfer) == NULL)</span>\u00a0</td>\n                  </tr><tr>\n                          <th>286</th><th>286</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; xfer-&gt;fd = -1;</span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/yahoo/yahoo_filexfer.c?rev=65#L576\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/yahoo/yahoo_filexfer.c?rev=228#L576\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>576</th><th>576</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; /* Build the file transfer handle. */</span>\u00a0</td>\n                  </tr><tr>\n                          <th>577</th><th>577</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; xfer = gaim_xfer_new(gc-&gt;account, GAIM_XFER_RECEIVE, from);</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>578</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; xfer-&gt;data = xfer_data;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>579</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>580</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; /* Set the info about the incoming file. */</span>\u00a0</td>\n                      </tr><tr>\n                        <th>581</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; if (filename) {</span>\u00a0</td>\n                      </tr><tr>\n                        <th>582</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; char *utf8_filename = yahoo_string_decode(gc, filename, TRUE);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>583</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_filename(xfer, utf8_filename);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>584</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g_free(utf8_filename);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>585</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; } else {</span>\u00a0</td>\n                      </tr><tr>\n                        <th>586</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gchar *start, *end;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>587</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; start = g_strrstr(xfer_data-&gt;path, \"/\");</span>\u00a0</td>\n                      </tr><tr>\n                        <th>588</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (start)</span>\u00a0</td>\n                      </tr><tr>\n                        <th>589</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; start++;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>590</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end = g_strrstr(xfer_data-&gt;path, \"?\");</span>\u00a0</td>\n                      </tr><tr>\n                        <th>591</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (start &amp;&amp; *start &amp;&amp; end) {</span>\u00a0</td>\n                      </tr><tr>\n                        <th>592</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; char *utf8_filename;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>593</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; filename = g_strndup(start, end - start);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>594</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; utf8_filename = yahoo_string_decode(gc, filename, TRUE);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>595</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g_free(filename);</span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>578</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; if (xfer)</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>579</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>580</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; xfer-&gt;data = xfer_data;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>581</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>582</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* Set the info about the incoming file. */</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>583</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (filename) {</span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>584</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; char *utf8_filename = yahoo_string_decode(gc, filename, TRUE);</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>596</th><th>585</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_filename(xfer, utf8_filename);</span>\u00a0</td>\n                  </tr><tr>\n                          <th>597</th><th>586</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g_free(utf8_filename);</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>598</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; filename = NULL;</span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>587</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>588</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gchar *start, *end;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>589</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; start = g_strrstr(xfer_data-&gt;path, \"/\");</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>590</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (start)</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>591</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; start++;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>592</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end = g_strrstr(xfer_data-&gt;path, \"?\");</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>593</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (start &amp;&amp; *start &amp;&amp; end) {</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>594</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; char *utf8_filename;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>595</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; filename = g_strndup(start, end - start);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>596</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; utf8_filename = yahoo_string_decode(gc, filename, TRUE);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>597</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g_free(filename);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>598</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_filename(xfer, utf8_filename);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>599</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g_free(utf8_filename);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>600</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; filename = NULL;</span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>601</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>599</th><th>602</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>600</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span>\u00a0</td>\n                      </tr><tr>\n                        <th>601</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>602</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_size(xfer, filesize);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>603</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>604</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; <del>/* Setup our I/O op functions */</del></span>\u00a0</td>\n                      </tr><tr>\n                        <th>605</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; <del>gaim_xfer_set_init_fnc(xfer,&nbsp; &nbsp; &nbsp; &nbsp; yahoo_xfer_ini</del>t);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>606</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; <del>gaim_xfer_set_start_fnc(xfer,&nbsp; &nbsp; &nbsp; &nbsp;yahoo_xfer_start</del>);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>607</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; <del>gaim_xfer_set_end_fnc(xfer,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;yahoo_xfer_</del>end);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>608</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; <del>gaim_xfer_set_cancel_send_fnc(xfer, yahoo_xfer_cancel_send</del>);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>609</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; <del>gaim_xfer_set_cancel_recv_fnc(xfer, yahoo_xfer_cancel_recv</del>);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>610</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; <del>gaim_xfer_set_read_fnc(xfer,&nbsp; &nbsp; &nbsp; &nbsp; yahoo_xfer_read</del>);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>611</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_write_fnc(xfer,&nbsp; &nbsp; &nbsp; &nbsp;yahoo_xfer_write);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>612</th><th>\u00a0</th><td class=\"l\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>613</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; <del>/* Now perform the request */</del></span>\u00a0</td>\n                      </tr><tr>\n                        <th>614</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; <del>gaim_xfer_request(xfer);</del></span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>603</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>604</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_size(xfer, filesize);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>605</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>606</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* Setup our I/O op functions */</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>607</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; <ins>&nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_init_fnc(xfer,&nbsp; &nbsp; &nbsp; &nbsp; yahoo_xfer_init);</ins></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>608</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; <ins>&nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_start_fnc(xfer,&nbsp; &nbsp; &nbsp; &nbsp;yahoo_xfer_star</ins>t);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>609</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; <ins>&nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_end_fnc(xfer,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;yahoo_xfer_end</ins>);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>610</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; <ins>&nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_cancel_send_fnc(xfer, yahoo_xfer_cancel_s</ins>end);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>611</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; <ins>&nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_cancel_recv_fnc(xfer, yahoo_xfer_cancel_recv</ins>);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>612</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; <ins>&nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_read_fnc(xfer,&nbsp; &nbsp; &nbsp; &nbsp; yahoo_xfer_read</ins>);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>613</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; <ins>&nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_write_fnc(xfer,&nbsp; &nbsp; &nbsp; &nbsp;yahoo_xfer_write</ins>);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>614</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>615</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* Now perform the request */</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>616</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; <ins>&nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_request(xfer);</ins></span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>617</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; <ins>}</ins></span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>615</th><th>618</th><td class=\"l\"><span>}</span>\u00a0</td>\n                  </tr><tr>\n                          <th>616</th><th>619</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr>\n            </tbody>\n              <tbody class=\"skipped\">\n                <tr>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/yahoo/yahoo_filexfer.c?rev=65#L627\">\u2026</a></th>\n                  <th><a href=\"/LUCICodeRepository/nomaticIM/browser/vendor/current/libgaim/protocols/yahoo/yahoo_filexfer.c?rev=228#L630\">\u2026</a></th>\n                  <td>\u00a0</td>\n                </tr>\n              </tbody>\n            <tbody class=\"unmod\">\n                  <tr>\n                          <th>627</th><th>630</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; /* Build the file transfer handle. */</span>\u00a0</td>\n                  </tr><tr>\n                          <th>628</th><th>631</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; xfer = gaim_xfer_new(gc-&gt;account, GAIM_XFER_SEND, who);</span>\u00a0</td>\n                  </tr>\n            </tbody><tbody class=\"mod\">\n                      <tr class=\"first\">\n                        <th>629</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; xfer-&gt;data = xfer_data;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>630</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; </span>\u00a0</td>\n                      </tr><tr>\n                        <th>631</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; /* Setup our I/O op functions */</span>\u00a0</td>\n                      </tr><tr>\n                        <th>632</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_init_fnc(xfer,&nbsp; &nbsp; &nbsp; &nbsp; yahoo_xfer_init);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>633</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_start_fnc(xfer,&nbsp; &nbsp; &nbsp; &nbsp;yahoo_xfer_start);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>634</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_end_fnc(xfer,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;yahoo_xfer_end);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>635</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_cancel_send_fnc(xfer, yahoo_xfer_cancel_send);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>636</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_cancel_recv_fnc(xfer, yahoo_xfer_cancel_recv);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>637</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_read_fnc(xfer,&nbsp; &nbsp; &nbsp; &nbsp; yahoo_xfer_read);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>638</th><th>\u00a0</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_write_fnc(xfer,&nbsp; &nbsp; &nbsp; &nbsp;yahoo_xfer_write);</span>\u00a0</td>\n                      </tr>\n                      <tr>\n                        <th>\u00a0</th><th>632</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; if (xfer)</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>633</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; {</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>634</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; xfer-&gt;data = xfer_data;</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>635</th><td class=\"r\"><span></span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>636</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* Setup our I/O op functions */</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>637</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_init_fnc(xfer,&nbsp; &nbsp; &nbsp; &nbsp; yahoo_xfer_init);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>638</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_start_fnc(xfer,&nbsp; &nbsp; &nbsp; &nbsp;yahoo_xfer_start);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>639</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_end_fnc(xfer,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;yahoo_xfer_end);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>640</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_cancel_send_fnc(xfer, yahoo_xfer_cancel_send);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>641</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_cancel_recv_fnc(xfer, yahoo_xfer_cancel_recv);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>642</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_read_fnc(xfer,&nbsp; &nbsp; &nbsp; &nbsp; yahoo_xfer_read);</span>\u00a0</td>\n                      </tr><tr>\n                        <th>\u00a0</th><th>643</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gaim_xfer_set_write_fnc(xfer,&nbsp; &nbsp; &nbsp; &nbsp;yahoo_xfer_write);</span>\u00a0</td>\n                      </tr><tr class=\"last\">\n                        <th>\u00a0</th><th>644</th><td class=\"r\"><span>&nbsp; &nbsp; &nbsp; &nbsp; }</span>\u00a0</td>\n                      </tr>\n            </tbody><tbody class=\"unmod\">\n                  <tr>\n                          <th>639</th><th>645</th><td class=\"l\"><span></span>\u00a0</td>\n                  </tr><tr>\n                          <th>640</th><th>646</th><td class=\"l\"><span>&nbsp; &nbsp; &nbsp; &nbsp; return xfer;</span>\u00a0</td>\n                  </tr>\n            </tbody>\n        </table>\n      </li>\n  </ul>\n</div>\n        <div id=\"help\"><strong>Note:</strong> See <a href=\"/LUCICodeRepository/nomaticIM/wiki/TracChangeset\">TracChangeset</a>\n          for help on using the changeset viewer.</div>\n      </div>\n    </div>\n    <div id=\"altlinks\">\n      <h3>Download in other formats:</h3>\n      <ul>\n        <li class=\"first\">\n          <a rel=\"nofollow\" href=\"?format=diff&amp;new=228\" class=\"diff\">Unified Diff</a>\n        </li><li class=\"last\">\n          <a rel=\"nofollow\" href=\"?format=zip&amp;new=228\" class=\"zip\">Zip Archive</a>\n        </li>\n      </ul>\n    </div>\n    </div>\n    <div id=\"footer\" lang=\"en\" xml:lang=\"en\"><hr />\n      <a id=\"tracpowered\" href=\"http://trac.edgewall.org/\"><img src=\"/LUCICodeRepository/nomaticIM/chrome/common/trac_logo_mini.png\" height=\"30\" width=\"107\" alt=\"Trac Powered\" /></a>\n      <p class=\"left\">Powered by <a href=\"/LUCICodeRepository/nomaticIM/about\"><strong>Trac 1.0.1</strong></a><br />\n        By <a href=\"http://www.edgewall.org/\">Edgewall Software</a>.</p>\n      <p class=\"right\">All content copyright 2007-2008 by LUCI <br /><a href=\"http://luci.ics.uci.edu/\">http://luci.ics.uci.edu/</a></p>\n    </div>\n\t\t<div id=\"sitefooter\">\n\t\t\t<script src=\"http://www.google-analytics.com/urchin.js\" type=\"text/javascript\">\n\t\t\t</script>\n\t\t\t<script type=\"text/javascript\">\n\t\t\t\t_uacct = \"UA-338915-2\";\n\t\t\t\turchinTracker();\n\t\t\t</script>\n\t\t</div>\n\t</body>\n</html>", "id": 40558.0}