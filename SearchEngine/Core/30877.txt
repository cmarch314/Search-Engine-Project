{"text": "Project 4a Particle Effects Goal We are going to learn how to add a bit of polish with dynamic effects using particles and fluids The end result will be a fully composited and rendered animation of a burning log complete with roaring flames and sparking embers This project will be broken into two phases Phase I Particles sparks Phase II Fluids flames Phase I Particles Particles represent tiny objects such as snow dust or sparks Since there can be sometimes hundreds or thousands of these particles it is infeasible to animate them by hand Instead you create a procedural animation for them by setting up some basic rules and behaviors and the particles animate themselves according to these constraints This phase will walk you through setting up a simple particle system that simulates sparks The first step in setting up a particle system is to create a particle emitter Go to Particles Create Emitter Options We will need to adjust several of the emitter s attributes This can be done before creation or afterward through the Attribute Editor Call the new emitter sparksEmitter Since we want our sparks to come from a log set the Emitter type to Volume and the Volume shape to Cylinder Rotate and scale the new volume emitter until it resembles a log If you hit Play you should see particles being emitted in all directions Increase the frames in your Time Slider to 3 Going back to frame will reset the particle simulation back to its initial state By default Maya will try to play your effect in real time If it can not keep up with the computation required to simulate your effect then it will cut some corners to make up time This generally not what you want and can be especially problematic with fluids To make sure Maya calculates every frame go to Window Settings Preferences Preferences Time Slider and set Playback speed to Play every frame In the Attribute Editor of the emitter under Basic Emitter Attributes change the Rate to 25 Under Basic Emission Speed Attributes change Speed Random to 3 In the attributes of the particleShape under Lifespan Attributes change Lifespan Mode to Random range Lifespan to 1 5 and Lifespan Random to 5 This means that every particle will last for anywhere from 1 to 2 sec At the moment the particles are emitted in all directions and travel in a straight line We can affect the trajectory of a particle after it has been emitted by creating fields that are linked to the particles Fields act as forces that affect the particles in a certain way such as being pulled down by gravity Fields can be linked to particles when they are created by selecting the particles before creating the field With the particles selected create an Air and a Turbulence field from the Fields menu and make sure they are linked to the particles The default settings for the Air field should be sufficient but change the Magnitude of the Turbulence field to 25 You may have noticed that the particles currently don t render The first step to fixing that is to go to the attributes of the particleShape Under Render Attributes change Particle Render Type to Tube and click the Current Render Type button Set Radius and 1 to 3 and Tail Size to 2 This should make the particles look like below The particles still have the default particleCloud shader assigned to them Assign a new Particle Cloud shader to the particles This can be found under the Volumetric in the Hypershade The Particle Cloud shader has Life Color Life Transparency and Life Incandescence attributes These affect the appearance of the particles based on how old they are Map Ramp A into the Life Color and Life Incandescence of the particleCloud Map Ramp B into the Life Transparency Change the Glow Intensity to 3 This will simulate the spark cooling as it travels through the air eventually turning to ash and disappearing Ramp A Ramp B If you render your particles they should look like those in the image below As a finishing step you will need to do a little Outliner cleanup Group your fields and name the group fields Group your particles and name the group particles Group those groups together and name it sparkFX Save your file as yourname effects phase1 ma Now is a good time to take a break grab some coffee stretch your legs save again scream in a pillow etc When you come back we re moving on to Phase II Phase II Fluids When you think of the word fluids you probably imagine an effect that creates the splashing of water In Maya Fluids refers to fluid dynamics which deals with the interaction of fluids of similar density such as fire and air smoke and air or ink and water Fluids can create very convincing effects but as always there is a performance tradeoff Fluids are expensive to set up and expensive to render In this phase we will walk you through creating a simple fire A large battle during a production especially with effects is finding ways to reduce your build time We are going to use a little shortcut that will allow us to create a fire effect that would likely take several hours to build from scratch In the same file from Phase I using the Dynamics menu set go to Fluid Effects Get Fluid Example This will load the Maya Visor where we can select from a range of premade effects These examples work well as a starting point to achieve some fairly complex effects Choose Fire select the TurbulentFlame ma icon Middle mouse click and drag the icon to your viewport Unlike particles fluids are contained in boxes containers which they cannot escape The insides of these containers are divided into a set of voxels points in space at which the various properties of the fluid are calculated Increasing the resolution results in a higher fidelity image but also takes longer to calculate and consumes more memory Step 1 will create a fluid container Flame with a fluidEmitter attached to a nurbs torus Don t worry about all this junk we only want the emitter settings and the fluid container This is where some trickery comes into the mix We want to steal the emitter settings from fluidEmitter and apply them to a new one we are about to create In your Outliner underneath the nurbsTorus select the fluidEmitter and open the attribute editor Select Presets Save fluidEmitter preset Name it something like flame preset Now that we have our preset made we can delete everything EXCEPT the fluid container Flame and your SparkFX group Move and scale the fluid container so it snugly fits the sparksEmitter like the image below Create a polygon cylinder and name it log Rotate move and scale your log so it fits inside your sparksEmitter Shape like the image below Now we are going to create our own fire emitter First select your log THEN shift select the fluid container In the Dynamics menu set go to Fluid Effects Add Edit Contents Emit from object options Name the emitter logFlame emitter and make sure the emitter type is set to surface Click Apply and close Select the emitter and then in the attribute editor apply your created preset At this point go ahead and hit 6 rewind and play the timeline You should see Maya s attempt to preview what your fire is looking like Find a spot that you like and take a quick render to see how we are doing If all goes well you should have something that looks like the image below Save your maya file as yourname effects phase2 ma Take a screen snapshot similar to below and save it as yourname effects phase2 jpg Turn In You will be graded on the following Following directionsClean Maya fileReasonably convincing fire effect Turn in the following All two Maya files Phase I Phase II Screen snapshot", "_id": "http://www.ics.uci.edu/~dramanan/teaching/ics162_fall12/hw/hw4a/index.html", "title": "project 4a", "html": "<html><head>\r\n<meta http-equiv=\"content-type\" content=\"text/html; charset=ISO-8859-1\">\r\n\r\n\t<title>Project 4a</title>\r\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"../../style.css\">\r\n</head><body>\r\n<div class=\"bodyDiv\">\r\n<center>\r\n<h1>Project 4a: Particle Effects</h1>\r\n</center>\r\n\r\n<fieldset>\r\n<legend><strong>Goal</strong></legend>\r\nWe are going to learn how to add a bit of polish with dynamic effects using particles and fluids.\r\nThe end result will be a fully composited and rendered animation of a burning log complete with roaring flames and sparking embers.\r\n</fieldset>\r\n\r\n<p>\r\nThis project will be broken into two phases:\r\n<ul class=\"normal_list\">\r\n<li>Phase I: Particles (sparks)</li>\r\n<li>Phase II: Fluids (flames)</li>\r\n<!--<li>Phase III: Rendering / Compositing / Final Render</li>-->\r\n</ul>\r\n</p>\r\n\r\n<br>\r\n<h2>Phase I: Particles</h2>\r\n\r\n<p>Particles represent tiny objects such as snow, dust, or sparks. Since there can be sometimes hundreds or thousands of\r\nthese particles, it is infeasible to animate them by hand. Instead you create a procedural animation for them by setting\r\nup some basic rules and behaviors and the particles animate themselves according to these constraints. This phase will\r\nwalk you through setting up a simple particle system that simulates sparks.</p>\r\n\r\n\r\n<ol>\r\n\r\n<li class=\"step\">\r\n<p>The first step in setting up a particle system is to create a particle emitter. Go to <b>Particles &rarr; Create Emitter\r\n(Options)</b>. We will need to adjust several of the emitter's attributes. This can be done before creation or\r\nafterward through the Attribute Editor.</p>\r\n\r\n<p>Call the new emitter <b>sparksEmitter</b>. Since we want our sparks to come from a log, set the Emitter type to\r\n<b>Volume</b> and the Volume shape to <b>Cylinder</b>. Rotate and scale the new volume emitter until it resembles a log. If\r\nyou hit Play, you should see particles being emitted in all directions.</p>\r\n\r\n<img class=\"thumb\" src=\"images/emitter.jpg\">\r\n\r\n<p>Increase the frames in your Time Slider to 300. Going back to frame 0 will reset the particle simulation back to\r\nits initial state.</p>\r\n\r\n<p>By default Maya will try to play your effect in real-time. If it can not keep up with the computation required to\r\nsimulate your effect, then it will cut some corners to make up time. This generally not what you want and can\r\nbe especially problematic with fluids. To make sure Maya calculates every frame go to <b>Window &rarr;\r\nSettings/Preferences &rarr; Preferences &rarr; Time Slider</b> and set Playback speed to <b>Play every frame</b>.</p>\r\n</li>\r\n\r\n\r\n<li class=\"step\">\r\n<p>In the Attribute Editor of the emitter, under Basic Emitter Attributes, change the Rate to 25. Under Basic Emission\r\nSpeed Attributes, change Speed Random to 3. In the attributes of the particleShape, under Lifespan Attributes, change\r\nLifespan Mode to Random range, Lifespan to 1.5, and Lifespan Random to 0.5. This means that every particle will last\r\nfor anywhere from 1 to 2 sec.</p>\r\n\r\n<center><img src=\"images/phase_1_step_2.png\"></center>\r\n</li>\r\n\r\n\r\n<li class=\"step\">\r\n<p>At the moment, the particles are emitted in all directions and travel in a straight line. We can affect the\r\ntrajectory of a particle after it has been emitted by creating fields that are linked to the particles. Fields act as\r\nforces that affect the particles in a certain way, such as being pulled down by gravity.</p>\r\n\r\n<p>Fields can be linked to particles when they are created by selecting the particles before creating the field. With\r\nthe particles selected, create an <b>Air</b> and a <b>Turbulence</b> field from the Fields menu and make sure they are linked\r\nto the particles. The default settings for the Air field should be sufficient, but change the <b>Magnitude</b> of the\r\nTurbulence field to <b>25</b>.</p>\r\n</li>\r\n\r\n\r\n<li class=\"step\"> \r\n<p>You may have noticed that the particles currently don't render. The first step to fixing that is to go to the\r\nattributes of the particleShape. Under Render Attributes, change <b>Particle Render Type</b> to <b>Tube</b> and click the\r\n<b>Current Render Type</b> button. Set <b>Radius</b> 0 and 1 to <b>0.03</b> and Tail Size to <b>2</b>. This should make the particles\r\nlook like below.</p>\r\n\r\n<img class=\"thumb\" src=\"images/tubes.jpg\">\r\n</li>\r\n\r\n\r\n<li class=\"step\">\r\n<p>The particles still have the default particleCloud shader assigned to them. Assign a new Particle Cloud shader to the\r\nparticles. This can be found under the Volumetric in the Hypershade. The Particle Cloud shader has Life Color, Life\r\nTransparency, and Life Incandescence attributes. These affect the appearance of the particles based on how old they\r\nare.</p>\r\n\r\n<p>Map Ramp A into the <b>Life Color</b> and <b>Life Incandescence</b> of the particleCloud. Map Ramp B into the <b>Life\r\nTransparency</b>. Change the <b>Glow Intensity</b> to <b>0.3</b>. This will simulate the spark cooling as it travels through the\r\nair, eventually turning to ash and disappearing.</p>\r\n\r\n<center>\r\n\r\n<p><b>Ramp A:</b></p>\r\n\r\n<img src=\"images/color_ramp.jpg\">\r\n\r\n<p><b>Ramp B:</b></p>\r\n\r\n<img src=\"images/transparency_ramp.jpg\">\r\n\r\n</center>\r\n\r\n</li>\r\n\r\n\r\n<li class=\"step\">\r\n<p>If you render your particles, they should look like those in the image below.</p>\r\n\r\n<p>As a finishing step, you will need to do a little Outliner cleanup. Group your fields and name the group \"fields\". Group your particles\r\nand name the group \"particles\". Group those groups together and name it \"sparkFX\".</p>\r\n\r\n<p>Save your file as <b>yourname_effects_phase1.ma</b>.</p>\r\n\r\n<p>Now is a good time to take a break, grab some coffee, stretch your legs, save again, scream in a pillow, etc.\r\nWhen you come back we're moving on to Phase II.</p>\r\n\r\n<img class=\"thumb\" src=\"images/sparks.jpg\">\r\n\r\n</li>\r\n\r\n</ol>\r\n\r\n<br>\r\n\r\n<h2>Phase II: Fluids</h2><!-- ???-->\r\n\r\n<p>When you think of the word fluids, you probably imagine an effect that creates the splashing of water. In Maya\r\nFluids refers to fluid dynamics, which deals with the interaction of fluids of similar density such as fire and air,\r\nsmoke and air, or ink and water. Fluids can create very convincing effects, but as always, there is a performance\r\ntradeoff. Fluids are expensive to set up and expensive to render. In this phase we will walk you through creating\r\na simple fire.</p>\r\n\r\n<p>A large battle during a production, especially with effects, is finding ways to reduce your build time. We are\r\ngoing to use a little shortcut that will allow us to create a fire effect that would likely take several hours to build\r\nfrom scratch.</p>\r\n\r\n<ol>\r\n\r\n<li class=\"step\">\r\n<p>In the same file from Phase I, using the Dynamics menu set, go to <b>Fluid Effects &rarr; Get Fluid\r\nExample...</b>. This will load the Maya Visor where we can select from a range of premade effects. These\r\nexamples work well as a starting point to achieve some fairly complex effects. Choose <b>Fire</b>, select the\r\n<b>TurbulentFlame.ma</b> icon, Middle mouse click and drag the icon to your viewport.</p>\r\n\r\n<img class=\"thumb\" src=\"images/phase2_step_1.jpg\">\r\n</li>\r\n\r\n\r\n<li class=\"step\">\r\n<p>Unlike particles, fluids are contained in boxes (containers) which they cannot escape. The insides of these containers are\r\ndivided into a set of \"voxels\" - points in space at which the various properties of the fluid are calculated. Increasing the\r\nresolution results in a higher fidelity image, but also takes longer to calculate and consumes more memory.</p>\r\n\r\n<p>Step 1 will create a fluid container (Flame) with a fluidEmitter attached to a nurbs torus. Don't worry about all this junk,\r\nwe only want the emitter settings and the fluid container. This is where some trickery comes into the mix. We want to\r\n'steal' the emitter settings from fluidEmitter and apply them to a new one we are about to create. In your Outliner,\r\nunderneath the nurbsTorus, select the fluidEmitter and open the attribute editor. Select Presets &rarr; Save fluidEmitter\r\npreset.... Name it something like flame_preset.</p>\r\n\r\n<img class=\"thumb\" src=\"images/phase2_step_2.png\">\r\n</li>\r\n\r\n\r\n<li class=\"step\">\r\n<p>Now that we have our preset made, we can delete everything EXCEPT the fluid container (Flame) and your SparkFX\r\ngroup.  Move and scale the fluid container so it snugly fits the <b>sparksEmitter</b> like the image below.</p>\r\n\r\n<img class=\"thumb\" src=\"images/phase2_step_3.jpg\">\r\n</li>\r\n\r\n\r\n<li class=\"step\">\r\n<p>Create a polygon cylinder and name it <b>log</b>. Rotate, move, and scale your log so it fits inside your <b>sparksEmitter</b> Shape like\r\nthe image below.</p>\r\n\r\n<img class=\"thumb\" src=\"images/phase2_step_4.jpg\">\r\n</li>\r\n\r\n\r\n<li class=\"step\">\r\n<p>Now we are going to create our own fire emitter. First select your log, THEN shift+select the fluid container. In the\r\nDynamics menu set, go to <b>Fluid Effects &rarr; Add/Edit Contents &rarr; Emit from object (options)</b>. Name the emitter\r\n<b>logFlame_emitter</b> and make sure the <b>emitter type</b> is set to <b>surface</b>. Click Apply and close.  Select the emitter,\r\nand then in the attribute editor apply your created preset.</p>\r\n\r\n<img class=\"thumb\" src=\"images/phase2_step_5.jpg\">\r\n</li>\r\n\r\n\r\n<li class=\"step\">\r\n<p>At this point go ahead and hit 6, rewind and play the timeline. You should see Maya's attempt to preview what your fire\r\nis looking like. Find a spot that you like and take a quick render to see how we are doing. If all goes well you should have\r\nsomething that looks like the image below. Save your maya file as <b>yourname_effects_phase2.ma</b>. Take a screen snapshot, similar to below, and save it as <b>yourname_effects_phase2.jpg.</b> </p>\r\n\r\n<img class=\"thumb\" src=\"images/phase2_step_6.jpeg\">\r\n</li>\r\n\r\n\r\n<!--\r\n<li class=\"step\">\r\n<p>Now it's time to bring in your awesome burning wood shader from Project 1 and apply it to the log. Within the\r\nHypershade window, go to <b>File &rarr; Import</b> and browse to the location of your burning log project. Select your\r\nmaya file and hit open. You should see your burning wood shader appear in the hypershade. If any extra stuff\r\nimports into your Outliner or Hypershade, go ahead and delete anything you don't need. Apply your shader to\r\nthe log and hit render. You might notice your log needs to be smoothed. Add the necessary geometry, double\r\ncheck your render, and save your maya file as <b>yourname_effects_phase2.ma</b>.  Get some extra caffeine and we're\r\noff to Phase III!</p>\r\n\r\n\r\n<img class=\"thumb\" src=\"images/phase2_step_7.jpeg\">\r\n</li>\r\n-->\r\n\r\n</ol>\r\n\r\n<!--\r\n<br>\r\n<h2>Phase III: Compositing</h2>\r\n\r\n<p>A large part of creating successful effects is understanding the power and importance of setting your Maya file\r\nup in render layers so you can take advantage of layered compositing tricks in a post production program such\r\nas After Effects. In this phase we will prep your scene for layered rendering on the farm and finally import your\r\nrenders into AfterEffects for final compositing and rendering.</p>\r\n\r\n<ol>\r\n\r\n<li class=\"step\">\r\n<p>First, let's take a moment to clean up your Outliner again. Group your Flame container, log, and\r\nlogFlame_emitter into a group named \"fire\". Name anything that you have overlooked and lets get\r\ngoing. When preparing for final render it is often useful (especially for effects) to set up render layers in\r\nyour scene. Open the Channel Box/Layer Editor. At the bottom of the panel are 3 tabs: Display, Render,\r\nand Anim. Click the render tab.</p>\r\n\r\n<img class=\"thumb\" src=\"images/phase3_step_1.png\">\r\n\r\n<p>The <b>masterLayer</b> contains all the elements of your scene. This is what renders by default. We want to\r\nsplit our scene up into 3 layers: A sparks layer, a log layer, and a fire layer.</p>\r\n</li>\r\n\r\n\r\n<li class=\"step\">\r\n<p>To begin, click the sparkFX group in your outliner. With the group selected, look at your render layers panel,\r\nclick <b>Layers &rarr; Create Layer from Selected</b>. This will create a new render layer for our sparks. Name this\r\nrender layer by double clicking on the name and type in sparks_RL. Next select everything under your fire\r\ngroup EXCEPT for your log. (<b>Layers &rarr; Create Layer from Selected</b>) rename the layer to fire_RL. Now\r\ncreate a render layer just for your log and name it log_RL.</p>\r\n\r\n<p>Click through your newly created render layers and make sure that the correct objects are indeed on their proper\r\nrender layer. Make sure your render layers are enabled (a little green check next to the name). Your Master\r\nLayer should be disabled (marked by a red x). Your render layer panel should look like the image below.</p>\r\n\r\n<center><img src=\"images/phase3_step_2.PNG\"></center>\r\n</li>\r\n\r\n<li class=\"step\">\r\n<p>Time to Render! Double check your render settings: naming convention, quality settings, frame padding, file\r\nformat, etc. Save your Maya file and send your render job to the farm. Have a look on the course website if you\r\nhave forgotten how to do this. Once your render has begun, you should have three folders created in your\r\nproject directory, usually under images. These folders will have the same name as your render layers. Once your\r\nrender is complete, import your image sequences into AfterEffects for the final render. Remember to name your\r\nsequences so you know what you are working with!</p>\r\n</li>\r\n\r\n<li class=\"step\">\r\n<p>\r\nIn AfterEffects, click and drag one image sequence down to the \"Create a new composition\" button. Add in the\r\nremaining sequences, create a black solid, and Layer your composition like the image below.\r\n</p>\r\n\r\n<p>At this point you can (if you want) start some final spit and polish such as color correction, added effects, layer\r\nblending etc. Fire up a render and you should have a nice animation of a roaring fire!</p>\r\n\r\n<img class=\"thumb\" src=\"images/after_fx.jpg\">\r\n\r\n<p>Save your final \"render layer ready\" Maya file (<b>yourname_cse459_effects_phase3.ma</b>), your AfterEffects file, and a .mov of your final fire animation.</p>\r\n</li>\r\n\r\n</ol>\r\n-->\r\n\r\n<fieldset>\r\n<legend><strong>Turn In</strong></legend>\r\nYou will be graded on the following:\r\n<ul>\r\n\t<li>Following directions</li>\r\n\t<li>Clean Maya file</li>\r\n\t<li>Reasonably convincing fire effect</li>\r\n</ul>\r\n\r\n\r\nTurn in the following:\r\n<ul>\r\n\t<li>All two Maya files (Phase I, Phase II)\r\n\t<li>Screen snapshot</li>\r\n\t</ul>\r\n</fieldset>\r\n\r\n</div>\r\n</body></html>\r\n", "id": 30877.0}