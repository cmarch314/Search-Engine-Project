{"text": "View Javadoc 1 package swirl workspace common 2 3 import java io UnsupportedEncodingException 4 import java net InetAddress 5 import java net NetworkInterface 6 import java net SocketException 7 import java net UnknownHostException 8 9 import javax servlet http HttpServletRequest 1 11 import org apache commons logging Log 12 import org apache commons logging LogFactory 13 import org mortbay http HttpRequest 14 15 16 DOCUMENT ME 17 18 author bpillet 19 2 public final class NetUtils 21 22 TODO 23 private static Log log LogFactory getLog NetUtils class 24 25 26 Creates a new NetUtils object 27 28 private NetUtils 29 3 31 TODO 32 33 param req TODO 34 35 return TODO 36 37 public static boolean isRequestFromMe HttpRequest req 38 39 return isMyHost req getRemoteHost 4 41 42 43 TODO 44 45 param req TODO 46 47 return TODO 48 49 public static boolean isRequestFromMe HttpServletRequest req 5 51 return isMyHost req getRemoteHost 52 53 54 55 TODO 56 57 param remoteHostStr TODO 58 59 return TODO 6 61 private static boolean isMyHost String remoteHostStr 62 63 try 64 65 InetAddress address InetAddress getByName remoteHostStr 66 67 if log isDebugEnabled 68 69 if log isDebugEnabled 7 71 log debug address address nhostAddress 72 address getHostAddress canonicalHostName 73 address getCanonicalHostName nhostName 74 address getHostName 75 76 77 78 NetworkInterface net 79 8 try 81 82 net NetworkInterface getByInetAddress address 83 84 if net null 85 86 if log isDebugEnabled 87 88 log debug net ndisplayName net getDisplayName 89 nname net getName 9 91 92 return true 93 94 95 catch SocketException e1 96 97 if log isDebugEnabled 98 99 log debug e1 e1 1 1 1 1 2 1 3 catch UnknownHostException e 1 4 1 5 if log isDebugEnabled 1 6 1 7 log debug e e 1 8 1 9 11 111 return false 112 113 114 public static String DefaultEncodingScheme UTF 8 115 public static String encode String unencoded 116 try 117 String result java net URLEncoder encode unencoded DefaultEncodingScheme 118 result result replaceAll u 2b 2 119 return result 12 catch UnsupportedEncodingException e 121 TODO Auto generated catch block 122 e printStackTrace 123 return null 124 125 126 127 public static String decode String encoded 128 try 129 return java net URLDecoder decode encoded DefaultEncodingScheme 13 catch UnsupportedEncodingException e 131 TODO Auto generated catch block 132 e printStackTrace 133 return null 134 135 136 137 public static String encodeLastElement String path 138 int lastSlash path lastIndexOf 139 if lastSlash 1 14 return encode path 141 else 142 return path substring lastSlash 1 encode path substring lastSlash 1 143 144 145 public static String encodeEachElement String path 146 String encoded 147 if path equals return encoded 148 String elements path split 149 for int i i elements length i 15 encoded encode elements i 151 152 if path length path charAt path length 1 153 encoded encoded substring encoded length 1 154 return encoded 155 156 This page was automatically generated by Maven", "_id": "http://drzaius.ics.uci.edu/~swirl/impromptu-0.20/xref/swirl/workspace/common/NetUtils.html", "title": "netutils xref", "html": "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\n<head>\n<meta http-equiv=\"content-type\" content=\"text/html; charset=ISO-8859-1\" /><title>NetUtils xref</title>\n<link type=\"text/css\" rel=\"stylesheet\" href=\"../../../stylesheet.css\" />\n</head>\n<body>\n<div id=\"overview\"><a href=\"../../../../apidocs/swirl/workspace/common/NetUtils.html\">View Javadoc</a></div><pre>\n\n<a name=\"1\" href=\"#1\">1</a>   <strong>package</strong> <a href=\"../../../swirl/workspace/common/package-summary.html\">swirl.workspace.common</a>;\n<a name=\"2\" href=\"#2\">2</a>   \n<a name=\"3\" href=\"#3\">3</a>   <strong>import</strong> java.io.UnsupportedEncodingException;\n<a name=\"4\" href=\"#4\">4</a>   <strong>import</strong> java.net.InetAddress;\n<a name=\"5\" href=\"#5\">5</a>   <strong>import</strong> java.net.NetworkInterface;\n<a name=\"6\" href=\"#6\">6</a>   <strong>import</strong> java.net.SocketException;\n<a name=\"7\" href=\"#7\">7</a>   <strong>import</strong> java.net.UnknownHostException;\n<a name=\"8\" href=\"#8\">8</a>   \n<a name=\"9\" href=\"#9\">9</a>   <strong>import</strong> javax.servlet.http.HttpServletRequest;\n<a name=\"10\" href=\"#10\">10</a>  \n<a name=\"11\" href=\"#11\">11</a>  <strong>import</strong> org.apache.commons.logging.Log;\n<a name=\"12\" href=\"#12\">12</a>  <strong>import</strong> org.apache.commons.logging.LogFactory;\n<a name=\"13\" href=\"#13\">13</a>  <strong>import</strong> org.mortbay.http.HttpRequest;\n<a name=\"14\" href=\"#14\">14</a>  \n<a name=\"15\" href=\"#15\">15</a>  <em>/**<em>*</em></em>\n<a name=\"16\" href=\"#16\">16</a>  <em> * DOCUMENT ME!</em>\n<a name=\"17\" href=\"#17\">17</a>  <em> *</em>\n<a name=\"18\" href=\"#18\">18</a>  <em> * @author bpillet</em>\n<a name=\"19\" href=\"#19\">19</a>  <em> */</em>\n<a name=\"20\" href=\"#20\">20</a>  <strong>public</strong> <strong>final</strong> <strong>class</strong> <a href=\"../../../swirl/workspace/common/NetUtils.html\">NetUtils</a>\n<a name=\"21\" href=\"#21\">21</a>  {\n<a name=\"22\" href=\"#22\">22</a>      <em>/**<em>* TODO */</em></em>\n<a name=\"23\" href=\"#23\">23</a>      <strong>private</strong> <strong>static</strong> Log log = LogFactory.getLog(NetUtils.<strong>class</strong>);\n<a name=\"24\" href=\"#24\">24</a>  \n<a name=\"25\" href=\"#25\">25</a>      <em>/**<em>*</em></em>\n<a name=\"26\" href=\"#26\">26</a>  <em>     * Creates a new NetUtils object.</em>\n<a name=\"27\" href=\"#27\">27</a>  <em>     */</em>\n<a name=\"28\" href=\"#28\">28</a>      <strong>private</strong> <a href=\"../../../swirl/workspace/common/NetUtils.html\">NetUtils</a>(){}\n<a name=\"29\" href=\"#29\">29</a>  \n<a name=\"30\" href=\"#30\">30</a>      <em>/**<em>*</em></em>\n<a name=\"31\" href=\"#31\">31</a>  <em>     * TODO</em>\n<a name=\"32\" href=\"#32\">32</a>  <em>     *</em>\n<a name=\"33\" href=\"#33\">33</a>  <em>     * @param req TODO</em>\n<a name=\"34\" href=\"#34\">34</a>  <em>     *</em>\n<a name=\"35\" href=\"#35\">35</a>  <em>     * @return TODO</em>\n<a name=\"36\" href=\"#36\">36</a>  <em>     */</em>\n<a name=\"37\" href=\"#37\">37</a>      <strong>public</strong> <strong>static</strong> <strong>boolean</strong> isRequestFromMe(HttpRequest req)\n<a name=\"38\" href=\"#38\">38</a>      {\n<a name=\"39\" href=\"#39\">39</a>          <strong>return</strong> isMyHost(req.getRemoteHost());\n<a name=\"40\" href=\"#40\">40</a>      }\n<a name=\"41\" href=\"#41\">41</a>  \n<a name=\"42\" href=\"#42\">42</a>      <em>/**<em>*</em></em>\n<a name=\"43\" href=\"#43\">43</a>  <em>     * TODO</em>\n<a name=\"44\" href=\"#44\">44</a>  <em>     *</em>\n<a name=\"45\" href=\"#45\">45</a>  <em>     * @param req TODO</em>\n<a name=\"46\" href=\"#46\">46</a>  <em>     *</em>\n<a name=\"47\" href=\"#47\">47</a>  <em>     * @return TODO</em>\n<a name=\"48\" href=\"#48\">48</a>  <em>     */</em>\n<a name=\"49\" href=\"#49\">49</a>      <strong>public</strong> <strong>static</strong> <strong>boolean</strong> isRequestFromMe(HttpServletRequest req)\n<a name=\"50\" href=\"#50\">50</a>      {\n<a name=\"51\" href=\"#51\">51</a>          <strong>return</strong> isMyHost(req.getRemoteHost());\n<a name=\"52\" href=\"#52\">52</a>      }\n<a name=\"53\" href=\"#53\">53</a>  \n<a name=\"54\" href=\"#54\">54</a>      <em>/**<em>*</em></em>\n<a name=\"55\" href=\"#55\">55</a>  <em>     * TODO</em>\n<a name=\"56\" href=\"#56\">56</a>  <em>     *</em>\n<a name=\"57\" href=\"#57\">57</a>  <em>     * @param remoteHostStr TODO</em>\n<a name=\"58\" href=\"#58\">58</a>  <em>     *</em>\n<a name=\"59\" href=\"#59\">59</a>  <em>     * @return TODO</em>\n<a name=\"60\" href=\"#60\">60</a>  <em>     */</em>\n<a name=\"61\" href=\"#61\">61</a>      <strong>private</strong> <strong>static</strong> <strong>boolean</strong> isMyHost(String remoteHostStr)\n<a name=\"62\" href=\"#62\">62</a>      {\n<a name=\"63\" href=\"#63\">63</a>          <strong>try</strong>\n<a name=\"64\" href=\"#64\">64</a>          {\n<a name=\"65\" href=\"#65\">65</a>              InetAddress address = InetAddress.getByName(remoteHostStr);\n<a name=\"66\" href=\"#66\">66</a>  \n<a name=\"67\" href=\"#67\">67</a>              <strong>if</strong>(log.isDebugEnabled())\n<a name=\"68\" href=\"#68\">68</a>              {\n<a name=\"69\" href=\"#69\">69</a>              \t<strong>if</strong>(log.isDebugEnabled())\n<a name=\"70\" href=\"#70\">70</a>      \t        {\n<a name=\"71\" href=\"#71\">71</a>              \t\tlog.debug(<span class=\"string\">\"address: \"</span> + address + <span class=\"string\">\"\\nhostAddress: \"</span>\n<a name=\"72\" href=\"#72\">72</a>  \t                          + address.getHostAddress() + <span class=\"string\">\" canonicalHostName: \"</span>\n<a name=\"73\" href=\"#73\">73</a>  \t                          + address.getCanonicalHostName() + <span class=\"string\">\"\\nhostName: \"</span>\n<a name=\"74\" href=\"#74\">74</a>  \t                          + address.getHostName());\n<a name=\"75\" href=\"#75\">75</a>      \t        }\n<a name=\"76\" href=\"#76\">76</a>              }\n<a name=\"77\" href=\"#77\">77</a>  \n<a name=\"78\" href=\"#78\">78</a>              NetworkInterface net;\n<a name=\"79\" href=\"#79\">79</a>  \n<a name=\"80\" href=\"#80\">80</a>              <strong>try</strong>\n<a name=\"81\" href=\"#81\">81</a>              {\n<a name=\"82\" href=\"#82\">82</a>                  net = NetworkInterface.getByInetAddress(address);\n<a name=\"83\" href=\"#83\">83</a>  \n<a name=\"84\" href=\"#84\">84</a>                  <strong>if</strong>(net != <strong>null</strong>)\n<a name=\"85\" href=\"#85\">85</a>                  {\n<a name=\"86\" href=\"#86\">86</a>                  \t<strong>if</strong>(log.isDebugEnabled())\n<a name=\"87\" href=\"#87\">87</a>          \t        {\n<a name=\"88\" href=\"#88\">88</a>                  \t\tlog.debug(<span class=\"string\">\"net:\\ndisplayName: \"</span> + net.getDisplayName()\n<a name=\"89\" href=\"#89\">89</a>                  \t\t\t\t+ <span class=\"string\">\"\\nname: \"</span> + net.getName());\n<a name=\"90\" href=\"#90\">90</a>          \t        }\n<a name=\"91\" href=\"#91\">91</a>  \n<a name=\"92\" href=\"#92\">92</a>                      <strong>return</strong> <strong>true</strong>;\n<a name=\"93\" href=\"#93\">93</a>                  }\n<a name=\"94\" href=\"#94\">94</a>              }\n<a name=\"95\" href=\"#95\">95</a>              <strong>catch</strong>(SocketException e1)\n<a name=\"96\" href=\"#96\">96</a>              {\n<a name=\"97\" href=\"#97\">97</a>                  <strong>if</strong>(log.isDebugEnabled())\n<a name=\"98\" href=\"#98\">98</a>                  {\n<a name=\"99\" href=\"#99\">99</a>                      log.debug(e1, e1);\n<a name=\"100\" href=\"#100\">100</a>                 }\n<a name=\"101\" href=\"#101\">101</a>             }\n<a name=\"102\" href=\"#102\">102</a>         }\n<a name=\"103\" href=\"#103\">103</a>         <strong>catch</strong>(UnknownHostException e)\n<a name=\"104\" href=\"#104\">104</a>         {\n<a name=\"105\" href=\"#105\">105</a>             <strong>if</strong>(log.isDebugEnabled())\n<a name=\"106\" href=\"#106\">106</a>             {\n<a name=\"107\" href=\"#107\">107</a>                 log.debug(e, e);\n<a name=\"108\" href=\"#108\">108</a>             }\n<a name=\"109\" href=\"#109\">109</a>         }\n<a name=\"110\" href=\"#110\">110</a> \n<a name=\"111\" href=\"#111\">111</a>         <strong>return</strong> false;\n<a name=\"112\" href=\"#112\">112</a>     }\n<a name=\"113\" href=\"#113\">113</a>     \n<a name=\"114\" href=\"#114\">114</a>     <strong>public</strong> <strong>static</strong> String DefaultEncodingScheme = <span class=\"string\">\"UTF-8\"</span>;\n<a name=\"115\" href=\"#115\">115</a>     <strong>public</strong> <strong>static</strong> String encode(String unencoded) {\n<a name=\"116\" href=\"#116\">116</a>         <strong>try</strong> {\n<a name=\"117\" href=\"#117\">117</a>             String result = java.net.URLEncoder.encode(unencoded, DefaultEncodingScheme);\n<a name=\"118\" href=\"#118\">118</a>             result = result.replaceAll(<span class=\"string\">\"&#47;&#47;\\u002b\"</span>, <span class=\"string\">\"%20\"</span>);\n<a name=\"119\" href=\"#119\">119</a>             <strong>return</strong> result;\n<a name=\"120\" href=\"#120\">120</a>         } <strong>catch</strong> (UnsupportedEncodingException e) {\n<a name=\"121\" href=\"#121\">121</a>             <em class=\"comment\">// TODO Auto-generated catch block</em>\n<a name=\"122\" href=\"#122\">122</a>             e.printStackTrace();\n<a name=\"123\" href=\"#123\">123</a>             <strong>return</strong> <strong>null</strong>;\n<a name=\"124\" href=\"#124\">124</a>         }\n<a name=\"125\" href=\"#125\">125</a>     }\n<a name=\"126\" href=\"#126\">126</a> \n<a name=\"127\" href=\"#127\">127</a>     <strong>public</strong> <strong>static</strong> String decode(String encoded) {\n<a name=\"128\" href=\"#128\">128</a>         <strong>try</strong> {\n<a name=\"129\" href=\"#129\">129</a>             <strong>return</strong> java.net.URLDecoder.decode(encoded, DefaultEncodingScheme);\n<a name=\"130\" href=\"#130\">130</a>         } <strong>catch</strong> (UnsupportedEncodingException e) {\n<a name=\"131\" href=\"#131\">131</a>             <em class=\"comment\">// TODO Auto-generated catch block</em>\n<a name=\"132\" href=\"#132\">132</a>             e.printStackTrace();\n<a name=\"133\" href=\"#133\">133</a>             <strong>return</strong> <strong>null</strong>;\n<a name=\"134\" href=\"#134\">134</a>         }\n<a name=\"135\" href=\"#135\">135</a>     }\n<a name=\"136\" href=\"#136\">136</a>     \n<a name=\"137\" href=\"#137\">137</a>     <strong>public</strong> <strong>static</strong> String encodeLastElement(String path) {\n<a name=\"138\" href=\"#138\">138</a>         <strong>int</strong>\tlastSlash = path.lastIndexOf('/');\n<a name=\"139\" href=\"#139\">139</a>         <strong>if</strong> (lastSlash == -1)\n<a name=\"140\" href=\"#140\">140</a>             <strong>return</strong> encode(path);\n<a name=\"141\" href=\"#141\">141</a>         <strong>else</strong>\n<a name=\"142\" href=\"#142\">142</a>             <strong>return</strong> path.substring(0, lastSlash + 1) + encode(path.substring(lastSlash + 1));\n<a name=\"143\" href=\"#143\">143</a>     }\n<a name=\"144\" href=\"#144\">144</a> \n<a name=\"145\" href=\"#145\">145</a>     <strong>public</strong> <strong>static</strong> String encodeEachElement(String path) {\n<a name=\"146\" href=\"#146\">146</a>         String encoded = <span class=\"string\">\"\"</span>;\n<a name=\"147\" href=\"#147\">147</a>         <strong>if</strong> (path.equals(<span class=\"string\">\"\"</span>)) <strong>return</strong> encoded;\n<a name=\"148\" href=\"#148\">148</a>         String[] elements = path.split(<span class=\"string\">\"/\"</span>);\n<a name=\"149\" href=\"#149\">149</a>         <strong>for</strong> (<strong>int</strong> i = 0; i &lt;elements.length; i++) {\n<a name=\"150\" href=\"#150\">150</a>             encoded += (encode(elements[i]) + <span class=\"string\">\"/\"</span>);\n<a name=\"151\" href=\"#151\">151</a>         }\n<a name=\"152\" href=\"#152\">152</a>         <strong>if</strong> (<em class=\"comment\">/*<em class=\"comment\">path.length() > 0 &amp;&amp; */</em> path.charAt(path.length() - 1) != '/')</em>\n<a name=\"153\" href=\"#153\">153</a>             encoded = encoded.substring(0, encoded.length() - 1);\n<a name=\"154\" href=\"#154\">154</a>         <strong>return</strong> encoded;\n<a name=\"155\" href=\"#155\">155</a>     }\n<a name=\"156\" href=\"#156\">156</a> }\n</pre>\n<hr/><div id=\"footer\">This page was automatically generated by <a href=\"http://maven.apache.org/\">Maven</a></div></body>\n</html>\n\n", "id": 33060.0}