{"text": "View Javadoc 1 2 Copyright c 2 3 Regents of the University of California 3 All rights reserved 4 5 6 The Apache Software License Version 1 1 7 8 Redistribution and use in source and binary forms with or without 9 modification are permitted provided that the following conditions 1 are met 11 12 1 Redistributions of source code must retain the above copyright 13 notice this list of conditions and the following disclaimer 14 15 2 Redistributions in binary form must reproduce the above copyright 16 notice this list of conditions and the following disclaimer in 17 the documentation and or other materials provided with the 18 distribution 19 2 3 The end user documentation included with the redistribution if 21 any must include the following acknowledgment 22 This product includes software developed by 23 the Institute for Software Research at 24 University of California Irvine 25 Alternately this acknowledgment may appear in the software 26 itself if and wherever such third party acknowledgments normally 27 appear 28 29 4 The names YANCEES Institute for Software Research and 3 University of California must not be used to 31 endorse or promote products derived from this software without 32 prior written permission For written permission please contact 33 rsilvafi ics uci edu or redmiles ics uci edu 34 35 5 Products derived from this software may not be called 36 YANCEES nor may YANCEES appear in their name without 37 prior written permission of the University of California Regents 38 39 THIS SOFTWARE IS PROVIDED AS IS AND ANY EXPRESSED OR IMPLIED 4 WARRANTIES INCLUDING BUT NOT LIMITED TO THE IMPLIED WARRANTIES OF 41 MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED 42 IN NO EVENT SHALL THE INSTITUTE FOR SOFTWARE RESEARCH AT THE UNIVERSITY 43 OF CALIFORNIA IRVINE OR ITS CONTRIBUTORS BE LIABLE FOR 44 ANY DIRECT INDIRECT INCIDENTAL SPECIAL EXEMPLARY OR 45 CONSEQUENTIAL DAMAGES INCLUDING BUT NOT LIMITED TO PROCUREMENT OF 46 SUBSTITUTE GOODS OR SERVICES LOSS OF USE DATA OR PROFITS OR 47 BUSINESS INTERRUPTION HOWEVER CAUSED AND ON ANY THEORY OF 48 LIABILITY WHETHER IN CONTRACT STRICT LIABILITY OR TORT INCLUDING 49 NEGLIGENCE OR OTHERWISE ARISING IN ANY WAY OUT OF THE USE OF THIS 5 SOFTWARE EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE 51 52 53 54 package edu uci isr impromptu pocketpc model 55 56 import java util HashMap 57 import java util Iterator 58 59 import org eclipse swt SWT 6 import org eclipse swt graphics Color 61 import org eclipse swt layout FillLayout 62 import org eclipse swt widgets Group 63 import org eclipse swt widgets Shell 64 65 66 This class represents a peer in the model We mix the model with its presenta 67 tion in order to facilitate the management of the model information and its 68 presentation 69 7 author rsilvafi 71 class created at Aug 3 2 5 72 73 74 public class ModelPeer 75 Shell myShell that s the window containing this peer s group 76 Group myGroup the SET group that represents this peer 77 78 the name of this peer 79 String myName 8 81 a table with the sharing levels of this peer 82 HashMap sharingLevels new HashMap 83 84 a fast access list of files this peer is sharing 85 HashMap filesMap new HashMap 86 87 boolean print true 88 Color myColor null 89 9 91 public ModelPeer String peerName Shell sh Color color 92 myShell sh 93 myName peerName 94 myColor color 95 96 myGroup new Group myShell SWT NONE 97 myGroup setText myName 98 myGroup setLayout new FillLayout SWT VERTICAL 99 1 if myColor null 1 1 myGroup setBackground myColor 1 2 1 3 1 4 Creates the sharing levels for this peer 1 5 SharingLevel tempLevel new SharingLevel SharingLevel LEVEL NO PERSISTENT myGroup myColor 1 6 sharingLevels put SharingLevel PERSISTENT tempLevel 1 7 1 8 tempLevel new SharingLevel SharingLevel LEVEL NO READ WRITE myGroup myColor 1 9 sharingLevels put SharingLevel READ WRITE tempLevel 11 111 tempLevel new SharingLevel SharingLevel LEVEL NO READ myGroup myColor 112 sharingLevels put SharingLevel READ tempLevel 113 114 tempLevel new SharingLevel SharingLevel LEVEL NO SEE myGroup myColor 115 sharingLevels put SharingLevel SEE tempLevel 116 117 118 119 return Returns the name 12 121 public String getName 122 return myName 123 124 125 public void dispose 126 127 if print 128 System out println ModelPeer disposing sharing levels 129 13 synchronized sharingLevels 131 for Iterator iter sharingLevels keySet iterator iter hasNext 132 String key String iter next 133 SharingLevel element SharingLevel sharingLevels get key 134 System out println ModelPeer disposing sharingLevel key for peer myName 135 element dispose 136 137 138 if print 139 System out println ModelPeer clearing sharing level table 14 sharingLevels clear 141 142 143 144 if print 145 System out println disposing files 146 synchronized filesMap 147 for Iterator iter filesMap entrySet iterator iter hasNext 148 SharedFile element SharedFile iter next 149 element dispose 15 151 152 filesMap clear 153 154 155 if print 156 System out println ModelPeer disposing group 157 158 if myGroup null 159 myGroup dispose 16 161 162 163 param name The name to set 164 165 public void setName String name 166 this myName name 167 myGroup setText name 168 169 17 public void addFile String fileName int levelNumber 171 172 if print 173 System out println Peer addFile 174 175 SharingLevel level SharingLevel sharingLevels get SharingLevel getLevelString levelNumber 176 SharedFile file new SharedFile fileName myColor 177 level addFile file 178 179 synchronized filesMap 18 filesMap put fileName file 181 182 183 myGroup layout 184 myShell layout 185 186 187 188 public void removeFile String fileName 189 SharedFile file SharedFile filesMap get fileName 19 SharingLevel level file getLevel 191 level removeFile file 192 193 synchronized filesMap 194 filesMap remove fileName 195 196 file dispose 197 198 myGroup layout 199 myShell layout 2 2 1 2 2 2 3 public void moveFile String fileName int levelNumber 2 4 SharedFile file SharedFile filesMap get fileName 2 5 2 6 if file null 2 7 SharingLevel oldLevelObject file getLevel 2 8 int oldLevelNumber oldLevelObject getLevelNumber 2 9 21 if levelNumber oldLevelNumber 211 removeFile fileName 212 addFile fileName levelNumber 213 214 else 215 in case we loose some event and the file is not present 216 and someone moves the file we add this file to update our model 217 addFile fileName levelNumber 218 219 22 221 protected void finalize throws Throwable 222 try 223 dispose dispose the SWT resources allocated by this object 224 finally 225 super finalize 226 227 228 229 23 return Returns the myColor 231 232 public Color getColor 233 return myColor 234 235 236 237 param color The myColor to set 238 239 public void setColor Color color 24 this myColor color 241 242 243 This page was automatically generated by Maven", "_id": "http://drzaius.ics.uci.edu/~swirl/impromptu-0.30/xref/edu/uci/isr/impromptu/pocketpc/model/ModelPeer.html", "title": "modelpeer xref", "html": "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\n<head>\n<meta http-equiv=\"content-type\" content=\"text/html; charset=ISO-8859-1\" /><title>ModelPeer xref</title>\n<link type=\"text/css\" rel=\"stylesheet\" href=\"../../../../../../stylesheet.css\" />\n</head>\n<body>\n<div id=\"overview\"><a href=\"../../../../../../../apidocs/edu/uci/isr/impromptu/pocketpc/model/ModelPeer.html\">View Javadoc</a></div><pre>\n\n<a name=\"1\" href=\"#1\">1</a>   <em class=\"comment\">/*</em>\n<a name=\"2\" href=\"#2\">2</a>   <em class=\"comment\"> * Copyright (c) 2003, Regents of the University of California.</em>\n<a name=\"3\" href=\"#3\">3</a>   <em class=\"comment\"> * All rights reserved.</em>\n<a name=\"4\" href=\"#4\">4</a>   <em class=\"comment\"> * </em>\n<a name=\"5\" href=\"#5\">5</a>   <em class=\"comment\"> * ===================================================================</em>\n<a name=\"6\" href=\"#6\">6</a>   <em class=\"comment\"> * The Apache Software License, Version 1.1</em>\n<a name=\"7\" href=\"#7\">7</a>   <em class=\"comment\"> * </em>\n<a name=\"8\" href=\"#8\">8</a>   <em class=\"comment\"> * Redistribution and use in source and binary forms, with or without</em>\n<a name=\"9\" href=\"#9\">9</a>   <em class=\"comment\"> * modification, are permitted provided that the following conditions</em>\n<a name=\"10\" href=\"#10\">10</a>  <em class=\"comment\"> * are met:</em>\n<a name=\"11\" href=\"#11\">11</a>  <em class=\"comment\"> * </em>\n<a name=\"12\" href=\"#12\">12</a>  <em class=\"comment\"> * 1. Redistributions of source code must retain the above copyright</em>\n<a name=\"13\" href=\"#13\">13</a>  <em class=\"comment\"> *    notice, this list of conditions and the following disclaimer.</em>\n<a name=\"14\" href=\"#14\">14</a>  <em class=\"comment\"> * </em>\n<a name=\"15\" href=\"#15\">15</a>  <em class=\"comment\"> * 2. Redistributions in binary form must reproduce the above copyright</em>\n<a name=\"16\" href=\"#16\">16</a>  <em class=\"comment\"> *    notice, this list of conditions and the following disclaimer in</em>\n<a name=\"17\" href=\"#17\">17</a>  <em class=\"comment\"> *    the documentation and/or other materials provided with the</em>\n<a name=\"18\" href=\"#18\">18</a>  <em class=\"comment\"> *    distribution.</em>\n<a name=\"19\" href=\"#19\">19</a>  <em class=\"comment\"> * </em>\n<a name=\"20\" href=\"#20\">20</a>  <em class=\"comment\"> * 3. The end-user documentation included with the redistribution, if</em>\n<a name=\"21\" href=\"#21\">21</a>  <em class=\"comment\"> *    any, must include the following acknowledgment:</em>\n<a name=\"22\" href=\"#22\">22</a>  <em class=\"comment\"> *       \"This product includes software developed by</em>\n<a name=\"23\" href=\"#23\">23</a>  <em class=\"comment\"> *        the Institute for Software Research at  </em>\n<a name=\"24\" href=\"#24\">24</a>  <em class=\"comment\"> *        University of California, Irvine\"</em>\n<a name=\"25\" href=\"#25\">25</a>  <em class=\"comment\"> *    Alternately, this acknowledgment may appear in the software</em>\n<a name=\"26\" href=\"#26\">26</a>  <em class=\"comment\"> *    itself, if and wherever such third-party acknowledgments normally</em>\n<a name=\"27\" href=\"#27\">27</a>  <em class=\"comment\"> *    appear.</em>\n<a name=\"28\" href=\"#28\">28</a>  <em class=\"comment\"> * </em>\n<a name=\"29\" href=\"#29\">29</a>  <em class=\"comment\"> * 4. The names \"YANCEES\", \"Institute for Software Research\" and</em>\n<a name=\"30\" href=\"#30\">30</a>  <em class=\"comment\"> *    \"University of California\" must not be used to</em>\n<a name=\"31\" href=\"#31\">31</a>  <em class=\"comment\"> *    endorse or promote products derived from this software without</em>\n<a name=\"32\" href=\"#32\">32</a>  <em class=\"comment\"> *    prior written permission. For written permission, please contact</em>\n<a name=\"33\" href=\"#33\">33</a>  <em class=\"comment\"> *    rsilvafi@ics.uci.edu or redmiles@ics.uci.edu.</em>\n<a name=\"34\" href=\"#34\">34</a>  <em class=\"comment\"> * </em>\n<a name=\"35\" href=\"#35\">35</a>  <em class=\"comment\"> * 5. Products derived from this software may not be called</em>\n<a name=\"36\" href=\"#36\">36</a>  <em class=\"comment\"> *    \"YANCEES\", nor may \"YANCEES\" appear in their name, without</em>\n<a name=\"37\" href=\"#37\">37</a>  <em class=\"comment\"> *    prior written permission of the University of California Regents.</em>\n<a name=\"38\" href=\"#38\">38</a>  <em class=\"comment\"> * </em>\n<a name=\"39\" href=\"#39\">39</a>  <em class=\"comment\"> * THIS SOFTWARE IS PROVIDED \"AS IS\" AND ANY EXPRESSED OR IMPLIED</em>\n<a name=\"40\" href=\"#40\">40</a>  <em class=\"comment\"> * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF</em>\n<a name=\"41\" href=\"#41\">41</a>  <em class=\"comment\"> * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</em>\n<a name=\"42\" href=\"#42\">42</a>  <em class=\"comment\"> * IN NO EVENT SHALL THE INSTITUTE FOR SOFTWARE RESEARCH AT THE UNIVERSITY</em>\n<a name=\"43\" href=\"#43\">43</a>  <em class=\"comment\"> * OF CALIFORNIA, IRVINE, OR ITS CONTRIBUTORS BE LIABLE FOR</em>\n<a name=\"44\" href=\"#44\">44</a>  <em class=\"comment\"> * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR</em>\n<a name=\"45\" href=\"#45\">45</a>  <em class=\"comment\"> * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF</em>\n<a name=\"46\" href=\"#46\">46</a>  <em class=\"comment\"> * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR</em>\n<a name=\"47\" href=\"#47\">47</a>  <em class=\"comment\"> * BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF</em>\n<a name=\"48\" href=\"#48\">48</a>  <em class=\"comment\"> * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING</em>\n<a name=\"49\" href=\"#49\">49</a>  <em class=\"comment\"> * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS</em>\n<a name=\"50\" href=\"#50\">50</a>  <em class=\"comment\"> * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</em>\n<a name=\"51\" href=\"#51\">51</a>  <em class=\"comment\"> * ====================================================================</em>\n<a name=\"52\" href=\"#52\">52</a>  <em class=\"comment\"> */</em>\n<a name=\"53\" href=\"#53\">53</a>   \n<a name=\"54\" href=\"#54\">54</a>  <strong>package</strong> <a href=\"../../../../../../edu/uci/isr/impromptu/pocketpc/model/package-summary.html\">edu.uci.isr.impromptu.pocketpc.model</a>;\n<a name=\"55\" href=\"#55\">55</a>  \n<a name=\"56\" href=\"#56\">56</a>  <strong>import</strong> java.util.HashMap;\n<a name=\"57\" href=\"#57\">57</a>  <strong>import</strong> java.util.Iterator;\n<a name=\"58\" href=\"#58\">58</a>  \n<a name=\"59\" href=\"#59\">59</a>  <strong>import</strong> org.eclipse.swt.SWT;\n<a name=\"60\" href=\"#60\">60</a>  <strong>import</strong> org.eclipse.swt.graphics.Color;\n<a name=\"61\" href=\"#61\">61</a>  <strong>import</strong> org.eclipse.swt.layout.FillLayout;\n<a name=\"62\" href=\"#62\">62</a>  <strong>import</strong> org.eclipse.swt.widgets.Group;\n<a name=\"63\" href=\"#63\">63</a>  <strong>import</strong> org.eclipse.swt.widgets.Shell;\n<a name=\"64\" href=\"#64\">64</a>  \n<a name=\"65\" href=\"#65\">65</a>  <em>/**<em>*</em></em>\n<a name=\"66\" href=\"#66\">66</a>  <em> * This class represents a peer in the model. We mix the model with its presenta-</em>\n<a name=\"67\" href=\"#67\">67</a>  <em> * tion in order to facilitate the management of the model information and its</em>\n<a name=\"68\" href=\"#68\">68</a>  <em> * presentation.</em>\n<a name=\"69\" href=\"#69\">69</a>  <em> * </em>\n<a name=\"70\" href=\"#70\">70</a>  <em> * @author rsilvafi</em>\n<a name=\"71\" href=\"#71\">71</a>  <em> * class created at Aug 3, 2005</em>\n<a name=\"72\" href=\"#72\">72</a>  <em> *</em>\n<a name=\"73\" href=\"#73\">73</a>  <em> */</em>\n<a name=\"74\" href=\"#74\">74</a>  <strong>public</strong> <strong>class</strong> <a href=\"../../../../../../edu/uci/isr/impromptu/pocketpc/model/ModelPeer.html\">ModelPeer</a> {\n<a name=\"75\" href=\"#75\">75</a>  \tShell myShell; <em class=\"comment\">// that's the window containing this peer's group.</em>\n<a name=\"76\" href=\"#76\">76</a>  \tGroup myGroup; <em class=\"comment\">// the SET group that represents this peer</em>\n<a name=\"77\" href=\"#77\">77</a>  \t\n<a name=\"78\" href=\"#78\">78</a>  \t<em class=\"comment\">// the name of this peer</em>\n<a name=\"79\" href=\"#79\">79</a>  \tString myName; \n<a name=\"80\" href=\"#80\">80</a>  \t\n<a name=\"81\" href=\"#81\">81</a>  \t<em class=\"comment\">// a table with the sharing levels of this peer</em>\n<a name=\"82\" href=\"#82\">82</a>  \tHashMap sharingLevels = <strong>new</strong> HashMap();\n<a name=\"83\" href=\"#83\">83</a>  \t\n<a name=\"84\" href=\"#84\">84</a>  \t<em class=\"comment\">// a fast access list of files this peer is sharing</em>\n<a name=\"85\" href=\"#85\">85</a>  \tHashMap filesMap = <strong>new</strong> HashMap();\n<a name=\"86\" href=\"#86\">86</a>  \t\n<a name=\"87\" href=\"#87\">87</a>  \t<strong>boolean</strong> print = <strong>true</strong>;\n<a name=\"88\" href=\"#88\">88</a>  \tColor myColor = <strong>null</strong>;\n<a name=\"89\" href=\"#89\">89</a>  \t\n<a name=\"90\" href=\"#90\">90</a>  \t\n<a name=\"91\" href=\"#91\">91</a>  \t<strong>public</strong> <a href=\"../../../../../../edu/uci/isr/impromptu/pocketpc/model/ModelPeer.html\">ModelPeer</a>(String peerName, Shell sh, Color color) {\n<a name=\"92\" href=\"#92\">92</a>  \t\tmyShell = sh;\n<a name=\"93\" href=\"#93\">93</a>  \t\tmyName = peerName;\n<a name=\"94\" href=\"#94\">94</a>  \t\tmyColor = color;\n<a name=\"95\" href=\"#95\">95</a>  \t\t\n<a name=\"96\" href=\"#96\">96</a>  \t\tmyGroup = <strong>new</strong> Group(myShell, SWT.NONE);\n<a name=\"97\" href=\"#97\">97</a>  \t\tmyGroup.setText(myName);\n<a name=\"98\" href=\"#98\">98</a>  \t\tmyGroup.setLayout(<strong>new</strong> FillLayout(SWT.VERTICAL));\n<a name=\"99\" href=\"#99\">99</a>  \t\t\n<a name=\"100\" href=\"#100\">100</a> \t\t<strong>if</strong> (myColor != <strong>null</strong>) {\n<a name=\"101\" href=\"#101\">101</a> \t\t\tmyGroup.setBackground(myColor);\n<a name=\"102\" href=\"#102\">102</a> \t\t}\n<a name=\"103\" href=\"#103\">103</a> \t\t\n<a name=\"104\" href=\"#104\">104</a> \t\t<em class=\"comment\">// Creates the sharing levels for this peer</em>\n<a name=\"105\" href=\"#105\">105</a> \t\tSharingLevel tempLevel = <strong>new</strong> <a href=\"../../../../../../edu/uci/isr/impromptu/pocketpc/model/SharingLevel.html\">SharingLevel</a>(SharingLevel.LEVEL_NO_PERSISTENT, myGroup, myColor);\n<a name=\"106\" href=\"#106\">106</a> \t\tsharingLevels.put(SharingLevel.PERSISTENT, tempLevel);\n<a name=\"107\" href=\"#107\">107</a> \t\t\n<a name=\"108\" href=\"#108\">108</a> \t\ttempLevel = <strong>new</strong> <a href=\"../../../../../../edu/uci/isr/impromptu/pocketpc/model/SharingLevel.html\">SharingLevel</a>(SharingLevel.LEVEL_NO_READ_WRITE, myGroup, myColor);\n<a name=\"109\" href=\"#109\">109</a> \t\tsharingLevels.put(SharingLevel.READ_WRITE, tempLevel);\n<a name=\"110\" href=\"#110\">110</a> \t\t\n<a name=\"111\" href=\"#111\">111</a> \t\ttempLevel = <strong>new</strong> <a href=\"../../../../../../edu/uci/isr/impromptu/pocketpc/model/SharingLevel.html\">SharingLevel</a>(SharingLevel.LEVEL_NO_READ, myGroup, myColor);\n<a name=\"112\" href=\"#112\">112</a> \t\tsharingLevels.put(SharingLevel.READ, tempLevel);\n<a name=\"113\" href=\"#113\">113</a> \t\t\n<a name=\"114\" href=\"#114\">114</a> \t\ttempLevel = <strong>new</strong> <a href=\"../../../../../../edu/uci/isr/impromptu/pocketpc/model/SharingLevel.html\">SharingLevel</a>(SharingLevel.LEVEL_NO_SEE, myGroup, myColor);\n<a name=\"115\" href=\"#115\">115</a> \t\tsharingLevels.put(SharingLevel.SEE, tempLevel);\n<a name=\"116\" href=\"#116\">116</a> \t}\n<a name=\"117\" href=\"#117\">117</a> \n<a name=\"118\" href=\"#118\">118</a> \t<em>/**<em>*</em></em>\n<a name=\"119\" href=\"#119\">119</a> <em>\t * @return Returns the name.</em>\n<a name=\"120\" href=\"#120\">120</a> <em>\t */</em>\n<a name=\"121\" href=\"#121\">121</a> \t<strong>public</strong> String getName() {\n<a name=\"122\" href=\"#122\">122</a> \t\t<strong>return</strong> myName;\n<a name=\"123\" href=\"#123\">123</a> \t}\n<a name=\"124\" href=\"#124\">124</a> \t\n<a name=\"125\" href=\"#125\">125</a> \t<strong>public</strong> <strong>void</strong> dispose() {\n<a name=\"126\" href=\"#126\">126</a> \t\t\n<a name=\"127\" href=\"#127\">127</a> \t\t<strong>if</strong> (print)\n<a name=\"128\" href=\"#128\">128</a> \t\t\tSystem.out.println(<span class=\"string\">\"ModelPeer: disposing sharing levels...\"</span>);\n<a name=\"129\" href=\"#129\">129</a> \t\t\n<a name=\"130\" href=\"#130\">130</a> \t\t<strong>synchronized</strong>(sharingLevels) {\n<a name=\"131\" href=\"#131\">131</a> \t\t\t<strong>for</strong> (Iterator iter = sharingLevels.keySet().iterator(); iter.hasNext();) {\n<a name=\"132\" href=\"#132\">132</a> \t\t\t\tString key = (String) iter.next();\n<a name=\"133\" href=\"#133\">133</a> \t\t\t\tSharingLevel element = (SharingLevel) sharingLevels.get(key);\n<a name=\"134\" href=\"#134\">134</a> \t\t\t\tSystem.out.println(<span class=\"string\">\"ModelPeer: disposing sharingLevel : \"</span>+key+<span class=\"string\">\" for peer: \"</span>+myName);\n<a name=\"135\" href=\"#135\">135</a> \t\t\t\telement.dispose();\n<a name=\"136\" href=\"#136\">136</a> \t\t\t}\n<a name=\"137\" href=\"#137\">137</a> \t\t\n<a name=\"138\" href=\"#138\">138</a> \t\t\t<strong>if</strong> (print)\n<a name=\"139\" href=\"#139\">139</a> \t\t\t\tSystem.out.println(<span class=\"string\">\"ModelPeer: clearing sharing level table...\"</span>);\n<a name=\"140\" href=\"#140\">140</a> \t\t\tsharingLevels.clear();\n<a name=\"141\" href=\"#141\">141</a> \t\t}\n<a name=\"142\" href=\"#142\">142</a> \t\t\n<a name=\"143\" href=\"#143\">143</a> \t\t<em class=\"comment\">/*</em>\n<a name=\"144\" href=\"#144\">144</a> <em class=\"comment\">\t\tif (print)</em>\n<a name=\"145\" href=\"#145\">145</a> <em class=\"comment\">\t\t\tSystem.out.println(\"disposing files...\");</em>\n<a name=\"146\" href=\"#146\">146</a> <em class=\"comment\">\t\tsynchronized (filesMap) {</em>\n<a name=\"147\" href=\"#147\">147</a> <em class=\"comment\">\t\t\tfor (Iterator iter = filesMap.entrySet().iterator(); iter.hasNext();) {</em>\n<a name=\"148\" href=\"#148\">148</a> <em class=\"comment\">\t\t\t\tSharedFile element = (SharedFile) iter.next();</em>\n<a name=\"149\" href=\"#149\">149</a> <em class=\"comment\">\t\t\t\telement.dispose();</em>\n<a name=\"150\" href=\"#150\">150</a> <em class=\"comment\">\t\t\t}</em>\n<a name=\"151\" href=\"#151\">151</a> <em class=\"comment\">\t\t\t</em>\n<a name=\"152\" href=\"#152\">152</a> <em class=\"comment\">\t\t\tfilesMap.clear();\t\t</em>\n<a name=\"153\" href=\"#153\">153</a> <em class=\"comment\">\t\t}</em>\n<a name=\"154\" href=\"#154\">154</a> <em class=\"comment\">\t\t*/</em>\n<a name=\"155\" href=\"#155\">155</a> \t\t<strong>if</strong> (print)\n<a name=\"156\" href=\"#156\">156</a> \t\t\tSystem.out.println(<span class=\"string\">\"ModelPeer: disposing group...\"</span>);\n<a name=\"157\" href=\"#157\">157</a> \t\t\n<a name=\"158\" href=\"#158\">158</a> \t\t<strong>if</strong> (myGroup != <strong>null</strong>)\n<a name=\"159\" href=\"#159\">159</a> \t\t\tmyGroup.dispose();\n<a name=\"160\" href=\"#160\">160</a> \t}\n<a name=\"161\" href=\"#161\">161</a> \n<a name=\"162\" href=\"#162\">162</a> \t<em>/**<em>*</em></em>\n<a name=\"163\" href=\"#163\">163</a> <em>\t * @param name The name to set.</em>\n<a name=\"164\" href=\"#164\">164</a> <em>\t */</em>\n<a name=\"165\" href=\"#165\">165</a> \t<strong>public</strong> <strong>void</strong> setName(String name) {\n<a name=\"166\" href=\"#166\">166</a> \t\t<strong>this</strong>.myName = name;\n<a name=\"167\" href=\"#167\">167</a> \t\tmyGroup.setText(name);\n<a name=\"168\" href=\"#168\">168</a> \t}\n<a name=\"169\" href=\"#169\">169</a> \t\n<a name=\"170\" href=\"#170\">170</a> \t<strong>public</strong> <strong>void</strong> addFile(String fileName, <strong>int</strong> levelNumber) {\n<a name=\"171\" href=\"#171\">171</a> \t\t\n<a name=\"172\" href=\"#172\">172</a> \t\t<strong>if</strong> (print)\n<a name=\"173\" href=\"#173\">173</a> \t\t\tSystem.out.println(<span class=\"string\">\"Peer->addFile()\"</span>);\n<a name=\"174\" href=\"#174\">174</a> \t\t\n<a name=\"175\" href=\"#175\">175</a> \t\tSharingLevel level = (SharingLevel) sharingLevels.get(SharingLevel.getLevelString(levelNumber));\n<a name=\"176\" href=\"#176\">176</a> \t\tSharedFile file = <strong>new</strong> <a href=\"../../../../../../edu/uci/isr/impromptu/pocketpc/model/SharedFile.html\">SharedFile</a>(fileName, myColor);\n<a name=\"177\" href=\"#177\">177</a> \t\tlevel.addFile(file);\n<a name=\"178\" href=\"#178\">178</a> \t\t\n<a name=\"179\" href=\"#179\">179</a> \t\t<strong>synchronized</strong> (filesMap) {\n<a name=\"180\" href=\"#180\">180</a> \t\t\tfilesMap.put(fileName, file);\n<a name=\"181\" href=\"#181\">181</a> \t\t}\n<a name=\"182\" href=\"#182\">182</a> \t\t\n<a name=\"183\" href=\"#183\">183</a> \t\tmyGroup.layout();\n<a name=\"184\" href=\"#184\">184</a> \t\tmyShell.layout();\n<a name=\"185\" href=\"#185\">185</a> \t\t\n<a name=\"186\" href=\"#186\">186</a> \t}\n<a name=\"187\" href=\"#187\">187</a> \t\n<a name=\"188\" href=\"#188\">188</a> \t<strong>public</strong> <strong>void</strong> removeFile(String fileName) {\n<a name=\"189\" href=\"#189\">189</a> \t\tSharedFile file = (SharedFile) filesMap.get(fileName);\n<a name=\"190\" href=\"#190\">190</a> \t\tSharingLevel level = file.getLevel();\n<a name=\"191\" href=\"#191\">191</a> \t\tlevel.removeFile(file);\n<a name=\"192\" href=\"#192\">192</a> \t\t\n<a name=\"193\" href=\"#193\">193</a> \t\t<strong>synchronized</strong> (filesMap) {\n<a name=\"194\" href=\"#194\">194</a> \t\t\tfilesMap.remove(fileName);\n<a name=\"195\" href=\"#195\">195</a> \t\t}\n<a name=\"196\" href=\"#196\">196</a> \t\tfile.dispose();\n<a name=\"197\" href=\"#197\">197</a> \t\t\n<a name=\"198\" href=\"#198\">198</a> \t\tmyGroup.layout();\n<a name=\"199\" href=\"#199\">199</a> \t\tmyShell.layout();\n<a name=\"200\" href=\"#200\">200</a> \n<a name=\"201\" href=\"#201\">201</a> \t}\n<a name=\"202\" href=\"#202\">202</a> \t\n<a name=\"203\" href=\"#203\">203</a> \t<strong>public</strong> <strong>void</strong> moveFile(String fileName, <strong>int</strong> levelNumber) {\n<a name=\"204\" href=\"#204\">204</a> \t\tSharedFile file = (SharedFile) filesMap.get(fileName);\n<a name=\"205\" href=\"#205\">205</a> \t\t\n<a name=\"206\" href=\"#206\">206</a> \t\t<strong>if</strong> (file != <strong>null</strong>) {\n<a name=\"207\" href=\"#207\">207</a> \t\t\tSharingLevel oldLevelObject = file.getLevel();\n<a name=\"208\" href=\"#208\">208</a> \t\t\t<strong>int</strong> oldLevelNumber = oldLevelObject.getLevelNumber();\n<a name=\"209\" href=\"#209\">209</a> \t\t\t\n<a name=\"210\" href=\"#210\">210</a> \t\t\t<strong>if</strong> (levelNumber != oldLevelNumber) {\n<a name=\"211\" href=\"#211\">211</a> \t\t\t\tremoveFile(fileName);\n<a name=\"212\" href=\"#212\">212</a> \t\t\t\taddFile(fileName, levelNumber);\n<a name=\"213\" href=\"#213\">213</a> \t\t\t}\n<a name=\"214\" href=\"#214\">214</a> \t\t} <strong>else</strong> {\n<a name=\"215\" href=\"#215\">215</a> \t\t\t<em class=\"comment\">// in case we loose some event and the file is not present,</em>\n<a name=\"216\" href=\"#216\">216</a> \t\t\t<em class=\"comment\">// and someone moves the file, we add this file to update our model. </em>\n<a name=\"217\" href=\"#217\">217</a> \t\t\taddFile(fileName, levelNumber);\n<a name=\"218\" href=\"#218\">218</a> \t\t}\n<a name=\"219\" href=\"#219\">219</a> \t}\n<a name=\"220\" href=\"#220\">220</a> \t\n<a name=\"221\" href=\"#221\">221</a> \t<strong>protected</strong> <strong>void</strong> finalize() throws Throwable {\n<a name=\"222\" href=\"#222\">222</a> \t    <strong>try</strong> {\n<a name=\"223\" href=\"#223\">223</a> \t        dispose();        <em class=\"comment\">// dispose the SWT resources allocated by this object</em>\n<a name=\"224\" href=\"#224\">224</a> \t    } <strong>finally</strong> {\n<a name=\"225\" href=\"#225\">225</a> \t        <strong>super</strong>.finalize();\n<a name=\"226\" href=\"#226\">226</a> \t    }\n<a name=\"227\" href=\"#227\">227</a> \t}\n<a name=\"228\" href=\"#228\">228</a> \n<a name=\"229\" href=\"#229\">229</a> \t<em>/**<em>*</em></em>\n<a name=\"230\" href=\"#230\">230</a> <em>\t * @return Returns the myColor.</em>\n<a name=\"231\" href=\"#231\">231</a> <em>\t */</em>\n<a name=\"232\" href=\"#232\">232</a> \t<strong>public</strong> Color getColor() {\n<a name=\"233\" href=\"#233\">233</a> \t\t<strong>return</strong> myColor;\n<a name=\"234\" href=\"#234\">234</a> \t}\n<a name=\"235\" href=\"#235\">235</a> \n<a name=\"236\" href=\"#236\">236</a> \t<em>/**<em>*</em></em>\n<a name=\"237\" href=\"#237\">237</a> <em>\t * @param color The myColor to set.</em>\n<a name=\"238\" href=\"#238\">238</a> <em>\t */</em>\n<a name=\"239\" href=\"#239\">239</a> \t<strong>public</strong> <strong>void</strong> setColor(Color color) {\n<a name=\"240\" href=\"#240\">240</a> \t\t<strong>this</strong>.myColor = color;\n<a name=\"241\" href=\"#241\">241</a> \t}\n<a name=\"242\" href=\"#242\">242</a> \t\n<a name=\"243\" href=\"#243\">243</a> }\n</pre>\n<hr/><div id=\"footer\">This page was automatically generated by <a href=\"http://maven.apache.org/\">Maven</a></div></body>\n</html>\n\n", "id": 34198.0}